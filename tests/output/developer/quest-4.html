<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Palette of Realms: Themes and Configuration - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'developer' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Codex of Repomix: Chronicles of the Advent</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Palette of Realms Themes and Configuration</h1>
<hr>
<p>Deep within the <em>Codex of Repomix</em>, the pursuit of the next shard brings you to a fabled place where the essence of adventure itself is shaped and born. Here, the <em>Palette of Realms</em>‚Äîa mystical canvas‚Äîdictates everything from the setting of your story to the tools you wield. To claim this shard, you must uncover the secrets behind how themes and configurations transform abstract data into vibrant, dynamic journeys worth undertaking. The artistry of code awaits; let‚Äôs embark!</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Central Theme Definitions for Adventures</h3>
<p>The <code class="inline-code">theme.ts</code> file is the nerve center for managing the available adventure themes. It defines a single source of truth for all themes in the form of constants and interfaces, ensuring consistency in how themes are created, validated, and displayed across the system. Each theme is a structured object that includes its <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">displayName</code>, <code class="inline-code">emoji</code>, <code class="inline-code">description</code>, and associated <code class="inline-code">keywords</code>. These properties allow the system to map user input‚Äîwhether it&#39;s a string, a keyword, or an integer ID‚Äîto a valid theme.</p>
<p>This file also introduces helper functions like <code class="inline-code">getAllThemes()</code> and <code class="inline-code">parseTheme(input: string)</code>. These functions streamline the interaction with themes by enabling simple lookups, parsing user inputs intelligently, and validating the existence of a selected theme. The design of these utilities prioritizes simplicity and readability while still being robust. For example, using <code class="inline-code">parseTheme()</code> eliminates hard mismatch errors by scanning all theme properties and associated keywords, which are great for handling minor variations in user input. Altogether, <code class="inline-code">theme.ts</code> ensures that the thematic options feel dynamic and intuitive, bridging the creative and technical layers of your adventure.</p>
<h4>Highlights</h4>
<ul>
<li>Defines the <code class="inline-code">ThemeDefinition</code> interface and structure for theme objects.</li>
<li>Maintains <code class="inline-code">THEMES</code> as a canonical collection of all pre-defined adventures.</li>
<li>Provides key helper functions, such as <code class="inline-code">getThemeByKey()</code> and <code class="inline-code">isValidTheme()</code> for robust theme management.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Validating and Sanitizing Data Inputs</h3>
<p>The <code class="inline-code">input-validator.ts</code> file plays a pivotal role in securing and validating inputs received from the user or other parts of the application, serving as a gatekeeper for proper formatting and safety. Key functions include <code class="inline-code">validateAdventureChoice()</code> that ensures user-selected adventure names follow length requirements and aren‚Äôt empty, and <code class="inline-code">validateTheme()</code> which leverages the <code class="inline-code">parseTheme()</code> method described in <code class="inline-code">theme.ts</code> to ensure user-provided themes are legitimate.</p>
<p>There‚Äôs also a strong focus on security; for example, <code class="inline-code">validateProjectPath()</code> ensures no null characters are present and trims excessive paths that might cause system vulnerabilities. Beyond validation, the <code class="inline-code">sanitizeForDisplay()</code> function cleans up text inputs, reducing the risk of injection attacks while preserving typical user-friendly behavior. By centralizing these functions, <code class="inline-code">input-validator.ts</code> enhances code reuse, reliability, and user safety across the adventure generation system.</p>
<h4>Highlights</h4>
<ul>
<li>Implements <code class="inline-code">validateTheme()</code> to cross-check and normalize user-provided theme inputs.</li>
<li>Provides <code class="inline-code">sanitizeForDisplay()</code> to eliminate risky characters before displaying data to users.</li>
<li>Includes <code class="inline-code">validateProjectPath()</code> to safeguard against malicious or erroneous file paths.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Centralized Configuration for Adventures</h3>
<p>The <code class="inline-code">config.ts</code> file is the heart of all system-wide configurations, managing environment variables, constants, and defaults. It inherits runtime settings from <code class="inline-code">.env</code> files and determines values for critical parameters like <code class="inline-code">LLM_API_KEY</code>, <code class="inline-code">LLM_BASE_URL</code>, and <code class="inline-code">MAX_FILE_SIZE_MB</code>, which control the behavior of the LLM requests and file analysis. This file also sets boundaries, such as limiting the maximum size of file scans, timeouts for API requests, and caching mechanisms to ensure optimal performance.</p>
<p>Through constants like <code class="inline-code">DEFAULT_THEME</code> and <code class="inline-code">LLM_TEMPERATURE</code>, the file provides parameters that are both practical and flexible for adjusting the adventure system‚Äôs behavior. These configurations ensure smooth integrations with external services like OpenAI while also offering developers an easy-to-follow structure for customization. Notably, the error messages included offer a developer-friendly fallback when something goes awry.</p>
<h4>Highlights</h4>
<ul>
<li>Defines system-wide constants and defaults, including <code class="inline-code">LLM_API_KEY</code> and <code class="inline-code">DEFAULT_THEME</code>.</li>
<li>Enables environment-variable overrides for adaptable deployments during runtime.</li>
<li>Sets performance safeguards through limits such as <code class="inline-code">MAX_FILE_SIZE_MB</code> and timeout constants.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export interface ThemeDefinition {
  readonly id: number;
  readonly key: string;
  readonly displayName: string;
  readonly emoji: string;
  readonly description: string;
  readonly keywords: readonly string[];
}

export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
};
</code></pre>
<p>Every adventure starts with a blueprint like this, mapping the aesthetic journey to its technical underpinnings.</p>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>Imagine this function as a careful librarian ensuring you pick a valid book from the catalog before diving in.</p>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const DEFAULT_THEME = &#39;space&#39; as const;
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
};
</code></pre>
<p>This setup is akin to a project manager stabilizing workflows through clear rules for boundaries, timing, and fallback responses.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Focus on modifying <code class="inline-code">theme.ts</code> and <code class="inline-code">input-validator.ts</code> in tandem to ensure user inputs validate against theme data seamlessly.</li>
<li>Use the constants in <code class="inline-code">config.ts</code> to explore performance optimizations, particularly for LLM API calls.</li>
<li>Add more themes or tweak configurations to tailor the adventure experience‚Äîdon‚Äôt hesitate to experiment!</li>
</ul>
<hr>
<p>Your commit to &quot;Quest 4: The Palette of Realms: Themes and Configuration&quot; has successfully merged‚Äîthis milestone refactors your skillset with dynamic theme implementations and scalable configuration mastery, leaving ‚≠ê only one deploy üöÄ away from the full release of your epic coding saga!</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>