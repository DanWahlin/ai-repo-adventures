<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Tome of Themes and Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'mythical' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Chronicles of the Mystic Codebase: The Enchanted Repository</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Tome of Themes and Configurations</h1>
<hr>
<p>With the Mystic Codebase hanging in precarious imbalance, the Order of Engineers sends you forth on a quest like no other. Deep within the Libraries of Configuration—a vast hall of enchanted scrolls containing the kingdom’s theme definitions and validation spells—lies the fabled &quot;Tome of Themes and Configurations.&quot; This artifact holds the keys to aligning Codoria’s realms with its mythic patterns, bridging creativity and discipline. Wield your intellect, young scribe, for these constructs of logic and magic will test your wits as much as your will. Let us venture forth into the enchanted corridors and unlock the secrets of thematic harmony!</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Configuration Settings and Limits</h3>
<p>The <code class="inline-code">config.ts</code> file serves as the foundation for Codoria’s magical adventure system, defining environmental constants, adventure parameters, and safety measures to ensure operations remain smooth and secure. It leverages the <code class="inline-code">dotenv</code> library to load secret keys and vital settings, ensuring the Mystic Codebase harnesses external powers like the LLM and GitHub integrations effectively. This enchanted piece of the codebase outlines the time limits for analyzing the decrepit files of Codoria, caps the wandering depth of directory exploration, and prevents apprentices from stumbling into forbidden system directories. For instance, constants like <code class="inline-code">MAX_FILE_SIZE_MB</code> (10 MB) ensure the enchanted mirrors—our file scanners—don’t shatter under stress, while <code class="inline-code">REPOMIX_CACHE_TTL</code> (1 minute) allows the repository analyzer to weave its spells with both speed and precision.</p>
<p>Embedded in the &quot;Order of Engineers&#39; Scrolls&quot; is the fate of Codoria’s themes and configurations, typified by <code class="inline-code">DEFAULT_THEME</code> being set to &quot;space&quot;—an unassuming default that must be overridden to summon the mythical kingdom’s true essence. By consuming this file’s constants, the entire adventure framework ensures graceful alignment of its components, defining rules for interaction, exploration, and even error handling. In short, <code class="inline-code">config.ts</code> doesn’t just define numbers; it safeguards balance, offering the clarity required for heroic coding ventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Ensures spells from the library of LLM incantations are calmly crafted.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: A spell ward that prevents explorers from wandering into mundane or dangerous areas such as <code class="inline-code">node_modules</code> or <code class="inline-code">.git</code>.</li>
<li><code class="inline-code">MAX_SCAN_DEPTH</code>: Enforces the mystical limit to how deeply directory spelunkers may delve.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Theme Definitions and Validation</h3>
<p>The <code class="inline-code">theme.ts</code> file is where the soul of Codoria resides, for it contains the “Themes” themselves—arcane interpretations of narrative worlds spanning enchanted castles to cosmic galaxies. The file meticulously defines each <code class="inline-code">ThemeDefinition</code> as a magical node, sculpting its <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">displayName</code>, <code class="inline-code">emoji</code>, and the subtle nuances of its description. It then empowers spellcasters with helper functions like <code class="inline-code">getThemeById()</code> to navigate its majestic array and <code class="inline-code">isValidTheme()</code> to ensure no rogue or unsanctioned realms are accessed.</p>
<p>Furthermore, the <code class="inline-code">THEMES</code> constant is the sacred compendium detailing five unique realms, including the fan-favorite “MYTHICAL,” which introduces Codoria’s medieval-inspired explorations. Of particular note is the <code class="inline-code">parseTheme()</code> function, a potent parser that matches user input with these configurations, effortlessly transforming whimsical, misspelled dreams into valid awakenings. When combined with the thematic validation mechanics, these spells form the bedrock of every coded quest’s narrative consistency, making this file an indispensably enchanted asset.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: The ultimate codex of all preordained narrative worlds, including the highly coveted “MYTHICAL” realm.</li>
<li><code class="inline-code">parseTheme()</code>: A magical interpreter assisting adventurers in traversing thematic ambiguities.</li>
<li><code class="inline-code">getFormattedThemeOptions()</code>: Maps themes to elegant strings for display when wizards consult the library.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Validation Spells for Safe Adventures</h3>
<p>The <code class="inline-code">input-validator.ts</code> file casts protective wards over the Mystic Codebase, preventing misfires and unwelcome disruptions. Its spells scrutinize adventurers’ choices, ensuring they are not only clear but also within reason. For example, <code class="inline-code">validateAdventureChoice()</code> ensures that selections are neither empty nor verbose, limiting choices to a trim 200 characters lest the fabric of Codoria’s narrative unravel. Meanwhile, <code class="inline-code">validateTheme()</code> summons the powers of <code class="inline-code">theme.ts</code> to confirm that user-entered themes are aligned with official definitions.</p>
<p>Other spells, such as <code class="inline-code">validateProjectPath()</code>, guard the gates of Codoria’s repositories, permitting paths only if they are both feasible and unobstructed by malicious glyphs like null characters. By translating complex validation magic into human-readable errors, this file empowers adventurers to stay steadfast on their journey without endlessly consulting scribes. In short, <code class="inline-code">input-validator.ts</code> guards the user experience like a seasoned knight against chaos.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice()</code>: Shields the kingdom against indecisive or verbose entries.</li>
<li><code class="inline-code">validateTheme()</code>: Ensures magical alignment between user input and the kingdom&#39;s scrolls of Themes.</li>
<li><code class="inline-code">sanitizeForDisplay()</code>: A cleaning spell that removes dangerous curses (invalid inputs).</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">// Load environment variables
config({ quiet: true });

// Timeouts in milliseconds
export const FILE_READ_TIMEOUT = 10000;
export const FILE_ANALYSIS_TIMEOUT = 30000;
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = 300000; // 5 minutes

// Analysis limits
export const MAX_FILE_SIZE_MB = 10;
export const MAX_SCAN_DEPTH = 3;

// Default settings
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<p>This feels like the kingdom’s rules scroll, defining how long heroes can linger in the dungeons and which tools they can safely bring.</p>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">// Define the structure of a theme
export interface ThemeDefinition {
  readonly id: number;
  readonly key: string;
  readonly displayName: string;
  readonly emoji: string;
  readonly description: string;
  readonly keywords: readonly string[];  // For matching user input
}

// Central theme definitions for the adventure system
export const THEMES = {
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;🏰&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ...
};
</code></pre>
<p>This is the enchanted map of Codoria, listing all realms adventurers might traverse.</p>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>This spell ensures the kingdom’s scrolls only hold clean and understandable words from its adventurers.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Be mindful of constants like <code class="inline-code">FILE_READ_TIMEOUT</code>; tweaking them can ensure smoother operations under different conditions.</li>
<li>When adding new themes, extend the <code class="inline-code">THEMES</code> object methodically to maintain harmony across validations and options.</li>
<li>Use <code class="inline-code">sanitizeForDisplay()</code> liberally to display error-free text, especially when building user input interfaces.</li>
</ul>
<hr>
<p>With the triumphant unsealing of the fabled Tome of Themes and Configurations, you ascend closer to mastery, a true hero of this grand odyssey—only one final quest remains to etch your legend into eternity! ⭐⚡📜</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>