<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 3: Temporal Code Harness - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Stellar Chronicles: Galactic Codebase Expeditions</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 3: Temporal Code Harness</h1>
<hr>
<p>As the AI Starship Odyssey glides through the dark edges of the Nebula of Eternity, an emergency signal crackles into your system: fragments of a temporal algorithm embedded within ancient codes are key to stabilizing time anomalies in this sector. Your mission is to interface with the files onboard and uncover hidden patterns within the Temporal Core. This quest is delicate and challenging, requiring precise calibration of the Adventure Manager and advanced story-driven generators. Secure the galaxy&#39;s timeline before it slips into chaos!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Chrono-Decoder Mapping</strong>: How does the <code class="inline-code">AdventureManager.initializeAdventure</code> method integrate project paths with dynamic quest generation strategies?  </li>
<li>‚ö° <strong>Narrative Stream Analysis</strong>: What patterns does <code class="inline-code">StoryGenerator.generateStoryAndQuests</code> employ to construct cohesive narratives across quests?  </li>
<li>üõ°Ô∏è <strong>Temporal Stability Validation</strong>: How does <code class="inline-code">extractUniqueFilePaths</code> handle invalid paths and ensure fault tolerance in code exploration?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a>: Adventure Manager orchestration hub</h3>
<p>The Adventure Manager bridges the dynamic generation of quest narratives with actionable exploration strategies. Its key functions integrate project context, merging configuration with runtime data to generate powerful implementations. This file highlights the critical ability to initialize adventures and explore quests while achieving seamless state management.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Resets the Adventure State, merges configuration data, and dynamically generates quests based on project paths. Essential for setting the stage of cosmic quests.  </li>
<li><code class="inline-code">exploreQuest</code>: Executes user-selected quests, employing cached content retrieval for already-completed quests. Significantly enhances efficiency for repeat explorers.  </li>
<li><code class="inline-code">mergeQuestFilesFromConfig</code>: Bridges configuration-derived file paths with dynamically generated quest files, ensuring integrity in file mapping processes.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a>: The architect of narrative cohesion</h3>
<p>This file houses the Story Generator, which constructs thematic experiences for quests based on configurations and code files. It emphasizes pattern extraction from markdown and blends generated outputs with user-defined themes.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndQuests</code>: Synthesizes story segments and quest arrays by parsing repomix content. Core to establishing envelopes of exploratory context.  </li>
<li><code class="inline-code">generateQuestContent</code>: Delves deep into quest-focused narratives using advanced language models, producing markdown-based outputs tailored to the user‚Äôs environment.  </li>
<li><code class="inline-code">parseMarkdownToStoryResponse</code>: Parses markdown response into structured stories and quests, extracting narrative touchpoints from unstructured content.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Temporal configuration and validation mechanisms</h3>
<p>This file contains mechanisms to read, parse, and validate adventure configurations, ensuring seamless interaction for both human explorers and machine operations. Notably, it extracts unique file paths and formats configurations for advanced prompts.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads raw adventure configuration from file paths without parsing, providing critical input for downstream validation.  </li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Validates existence of referenced paths and filters unique ones, ensuring configuration integrity across galactic explorations.  </li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Generates concise prompts for machine-learning guidance, optimizing narrative generation efficiency.</li>
</ul>
<hr>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a></h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = storyResponse.story;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  
  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<ul>
<li>Dynamically integrates configuration-based and runtime-state-driven logic.  </li>
<li>Employs robust project path handling for modularized adaptability.  </li>
<li>Sets up foundational state for narrative-rich quest initialization.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a></h3>
<pre><code class="language-typescript">async generateStoryAndQuests(projectInfo: ProjectInfo, theme: AdventureTheme, projectPath?: string): Promise&lt;StoryResponse&gt; {
  const repomixContent = projectInfo.repomixContent || &#39;No repomix content available&#39;;

  let adventureGuidance = &#39;&#39;;
  let customInstructions = &#39;&#39;;
  
  if (this.projectPath) {
    const formattedConfig = formatAdventureConfigForPrompt(this.projectPath);
    if (formattedConfig) {
      adventureGuidance = formattedConfig;
    }
    
    const customInstructionsFromConfig = extractCustomInstructions(this.projectPath);
    if (customInstructionsFromConfig) {
      customInstructions = customInstructionsFromConfig;
    }
  }

  const prompt = loadStoryGenerationPrompt({
    theme,
    repomixContent,
    ...customInstructions &amp;&amp; { customInstructions },
    ...adventureGuidance &amp;&amp; { adventureGuidance },
  });

  const response = await this.llmClient.generateResponse(prompt, { maxTokens: LLM_MAX_TOKENS_STORY });
  
  let parsedContent = parseMarkdownToStoryResponse(response.content.trim());
  StoryResponseSchema.parse(parsedContent);
  return parsedContent;
}
</code></pre>
<ul>
<li>Generates cohesive story arcs and quest structures using multi-layered inputs.  </li>
<li>Fuses configuration data into LLM-driven narratives for high impact.  </li>
<li>Employs Zod validation for reliable parsing of user environments.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<ul>
<li>Validates paths against file existence for robust temporal data captures.  </li>
<li>Prevents invalid configurations from destabilizing operations.  </li>
<li>Dynamically handles nested structures for smooth data extraction.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Utilize <code class="inline-code">initializeAdventure</code> to simulate dynamic quest generation at runtime.  </li>
<li>Examine <code class="inline-code">generateQuestContent</code> outputs for patterns that bridge user inputs with LLM narratives.  </li>
<li>Explore the efficiency of <code class="inline-code">extractUniqueFilePaths</code> in handling large and deeply nested configs.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the AI Starship Odyssey‚Äôs temporal core. Your journey toward galaxy-wide stability is progressing at stellar warp speeds!</p>
<p>Stellar work, cadet! You&#39;ve successfully decoded the temporal frequencies of Quest 3, propelling your mission trajectory to 40%‚Äîkeep blazing through the cosmic expanse like a true star navigator! ‚≠êüöÄüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-2.html" class="prev-quest-btn">‚Üê Previous: Quest 2</a>
        <a href="quest-4.html" class="next-quest-btn">Next: Quest 4 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>