<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: Commanding the Quest Generator - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Voyage of the Galactic Repository</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: Commanding the Quest Generator</h1>
<hr>
<p>The starship <em>Codeseeker-42</em> ventures further into the cosmos, its mission clear: to decode the secrets of the galactic codebases and optimize the journeys of developers across the galaxy. On this leg of the voyage, you assume command of the Quest Generator, the heart of the starship‚Äôs adventure engine. With systems interfacing through cosmic protocols, your task is to recalibrate the dynamic generation of theme-based stories and ensure the accuracy of quest data to guide future explorers. Navigate the complexities of interstellar inputs, align the ship‚Äôs AI with galactic crafting standards, and optimize the generation of epic cosmic narratives. Power up, Commander, and steer this critical subsystem to stellar perfection!</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure orchestration managing state, themes, and user interactions</h3>
<p>This file serves as the adventurer&#39;s compass, orchestrating the overarching story context and interaction logic within the Quest Generator. <code class="inline-code">AdventureManager</code> anchors the interplay between project details, thematic inputs, and user actions, managing the state using <code class="inline-code">AdventureState</code>. It employs <code class="inline-code">initializeAdventure()</code> to establish the context for each mission, including generating the epic storyline and accompanying quests based on project analysis. <code class="inline-code">exploreQuest()</code> is the main navigational tool for responding to user actions, validating inputs, and generating dynamic quest outputs. Meanwhile, the <code class="inline-code">progressPercentage</code> provides mission updates, quantifying exploration progress. Each function sheds light on how the Quest Generator adapts dynamically to the galactic repository landscape, ensuring seamless and exciting adventures for the galactic federation&#39;s developers.</p>
<h4>Highlights</h4>
<ul>
<li><strong>AdventureManager.initializeAdventure</strong>: Kicks off the mission with story and quest generation.</li>
<li><strong>AdventureManager.exploreQuest</strong>: Executes quests by validating user choices and generating their content.</li>
<li><strong>AdventureState.progressPercentage</strong>: Tracks completion across quests, providing tangible progression metrics.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  // Reset state for new adventure
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();

  // Set custom theme data if provided
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  // Generate the overall story and quests using LLM
  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);

  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;

  // Merge files from adventure config into generated quests
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  
  // Enforce quest count from config and return the formatted story
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);
  return this.formatStoryWithQuests({ ...storyResponse, quests: this.state.quests });
}
</code></pre>
<p>Like a stellar navigator, this function establishes the adventure&#39;s scope, laying the foundation for the exploration of a codebase galaxy.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);

  // Check if this is a progress request
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }

  // Find the quest based on the choice
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  // Execute the quest
  return await this.executeQuest(quest);
}
</code></pre>
<p>This is akin to a space pilot charting a path towards a new planet: assessing the choice, plotting the course, and setting actions in motion.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>This function mirrors a progress bar on a starship console, displaying the level of exploration completed in a clear, actionable percentage.</p>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Practical tip</strong>: Customize themes for tailored missions using <code class="inline-code">customThemeData</code> in <code class="inline-code">initializeAdventure()</code>.</li>
<li><strong>Exploration recommendation</strong>: Discover how the <code class="inline-code">AdventureState</code> caches quest summaries to optimize repeated missions.</li>
<li><strong>Next steps</strong>: Enhance the quest cache mechanism to store additional context for revisited adventures.</li>
</ul>
<hr>
<p>Mission accomplished: You&#39;ve successfully commanded the Quest Generator and decoded its core operations. Adventure progress updated. Select your next task to continue the cosmic journey!</p>
<p>Stellar success achieved, Commander‚ÄîQuest 2 complete and your cosmic trajectory is bright with 20% mission progress as you navigate through the universe of mastery! üöÄ‚ö°‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: Analyzing Nebulae of Code ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>