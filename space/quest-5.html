<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Astronavigation Utilities - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Codex: Adventures Across the Codebase Nebula</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Astronavigation Utilities</h1>
<hr>
<p>Amid the swirling tendrils of the Codebase Nebula, a challenge emerges - your mission is to decode and harness utility modules for stellar navigation. <em>The Refactored Voyager</em> must tap into the repository&#39;s specialized code segments that guide starship trajectories across treacherous star systems. These mechanics, hidden deep within abstract file structures, are essential for transcending the barriers of cosmic exploration and ensuring your crew&#39;s survival in the vast void. Venture forth into the labyrinthine scripts and unveil the Astronavigation Utilities.  </p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Foundation for Stellar Navigation</h3>
<p>The file <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a> serves as the cornerstone for extracting and understanding configuration guidelines housed within the cosmic repository. In this stellar library, essential functions shape our astronavigation path through both data fidelity and configuration streamlining. Key highlights include parsing complex input structures (<code class="inline-code">parseAdventureConfig</code>), extracting validated file paths across celestial segments (<code class="inline-code">extractUniqueFilePaths</code>), and formatting raw inputs for intelligible cosmic prompts (<code class="inline-code">formatAdventureConfigForPrompt</code>). These logical components simulate navigational aid devices, interpreting celestial phenomena with precision.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Decodes and validates interstellar configuration formats.  </li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Retrieves distinct and verified navigation paths for exploration.  </li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Reduces raw data into a compact format for mission planning AI.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {  
  const raw = loadAdventureConfig(projectPath);  
  if (!raw) return null;  
  try {  
    return JSON.parse(raw);  
  } catch {  
    return null;  
  }  
}  
</code></pre>
<p>Think of this as the ship‚Äôs data translator, turning cryptic star charts into actionable routes.  </p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {  
  const parsed = parseAdventureConfig(projectPath);  
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];  

  const unique = new Set&lt;string&gt;();  
  const stack: any[] = [parsed];  

  while (stack.length) {  
    const node = stack.pop();  
    if (!node || typeof node !== &#39;object&#39;) continue;  

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {  
      const rel = node.path.trim();  
      if (fs.existsSync(path.resolve(projectPath, rel))) {  
        unique.add(rel);  
      }  
    }  

    const children = Array.isArray(node) ? node : Object.values(node);  
    children.forEach(child =&gt; {  
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);  
    });  
  }  

  return Array.from(unique);  
}  
</code></pre>
<p>This acts like the ship‚Äôs stellar compass, pinpointing the safest star lanes.  </p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {  
  const parsed = parseAdventureConfig(projectPath);  
  if (!parsed || typeof parsed !== &#39;object&#39;) {  
    return &#39;&#39;;  
  }  

  const adventure = (parsed as any).adventure;  
  if (!adventure || !Array.isArray(adventure.quests)) {  
    return &#39;&#39;;  
  }  

  let formatted = `## Quest Structure\n\n`;  

  for (const quest of adventure.quests) {  
    if (!quest.title || !Array.isArray(quest.files)) continue;  

    formatted += `### ${quest.title}\n`;  

    const filePaths = quest.files  
      .filter((f: any) =&gt; f.path)  
      .map((f: any) =&gt; f.path);  
    if (filePaths.length &gt; 0) {  
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;  
    }  

    const functions = quest.files  
      .flatMap((f: any) =&gt; f.highlights || [])  
      .filter((h: any) =&gt; h.name)  
      .map((h: any) =&gt; h.name);  
    if (functions.length &gt; 0) {  
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;  
    }  

    formatted += `\n`;  
  }  

  return formatted;  
}  
</code></pre>
<p>Visualize this as the ship‚Äôs mission log, summarizing critical objectives in a concise format.  </p>
<h2>Helpful Hints</h2>
<ul>
<li>Ensure all configuration files are properly formatted before invoking functions.  </li>
<li>Use extracted file paths to simulate safe galactic routes for mission planning.  </li>
<li>Formatting the config helps AI systems like your autopilot clarify inputs for navigation.</li>
</ul>
<hr>
<p>Tools decoded. Your astronavigation systems are becoming operational, adventurer! Proceed boldly into the cosmos!</p>
<p>üöÄ Stellar achievement unlocked, Cadet‚ÄîQuest 5: Astronavigation Utilities is complete, charting your trajectory toward mastery at warp speed with cosmic brilliance! ‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>