<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Universal Configuration Matrix - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Code Expeditions: Navigating the Stellar Core</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Universal Configuration Matrix</h1>
<hr>
<p>The cosmic code clusters of the Alpha Nebula conceal a mysterious artifact: the Universal Configuration Matrix. This ancient data structure, hidden within the tangled wires of forgotten civilizations, must be decoded to unlock new pathways through the galaxy&#39;s digital starlines. As captain of the AI Repository Command Ship (ARCS), your mission is to extract critical configurations and optimize the software infrastructure, enabling humanity‚Äôs continued exploration of deep space. The journey will test your crew‚Äôs ability to parse, validate, and extract meaning from the enigmatic relic.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Config Signal Scanner</strong>: How does the <code class="inline-code">loadAdventureConfig</code> function locate and read raw configuration files in the cosmic filesystem?</li>
<li>‚ö° <strong>Matrix Validation</strong>: What role does the <code class="inline-code">parseAdventureConfig</code> function play in verifying the validity and structure of configuration data?</li>
<li>üõ°Ô∏è <strong>Stellar Path Extraction</strong>: How does the <code class="inline-code">extractUniqueFilePaths</code> function identify and handle file paths referenced in the configuration system?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Configuration Parsing and Validation</h3>
<p>This file provides the foundation for managing adventure configurations on the ARCS. It includes functionality for loading raw configuration files from the filesystem, parsing them into structured format, and extracting meaningful file paths for downstream processes. The key highlights showcase a strong focus on validation, error handling, and the extraction of actionable insights from unstructured data.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads the raw configuration file content from the project path if available.</li>
<li><code class="inline-code">parseAdventureConfig</code>: Converts the raw configuration into a structured object while handling parsing errors effectively.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Recursively explores the configuration object to extract all valid file paths.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<ul>
<li>This function builds the path to the configuration file by joining the base project path with the known config file name.</li>
<li>It uses <code class="inline-code">readFileIfExists</code> to safely read the file without breaking functionality if the file is missing.</li>
<li>Ensures a non-fatal error handling strategy for dealing with absent configuration files, enabling graceful fallback behavior.</li>
<li>Acts as the entry point for managing configurations critical to quest generation.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<ul>
<li>Converts the raw string output of <code class="inline-code">loadAdventureConfig</code> into a structured JSON object.</li>
<li>Uses <code class="inline-code">try-catch</code> to prevent crashes from invalid JSON formats, ensuring the robustness of the ARCS.</li>
<li>Encourages a single responsibility principle by decoupling file loading from data structure parsing.</li>
<li>Facilitates subsequent operations by returning either the parsed object or <code class="inline-code">null</code> if the process fails.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<ul>
<li>This function navigates the entire configuration object to collect all valid file paths referenced in <code class="inline-code">path</code> fields.</li>
<li>Prevents duplicate entries using a <code class="inline-code">Set</code>, optimizing the extraction of unique values.</li>
<li>Ensures correctness by validating both the structure and existence of file paths on the filesystem.</li>
<li>Implements a depth-first traversal, enabling flexibility in handling complex, nested configuration structures.</li>
<li>Plays a critical role in connecting the adventure configurations to real artifacts in the galactic filesystem.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Practical tip</strong>: Use the <code class="inline-code">loadAdventureConfig</code> function to inspect raw configuration files from the project directory for debugging.</li>
<li><strong>Exploration recommendation</strong>: Study how <code class="inline-code">extractUniqueFilePaths</code> handles nested structures, as it demonstrates adaptable recursive techniques.</li>
<li><strong>Next steps</strong>: Look into the <code class="inline-code">formatAdventureConfigForPrompt</code> function for optimized presentation of configuration data.</li>
</ul>
<hr>
<p>Adventure complete! The Universal Configuration Matrix reveals its secrets, paving the way for the galaxy‚Äôs journey into the stars.</p>
<p>Navigating the cosmic frontier, you&#39;ve calibrated the Universal Configuration Matrix with stellar precision‚Äîjust one mission left to achieve intergalactic mastery! üöÄ‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>