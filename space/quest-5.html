<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Cosmic Configurations Nexus - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Cosmic Code Chronicles: A stellar voyage into exploration systems</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Cosmic Configurations Nexus</h1>
<hr>
<p>As the starship approaches the heart of the Cosmic Configurations Nexus, a sprawling repository pulsating with threads of data streams and pathways to infinite stellar themes, you are tasked with deciphering the configurations shaping the fate of this cosmic adventure. The Nexus holds the keys to adventure validation, customization, and theme systems that power every mission. Only through careful analysis can you unearth the pathways leading to the mastery of this galactic mission. Prepare to unlock the mysteries behind the core configurations and themes that define the galaxy of adventures.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Configuration Stargazing</strong>: How do configuration constants establish the parameters for the adventure system and manage external dependencies?</li>
<li>‚ö° <strong>Theme Pulsar</strong>: What patterns allow the theme system to dynamically handle multiple adventure themes from input validation to CSS generation?</li>
<li>üõ°Ô∏è <strong>Validator Shielding</strong>: How does the system implement protection mechanisms to handle invalid user inputs gracefully?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Core System Configuration</h3>
<p>The <code class="inline-code">config.ts</code> file defines constants and environment-based configurations that shape the limits and performance of the adventure system. It ensures adaptability to different runtime environments (e.g., production) while maintaining robust defaults for smooth operations. It includes critical properties, such as API keys, timeouts, cache lifecycles, and error-handling messages.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures the request timeout duration for large prompts powering quests and story generation.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Sets the file size limits for code analysis, managing memory efficiently during repository scanning.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Provides safe, reusable error messages for scenarios like LLM unavailability and permission issues.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation with large prompts, configurable via env
...
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
...
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ...
};
</code></pre>
<ul>
<li>Configures timeout settings (<code class="inline-code">LLM_REQUEST_TIMEOUT</code>) to manage long-running operations gracefully.</li>
<li>Defines file size limits (<code class="inline-code">MAX_FILE_SIZE_MB</code>) to avoid memory exhaustion during analyses.</li>
<li>Provides consistent, localized error messages (<code class="inline-code">ERROR_MESSAGES</code>), improving user experience and debugging clarity.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Definitions and Utilities</h3>
<p>The <code class="inline-code">theme.ts</code> file is the central repository for adventure themes, providing clear structure and utilities to manage themes. It handles theme-related data such as IDs, icons, keywords, and descriptions‚Äîessential for aligning the adventure system‚Äôs thematic identity.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A structured definition of all supported themes with properties such as <code class="inline-code">key</code>, <code class="inline-code">emoji</code>, and <code class="inline-code">keywords</code>.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves a list of all defined themes in the system, enabling modular theme management.</li>
<li><code class="inline-code">isValidTheme</code>: Validates user-provided theme inputs against predefined options.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    ...
  },
  ...
};
...
export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
...
export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Structures supported themes (<code class="inline-code">THEMES</code>) to ensure consistent and expandable theme management.</li>
<li>Allows quick access to all themes (<code class="inline-code">getAllThemes</code>) for dynamic and scalable interactions.</li>
<li>Implements robust validation logic (<code class="inline-code">isValidTheme</code>) to ensure invalid themes are gracefully rejected.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/theme-manager.ts:</span> Dynamic Theme Operations</h3>
<p>The <code class="inline-code">theme-manager.ts</code> file provides a powerful utility class for handling theme-based operations, from generating CSS themes dynamically to selecting appropriate icons and logos depending on the theme. It integrates theme customization across the adventure system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">ThemeManager.generateThemeCSS</code>: Compiles and combines CSS files into a unified theme-specific stylesheet.</li>
<li><code class="inline-code">ThemeManager.getThemeIcons</code>: Dynamically selects the correct icons for themes, ensuring a consistent visual identity.</li>
<li><code class="inline-code">ThemeManager.isLightTheme</code>: Evaluates theme properties to determine if a light or dark logo should be used.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/theme-manager.ts</h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    ...
    path.join(this.themesDir, `${theme}.css`)
  ];
  ...
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  ...
  fs.writeFileSync(cssPath, combinedCSS);
}
...
getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {
  const themeIcons = {
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },
    ...
  };

  return (themeIcons as any)[theme] || themeIcons.space;
}
...
isLightTheme(theme: AdventureTheme): boolean {
  const lightThemes: AdventureTheme[] = [&#39;mythical&#39;];
  ...
  return lightThemes.includes(theme);
}
</code></pre>
<ul>
<li>Combines specific and generic CSS files (<code class="inline-code">generateThemeCSS</code>), enabling customized layouts for each theme.</li>
<li>Provides adventure-wide visual consistency with tailored icons (<code class="inline-code">getThemeIcons</code>) based on the active theme.</li>
<li>Dynamically determines light/dark theme design choices (<code class="inline-code">isLightTheme</code>) for better user interface adaptation.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Validation Utilities</h3>
<p>The <code class="inline-code">input-validator.ts</code> file contains lean, purpose-built functions for validating user inputs. It ensures that adventure choices, themes, and project paths are sanitized and conform to expected formats‚Äîshielding the system from errors or malicious input.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures adventure inputs are neither too long nor absent.</li>
<li><code class="inline-code">validateTheme</code>: Validates and normalizes selected themes against predefined keywords or IDs.</li>
<li><code class="inline-code">validateProjectPath</code>: Sanitizes the project path input for safety and initializes defaults if omitted.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  ...
  return input.trim();
}
...
export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  ...
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
...
export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  ...
  return input.trim();
}
</code></pre>
<ul>
<li>Protects user inputs from unacceptable values (<code class="inline-code">validateAdventureChoice</code>) while guiding clear error feedback.</li>
<li>Dynamically verifies themes (<code class="inline-code">validateTheme</code>) against keywords, ensuring seamless configuration customization.</li>
<li>Safeguards against dangerous project path inputs (<code class="inline-code">validateProjectPath</code>) with sanitization and default handling.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üåå Ensure configuration properties align with external dependencies when defining API keys and timeouts.</li>
<li>üöÄ Experiment with theme utilities to see how dynamic CSS and icons create a cohesive user experience.</li>
<li>üõ°Ô∏è Consider how each <code class="inline-code">validate*</code> function enables error mitigation throughout the system.</li>
</ul>
<hr>
<p>You have mastered all the secrets of this stellar repository! Your adventure is complete.</p>
<p>Stellar work navigating the cosmic labyrinth of Quest 5: Cosmic Configurations Nexus‚Äîyour starship is 80% through this galactic voyage, with brilliance as vast as the universe itself‚Äîkeep blazing like a supernova! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>