<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuration & Theme System - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Galactic Code Chronicles: Missions Beyond the Repository</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration &amp; Theme System</h1>
<hr>
<p>Aboard the starship <em>Celestial Refactor</em>, the crew approaches a critical juncture in the journey through the interstellar codebase. The task at hand? To unravel the complex mechanisms governing configuration and theme systems, ensuring seamless adaptability for cosmic explorers navigating infinite possibilities. Your team faces a constellation of structured variables, validation functions, and dynamic theme generators. This final quest is the keystone of the mission, tying functionality to aesthetic purpose, ensuring harmonious operation as you chart the stars of innovation.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these crucial questions:</p>
<ul>
<li>üîç <strong>Stellar Timeout Calibration</strong>: How is timeout handled for system operations, and what patterns ensure adaptability in cosmic-scale operations?</li>
<li>‚ö° <strong>Thematic Mapping Frequencies</strong>: How are theme definitions structured, and what safeguards make them reusable across various space-modules?</li>
<li>üõ°Ô∏è <strong>Orbital Validation Shields</strong>: How does input validation protect against edge cases and cosmic anomalies?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> System Configuration Nexus</h3>
<p>This file is the nerve center of the starship‚Äôs configuration system, where constants and environment variables dictate operations. It controls timeout thresholds, cache limits, and error messages for consistency across galactic missions. Scalable constraints ensure the mission adapts to varying data conditions. </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the API request timeout duration for Large Language Model operations, ensuring responsiveness while avoiding infinite stalls.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Regulates the maximum allowable file size, upholding stability in interstellar data analysis workflows.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Provides centralized, consistent error messaging, creating a safety net during unexpected anomalies.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Cosmic Theme Repository</h3>
<p>This file hosts the logic for managing themes, bringing your starship&#39;s journey to life. It defines the thematic structure and contains helper functions to map user inputs to defined themes. The elegance of the theme system lies in its adaptability for various mission contexts.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Central repository for theme definitions, interlinking descriptions, emojis, and keywords to streamline identification and display.</li>
<li><code class="inline-code">parseTheme</code>: Parses user input to match valid themes, ensuring linguistic flexibility and efficient keyword recognition.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the complete list of themes, serving as a single source of truth for interactive interfaces.</li>
</ul>
<h3><span class="header-prefix">packages/generator/src/cli/theme-manager.ts:</span> Dynamic Theme Operations</h3>
<p>This file operates the dynamic engine for organizing and rendering themes. It ensures consistent presentation by combining CSS files for layouts and adapting assets based on a theme&#39;s properties. It safeguards against incorrect theme usage during the rendering process.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateThemeCSS</code>: Dynamically compiles CSS files for a given theme to ensure seamless integration of aesthetics across all mission components.</li>
<li><code class="inline-code">getGitHubLogo</code>: Fetches the appropriate GitHub logo based on whether a theme uses a light or dark background, balancing visuals and readability.</li>
<li><code class="inline-code">getThemeIcons</code>: Maps each theme to unique icons, enhancing immersive user experiences for quest navigation.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to focus on meaningful source code
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;,
  PERMISSION_DENIED: &#39;Permission denied accessing the specified path.&#39;,
} as const;
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures system responsiveness and optimizes request strategies for complex computational tasks.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> limits file size to maintain memory stability and focus analysis on relevant data.</li>
<li><code class="inline-code">ERROR_MESSAGES</code> centralizes error handling to improve consistency and instantly communicate failures.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  }
} as const;

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  return THEMES_ARRAY.find(theme =&gt; theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))).key as AdventureTheme ?? null;
}

export function getAllThemes(): ThemeDefinition[] {
  return Object.values(THEMES);
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> creates a vivid, reusable theme framework with encapsulated metadata.</li>
<li><code class="inline-code">parseTheme</code> translates user input into valid themes by matching strings or recognizing IDs.</li>
<li><code class="inline-code">getAllThemes</code> offers an accessible library of themes for intuitive program integration.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/theme-manager.ts</h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}

getGitHubLogo(theme: AdventureTheme): string {
  return this.isLightTheme(theme) ? &#39;assets/shared/github-mark.svg&#39; : &#39;assets/shared/github-mark-white.svg&#39;;
}

getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {
  const themeIcons = {
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },
    mythical: { theme: &#39;üè∞&#39;, quest: &#39;‚öîÔ∏è&#39; },
    ancient: { theme: &#39;üè∫&#39;, quest: &#39;üìú&#39; },
    developer: { theme: &#39;üíª&#39;, quest: &#39;üîß&#39; },
    custom: { theme: &#39;üé®&#39;, quest: &#39;‚≠ê&#39; }
  };

  return (themeIcons as any)[theme] || themeIcons.space;
}
</code></pre>
<ul>
<li><code class="inline-code">generateThemeCSS</code> merges essential CSS files to ensure harmonious application across varied themes.</li>
<li><code class="inline-code">getGitHubLogo</code> dynamically selects suitable logos for themes, enhancing visual design alignment.</li>
<li><code class="inline-code">getThemeIcons</code> assigns expressive icons to each theme, boosting their intuitive appeal.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Ensure environment variables are properly configured to leverage dynamic space systems effectively.</li>
<li>Use <code class="inline-code">getThemeIcons</code> for creating themed visual enhancements in your navigation system.</li>
<li>Dive into <code class="inline-code">parseTheme</code> to learn how input matching can enable flexibility in large-scale applications.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the galactic <em>Celestial Refactor</em>! Your adventure is complete, and the cosmic codebase now stands as a beacon of functional adaptability and aesthetic harmony. Celebrate with your crew and let the stars guide future missions!</p>
<p>Mission accomplished, Star Voyager! Quest 5: Configuration &amp; Theme System has been mastered with stellar precision‚Äîyour cosmic journey is now 80% fueled for a triumphant leap to the final frontier! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>