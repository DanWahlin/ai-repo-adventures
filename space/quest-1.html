<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: Journey to the HTML Nebula - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Starship Nexus: Adventures in the Code Cosmos</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: Journey to the HTML Nebula</h1>
<hr>
<p>The Starship Nexus prepares to embark on its first mission, venturing deep into the mysterious HTML Nebula to unlock the secrets of code-driven creativity. Navigating through cloud-like strings and cascading styles, the crew must configure dynamic generators to render stunning galactic adventures. The mission begins within the Nexus&#39; HTML Generator, Template Engine, and Asset Manager subsystems‚Äîall essential tools for transforming cosmic data streams into interactive story content that inspires explorers throughout the Code Cosmos.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Nebula Mapping</strong>: How does <code class="inline-code">HTMLAdventureGenerator.generateAdventure</code> define the sequence for creating an HTML adventure and ensure compatibility across themes and quests?</li>
<li>‚ö° <strong>Template Alignment</strong>: How does <code class="inline-code">TemplateEngine.replacePlaceholders</code> substitute values into templates, and what safeguards are in place for variable accuracy?</li>
<li>üõ°Ô∏è <strong>Asset Stabilization</strong>: How does <code class="inline-code">AssetManager.copyGlobalAssets</code> preserve critical shared resources for consistent layout and navigation across all themes?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Defining adventure creation workflows</h3>
<p>In this file, the <code class="inline-code">HTMLAdventureGenerator</code> class serves as the primary navigator for constructing HTML-based interactive adventures. Its core methods orchestrate theme application, quest generation, and template handling to ensure that the Nexus outputs consistently engaging interfaces. Functions like <code class="inline-code">generateAdventure</code> and <code class="inline-code">buildQuestHTML</code> define the pipeline, from repository analysis and story building to styling and page rendering.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">HTMLAdventureGenerator.generateAdventure</code>: Initiates the adventure generation sequence by analyzing the repository, selecting themes, and rendering HTML pages for quests.</li>
<li><code class="inline-code">HTMLAdventureGenerator.buildQuestHTML</code>: Constructs individual quest pages by processing content, ensuring navigation links, and using templates for consistent design.</li>
<li><code class="inline-code">HTMLAdventureGenerator.startHttpServer</code>: Activates the Nexus‚Äô local server to serve generated adventures, ensuring explorers can test their maps across browser systems.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  ...
  
  console.log(chalk.dim(&#39;üìñ Generating quest pages...&#39;));
  await this.generateQuestPages();

  console.log(chalk.dim(&#39;üéâ Creating adventure summary page...&#39;));
  await this.generateSummaryHTML();
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>This method organizes the full sequence, including codebase analysis, theme application, quest generation, and asset management.</li>
<li>It uses structured calls to subsystems like <code class="inline-code">AdventureManager</code> and <code class="inline-code">TemplateEngine</code> to extract quest data and render templates.</li>
<li>Error handling ensures partial progress can still produce meaningful output, preventing mission failure.</li>
</ul>
<hr>
<pre><code class="language-typescript">private buildQuestHTML(quest: QuestInfo, content: string, questIndex: number): string {
  const variables = {
    ...this.getCommonTemplateVariables(),
    PAGE_TITLE: this.stripHTML(this.formatInlineMarkdown(quest.title)),
    QUEST_CONTENT: this.formatMarkdown(content),
    BOTTOM_NAVIGATION: bottomNavigation
  };

  return this.templateEngine.renderPage(&#39;quest-template.html&#39;, variables);
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>This code demonstrates usage of <code class="inline-code">TemplateEngine</code> to create a quest page by merging content and template variables.</li>
<li>Adds navigation links at the bottom to maintain seamless quest transitions for the user.</li>
<li>Strips HTML tags from titles for safe display, reinforcing security standards.</li>
</ul>
<hr>
<pre><code class="language-typescript">async startHttpServer(port: number = 8080): Promise&lt;void&gt; {
  const server = http.createServer((req, res) =&gt; {
    let filePath = path.join(this.outputDir, req.url === &#39;/&#39; ? &#39;index.html&#39; : req.url || &#39;&#39;);

    ...
    
    fs.readFile(filePath, (err, content) =&gt; {
      if (err) {
        if (err.code === &#39;ENOENT&#39;) {
          res.writeHead(404);
          res.end(&#39;File not found&#39;);
        } else {
          res.writeHead(500);
          res.end(&#39;Server error&#39;);
        }
      } else {
        res.writeHead(200, { &#39;Content-Type&#39;: contentType });
        res.end(content, &#39;utf-8&#39;);
      }
    });
  });

  server.listen(port, () =&gt; {
    console.log(chalk.green(`üåê HTTP server started on http://localhost:${port}`));
  });
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>Efficiently serves the generated HTML files using an HTTP server for easy access and testing by users.</li>
<li>Handles HTTP errors gracefully, ensuring users receive informative responses even in unexpected situations.</li>
<li>Simplified path management prevents external vulnerabilities.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Crafting templates for stellar adventures</h3>
<p>This file holds the <code class="inline-code">TemplateEngine</code>, a key subsystem that transforms data streams into visually engaging templates. It ensures placeholders, like <code class="inline-code">{{TITLE}}</code> or <code class="inline-code">{{CONTENT}}</code>, are dynamically replaced with mission-specific details, allowing adventures to feel customized and interactive.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">TemplateEngine.renderPage</code>: Creates complete pages by combining base and content templates with variables specific to each quest.</li>
<li><code class="inline-code">TemplateEngine.replacePlaceholders</code>: Fills placeholder values across templates, supporting dynamic text and visuals during mission runtime.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>Combines a base template with content templates to generate fully developed HTML pages for quests.</li>
<li>Ensures consistent style application by linking all rendered pages to a shared design framework.</li>
<li>Integrates multiple layers of placeholder substitution for versatile customization.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;

  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }

  return result;
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>Iterates through provided variables, substituting placeholders dynamically based on user-provided content.</li>
<li>Leverages <code class="inline-code">RegExp</code> for exhaustive replacement, ensuring multiple instances of a placeholder are handled correctly.</li>
<li>Acts as a pivotal component for modular code design by standardizing variable injection.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Ensuring resource availability</h3>
<p>The <code class="inline-code">AssetManager</code> subsystem takes responsibility for preparing shared resources like images, stylesheets, and navigation tools. By copying these assets to the designated output directories, it ensures proper functioning of the exploratory interface.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AssetManager.copyGlobalAssets</code>: Manages shared assets like images for consistent theme usage across quests.</li>
<li><code class="inline-code">AssetManager.copyQuestNavigator</code>: Copies navigation tools for user interaction, enhancing interactivity across missions.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(globalAssetsDir, { recursive: true });

  const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
  globalImages.forEach(file =&gt; {
    const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
    if (fs.existsSync(sourcePath)) {
      const targetPath = path.join(globalAssetsDir, file);
      fs.copyFileSync(sourcePath, targetPath);
    }
  });
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>Focuses on copying critical shared assets like GitHub logos and navigation controls.</li>
<li>Guarantees availability of cross-compatible resources for streamlined adventures.</li>
<li>Implements modular path management that scales efficiently across themes.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  
  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  fs.mkdirSync(assetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }

  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
}
</code></pre>
<h4>Key Points</h4>
<ul>
<li>Handles mission-critical navigation components for seamless page transitions.</li>
<li>Modular asset handling prepares all necessary files without affecting other subsystems.</li>
<li>Ensures the user experience retains its coherence across quests.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Combat placeholder errors by double-checking variable names when configuring templates in <code class="inline-code">TemplateEngine</code>.</li>
<li>Analyze HTTP server logs in <code class="inline-code">HTMLAdventureGenerator</code> to debug any connection issues during testing.</li>
<li>Review shared assets in <code class="inline-code">AssetManager.copyGlobalAssets</code> to ensure theme consistency in visuals.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries in the Code Cosmos.</p>
<p>Stellar work, Cadet ‚Äî you&#39;ve navigated the cosmic currents of Quest 1: Journey to the HTML Nebula and ignited your rocket for the next mission in the galaxy of knowledge! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>