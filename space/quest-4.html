<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Stabilizing Stellar Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Odyssey: The Codebase Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Stabilizing Stellar Configurations</h1>
<hr>
<p>The <strong>SS Code Explorer</strong>, with its shimmering hull and advanced AI, veers into the heart of the Code Nebula. Stellar storms of misaligned configurations threaten the galaxy of source files, leaving the crew grappling with cosmic entropy. Your mission, as the intrepid captain, is to stabilize these errant configurations, ensuring harmony across celestial settings and protocols. Using precise tools and sharp analysis, you must navigate interstellar pathways to decode and align the configurations that fuel critical systems of adventure generation, theme validation, and safety protocols.</p>
<p><strong>Brace yourself, spacefarer, for a quest full of cosmic calibration!</strong></p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Configuration Harmonization</strong>: How do configuration constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> or <code class="inline-code">REPOMIX_CACHE_TTL</code> ensure seamless system operation across various file scopes?</li>
<li>‚ö° <strong>Theme Cosmic Calibration</strong>: How does the <code class="inline-code">THEMES</code> object construct a consistent framework for exploring diverse galactic adventures, and how can users interact with these themes?</li>
<li>üõ°Ô∏è <strong>Validation Shields</strong>: How do input validation methods like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">sanitizeForDisplay</code> protect the starship from disruptive errors and misaligned user inputs?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Cosmic System Uniformity</h3>
<p>The <code class="inline-code">config.ts</code> file serves as the cornerstone of the starship&#39;s functionality, defining global settings like timeouts, cache protocols, and adventure limits to ensure cosmic alignment across all systems. By managing constants and environment variables, this file prevents chaotic interference during dynamic explorations through the Code Nebula. Key values like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_GRACEFUL_TIMEOUT</code> dictate operational thresholds, safeguarding performance to maintain optimal velocity during stellar quests.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Sets the maximum duration for long-running AI model requests, critical for generating detailed quest narratives.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines cache expiry to optimize resource utilization and prevent memory strain in high-stakes adventures.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Regulates maximum file processing size to ensure seamless navigation through vast cosmic datasets.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Galactic Adventure Themes</h3>
<p>The <code class="inline-code">theme.ts</code> file crafts the stellar framework of adventure themes, enabling cosmic explorers to dive into pre-defined realms or design their own. The <code class="inline-code">THEMES</code> object encapsulates galactic archetypes such as Space Exploration, Mythical Realms, and Developer Documentation, each with its unique identifiers and descriptive flair. Functions like <code class="inline-code">getAllThemes</code> and <code class="inline-code">isValidTheme</code> ensure efficient retrieval and validation of galactic destinations.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Provides a centralized structure for theme definitions, complete with descriptions, emojis, and keywords to guide user choices.</li>
<li><code class="inline-code">getThemeByKey</code>: Locates themes based on unique keys to ensure precise calibration for theme-based quests.</li>
<li><code class="inline-code">parseTheme</code>: Interprets user input, matching keywords or numeric identifiers to galactic adventures.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Stellar Input Safeguards</h3>
<p>The <code class="inline-code">input-validator.ts</code> file serves a critical role in stabilizing starship operations. Its validation functions shield the system from malformed or misaligned inputs, ensuring harmonic interactions between cosmic explorers and the ship&#39;s command center. Functions like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">sanitizeForDisplay</code> guarantee smooth workflows by rejecting invalid commands and formatting data for display, protecting mission-critical protocols.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures user inputs for adventure selection are precise and within acceptable limits, mitigating potential disruptions.</li>
<li><code class="inline-code">validateTheme</code>: Validates theme selection and provides informative error feedback, maintaining stellar theme alignment.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleans up data for safe display, preventing injection attacks and preserving cosmic integrity.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures time-intensive tasks like quest generation are bounded by operational limits, preventing indefinite waits.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> optimizes runtime performance by balancing cache usage and expiry rates, ensuring consistent operation.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> restricts file analysis to manageable sizes, avoiding memory exhaustion while prioritizing meaningful data.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  // Other themes excluded for brevity
};

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  return null;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> centralizes galactic realms with comprehensive metadata, serving as the foundation for user journeys.</li>
<li><code class="inline-code">parseTheme</code> decodes user inputs by matching keywords or IDs, bridging explorers to their desired cosmic destinations.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}

export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  return input.replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;).replace(/\s+/g, &#39; &#39;).trim().slice(0, maxLength);
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> ensures user inputs conform to defined criteria, preempting disruptive errors during quest selection.</li>
<li><code class="inline-code">sanitizeForDisplay</code> filters inputs to prevent injection attacks or harmful characters, safeguarding cosmic protocols.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üöÄ <strong>Optimize exploration</strong>: Focus on understanding how constants and validation mechanisms ensure system harmony.</li>
<li>üåå <strong>Expand horizons</strong>: Experiment with theme customization using the tools provided in <code class="inline-code">theme.ts</code>.</li>
<li>üõ∏ <strong>Prepare for liftoff</strong>: Validate user inputs meticulously to avoid mission-critical mishaps.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries and bring galactic code harmony into full bloom.</p>
<p>Blasting through the nebula of knowledge, you&#39;ve expertly stabilized stellar configurations, setting your cosmic voyage ablaze with 60% mission progress‚Äîbrilliant work, star navigator! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>