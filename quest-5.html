<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Customization Nexus: Shaping the Missions - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Cosmos of QuestCode: A Galactic Odyssey</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Customization Nexus: Shaping the Missions</h1>
<hr>
<p>The <em>SS Refactoria</em> has arrived at the fabled <em>Customization Nexus</em>, a star cluster of infinite possibilities where adventures are forged into tailored experiences. Here, the crew faces the challenge of reshaping code repositories into crystal-clear star charts capable of illuminating any developer’s path. Their tools? The quest configuration systems and powerful story-generation engines of the <em>QuestCode</em> galaxy. As the ship drifts through the glowing threads of the Nexus nebula, the crew begins their mission to decode the secrets of customization and personalization, ensuring every quest feels unique and purpose-driven.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Configuration system for guided adventures that enhance story generation</h3>
<p>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a> file lies at the heart of the <em>Customization Nexus</em>. Acting like the navigational core of a starship, it allows the <em>SS Refactoria</em> to load, parse, and format quest configurations. Through the <code class="inline-code">loadAdventureConfig()</code> function, the system reads the <code class="inline-code">adventure.config.json</code> file, pulling raw data into the adventure code pipeline. The <code class="inline-code">parseAdventureConfig()</code> function steps in to transform this raw, nebulous data into a structured JSON object, ensuring it is ready for further processing. The <code class="inline-code">extractUniqueFilePaths()</code> function scours the configuration for valid file references, like a probe scanning the void for life, identifying critical paths that shape the adventure. Finally, the <code class="inline-code">formatAdventureConfigForPrompt()</code> function ensures that all configuration data aligns perfectly with the <em>StoryGenerator Core</em>, feeding the AI engine detailed prompts to maintain creative consistency.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig()</code> reads <code class="inline-code">adventure.config.json</code>, providing the foundation for all downstream operation.</li>
<li><code class="inline-code">parseAdventureConfig()</code> converts raw JSON content into a structured object for easy manipulation.</li>
<li><code class="inline-code">extractUniqueFilePaths()</code> validates and gathers all necessary file paths to ensure no data is left behind.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt()</code> aligns quest configurations for maximum synergy with the storytelling engine.</li>
<li>Streamlined handling of error cases ensures smooth operation even in turbulent computational environments.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">const ADVENTURE_CONFIG_FILE = &#39;adventure.config.json&#39;;

function readFileIfExists(filePath: string): string | null {
  try {
    return fs.readFileSync(filePath, &#39;utf-8&#39;);
  } catch {
    // Missing or unreadable file is non-fatal
    return null;
  }
}

export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}

export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This code is like a sensor that quickly scans for, retrieves, and translates critical mission data from its raw form into something the starship&#39;s systems can understand and work with.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This function resembles an exploratory drone that ventures deeply into the configuration nebula, uncovering a map of all the paths vital to the mission and carefully ensuring their existence.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure Guidelines\n\n`;
  formatted += `**CRITICAL: Each quest MUST include dedicated file analysis sections**\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    formatted += `${quest.description}\n\n`;
    formatted += `**Required File Analysis Sections:**\n`;

    for (const file of quest.files) {
      if (!file.path || !file.description) continue;

      formatted += `\n**File: \`${file.path}\`**\n`;
      formatted += `- Description: ${file.description}\n`;
      
      if (Array.isArray(file.highlights)) {
        formatted += `- Key Functions/Areas to Highlight:\n`;
        for (const highlight of file.highlights) {
          if (highlight.name &amp;&amp; highlight.description) {
            formatted += `  • **${highlight.name}**: ${highlight.description}\n`;
          }
        }
      }
    }
    formatted += `\n`;
  }

  formatted += `\n**FORMATTING INSTRUCTIONS:**\n`;
  formatted += `- Each file mentioned in the quest structure above MUST have its own dedicated analysis section\n`;
  formatted += `- **MANDATORY**: Include at least 2-3 separate code snippet sections (## filename) with real code blocks\n`;
  formatted += `- Show actual function signatures, imports, class definitions, or key methods from the files\n`;
  formatted += `- Include real code snippets from the actual files (never invent code)\n`;
  formatted += `- Provide practical explanations using real-world analogies\n`;
  formatted += `- End with helpful hints and next steps\n`;

  return formatted;
}
</code></pre>
<p>This function is like the captain’s log, preparing formatted mission objectives and sending them up the chain for execution by the <em>StoryGenerator Core</em>, ensuring clarity and consistency in every quest.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">loadAdventureConfig()</code> and <code class="inline-code">parseAdventureConfig()</code> to trace the flow of data into your systems for better debugging and customization.</li>
<li>When building out your own quests, focus on validating file paths with <code class="inline-code">extractUniqueFilePaths()</code> to catch early issues in your configuration.</li>
<li>Dive deeper by exploring how formatted prompts from this file interact with the <code class="inline-code">StoryGenerator Core</code> to connect configuration structure with the mission narrative.</li>
</ul>
<hr>
<p>Congratulations, Star Navigator! 💎 You&#39;ve successfully charted the intricate celestial pathways of Quest 5, customizing missions with precision and cosmic mastery—your momentum is propelling toward the final frontier at warp speed! 🚀⭐</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>