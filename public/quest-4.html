<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Mapping the Stellar Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Starship Adventure: Navigating the Codebase Nebula</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Mapping the Stellar Themes</h1>
<hr>
<p>As the <em>Code Voyager</em> sails deeper into the luminous Codebase Nebula, the mission now ventures into a dazzlingly volatile region known as the Stellar Configuration Belt. Here, thematic patterns swirl in an ever-changing cosmic dance, influencing the unity of API galaxies and framework systems. The crew now faces a pivotal task—mapping the abstract but crucial Stellar Themes that align every adventure. With the aid of the AI-driven <em>Repomix Navigator</em>, the journey calls for synergy between code exploration and conceptual harmony. Ready the scanners and prepare for an odyssey of navigating the celestial currents that guide this nebula!</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Central Theme Definitions</h3>
<p>This file is the cornerstone that shapes the conceptual worldbuilding of the adventure system. It houses the <code class="inline-code">THEMES</code> dictionary, which contains pre-defined themes like Space Exploration and Developer Documentation. Each theme includes essential properties such as its <code class="inline-code">description</code>, <code class="inline-code">keywords</code>, and signature <code class="inline-code">emoji</code>. The <code class="inline-code">ThemeDefinition</code> interface ensures every theme follows a strict structure, aiding consistency as the themes are parsed, validated, and transformed into immersive story prompts. For example, methods such as <code class="inline-code">parseTheme()</code> simplify user input handling, while <code class="inline-code">getThemeById()</code> and <code class="inline-code">getThemeByKey()</code> provide quick lookups for theme-specific details. Together, these utilities streamline the configuration and customization of adventures, ensuring that every thematic choice is meaningful and exact.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Repository of predefined themes with rich descriptions and guiding keywords for narrative generation.</li>
<li><code class="inline-code">parseTheme()</code>: Operates as the thematic navigator, parsing input strings to identify valid themes and match user intent.</li>
<li><code class="inline-code">getFormattedThemeOptions()</code>: Formats all themes for user-friendly presentation, including emojis and descriptions.</li>
<li><code class="inline-code">isValidTheme(theme)</code>: Validates a theme&#39;s legitimacy using simple keyword matching.</li>
<li><code class="inline-code">ThemeDefinition</code>: Interface enforcing a consistent structure for every theme’s properties.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input Validation to Secure Choices</h3>
<p>This file ensures safety and precision across all user inputs. The <code class="inline-code">validateTheme()</code> function establishes strict rules for thematic selection by leveraging helpers from <code class="inline-code">theme.ts</code>, such as <code class="inline-code">parseTheme()</code> and <code class="inline-code">isValidTheme()</code>. Additionally, <code class="inline-code">validateAdventureChoice()</code> ensures users stay within acceptable input constraints while sanitizing all strings to prevent injection attacks. The validation functions aren&#39;t merely technical safeguards—they are pivotal mechanisms that enable smooth user interactions, ensuring every choice contributes to meaningful exploration and thematic alignment. By maintaining high standards for what&#39;s permissible, this file protects the system with logic as robust as a well-calibrated space station.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice()</code>: Handles user selections, enforcing character limits and eliminating extraneous whitespace.</li>
<li><code class="inline-code">validateTheme()</code> and <code class="inline-code">parseTheme()</code>: Pairs validation with parsing logic to streamline theme resolution from user inputs.</li>
<li><code class="inline-code">sanitizeForDisplay()</code>: Combats dangerous characters from corrupting displays or injections in UI and story prompts.</li>
<li>Integration of <code class="inline-code">getAllThemes()</code>: Provides access to the pool of available themes for decision-making validation.</li>
<li>Finds and corrects invalid entries by matching against <code class="inline-code">THEMES</code> data and keywords.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configurations That Regulate the Cosmic Flow</h3>
<p>This file governs critical aspects of the <em>Code Voyager</em> systems through constants and environment variables needed for the journey. It sets thresholds such as <code class="inline-code">MAX_FILE_SIZE_MB</code> to prevent analysis bottlenecks, while environment-based settings like <code class="inline-code">REPOMIX_CACHE_TTL</code> optimize resource efficiency. Additionally, theme handling is subtly integrated through <code class="inline-code">DEFAULT_THEME</code>, which ensures every mission begins with the Space Exploration theme—unless the galaxy demands otherwise. Accurate configuration is vital, as the file dictates smooth subsystem orchestration, from LLM-based adventure generation to filesystem analysis limits. With these parameters, the starship can sail confidently through the most demanding nebular storms.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">DEFAULT_THEME</code>: Establishes Space Exploration as the primary starting point for every adventure narrative.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Regulates file size thresholds for efficient analysis and memory management.</li>
<li><code class="inline-code">LLM_TIMEOUTS</code>: Customizable parameters that govern response times for highly intelligent AI-driven story content.</li>
<li>Cache settings like <code class="inline-code">REPOMIX_CACHE_TTL</code>: Fine-tune system resource use through adjustable time-to-live limits.</li>
<li>Integration hooks for environmental variables such as <code class="inline-code">LLM_API_KEY</code>: Robust key-based access to AI systems and critical services.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;🚀&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;📖&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  }
};

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<p>This code ensures the adventure system can confidently validate thematic input and anchor narratives to structured, pre-defined concepts.</p>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}

export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>This code acts as the gatekeeper for user inputs, ensuring that only the cleanest and most meaningful data makes it into the system.</p>
<hr>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const DEFAULT_THEME = &#39;space&#39; as const;

export const MAX_FILE_SIZE_MB = 10;

export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env

export const LLM_API_KEY = process.env.LLM_API_KEY || &#39;&#39;;
export const LLM_REQUEST_TIMEOUT = 60000;
</code></pre>
<p>This foundational configuration establishes constants that regulate resource management, whether in file analysis or AI-driven narrative output.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">getFormattedThemeOptions()</code> method to display all available themes in a user-friendly way for seamless thematic choice during exploration.</li>
<li>Keep the <code class="inline-code">MAX_FILE_SIZE_MB</code> and other limits in mind when adding new analytical features—they ensure operational efficiency without memory overload.</li>
<li>Check out <code class="inline-code">sanitizeForDisplay()</code> in <code class="inline-code">input-validator.ts</code> to understand how user inputs are scrubbed clean for safe adventures.</li>
</ul>
<p>Mission accomplished, star voyager—your charting of stellar themes has illuminated 75% of the cosmic map, propelling you toward the final frontier with dazzling brilliance! 🚀⭐🗺️</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>