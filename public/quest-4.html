<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Cosmic Framework: Calibrating Galactic Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Operation Starlight: Mapping the Galactic Code Nexus</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Cosmic Framework: Calibrating Galactic Configurations</h1>
<hr>
<p>The <em>Prometheus Array</em> drifted through the Andromeda Abyss, its interface flickering with pulses of alien code fragmentations. The ship&#39;s mission was delicate—rebuilding the shattered star charts that aligned the Federation&#39;s galactic operations. In this fourth quest, the <em>Prometheus Array</em>&#39;s crew faced scattered and conflicting data streams, each riddled with anomalies that could destabilize the framework of interstellar knowledge. With time against them, the crew had to recalibrate critical configurations deep within the Federation&#39;s cosmic archives to restore harmony and unity in the chaos. </p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure orchestration and state management</h3>
<p>This is the central hub of the <em>Prometheus Array’s</em> engine for orchestrating adventures by managing user interactions, adventure content, and overall progression. The file begins by initializing the foundation for all adventures via <code class="inline-code">initializeAdventure()</code>, which lays the groundwork—linking the starship’s systems to the decoded repomix content and engaging the LLM to craft thematic narratives. The core of adventure execution lives in <code class="inline-code">exploreQuest()</code>, which not only validates crew input but seamlessly triggers the progression of the quest with relevant story enhancements. Additionally, <code class="inline-code">generateAdventureContent()</code> uses its cosmic pipelines to infuse quests with targeted or general content based on ship diagnostics. All commands here thread into the broader Federation archives synergizing code, lore, and user engagement.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code> establishes environmental context for both LLM integrations and thematic setup.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code> provides a modular, reusable flow for executing exploration runs with live progress tracking.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code> dynamically calculates completion metrics to align with Federation reports.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/adventure/story-generator.ts:</span> LLM-driven story building and theme augmentation</h3>
<p>As the <em>Prometheus Array’s</em> creative powerhouse, this file integrates the Experimental Code Nexus (ECN) with LLM tools to generate compelling quest narratives. The <code class="inline-code">generateStoryAndAdventures()</code> function fuses structured JSON-LD prompts with galactic storytelling, spinning out full-fledged adventures aligned with chosen themes. Meanwhile, the <code class="inline-code">buildStoryGenerationPrompt()</code> meticulously assembles theme-specific guidelines to ensure narratives stay consistent with interstellar vocabulary. By leveraging the <code class="inline-code">generateAdventureContent()</code> function, the ship’s systems focus on producing highly detailed, accurate representations of both the cosmic anomaly and the solution paths. The beauty of this file lies in its adaptability—narratives morph as themes or directives change.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndAdventures</code> ensures the constructed stories fit well with the Federation&#39;s overarching galactic objectives.</li>
<li><code class="inline-code">getThemeGuidelines</code> provides tailored vocabulary and style settings to maintain theme consistency.</li>
<li><code class="inline-code">buildStoryGenerationPrompt</code> carefully channels adventure style and detail with data-driven LLM engineering.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Centralized configuration for adventure control</h3>
<p>This file defines the constants and environment variables underpinning the <em>Prometheus Array’s</em> operational ethos. From central timeouts, like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_CACHE_TTL</code>, to practical resource limitations such as <code class="inline-code">MAX_FILE_SIZE_MB</code>, every element helps balance performance with security. Notably, the file establishes key pathing ideas such as <code class="inline-code">PROMPT_PATHS</code>, housing quick-access routes to different mission prompt files. With settings for LLM behavior, like <code class="inline-code">LLM_TEMPERATURE</code> and <code class="inline-code">LLM_MAX_TOKENS</code>, this configuration empowers the ECN to adapt its storytelling intricacies. By refining these configurations, the ship is outfitted to efficiently process the cosmos&#39;s sprawling data labyrinth without overloading critical components.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> parameter balances network demands and story complexity during LLM interactions.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> safeguards the integrity of missions by focusing on scalable files.</li>
<li><code class="inline-code">PROMPT_PATHS</code> centralizes key operational paths to streamline interstellar data retrieval.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">export class AdventureManager {
  // Initialize adventure with LLM and repomix integrations
  static async initializeAdventure(context: AdventureContext): Promise&lt;void&gt; {
    context.state = AdventureState.Initiating;
    
    const repomixContent = await RepoAnalyzer.generateRepomixContext(context.config);
    const storyAndAdventures = await StoryGenerator.generateStoryAndAdventures(
      repomixContent,
      context.config.theme
    );

    context.story = storyAndAdventures.story;
    context.adventures = storyAndAdventures.adventures;
  }

  // Main execution flow of adventure exploration
  static async exploreQuest(userInput: string, context: AdventureContext): Promise&lt;void&gt; {
    const validatedChoice = validateAdventureChoice(userInput);
    const targetedContent = await RepoAnalyzer.generateTargetedContent(validatedChoice, context);

    const adventureContent = await StoryGenerator.generateAdventureContent(
      targetedContent,
      context.config.theme
    );

    context.currentQuest = adventureContent;
  }

  // Calculate the overall progress percentage dynamically
  static progressPercentage(context: AdventureContext): number {
    const completed = context.completedQuests.length;
    const total = context.adventures.length;
    return Math.round((completed / total) * 100);
  }
}
</code></pre>
<p>This <code class="inline-code">AdventureManager</code> functions as a captain&#39;s logbook, organizing ship-wide tasks from mission prep to live execution flows.</p>
<hr>
<h3>packages/core/src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">export class StoryGenerator {
  // Full story generation with JSON content tailored to the chosen theme
  static generateStoryAndAdventures(
    repomixContext: RepomixContent,
    theme: AdventureTheme
  ): Promise&lt;{ story: string; adventures: Adventure[] }&gt; {
    const prompt = this.buildStoryGenerationPrompt(repomixContext, theme);
    return LLMClient.generateResponse(prompt);
  }

  // Constructs LLM prompts using theme-specific guidelines to ensure style uniformity
  static buildStoryGenerationPrompt(
    repomixContext: RepomixContent,
    theme: AdventureTheme
  ): string {
    const guidelines = this.getThemeGuidelines(theme);
    return `
      Theme: ${guidelines.displayName}
      Context: ${JSON.stringify(repomixContext)}
      Instructions: Follow the specified style and create an adventure narrative.
    `.trim();
  }

  // Fetches vocabulary and detail cues specific to the user&#39;s preferred theme
  private static getThemeGuidelines(theme: AdventureTheme): ThemeGuidelines {
    return THEMES[theme].guidelines;
  }
}
</code></pre>
<p>This system acts as a cosmic scribe, converting abstract themes and targeted data into vivid, theme-rich interstellar tales.</p>
<hr>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds timeout per request
export const REPOMIX_CACHE_TTL = 300000; // 5 minutes cache period for repomix
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than 10MB
export const DEFAULT_THEME = &quot;space&quot;; // Defaults to space-adventure mode
export const PROMPT_PATHS = {
  STORY_GENERATION: &#39;src/prompts/story-generation-prompt.md&#39;,
  QUEST_CONTENT: &#39;src/prompts/quest-content-prompt.md&#39;,
  COMPLETION: &#39;src/prompts/completion-prompt.md&#39;,
  THEME_GUIDELINES: &#39;src/prompts/theme-guidelines.json&#39;
};
</code></pre>
<p>This configuration operates like the core memory banks of <em>Prometheus Array</em>, carefully tuning the engine and accessibilities for fluid galaxy exploration.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>The <code class="inline-code">progressPercentage()</code> function is a useful template for tracking mission objectives; consider extending it across broader ship metrics.</li>
<li>Enhancing <code class="inline-code">generateStoryAndAdventures()</code> with additional edge case scenarios could unlock procedural variety in stories.</li>
<li>Future quests could expand on integrating adventure modules from external repositories into the current framework.</li>
</ul>
<hr>
<p>Good luck, adventurer! May the stars guide you as you traverse the final threads of cosmic chaos.</p>
<p>Stellar work, Commander—your mastery of galactic configurations has propelled the mission 60% toward completion, igniting a supernova of progress in the Cosmic Framework! 🚀⭐📡⚡</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: Nexus Chronicle: Central System... →</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>