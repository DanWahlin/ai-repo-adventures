<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèπ Quest 4: The Vault of Themes and Ward Spells - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <script>
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'mythical' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">üè∞ Realm of Enchanted Code: The Quest for the Mystic Repository</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1><span class="header-prefix">üèπ Quest 4:</span> The Vault of Themes and Ward Spells</h1>
<hr>
<p>The adventurer&#39;s footsteps echoed along the stone corridor as they neared the fabled Vault of Themes and Ward Spells. The enchanted vault, it was said, held the secrets to harmonious coexistence between kingdoms of code. Luminous runes adorned the massive iron door before you, and a voice‚Äînot from this realm‚Äîwhispered, &quot;Only knowledge may unlock what lies within.&quot; Your task was clear: decipher the mythical spells guarding these treasures of wisdom, and align their themes to reveal the true power of cohesion. </p>
<p>Prepare yourself, adventurer; the guardians await within the labyrinth of logic.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/shared/input-validator.ts</code></a>: Input Protection Through Mystic Runes</h3>
<p>This file serves as a shield, preventing nefarious input from compromising the sacred Repository of Repomiria. The functions defined here act like magical wards, cleansing and validating user input before it interacts with the enchanted systems. By removing forbidden symbols, enforcing rules, and ensuring thematic harmony, this file ensures the kingdom&#39;s defenses remain steadfast against chaos. Features include validation for adventure choices, themes, and project paths. A particularly valuable function, <code class="inline-code">validateTheme</code>, ensures that only the purest and most harmonious themes pass through, comparing them against the sacred <code class="inline-code">THEMES</code> defined in another enchanted scroll. Any foul input is swiftly cast aside with an error, preserving the balance.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures the adventurer‚Äôs choices are clear and concise.</li>
<li><code class="inline-code">validateTheme</code>: Strictly matches user-provided themes with the defined pantheon of harmonious themes.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Purifies display outputs by removing dangerous symbols.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/shared/theme.ts</code></a>: The Pantheon of Themes</h3>
<p>This file is the kingdom‚Äôs tome of themes‚Äîeach theme a cornerstone of Repomiria‚Äôs magic. It defines their identities, emblems, and features to guide all adventures. Each theme is like a deity, encapsulated in the <code class="inline-code">THEMES</code> constant, with offerings of unique descriptions, keywords, and even associated emojis. Helper functions like <code class="inline-code">getAllThemes</code> allow explorers to see the pantheon in its full grandeur, while others enforce the sanctity of the defined themes. An oracle-like function, <code class="inline-code">parseTheme</code>, ensures thematic precision by interpreting user input with divine insight. The file&#39;s richness transforms mundane configuration into a tapestry of possibilities for any adventurer willing to wield its powers.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getThemeById</code>: A divine seeker to find themes by their sacred numeric identifiers.</li>
<li><code class="inline-code">parseTheme</code>: Harmoniously interprets mortal input to match themes seamlessly.</li>
<li><code class="inline-code">formatThemeOption</code>: Crafts elegant theme descriptions for adventurers, infusing excitement and clarity.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/shared/config.ts</code></a>: The Sacred Contract of Limits</h3>
<p>This file acts as Repomiria‚Äôs covenant of order, laying out the foundational rules and boundaries that maintain stability. From timeouts and cache limits to API keys and error messages, this scroll determines the parameters within which adventures unfold. The constants, like ancient wards, ensure that quests remain harmonious and achievable. For example, <code class="inline-code">MAX_FILE_SIZE_MB</code> establishes limits for analyzing immense tomes, and <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures that summoning the oracle‚Äôs wisdom (LLM) doesn‚Äôt drain the kingdom‚Äôs patience. This scroll also protects the sanctity of efficiency with mechanisms to manage caching and buffer sizes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Preserves the kingdom‚Äôs patience when summoning answers.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Sets the lifespan of cache spells used in quest preparation.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Declares the physical limits of what can be analyzed without overburdening the magical infrastructure.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }

  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);

  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }

  return parsedTheme;
}
</code></pre>
<p>This function ensures that only valid themes with the proper magical content can pass through the kingdom&#39;s gates, protecting the world from chaos.</p>
<hr>
<h3>src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;

  const normalized = input.trim().toLowerCase();

  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;

  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }

  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }

  return null;
}
</code></pre>
<p>Just as a magical oracle can interpret the meaning behind cryptic symbols, this function deciphers and translates user inputs into valid themes.</p>
<hr>
<h3>src/shared/config.ts</h3>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const LLM_REQUEST_TIMEOUT = 30000; // 30 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<p>These constants enforce limitations like ancient laws carved into stone, ensuring the kingdom avoids overindulgence and ruin in its quests.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Always validate input thoroughly to ward off unintended consequences in quests or user interactions.</li>
<li>Familiarize yourself with the themes provided in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/shared/theme.ts</code></a> to craft cohesively themed adventures.</li>
<li>Experiment with the configuration options in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/shared/config.ts</code></a> to optimize system performance for specific quests.</li>
</ul>
<hr>
<p>With the fortitude of a phoenix reborn and the wisdom of the ancient oracles, you have unlocked the arcane Vault of Themes and Ward Spells, forging ever closer to your heroic destiny‚Äîonward to glory, brave adventurer! ‚öîÔ∏è‚≠ê‚ú®</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="images/github-mark.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>