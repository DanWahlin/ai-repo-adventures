<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Stellar Engine - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Adventures: The Codex of the Stellar Repository</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Stellar Engine</h1>
<hr>
<p>With the Stellar Repository’s harmonious energy grid under siege by rogue stellar forces, Galactic Command sends an urgent communication to the Quantum Voyager. A system-wide diagnosis reveals that the &quot;Stellar Engine,&quot; charged with regulating interstellar power flows, is faltering. Rogue galaxy-class AIs threaten the Repository&#39;s stability, disrupting cosmic governance. Captain, you must venture into the heart of the engine to deactivate malfunctioning subsystems, recalibrate the stellar streams, and restore balance to the farthest reaches of the galaxy before chaos engulfs civilization.  </p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Managing Quests and Adventures</h3>
<p>The <code class="inline-code">adventure-manager.ts</code> file forms the backbone of Stellar Engine’s operational oversight and quest orchestration. It efficiently manages adventure states and user interaction with quests. Its <code class="inline-code">initializeAdventure</code> method constructs narratives and generates quests, while <code class="inline-code">exploreQuest</code> allows players to venture into specific tasks, tightly integrating with quest prerequisites.  </p>
<p>A notable mechanism, <code class="inline-code">progressPercentage</code>, visualizes a player’s quest completion progress, enhancing mission clarity. Moreover, the <code class="inline-code">generateQuestContent</code> function harnesses dynamic storytelling to tailor quest experiences. Lastly, methods like <code class="inline-code">markQuestCompleted</code> ensure that mission logs remain reliable by identifying completed challenges.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Constructs narrative and links context-sensitive quests.  </li>
<li><code class="inline-code">exploreQuest</code>: Validates and allows progression through selected quests.  </li>
<li><code class="inline-code">progressPercentage</code>: Tracks and calculates progress metrics.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(   
  projectInfo: ProjectInfo,  
  theme: AdventureTheme,   
  projectPath?: string,   
  customThemeData?: CustomThemeData  
): Promise&lt;string&gt; {  
  this.state.reset();  
  this.state.projectInfo = projectInfo;  
  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);  
  return this.formatStoryWithQuests({...storyResponse, quests: this.state.quests});  
}  
</code></pre>
<p>This method designs a cohesive exploration narrative using available project data and theme selection—fueling the engine’s quest generation.  </p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {  
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);  
  const quest = this.findQuest(sanitizedChoice);  
  if (!quest) {  
    return this.createNotFoundResult();  
  }  
  return await this.executeQuest(quest);  
}  
</code></pre>
<p>This function permits galactic adventurers to concretely step into their chosen quest while adhering to mission prerequisites.  </p>
<pre><code class="language-typescript">get progressPercentage(): number {  
  return this.quests.length &gt; 0   
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)  
    : 0;  
}  
</code></pre>
<p>As the captain’s progress beacon, this calculation determines how much of the Repository’s stability has been restored.  </p>
<hr>
<h3><span class="header-prefix">packages/core/src/adventure/story-generator.ts:</span> Dynamic Quest Creation</h3>
<p>The <code class="inline-code">story-generator.ts</code> file powers the narrative engine, constructing immersive mission stories for the Stellar Repository. It constructs the overarching &quot;Stellar Engine&quot; narrative with methods like <code class="inline-code">generateStoryAndQuests</code> and <code class="inline-code">generateQuestContent</code>. Critical to the repository’s revival, this module converts static context into thrilling space expeditions tailored to each explorer’s journey.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndQuests</code>: Generates complete narratives and integrates corresponding quests.  </li>
<li><code class="inline-code">parseMarkdownToStoryResponse</code>: Converts markdown-based content into structured adventures.  </li>
<li><code class="inline-code">generateQuestContent</code>: Builds quest-specific context pipelines for exploration.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">async generateStoryAndQuests(  
  projectInfo: ProjectInfo,   
  theme: AdventureTheme,  
  projectPath?: string  
): Promise&lt;StoryResponse&gt; {  
  const validatedTheme = this.validateTheme(theme);  
  return await this.generateWithLLM(projectInfo, validatedTheme);  
}  
</code></pre>
<p>This method aligns stellar operational themes to validate, generate, and dock vivid narratives into the Galactic Command.  </p>
<pre><code class="language-typescript">function parseMarkdownToStoryResponse(markdownContent: string): StoryResponse {  
  const tokens = marked.lexer(markdownContent);  
  const quests: Quest[] = [];  
  tokens.forEach(token =&gt; {  
    if (token.type === &#39;heading&#39; &amp;&amp; token.depth === 3) {  
      quests.push({title: token.text, description: &#39;&#39;});  
    }  
  });  
  return {title: &#39;Adventure&#39;, story: markdownContent, quests};  
}  
</code></pre>
<p>This function is an interstellar parser, translating narrative markdown into a structured sequence for quest assignments.  </p>
<pre><code class="language-typescript">async generateQuestContent(  
  quest: Quest,  
  theme: AdventureTheme,  
  codeContent: string  
): Promise&lt;QuestContent&gt; {  
  const prompt = loadQuestContentPrompt({theme, adventureTitle: quest.title, codeContent});  
  const response = await this.llmClient.generateResponse(prompt);  
  return {adventure: response.content, codeSnippets: [], hints: []};  
}  
</code></pre>
<p>With its cosmic computation capacity, this method generates thematic, context-sensitive mission data for Stellar Engine operatives.  </p>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Handling Configurations</h3>
<p>This configuration module anchors the Galactic Command’s operations to project-specific requirements. It ensures quests align with the actual Repository structure. Methods like <code class="inline-code">parseAdventureConfig</code> equip adventurers with targeted configurations, while <code class="inline-code">formatAdventureConfigForPrompt</code> synthesizes clean data summaries suited for narrative generation.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Decodes and validates the repository’s adventure template.  </li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Distills explanatory content for quests.  </li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Retrieves relevant operational pathways for quest execution.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {  
  const raw = loadAdventureConfig(projectPath);  
  return raw ? JSON.parse(raw) : null;  
}  
</code></pre>
<p>This method decodes adventure metadata to deepen context around Stellar Engine’s failing subsystems.  </p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {  
  const parsed = parseAdventureConfig(projectPath);  
  if (!parsed || typeof parsed !== &#39;object&#39;) return &#39;&#39;;  
  return `### Quest Structure\n\n${parsed}`;  
}  
</code></pre>
<p>This formatter crafts concise summaries for efficient quest-oriented decision-making, spotlighting affected repository zones.  </p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {  
  const parsed = parseAdventureConfig(projectPath);  
  return parsed ? Object.keys(parsed).map(key =&gt; parsed[key].path) : [];  
}  
</code></pre>
<p>Unique coordinates (file paths) of failing systems are pinpointed to improve operational diagnostics and exploration.  </p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Progress Beacon</strong>: Use <code class="inline-code">progressPercentage</code> to measure repository restoration efforts.  </li>
<li><strong>Quest Integrity</strong>: <code class="inline-code">generateQuestContent</code> dynamically adapts to failing systems&#39; intensity.  </li>
<li><strong>Configuration Bridge</strong>: Always validate configuration edits using <code class="inline-code">parseAdventureConfig</code>.</li>
</ul>
<hr>
<p>Captain, the Stellar Engine’s control systems await your intervention. Onward to the repository&#39;s heart—restore cosmic harmony! 🚀</p>
<p>🚀 The crew has triumphantly ignited the Stellar Engine, propelling the mission to cosmic greatness—20% of our interstellar journey complete and the stars are cheering you onward! ⭐💎</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: Galactic Analysis Relay →</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>