<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: Forge of Quests - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Starship Lumina: Expedition of Code Horizons</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: Forge of Quests</h1>
<hr>
<p>The crew aboard the <strong>Starship Lumina</strong> surges forward into the heart of the digital galaxy, driven by their mission to illuminate the enigmatic paths of chaotic data clusters. Their navigation AI, empowered by cutting-edge <strong>LLM</strong> algorithms, guides them toward an ancient repository. As the ship ventures deeper into this cosmic labyrinth, Captain Verlain issues a command: explore the core mechanics behind quest generation and management, uncovering secrets that intertwine storytelling and technology. The <strong>Forge of Quests</strong> awaits, glowing with potential as light-years of exploration unfold.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a>: Adventure Orchestration System</h3>
<p>The <strong>Adventure Manager</strong> acts as both navigator and pilot for the <strong>Starship Lumina</strong>, orchestrating a seamless experience for users embarking on themed coding adventures. This file contains the architectural backbone for initializing the adventure, handling quest selection, and executing exploration missions. The <code class="inline-code">AdventureManager.initializeAdventure()</code> method sets the stage by leveraging the repository&#39;s context and combining it with creative <strong>LLM-powered storytelling</strong>. Meanwhile, <code class="inline-code">AdventureManager.exploreQuest()</code> guides users through quests by validating their choices and ensuring progress tracking aligns with their journey. These processes depend on the dynamically updated <code class="inline-code">AdventureState</code>‚Äîcontaining the adventure&#39;s story, quests, themes, and project metadata.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure()</code> harnesses <strong>LLM</strong> to set project context and generate storylines.</li>
<li><code class="inline-code">AdventureManager.exploreQuest()</code> facilitates user-driven quest exploration with progress management.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code> calculates the completion percentage to motivate explorers.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a>: The Forge of Narratives</h3>
<p>This file ignites thematic storytelling and quest creation through advanced techniques. By leveraging the <code class="inline-code">StoryGenerator.generateStoryAndQuests()</code>, the system creates a cohesive narrative while ensuring quests align meaningfully with the provided codebase. The function <code class="inline-code">StoryGenerator.generateQuestContent()</code> dives deeper, tailoring content with precise code snippets and explanations. The generator utilizes <strong>LLM prompts</strong> enriched with coding context and theme vocabulary, ensuring that each quest carries the magic of exploration and discovery.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">StoryGenerator.generateStoryAndQuests()</code> combines raw repository data to craft unique stories and quests.</li>
<li><code class="inline-code">StoryGenerator.generateQuestContent()</code> builds code-focused narrative content for meaningful engagement.</li>
<li>Built-in structure ensures quests align with user goals and project complexities.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a></h3>
<pre><code class="language-typescript">export class AdventureManager {
  async initializeAdventure(
    projectInfo: ProjectInfo, 
    theme: AdventureTheme, 
    projectPath?: string,
    customThemeData?: CustomThemeData
  ): Promise&lt;string&gt; {
    this.state.reset();
    this.state.projectInfo = projectInfo;
    this.state.currentTheme = theme;
    this.state.projectPath = projectPath || process.cwd();
    
    if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
      this.storyGenerator.setCustomTheme(customThemeData);
    }
    
    const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
    this.state.title = storyResponse.title;
    this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
    this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
    this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

    return this.formatStoryWithQuests({
      ...storyResponse,
      quests: this.state.quests
    });
  }
}
</code></pre>
<p>This sequence resembles setting the foundation for a space mission, where the captain gathers crew and coordinates the ship&#39;s systems for the journey ahead.</p>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a></h3>
<pre><code class="language-typescript">export interface QuestContent {
  adventure: string;
  fileExploration?: string;
  codeSnippets: CodeSnippet[];
  hints: string[];
}

export class StoryGenerator {
  async generateStoryAndQuests(projectInfo: ProjectInfo, theme: AdventureTheme, projectPath?: string): Promise&lt;StoryResponse&gt; {
    const repomixContent = projectInfo.repomixContent || &#39;No repomix content available&#39;;
    let adventureGuidance = &#39;&#39;;
    if (this.projectPath) {
      const formattedConfig = formatAdventureConfigForPrompt(this.projectPath);
      if (formattedConfig) {
        adventureGuidance = formattedConfig;
      }
    }

    const prompt = loadStoryGenerationPrompt({
      theme,
      repomixContent,
      ...(adventureGuidance &amp;&amp; { adventureGuidance }),
      ...(this.customThemeData &amp;&amp; { customThemeData: this.customThemeData })
    });

    const response = await this.withTimeout(
      this.llmClient.generateResponse(prompt, { maxTokens: LLM_MAX_TOKENS_STORY })
    );

    let parsed = parseMarkdownToStoryResponse(response.content.trim());
    StoryResponseSchema.parse(parsed);
    this.currentStoryContent = typeof parsed.story === &#39;string&#39; ? parsed.story : parsed.story.content;

    return parsed;
  }
}
</code></pre>
<p>The code operates like a stellar forge, melting raw data into brilliant quests that illuminate cosmic pathways for brave explorers.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>The journey through <code class="inline-code">AdventureManager</code> highlights the importance of state management when orchestrating complex systems.</li>
<li>Exploring <code class="inline-code">StoryGenerator</code> reveals how structured prompts can enhance user-driven quest narratives.</li>
<li>Dive deeper into file configurations to understand how targeted storytelling improves engagement for repository exploration.</li>
</ul>
<hr>
<p>Mission Control confirms a stellar leap forward: Quest 2&#39;s Forge of Quests has been completed, propelling your cosmic journey to 20%‚Äîfull thrusters ahead toward the stars! üöÄ‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: Galaxy Mapper ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>