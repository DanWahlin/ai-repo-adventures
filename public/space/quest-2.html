<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Quest Forge - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Codex: Adventures Across the Codebase Nebula</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Quest Forge</h1>
<hr>
<p>The Refactored Voyager glides silently through the Codebase Nebula, its path illuminated by distant starlight. This time, your crew is summoned to ‚ÄúThe Quest Forge,‚Äù a massive cosmic station suspended in the orbit of a black hole. Here, the secrets lie hidden within the quest generation engine. Your goal: forge a powerful, interconnected storyline that unlocks the mysteries of the ancient galactic repository. The journey involves decoding structured quests, validating paths, and ultimately setting the narrative flow. Failure could plunge your exploration into chaos, as the black hole‚Äôs pull grows stronger with time.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a>: Quest Assembly and Validation</h3>
<p>This file serves as the nucleus of the quest generation engine. The <code class="inline-code">AdventureManager</code> class orchestrates the dynamic creation of quests and manages their lifecycle within the narrative. It leverages <code class="inline-code">initializeAdventure</code> to inject project context and themes to craft quests. Additionally, <code class="inline-code">exploreQuest</code> handles navigation and validation of specific quests chosen by the player. The <code class="inline-code">progressPercentage</code> from <code class="inline-code">AdventureState</code> ensures players remain mindful of their mission status.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Generates story and quests dynamically.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Handles user quest selection and execution.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Tracks overall exploration progress.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a></h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();

  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);

  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>Like a starship‚Äôs command deck setting its coordinates, this function assembles the adventure context, merging themes and injecting content dynamically into the narrative.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);

  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }

  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>This function validates user input and navigates the chosen quest just as a navigator aligns the starship‚Äôs trajectory in response to the crew‚Äôs commands.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>This method resembles plotting your coordinates on a galactic map, calculating how far your crew has ventured into the cosmic unknown.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">getProgress</code> to check on advancement before proceeding to unfamiliar quests.</li>
<li>Custom themes expand narrative depth; consider applying one for a richer experience.</li>
<li>Look for completed quests in the cache to save processing time on repetitive execution.</li>
</ul>
<hr>
<p>The Quest Forge glows brighter with every completed mission. Your crew‚Äôs ingenuity shapes the galactic narrative, forging pathways into the cosmic mysteries that await. üõ†Ô∏è‚ú®</p>
<p>Stellar work navigating the cosmic currents, Cadet‚ÄîQuest 2: The Quest Forge is complete, propelling your mission to 20% galactic mastery‚Äîonward to new frontiers! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>