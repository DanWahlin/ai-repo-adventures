<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Quest Forge - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Galactic Odyssey: The Codebase Chronicles</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Quest Forge</h1>
<hr>
<p>The AI Repository Nexus hums with cosmic energy as explorers gather around the digital forge, their mission clear: to craft interstellar adventures capable of unlocking the hidden mysteries within distant repositories. The Repomix Engines are at full throttle, while the MCP Command Module streams vital protocols. Your starship awaits‚Äîcalibrated for precision exploration, ready to venture into uncharted realms of code. Prepare to wield tools of creativity and navigate the galactic maze of interconnected nodes as the Quest Forge beckons. The future of the Nexus is in your hands‚Äîchart your course wisely!  </p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure Orchestration</h3>
<p>This file is the cosmic command center of the Nexus, where the AdventureManager class orchestrates the flow of stellar narratives. At the heart of the system, the <code class="inline-code">initializeAdventure()</code> method configures the digital galaxy for exploration: defining the project&#39;s theme, resetting previous adventures, and leveraging the StoryGenerator to create quests informed by the Repomix repository. The <code class="inline-code">exploreQuest()</code> method guides astronauts in executing quests via sanitized user input and provides progress tracking critical to interstellar storytelling. AdventureState acts like mission telemetry, recording completion percentages and caching quest-specific data to ensure seamless transitions between narratives.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Boots up interstellar adventures from theme selection to quest creation.  </li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Validates user input and executes their selected quest.  </li>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Calculates adventure progress using completed quests versus total missions.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Adventure Configurations</h3>
<p>This file acts as the celestial blueprint for adventures. The <code class="inline-code">parseAdventureConfig()</code> method decodes configuration files, enabling structured and guided exploration of repositories, while <code class="inline-code">extractUniqueFilePaths()</code> diligently validates and extracts all project-related paths referenced in the configuration file. The <code class="inline-code">formatAdventureConfigForPrompt()</code> aligns these structured insights into prompts fit for the MCP Command Module. Each function ensures resources from the adventure remain firmly tethered to authentic code sections, preventing astral navigation errors.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Interprets <code class="inline-code">adventure.config.json</code> files within repositories for structured storytelling.  </li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Validates and gathers all usable paths defined in the configuration file.  </li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Converts raw adventure details into prompts for mission execution.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/adventure/story-generator.ts:</span> LLM-Powered Narratives</h3>
<p>The StoryGenerator is the digital bard of the Nexus, weaving adventures using connected repositories and AI insight. The <code class="inline-code">generateStoryAndQuests()</code> method constructs narratives tailored to themes such as space exploration, expertly combining data analytics with thematic storytelling. Meanwhile, <code class="inline-code">generateQuestContent()</code> populates each adventure with detailed code exploration, ensuring that astronauts uncover innovative strategies for repository management. From repomix summaries to targeted content, this file is the secret behind the Nexus&#39;s legendary tales.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndQuests</code>: Injects repository context into theme-specific adventure narratives.  </li>
<li><code class="inline-code">generateQuestContent</code>: Builds in-depth quests with real code snippets aiding explorers in decoding mysteries.  </li>
<li><code class="inline-code">removeLLMMetaCommentary</code>: Chisels the raw AI-generated text into coherent content.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">export class AdventureManager {  
  private state: AdventureState = new AdventureState();  
  private storyGenerator: StoryGenerator;  

  constructor() {  
    this.storyGenerator = new StoryGenerator();  
  }  

  async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {  
    const sanitizedChoice = this.validateAndSanitizeChoice(choice);  
    const quest = this.findQuest(sanitizedChoice);  
    if (!quest) {  
      return this.createNotFoundResult();  
    }  
    return await this.executeQuest(quest);  
  }  
}  
</code></pre>
<p>This acts like the starship navigator, directing explorers to the correct cosmic waypoints based on their input choices.  </p>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {  
  const raw = loadAdventureConfig(projectPath);  
  if (!raw) return null;  
  try {  
    return JSON.parse(raw);  
  } catch {  
    return null;  
  }  
}  
</code></pre>
<p>This function decodes the star maps of adventure configuration, ensuring explorers have valid guidance before launching their missions.  </p>
<h3>packages/core/src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">async generateStoryAndQuests(  
  projectInfo: ProjectInfo,  
  theme: AdventureTheme  
): Promise&lt;StoryResponse&gt; {  
  const repomixContent = projectInfo.repomixContent || &quot;No repomix content available&quot;;  
  const prompt = loadStoryGenerationPrompt({ theme, repomixContent });  

  const response = await this.llmClient.generateResponse(prompt);  
  return parseMarkdownToStoryResponse(response.content);  
}  
</code></pre>
<p>This function transforms raw repository data into thematic adventure narratives, combining the precision of code analysis with the majesty of storytelling.  </p>
<h2>Helpful Hints</h2>
<ul>
<li>Always validate adventure configurations to avoid navigating faulty star maps.  </li>
<li>Consider exploring targeted files referenced in a quest for a deeper understanding of repository highlights.  </li>
<li>Dive into theme-specific narratives like space voyages to add flavor while exploring repository mechanics.</li>
</ul>
<hr>
<p>Completion unlocked! Chart your onward path or venture deeper into the mysteries of the Nexus.</p>
<p>Stellar work, Cadet‚Äîyour completion of Quest 2: The Quest Forge has launched your learning mission into orbit at warp speed, with 20% of your cosmic journey now illuminated by your brilliance! ‚≠êüöÄ‚ú®</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: The Engines of Insight ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>