<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: Navigating the Server Nexus - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Galactic Code Voyages: The Quest for Stellar Automation</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: Navigating the Server Nexus</h1>
<hr>
<p>As your starship, the <em>Galactic Refactorer</em>, approaches the Server Nexus‚Äîa hub of fragmented interstellar code bases‚Äîa critical mission unfolds. Tasked with unifying disparate repositories into a cohesive system, your crew begins analyzing the underpinnings of web generation pipelines and asset distribution systems. Stellar storms threaten components as you dive into the mechanics of template rendering and navigational asset orchestration. The Server Nexus must become a shining beacon of efficiency for the Universal Code Alliance‚Äîyour success here will guide other missions. Brace for anomalies as cosmic files shift under your command!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Template Alignment</strong>: How does <code class="inline-code">TemplateEngine.replacePlaceholders</code> perform placeholder transformations, and what patterns are optimized for rendering dynamic pages?</li>
<li>‚ö° <strong>Page Rendering Astrometry</strong>: How does <code class="inline-code">HTMLAdventureGenerator.buildQuestHTML</code> generate navigable content, and what role does prior quest indexing play in space-themed navigation?</li>
<li>üõ°Ô∏è <strong>Asset Copilot Safety</strong>: What measures does <code class="inline-code">AssetManager.copyGlobalAssets</code> implement to prevent duplication or ensure access across multi-theme missions?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Template Engine Mechanics</h3>
<p>The <code class="inline-code">TemplateEngine</code> is a core component responsible for rendering HTML pages with a central theme. It dynamically replaces placeholders in templates to generate content-rich pages compatible with interstellar exploration systems. Leveraging template caching mechanisms reduces processing time for repeated requests, key for handling unpredictable stellar conditions. Understanding its implementation shines a light on how quests transform into readable, interactive adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">replacePlaceholders</code>: Replaces dynamic placeholders like <code class="inline-code">{{CONTENT}}</code> with actual variable values, enabling runtime customization for mission-specific data. Critical for adaptive quest generation.</li>
<li><code class="inline-code">renderPage</code>: Combines base and content templates, ensuring full page rendering with dynamically populated variables. Supports layered storytelling and modular frameworks.</li>
<li><code class="inline-code">loadTemplate</code>: Implements caching to preemptively store templates and avoid system bottlenecks, improving resilience during stellar file downloads.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">/**
 * Replace placeholders in template with variables
 */
private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Replaces predefined variable placeholders dynamically, enabling content injection.</li>
<li>Utilizes regular expressions to identify placeholders, supporting extensibility.</li>
<li>Facilitates adaptive rendering for missions, ensuring thematic alignment with quest data.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Render a complete page using base template + content template
 */
renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Ensures hierarchical rendering, combining base-page structure with mission-specific data.</li>
<li>Enhances composability for multi-theme generation.</li>
<li>Handles variable population centrally, facilitating reusable templates for space narratives.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Load a template file with caching
 */
private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Prevents redundant file reads with template caching for high-frequency quests.</li>
<li>Ensures robust file handling through error management.</li>
<li>Optimizes resource access during interstellar connectivity fluctuations.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Quest HTML Assembly</h3>
<p>The <code class="inline-code">HTMLAdventureGenerator.buildQuestHTML</code> method is a pivotal mechanism for shaping individual quest pages. It dynamically adjusts navigational support, ensuring thematic coherence across neighboring quests while establishing continuation links. Understanding its functionality unveils how quest data morphs into captivating adventure narratives during rendering.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">buildQuestHTML</code>: Generates a quest page with context-sensitive navigation, linking prior and next quests seamlessly. Crucial for ensuring user engagement throughout stellar adventures.</li>
<li><code class="inline-code">startHttpServer</code>: Launches an HTTP server for hosting adventures in real-time from the output directory. Operation-critical for showcasing generated quests interactively.</li>
<li><code class="inline-code">generateAdventure</code>: Integrates story generation, theme enrichment, and template assembly into a unified workflow, aligning multiple content pipelines for interstellar missions.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">/**
 * Build a complete HTML page for a single quest
 */
private buildQuestHTML(quest: QuestInfo, content: string, questIndex: number): string {
  const prevQuest = questIndex &gt; 0 ? this.quests[questIndex - 1] : null;
  const nextQuest = questIndex &lt; this.quests.length - 1 ? this.quests[questIndex + 1] : null;

  let bottomNavigation = &#39;&#39;;
  const isLastQuest = questIndex === this.quests.length - 1;
  
  if (prevQuest || nextQuest || isLastQuest) {
    let navClass = &#39;quest-navigation quest-navigation-bottom&#39;;
    const hasCompleteButton = isLastQuest; 

    if (prevQuest &amp;&amp; nextQuest) { 
    } else if (prevQuest &amp;&amp; !nextQuest &amp;&amp; !hasCompleteButton) {
      navClass += &#39; nav-prev-only&#39;;
    } else if (!prevQuest &amp;&amp; nextQuest) {
      navClass += &#39; nav-next-only&#39;;
    } else if (!prevQuest &amp;&amp; hasCompleteButton) {
      navClass += &#39; nav-next-only&#39;;
    }
    bottomNavigation = `
    &lt;div class=&quot;${navClass}&quot;&gt;`;
    
    if (prevQuest) {
      bottomNavigation += `
      &lt;a href=&quot;${prevQuest.filename}&quot; class=&quot;prev-quest-btn&quot;&gt;‚Üê Previous: Quest ${questIndex}&lt;/a&gt;`;
    }
    
    if (nextQuest) {
      bottomNavigation += `
      &lt;a href=&quot;${nextQuest.filename}&quot; class=&quot;next-quest-btn&quot;&gt;Next: Quest ${questIndex + 2} ‚Üí&lt;/a&gt;`;
    } else if (isLastQuest) {
      bottomNavigation += `
      &lt;a href=&quot;summary.html&quot; class=&quot;next-quest-btn complete-btn&quot;&gt;Complete Adventure ‚Üí&lt;/a&gt;`;
    }
    bottomNavigation += `
    &lt;/div&gt;`;
  }

  const variables = {
    ...this.getCommonTemplateVariables(),
    PAGE_TITLE: this.stripHTML(this.formatInlineMarkdown(quest.title)),
    QUEST_CONTENT: this.formatMarkdown(content),
    BOTTOM_NAVIGATION: bottomNavigation
  };

  return this.templateEngine.renderPage(&#39;quest-template.html&#39;, variables);
}
</code></pre>
<ul>
<li>Constructs quest-specific HTML pages using modular templates and data injection.</li>
<li>Links adjacent quests dynamically, supporting linear progression through space missions.</li>
<li>Builds thematic navigation systems for continuity across interconnected adventures.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Cross-Theme Asset Distribution</h3>
<p>The <code class="inline-code">AssetManager.copyGlobalAssets</code> method ensures that shared assets are distributed consistently across themes. These files form the backbone of navigation and visual coherence, safeguarding accessibility during cross-theme exploration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Handles the distribution of shared images and files for seamless integration across individual themes. Prevents duplication during multi-theme adventures.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Sets up interactive navigational components to simplify progression through quests. Essential for interstellar content discovery.</li>
<li><code class="inline-code">copyImages</code>: Ensures proper image migration, enabling visual consistency within generated quests.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">/**
 * Copy global shared assets for multi-theme generation
 */
copyGlobalAssets(outputDir: string): void {
  try {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
    const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
    fs.mkdirSync(targetImagesDir, { recursive: true });

    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });
    
    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
    globalImages.forEach(file =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
      if (fs.existsSync(sourcePath)) {
        const targetPath = path.join(globalSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      }
    });

    const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
    if (fs.existsSync(headerImageSource)) {
      const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
      fs.copyFileSync(headerImageSource, headerImageTarget);
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global images&#39;));
  }
}
</code></pre>
<ul>
<li>Implements error resilience during asset migration from source directories.</li>
<li>Consolidates shared assets, ensuring multi-theme accessibility without duplication.</li>
<li>Facilitates inter-operable asset use for cosmic quest deployment.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">loadTemplate</code> for debugging template issues during dynamic rendering processes.</li>
<li>Review <code class="inline-code">prevQuest</code> and <code class="inline-code">nextQuest</code> logic in <code class="inline-code">buildQuestHTML</code> for seamless page navigation debugging.</li>
<li>Test <code class="inline-code">copyGlobalAssets</code> under multiple themes to ensure shared files integrate without redundancy.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Mission accomplished, Cadet! You&#39;ve skillfully charted the treacherous Server Nexus‚Äîone giant leap for your learning journey and a dazzling step toward interstellar mastery! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>