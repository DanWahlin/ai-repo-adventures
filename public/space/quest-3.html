<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 3: Adventure Core Generator - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Galactic Chronicles: The AI Odyssey</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 3: Adventure Core Generator</h1>
<hr>
<p>In the heart of the digital cosmos, the <em>Cerebral Voyager</em> enters the challenging sector of the infinite code nebula: the Adventure Core Generator. Your mission as captain is to harmonize the <em>Cerebral Voyager</em>‚Äôs advanced AI systems to meticulously analyze, chart, and strategize with powerful programming constructs found across this region. With alien-like files and cosmic pipelines to decipher, you must guide your crew to integrate these powerful elements seamlessly to ensure the mission‚Äôs success. The sector‚Äôs stability depends on your leadership in harnessing this core.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Adventure Initialization</strong>: How does the <code class="inline-code">initializeAdventure</code> method set up the core process for theme-based exploration? What parameters does it rely on and why?</li>
<li>‚ö° <strong>Interstellar Missions</strong>: How does <code class="inline-code">exploreQuest</code> handle quest selection? What validation mechanisms ensure only accurate choices are analyzed?</li>
<li>üõ°Ô∏è <strong>Progress Tracking Systems</strong>: How does the <code class="inline-code">progressPercentage</code> property dynamically calculate mission progress? What ensures accuracy in this calculation?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Core adventure management and mission orchestration</h3>
<p>The <code class="inline-code">adventure-manager.ts</code> file is the cornerstone of handling the starship&#39;s exploratory missions. It defines the AdventureManager class, which oversees the lifecycle of quests, from initialization to execution. This file also maintains the mission&#39;s state through <code class="inline-code">AdventureState</code>, and includes methods like <code class="inline-code">initializeAdventure</code> for setting up an exploration, <code class="inline-code">exploreQuest</code> for handling player-selected quests, and <code class="inline-code">progressPercentage</code> for dynamically calculating progress. These components are vital for orchestrating the galaxy-wide AI-led exploration process.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Establishes the adventure by handling project context, selected themes, and generating dynamic narratives with custom settings.</li>
<li><code class="inline-code">exploreQuest</code>: Validates a quest selection, ensuring logical alignment and executing the selected mission.</li>
<li><code class="inline-code">progressPercentage</code>: Computes and returns the progress dynamically as a percentage of completed quests.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();

  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(
    projectInfo, theme, this.state.projectPath
  );
  
  this.state.title = storyResponse.title;
  this.state.story = storyResponse.story;
  this.state.quests = this.mergeQuestFilesFromConfig(
    storyResponse.quests, this.state.projectPath
  );

  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<ul>
<li>Initializes the adventure by resetting state and setting up context for the selected project and theme.</li>
<li>Leverages <code class="inline-code">storyGenerator.generateStoryAndQuests</code> for dynamic narrative generation.</li>
<li>Merges quest details with adventure configuration files to align game progression.</li>
<li>Ensures flexibility with custom themes and dynamic project paths.</li>
</ul>
<hr>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);

  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }

  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<ul>
<li>Validates the player‚Äôs quest choice using input sanitization.</li>
<li>Differentiates progress-related requests from actual exploration tasks.</li>
<li>Retrieves or executes the selected quest, relying on validation to avoid errors.</li>
<li>Highlights robust error handling through <code class="inline-code">createNotFoundResult</code>.</li>
</ul>
<hr>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<ul>
<li>Computes progress dynamically as a percentage, ensuring consistent monitoring of mission state.</li>
<li>Uses the ratio of completed quests to total quests to calculate progress.</li>
<li>Ensures accurate handling of scenarios with zero quests.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Make sure to investigate how <code class="inline-code">mergeQuestFilesFromConfig</code> integrates files into the adventure for full narrative immersion.</li>
<li>Look into how <code class="inline-code">storyGenerator.generateStoryAndQuests</code> enables dynamic storytelling to suit different themes.</li>
<li>Consider exploring error-handling paths in <code class="inline-code">createNotFoundResult</code> for scenarios when quests are missing.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>üöÄ Stellar achievement unlocked! Quest 3: Adventure Core Generator is completed‚Äîyour cosmic trajectory is now 40% toward the stars; keep igniting brilliance among the constellations! ‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-2.html" class="prev-quest-btn">‚Üê Previous: Quest 2</a>
        <a href="quest-4.html" class="next-quest-btn">Next: Quest 4 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>