<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 3: Stellar Code Navigator - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Repository Chronicles</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 3: Stellar Code Navigator</h1>
<hr>
<p>Embark on the next chapter of your mission aboard the starship <em>Codexus</em>! Your crew is tasked with unraveling the mysteries hidden within uncharted cosmic repositories. Using advanced <code class="inline-code">code scanners</code> and AI-assisted navigators, your goal is to decipher cryptic highlights from the expedition files. By analyzing these essential components, the <em>Codexus</em> will convert the chaotic scatter of digital nebulae into harmonious star maps for galactic unity. But beware‚Äîthe deeper you explore, the more complex these constellations of code become. Will you navigate this stellar maze successfully?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/analyzer/repo-analyzer.ts:</span> Code Analysis Engine for Repository Context</h3>
<p>This file houses the <code class="inline-code">RepoAnalyzer</code>, a critical module tasked with simplifying digital galaxies into manageable units of structured output from the codebase. Its capabilities include validating input paths, optimizing content for AI-based missions, and managing repository context generation. Notable highlights include <code class="inline-code">generateRepomixContext</code>, responsible for galaxy-wide analysis; <code class="inline-code">captureRepomixStdout</code>, the communication link to external code explorers; and <code class="inline-code">validateProjectPath</code>, a security-oriented module ensuring safe celestial travel.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">RepoAnalyzer.generateRepomixContext</code>: Manages repository analysis workflows.</li>
<li><code class="inline-code">RepoAnalyzer.captureRepomixStdout</code>: Handles subprocess communication for analyzing repositories.</li>
<li><code class="inline-code">RepoAnalyzer.validateProjectPath</code>: Ensures safety during input processing.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/analyzer/repo-analyzer.ts</h3>
<pre><code class="language-typescript">async generateRepomixContext(projectPath: string, options: RepomixOptions = {}): Promise&lt;string&gt; {
  this.validateProjectPath(projectPath);

  const configuredFiles = extractUniqueFilePaths(projectPath);

  if (configuredFiles.length &gt; 0) {
    try {
      return await this.generateOptimizedContent(projectPath, configuredFiles);
    } catch (error) {
      console.warn(`Optimization failed; fallback initiated.`);
    }
  }

  return await this.captureRepomixStdout([&#39;.&#39;], projectPath, options);
}
</code></pre>
<p>Like the captain strategizing a galactic exploration route, this function orchestrates repository analysis while falling back gracefully when optimizations fail.</p>
<pre><code class="language-typescript">private async captureRepomixStdout(
  directories: string[],
  cwd: string,
  options: CliOptions
): Promise&lt;string&gt; {
  return new Promise((resolve, reject) =&gt; {
    // Execute subprocess for precise galaxy scans
    const args = [...buildRepomixArguments(directories, options)];
    const repomix = spawn(&#39;npx&#39;, [&#39;repomix&#39;, ...args], { cwd });

    repomix.stdout.on(&#39;data&#39;, (data) =&gt; resolve(data.toString()));
    repomix.stderr.on(&#39;data&#39;, (data) =&gt; reject(data.toString()));
  });
}
</code></pre>
<p>This function is akin to monitoring a stellar data beam, ensuring seamless transmission from the subprocesses scanning the nebula.</p>
<pre><code class="language-typescript">private validateProjectPath(projectPath: string): void {
  if (!projectPath || typeof projectPath !== &#39;string&#39;) {
    throw new Error(&#39;Invalid input.&#39;);
  }
  const normalizedPath = path.resolve(projectPath);
  if (!normalizedPath) throw new Error(&#39;Path invalid or empty.&#39;);
}
</code></pre>
<p>This validation ensures explorers chart recognized and secure digital regions within the repository.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/llm/llm-client.ts:</span> AI-Assisted Data Analysis</h3>
<p>The <code class="inline-code">LLMClient</code> module stands out as an interface for interacting with large language models, integrating OpenAI or Azure OpenAI systems. This class handles communications with AI for generating responses, including managing API configurations and handling different operational models. Key highlights include the overarching <code class="inline-code">generateResponse</code>, the foundational <code class="inline-code">constructor</code>, and API-specific helper <code class="inline-code">getApiKey</code> for secure operations in the vast digital cosmos.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLMClient.generateResponse</code>: Gathers insights from the AI navigator.</li>
<li><code class="inline-code">LLMClient.constructor</code>: Establishes initial configurations for exploration.</li>
<li><code class="inline-code">LLMClient.getApiKey</code>: Retrieves API keys for AI systems.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/llm/llm-client.ts</h3>
<pre><code class="language-typescript">async generateResponse(prompt: string, options?: LLMRequestOptions): Promise&lt;LLMResponse&gt; {
  try {
    const requestParams = this.buildRequestParams(prompt, options);
    const completion = await this.executeRequest(requestParams);
    const content = this.validateResponse(completion);
    return { content };
  } catch (error) {
    throw new Error(`LLM request failed: ${error.message}`);
  }
}
</code></pre>
<p>This function is the AI navigator, processing prompts as stellar signals and returning navigational insights across the digital constellation.</p>
<pre><code class="language-typescript">constructor() {
  this.model = LLM_MODEL;
  const apiKey = this.getApiKey();
  this.client = new OpenAI({
    apiKey,
    baseURL: LLM_BASE_URL,
  });
}
</code></pre>
<p>As the ship‚Äôs engine initialization phase, this constructor ensures all mission-critical configurations for AI interactions are engaged.</p>
<pre><code class="language-typescript">private getApiKey(): string {
  if (LLM_BASE_URL.includes(&#39;azure&#39;)) {
    if (!GITHUB_TOKEN) throw new Error(&#39;GITHUB_TOKEN is missing.&#39;);
    return GITHUB_TOKEN;
  }
  if (!LLM_API_KEY) throw new Error(&#39;LLM_API_KEY is missing.&#39;);
  return LLM_API_KEY;
}
</code></pre>
<p>This function is akin to validating hyperspace travel permits to ensure the crew can legally access external AI-assisted tools.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">generateRepomixContext</code> function as an entry point for analytical workflows when dealing with cosmic-scale repositories.</li>
<li><code class="inline-code">LLMClient.generateResponse</code> is crucial for transforming AI outputs into actionable intelligence‚Äîexplore its parameterization options for model-specific tweaks.</li>
<li>Ensure all API keys and environment variables like <code class="inline-code">LLM_BASE_URL</code> are correctly set before initiating intergalactic code analysis.</li>
</ul>
<hr>
<p>Your star charts have expanded, and the coding constellations are clearer. Proceed to the next adventure when ready!</p>
<p>Congratulations, Navigator! You&#39;ve successfully charted the stellar code map for Quest 3, propelling your learning mission to new cosmic heights‚Äîkeep that trajectory blazing, üöÄ‚≠êüíé!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-2.html" class="prev-quest-btn">‚Üê Previous: Quest 2</a>
        <a href="quest-4.html" class="next-quest-btn">Next: Quest 4 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>