<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuring the Galaxy - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Cosmic Code Chronicles: A Starship's Journey</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to dark mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuring the Galaxy</h1>
<hr>
<p>To achieve self-sustaining systems aboard the starship <em>Nebula Explorer</em>, your crew must align interconnected mechanisms‚Äîthe AI modules, cosmic data arrays, and mission interfaces‚Äîto balance precision and creativity. Your final mission thrusts you into the realm of configurations and themes, exploring systems that empower the starship&#39;s adaptive capabilities for generating tailored adventures. Chart your way through this galaxy of dynamic inputs and cosmic settings as you construct and fine-tune mechanisms that harmonize stellar engineering with thematic depth. This is the ultimate frontier to master.  </p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Stellar Calibration</strong>: How are adventure themes defined, validated, and retrieved to ensure alignment with user input?  </li>
<li>‚ö° <strong>Command Interface Operations</strong>: What are the primary mechanisms that parse, validate, and adapt command-line inputs for configurations?  </li>
<li>üõ°Ô∏è <strong>System Security Shielding</strong>: How do validation methods handle erroneous input and ensure safe handling of configuration data?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Defining Adventure Themes</h3>
<p>This file establishes the structure of motifs that inspire adventure generation, offering a unified source of truth for theme-related data. It encapsulates definitions, parsing mechanisms, and keyword-matching logic to translate user inputs into actionable data for the starship&#39;s adventure generation systems. By consolidating theme metadata, this file ensures consistent interfacing across systems, preventing thematic drift in implementations.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">ThemeDefinition</code>: Defines the structure for adventure themes, including display information, keywords, and descriptions, essential for guiding user selection.  </li>
<li><code class="inline-code">parseTheme</code>: Converts user input into a valid theme using input normalization and keyword matching, ensuring compatibility.  </li>
<li><code class="inline-code">getThemeByKey</code>: Retrieves themes by their unique key identifier, acting as a precise mapping mechanism for theme selection.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export interface ThemeDefinition {
  readonly id: number;
  readonly key: string;
  readonly displayName: string;
  readonly emoji: string;
  readonly description: string;
  readonly keywords: readonly string[];  
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}

export function getThemeByKey(key: string): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.key === key) || null;
}
</code></pre>
<ul>
<li><strong>What this code does:</strong>  <ul>
<li>The <code class="inline-code">ThemeDefinition</code> structure provides essential metadata for thematic integration, comprising unique identifiers and exploration keywords.  </li>
<li><code class="inline-code">parseTheme</code> is implemented as a cascading parser that ensures user inputs align with predefined keys, numerical IDs, or associated keywords.  </li>
<li><code class="inline-code">getThemeByKey</code> focuses on precise retrieval of themes via unique keys, enabling consistent inter-system communication.</li>
</ul>
</li>
<li><strong>Key techniques:</strong>  <ul>
<li>Use of normalized inputs ensures compatibility across varied user data formats.  </li>
<li>Cascading logic in <code class="inline-code">parseTheme</code> accommodates multiple input types‚Äîkeys, IDs, and keywords‚Äîimproving usability.  </li>
<li>Theme retrieval bolsters modularity, separating validation concerns from data extraction.</li>
</ul>
</li>
<li><strong>Connections:</strong>  <ul>
<li>Integrates seamlessly with validation systems to drive theme-related processing in missions.  </li>
<li>Facilitates dynamic adaptation of interface elements based on parsed themes.</li>
</ul>
</li>
<li><strong>Details to notice:</strong>  <ul>
<li>Keyword matching enhances flexibility, ensuring broader user accessibility during theme selection.  </li>
<li>The design avoids geographical or redundant mappings by adhering strictly to identifiers or metadata.</li>
</ul>
</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/theme-manager.ts:</span> Adapting Themes for Command Interfaces</h3>
<p>This file enables transmissive configuration pathways between user-selected themes and automated asset generation. By implementing methods to parse inputs, validate assets, and assemble configurations, it supports high-fidelity adaptation of themes at runtime. Through CSS generation and icon mapping, the Theme Manager transforms abstract data into tangible visual components.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseThemeArg</code>: Maps raw command-line arguments to valid theme identifiers, accommodating both direct and numeric inputs.  </li>
<li><code class="inline-code">generateThemeCSS</code>: Builds cohesive visual styles for each theme by combining assets and configurations.  </li>
<li><code class="inline-code">getThemeIcons</code>: Retrieves thematic icons to standardize branding across generated assets and user interfaces.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/theme-manager.ts</h3>
<pre><code class="language-typescript">parseThemeArg(themeArg: string): AdventureTheme | &#39;all&#39; | null {
  if (themeArg === &#39;all&#39;) return &#39;all&#39;;
  
  const validThemes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
  
  if (validThemes.includes(themeArg as AdventureTheme)) {
    return themeArg as AdventureTheme;
  }
  
  const themeNum = parseInt(themeArg);
  if (themeNum &gt;= 1 &amp;&amp; themeNum &lt;= 4) {
    return validThemes[themeNum - 1];
  }
  
  return null;
}

generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}

getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {
  const themeIcons = {
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },
    mythical: { theme: &#39;üè∞&#39;, quest: &#39;‚öîÔ∏è&#39; },
    ancient: { theme: &#39;üè∫&#39;, quest: &#39;üìú&#39; },
    developer: { theme: &#39;üíª&#39;, quest: &#39;üîß&#39; },
    custom: { theme: &#39;üé®&#39;, quest: &#39;‚≠ê&#39; }
  };

  return (themeIcons as any)[theme] || themeIcons.space;
}
</code></pre>
<ul>
<li><strong>What this code does:</strong>  <ul>
<li><code class="inline-code">parseThemeArg</code> maps raw command-line inputs directly into identifiers, supporting integer-based indexing for user convenience.  </li>
<li><code class="inline-code">generateThemeCSS</code> assembles a theme-specific stylesheet by merging multiple layers (base and dynamic), ensuring complete visual integration.  </li>
<li><code class="inline-code">getThemeIcons</code> standardizes UI branding for both themes and quests, enriching visual consistency.</li>
</ul>
</li>
<li><strong>Key techniques:</strong>  <ul>
<li>Argument parsing aligns disparate user inputs (strings and integers) for flexible interactivity.  </li>
<li>CSS generation adapts modular resources into centralized outputs, reducing redundancy across themes.  </li>
<li>Icon mapping maintains thematic coherence in visually transmitted data.</li>
</ul>
</li>
<li><strong>Connections:</strong>  <ul>
<li>Directly interfaces with user environments to propagate validated themes and generate configurations.  </li>
<li>Enables scalable CSS and asset management across various missions.</li>
</ul>
</li>
<li><strong>Details to notice:</strong>  <ul>
<li>Modular CSS inclusion allows for extensibility in file additions or modifications.  </li>
<li>Icon definitions remain compact yet expressive, enabling cross-echelon consistency.</li>
</ul>
</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Investigate theme parsing (<code class="inline-code">parseTheme</code> and <code class="inline-code">parseThemeArg</code>) to understand user-friendly mappings and normalization techniques.  </li>
<li>Examine asset generation logic (<code class="inline-code">generateThemeCSS</code>) to grasp how visual configurations synchronize thematic representation.  </li>
<li>Reflect on validation checks to appreciate how interactive choices transform into safe and actionable system commands.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the <em>Nebula Explorer</em>! Your adventure is complete.</p>
<p>üöÄ Stellar work on Quest 5: Configuring the Galaxy‚Äîyour cosmic mastery has energized our starship to warp speed, propelling you closer to a triumphant mission completion at 80% progress!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>