<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Orbital Theme Matrix - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Code Chronicles: The Repository Odyssey</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Orbital Theme Matrix</h1>
<hr>
<p>The starship <em>Code Voyager</em> has reached the edge of its designated nebula‚Äîan intricate cluster of interconnected cosmic data streams known as the Orbital Theme Matrix. This delicate equilibrium powers the very essence of the digital galaxy, controlling how explorers perceive and interact with their missions. Your final task aboard this legendary starship is to navigate the Orbit of Themes, optimize configurations, and ensure seamless intergalactic harmony. The enigmatic codes hidden deep within this matrix await your illumination. Will you succeed in solving this intricate puzzle and securing the stability of the galactic adventure network?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üß≠ <strong>Theme Alignment Check</strong>: How do theme configurations ensure that only valid input is accepted and mapped to the correct definitions?</li>
<li>‚öôÔ∏è <strong>Runtime Adaptation</strong>: How do dynamic theme settings like CSS generation and icons adapt to different user choices and edge cases?</li>
<li>üõ°Ô∏è <strong>Error Containment</strong>: What failsafe mechanisms are in place to handle errors in theme selection or path validation?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Essential Configuration Constants</h3>
<p>This file defines critical timeouts, caching settings, API limits, and default error messages that govern the adventure system. These constants ensure stability and scalability under vast intergalactic data loads.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Controls time constraints for generating complex interstellar narratives.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Sets adaptive caching durations for efficient exploration.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Limits file analysis sizes to prevent memory bottlenecks.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> prevents excessively long operations that could hinder system flow in high-demand scenarios.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> ensures that repetitive requests avoid redundant processing, improving efficiency.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> safeguards system resources by excluding files too large for practical analysis.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Centralized Theme Management</h3>
<p>This file provides a single source of truth for all themes, including their definitions, keyword matching logic, and display configurations. By implementing functions for validation and parsing, it ensures seamless navigation across various adventure themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getAllThemes</code>: Returns an enumeration of all supported themes.</li>
<li><code class="inline-code">parseTheme</code>: Parses input strings to determine the matching theme key.</li>
<li><code class="inline-code">formatThemeOption</code>: Formats themes as user-friendly display strings.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;

  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;

  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }

  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }

  return null;
}

export function formatThemeOption(theme: ThemeDefinition): string {
  return `${theme.emoji} **${theme.id}. ${theme.displayName}** - ${theme.description}`;
}
</code></pre>
<ul>
<li><code class="inline-code">getAllThemes</code> compiles and returns a complete list of theme definitions, supporting user-customized adventures.</li>
<li><code class="inline-code">parseTheme</code> uses logical validation to match user input with appropriate themes or default to null when input is invalid.</li>
<li><code class="inline-code">formatThemeOption</code> unifies presentation styles across different interfaces with clear, user-friendly formatting.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/theme-manager.ts:</span> Managing Dynamic Outputs for Themes</h3>
<p>This module introduces runtime logic for managing CSS assets, validating theme inputs, and associating theme-based settings (e.g., icons) with user interfaces. It encapsulates dynamic behaviors, ensuring seamless adaptability.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">isLightTheme</code>: Determines the proper logo type for light vs dark themes.</li>
<li><code class="inline-code">generateThemeCSS</code>: Dynamically combines multiple sources into a unified theme stylesheet.</li>
<li><code class="inline-code">getThemeIcons</code>: Provides consistent iconography tailored to specific themes.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/theme-manager.ts</h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];

  let combinedCSS = &#39;&#39;;
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });

  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li><code class="inline-code">generateThemeCSS</code> builds a singular, cohesive CSS file by dynamically merging component styles while supporting modular design.</li>
<li>File existence checks ensure robust paths and prevent runtime errors.</li>
<li>Writing the final CSS file guarantees every component in the adventure reflects the selected theme.</li>
</ul>
<hr>
<pre><code class="language-typescript">getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {
  const themeIcons = {
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },
    mythical: { theme: &#39;üè∞&#39;, quest: &#39;‚öîÔ∏è&#39; },
    ancient: { theme: &#39;üè∫&#39;, quest: &#39;üìú&#39; },
    developer: { theme: &#39;üíª&#39;, quest: &#39;üîß&#39; },
    custom: { theme: &#39;üé®&#39;, quest: &#39;‚≠ê&#39; }
  };

  return (themeIcons as any)[theme] || themeIcons.space;
}
</code></pre>
<ul>
<li><code class="inline-code">getThemeIcons</code> constructs a mapping system to provide recognizable icons for each theme, enhancing user experience and interface clarity.</li>
<li>Default fallback settings maintain consistency when unexpected values occur.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>For rapid system testing, use the <code class="inline-code">DEFAULT_THEME</code> setting in <code class="inline-code">config.ts</code> to pre-select initial themes.</li>
<li>Explore the path validation logic in <code class="inline-code">input-validator.ts</code> to understand how invalid entries are sanitized.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the Orbital Theme Matrix! Your adventure is complete.</p>
<p>Mission accomplished, stellar navigator ‚Äî Quest 5: Orbital Theme Matrix is locked into cosmic alignment, propelling us toward 80% galactic mastery on this star-bound odyssey! üöÄ ‚≠ê üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>