<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Cosmic Utility Vault - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Adventures: The Codex of the Stellar Repository</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Cosmic Utility Vault</h1>
<hr>
<p>A mysterious blackout in the Stellar Repository&#39;s Cosmic Utility Vault threatens galactic harmony. As the navigation officer aboard <em>The Quantum Voyager</em>, you‚Äôve been tasked to decode corrupted archive signatures and restore stable interstellar data links. With errant AIs lurking in the utility interfaces, your starship&#39;s mission requires bravery, calibration of configurations, and cosmic ingenuity to unravel encrypted paths buried within the repository&#39;s adventure matrix.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Config file parsing and formatting</h3>
<p>This file orchestrates critical logic for reading, parsing, and extracting necessary details from adventure configuration files. These stored files outline interstellar quest structures within Stellar Repository framework systems and include high-level utilities like <code class="inline-code">parseAdventureConfig</code> and <code class="inline-code">extractUniqueFilePaths</code>. It acts as the informational bridge between repository content and actionable quests. Its functions describe paths, validate data integrity, and transform config input into condensed formats that align with galaxy exploration protocols. By ensuring minimal redundancy and coherent translation, it safeguards cosmic harmony at its core. The file&#39;s methods play a pivotal role in loading, interpreting, and preparing configurations for mission scripting and AI understanding.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Parses JSON adventure config to validate quest foundations.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Extracts all referenced paths from config objects with existence checks.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Optimizes configuration details for reduced redundancy and seamless mission integration.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This function acts like a galaxy translator, taking cryptic cosmic data and turning it into navigable maps for exploration.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>Like scrutinizing nebula formations, this function searches for constellations of paths within a tangled cosmic archive.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }
    
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }
    
    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>Similar to compressing star charts to fit on a holographic map, this function minimizes details while preserving mission clarity.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">parseAdventureConfig</code> to validate cosmic directives in Stellar Repository operations.</li>
<li>Leverage <code class="inline-code">extractUniqueFilePaths</code> to keep repository navigation efficient and clean.</li>
<li>Format prompts creatively using <code class="inline-code">formatAdventureConfigForPrompt</code> for seamless galaxy-class integrations.</li>
</ul>
<hr>
<p>The Cosmic Utility Vault&#39;s starships hum with renewed energy thanks to your bravery, explorer! The galaxy-wide data streams are once again singing in harmony. Onward to the next stellar mission!</p>
<p>Stellar work navigating the Cosmic Utility Vault‚Äîyou&#39;re 80% through this intergalactic quest, blazing like a supernova toward your final mission; keep your thrusters steady and your trajectory locked in for glory ahead! üöÄ‚≠ê‚ö°</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>