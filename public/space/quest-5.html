<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuring Cosmic Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Galactic Code Voyages: The Quest for Stellar Automation</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuring Cosmic Themes</h1>
<hr>
<p>The <em>Galactic Refactorer</em> has reached the final beacon in the vast expanse of the codebase nebula. Orbiting a dormant superconstruct of theme engines, your crew faces their ultimate challenge: to configure and synchronize every theme across galactic systems. The Universal Code Alliance relies on flawless theme integration to unify the appearance of data streams in the universe. Energy flickers across the ship‚Äôs command panels as you prepare to face intricate layers of theme data. The mission is delicate, requiring precision in adjusting how themes are processed, validated, and represented. Will you harmonize the stellar themes or leave the galaxy in stylistic disarray?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Navigation Patterns</strong>: How does <code class="inline-code">ThemeManager</code> handle the selection and identification of themes scattered across the star systems of the codebase?</li>
<li>‚ö° <strong>Validation Protocols</strong>: What mechanisms ensure valid inputs, preventing unstable configurations and theme errors?</li>
<li>üõ°Ô∏è <strong>Safety Measures</strong>: How does the adventure configuration system extract and validate file paths, safeguarding operations from invalid or missing entries?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Centralized management for cosmic themes</h3>
<p>The <code class="inline-code">theme.ts</code> file is responsible for defining and managing adventure themes, guiding users in their galactic aesthetic preferences. It contains core theme definitions, validation functions, and utilities to aid in smooth theme parsing and usage. It ensures consistency and scalability for developers designing quest experiences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines all the themes available in the system, including their metadata such as IDs, keys, display names, emojis, and descriptions.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves all themes as an array for display or iteration, supporting any UI or command-line interactions.</li>
<li><code class="inline-code">isValidTheme</code>: Ensures user-provided themes align with defined options, preventing invalid theme assignments.</li>
<li><code class="inline-code">parseTheme</code>: Interprets user input, resolving it to a theme key through keywords, numeric IDs, or exact matches.</li>
<li><code class="inline-code">getFormattedThemeOptions</code>: Formats all available themes into a human-readable list, complete with emojis and descriptions.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Additional themes omitted for brevity
} as const;
</code></pre>
<ul>
<li>Defines metadata for themes in an immutable <code class="inline-code">THEMES</code> object, including unique IDs, display names, and keywords for user input matching.</li>
<li>Prevents hardcoding and improves extensibility by centralizing all theme-related data.</li>
<li>Enables dynamic interactions with new themes using keywords.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li><code class="inline-code">getAllThemes</code> offers a structured array of all themes, useful for dynamic UI elements or API calls.</li>
<li><code class="inline-code">isValidTheme</code> confirms that a given string matches a defined theme, reducing errors and ensuring consistency throughout the system.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  // Check for exact key match
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  // Additional logic omitted for brevity
}
</code></pre>
<ul>
<li>Parses user inputs to determine the proper theme, supporting diverse input patterns (e.g., keywords, IDs, exact key names).</li>
<li>Reduces complexity for end-users, allowing flexible inputs to trigger the correct theme settings.</li>
<li>Employs normalization techniques to limit edge case errors.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Managing adventure configuration data</h3>
<p>This file is tasked with loading, validating, and parsing adventure configuration files. It ensures that configuration data is correctly structured and extracts useful information, such as file paths, to streamline mission assembly.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads adventure configuration files in raw text form for further processing or handling.</li>
<li><code class="inline-code">parseAdventureConfig</code>: Safely parses and validates JSON data from configuration files, maintaining system robustness against corrupted or invalid files.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Scans configuration files for referenced paths, ensuring only valid, existing files are included in operations.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<ul>
<li>Uses <code class="inline-code">readFileIfExists</code> to safely load raw configuration files, handling missing or unreadable files gracefully.</li>
<li>Provides a foundation for higher-level functions that require adventure data without risking operation failure.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<ul>
<li>Parses JSON configuration data only after confirming the file exists, ensuring operations fail softly in the case of invalid formats.</li>
<li>Centralizes all JSON parsing and validation logic for ease of management and error handling.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    // Additional logic omitted for brevity
  }

  return Array.from(unique);
}
</code></pre>
<ul>
<li>Extracts all <code class="inline-code">path</code> fields from adventure configurations and verifies their existence, ensuring no invalid or missing files disrupt the system.</li>
<li>Uses a depth-first search approach on the configuration object to ensure no paths are missed within nested structures.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Look into <code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code> for inspiration in building robust user input systems that handle various kinds of inputs cleanly.</li>
<li>When working with configuration files, ensure parsing functions like <code class="inline-code">parseAdventureConfig</code> gracefully handle invalid or corrupt data while minimizing impact on other system components.</li>
<li>Explore the <code class="inline-code">THEMES</code> object and its supporting functions for modular approaches to data management.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the <em>Galactic Refactorer</em>! Your adventure is complete. The galaxy‚Äôs themes and configurations shine harmoniously across the stars thanks to your expert leadership. May your code systems remain optimized as you chart new frontiers!</p>
<p>Stellar work, Commander! You&#39;ve navigated through the cosmic currents of Quest 5 and configured celestial themes with precision‚Äîyour mission is now at warp speed with 80% completion! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>