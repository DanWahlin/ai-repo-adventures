<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Themes of the Galactic Collective - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Codex: Chronicles of the Stellar Repository</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Themes of the Galactic Collective</h1>
<hr>
<p>With the Stellar Repository&#39;s brilliance unfolding before your very eyes, your crew aboard the <em>Codemancer</em> has finally reached the central archive ‚Äì a complex, interconnected matrix of knowledge, each fragment representing a theme integral to galactic organization. To fulfill your mission, you must decode how these cosmic themes function, align with the overarching systems, and enable advanced civilization harmonization. Your final task is to analyze the themes, validate their linkage with starship commands, and unveil the configuration enabling the Repository‚Äôs seamless operation. Strap in, explorers. The Galactic Collective awaits!  </p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Cosmic Theme Alignment</strong>: How does the <code class="inline-code">THEMES</code> object structure support cross-theme data unification and functionality?  </li>
<li>‚ö° <strong>Orbital Validation</strong>: What mechanisms ensure that user-selected themes are parsed and validated successfully in methods like <code class="inline-code">validateTheme</code>?  </li>
<li>üõ°Ô∏è <strong>Interstellar Config Safeguards</strong>: How does the configuration system ensure the proper handling of project paths and mitigate potential runtime issues?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Core theme management</h3>
<p>The <code class="inline-code">theme.ts</code> file is the nucleus of cosmic theme management, defining all available themes, helper functions for their retrieval and validation, and utilities for user interaction. At the heart of the system lies the <code class="inline-code">THEMES</code> object, which captures theme metadata. Key operations revolve around parsing user input to identify themes, validating correctness, and preparing themes for display, ensuring a consistent and reliable thematic experience.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getAllThemes</code>: Retrieves a list of all supported themes for consistent system usage.  </li>
<li><code class="inline-code">isValidTheme</code>: Acts as a safeguard, verifying the integrity of themes provided by users or the system.  </li>
<li><code class="inline-code">parseTheme</code>: Handles the normalization and parsing of user input, using string checks, ID mapping, and keyword matching.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">// Helper functions to access theme data using simple array iteration  
export function getAllThemes(): ThemeDefinition[] {  
  return THEMES_ARRAY;  
}  
</code></pre>
<ul>
<li>Retrieves all available themes as an array to enable quick iteration and system-wide accessibility.  </li>
<li>Relies on the <code class="inline-code">THEMES</code> constant, maintaining consistency.  </li>
<li>Easy integration with other modules querying valid themes.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Type guard using simple find  
export function isValidTheme(theme: string): theme is AdventureTheme {  
  return THEMES_ARRAY.some(t =&gt; t.key === theme);  
}  
</code></pre>
<ul>
<li>Verifies correctness of a given theme by checking exact matches within the <code class="inline-code">THEMES_ARRAY</code>.  </li>
<li>Protects against invalid or unsupported themes affecting runtime operations.  </li>
<li>Simplicity ensures dependable error detection with minimal computation overhead.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Simple theme parser using basic string matching  
export function parseTheme(input: string): AdventureTheme | null {  
  if (!input) return null;  

  const normalized = input.trim().toLowerCase();  

  // Check for exact key match  
  const exactMatch = getThemeByKey(normalized);  
  if (exactMatch) return exactMatch.key as AdventureTheme;  

  // Check for numeric ID  
  const numericId = parseInt(normalized, 10);  
  if (!isNaN(numericId)) {  
    const byId = getThemeById(numericId);  
    if (byId) return byId.key as AdventureTheme;  
  }  

  // Check keywords using simple includes check  
  for (const theme of THEMES_ARRAY) {  
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {  
      return theme.key as AdventureTheme;  
    }  
  }  

  return null;  
}  
</code></pre>
<ul>
<li>Normalizes each input, ensuring consistent comparisons.  </li>
<li>Handles themes by key, numeric ID, or keyword matching, expanding compatibility with user inputs.  </li>
<li>Provides fallback mechanisms to ensure smooth functionality even with partial or ambiguous inputs.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> User input handling</h3>
<p>This file plays a critical role in cleaning, validating, and processing user-provided inputs for both themes and general configuration. It ensures that unclean or malicious data cannot disrupt the starship‚Äôs systems.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme</code>: Validates and processes theme input across a wide variety of formats.  </li>
<li><code class="inline-code">validateAdventureChoice</code>: Cleans up quest-related inputs while ensuring size constraints are enforced.  </li>
<li><code class="inline-code">validateProjectPath</code>: Protects file paths from invalid or harmful characters.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {  
  if (!input?.trim()) {  
    throw new Error(&#39;Theme is required&#39;);  
  }  

  const normalized = input.toLowerCase().trim();  
  const parsedTheme = parseTheme(normalized);  

  if (!parsedTheme || !isValidTheme(parsedTheme)) {  
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);  
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);  
  }  

  return parsedTheme;  
}  
</code></pre>
<ul>
<li>Validates user inputs to ensure only valid themes are processed.  </li>
<li>Integrates <code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code> for comprehensive robustness.  </li>
<li>Provides clear feedback for invalid inputs, enhancing the user experience.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration management</h3>
<p>This file defines the crew‚Äôs operational parameters, safeguarding against invalid configurations. By centralizing all constants and settings, it simplifies maintenance and ensures coherent cross-module behavior.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Sets default and configurable timeouts for AI operations.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Restricts processing of excessively large files, protecting resources.  </li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Centralized resource for consistent error-handling feedback.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation with large prompts, configurable via env  
</code></pre>
<ul>
<li>Provides an environment-dependent timeout with a sensible default, ensuring adaptability and reliability.  </li>
<li>Prevents stalled processes during long-running AI requests.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code  
</code></pre>
<ul>
<li>Sets a firm cap on file sizes to maintain system performance.  </li>
<li>Helps prioritize smaller, more manageable files critical to quests and code investigations.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const ERROR_MESSAGES = {  
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,  
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,  
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,  
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;,  
  PERMISSION_DENIED: &#39;Permission denied accessing the specified path.&#39;,  
} as const;  
</code></pre>
<ul>
<li>Centralizes error descriptions, ensuring consistent reporting across starship modules.  </li>
<li>Encourages reusable messages, minimizing redundancy and improving debugging.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üå† Use the <code class="inline-code">THEMES</code> object while analyzing theme-related logic. Observe its structure and keyword matching.  </li>
<li>üöÄ Pay particular attention to input validation methods like <code class="inline-code">validateTheme</code> and <code class="inline-code">parseTheme</code>. Notice their error-handling patterns.  </li>
<li>üí° Environment variables like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> showcase modular design techniques.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the Stellar Repository! Your adventure is complete.</p>
<p>Stellar navigator, you&#39;ve charted the luminous constellations of the Galactic Collective, propelling your learning mission to 80% completion‚Äîkeep up the cosmic momentum for the final frontier! üöÄ‚≠êüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>