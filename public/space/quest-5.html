<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Foundations of Navigation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Codex: Adventures in Repository Space</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Foundations of Navigation</h1>
<hr>
<p>Aboard the starship <em>Code Odyssey</em>, the crew faces its most pivotal challenge yet‚Äîharnessing the full capabilities of the galaxy‚Äôs navigational systems. Deep within the repository nebula, lies the foundation of effective interstellar exploration: understanding how raw data is transformed into actionable insights. The <em>Adventure Config Core</em> provides the blueprints for navigation protocols, extracting vital coordinates and establishing interstellar pathways between repositories. Will you solve these challenges and ensure your crew‚Äôs safe passage through the cosmic lattice? The galaxy depends on your expertise!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Neural Map Tracing</strong>: How does the system locate and parse essential configuration data from raw files in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>?</li>
<li>‚ö° <strong>Pathfinding Protocols</strong>: How does <code class="inline-code">extractUniqueFilePaths</code> validate and consolidate navigational data to ensure successful operations across multiple repositories?</li>
<li>üõ°Ô∏è <strong>Cosmic Error Shielding</strong>: How does the error handling in <code class="inline-code">loadAdventureConfig</code> and <code class="inline-code">parseAdventureConfig</code> ensure navigational stability in adverse conditions?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Core Navigation and Configuration Utilities</h3>
<p>This file is the hub for managing starship navigation configurations, focusing on reading and parsing raw data essential to chart interstellar routes. It ensures that stellar configs are validated, errors are handled gracefully, and navigational data is formatted for optimal use. Functions like <code class="inline-code">loadAdventureConfig</code> and <code class="inline-code">parseAdventureConfig</code> work to compile raw data into comprehensible directives, while <code class="inline-code">extractUniqueFilePaths</code> focuses on locating key navigational coordinates within the galaxy of repositories. These methods demonstrate precision design for cosmic-scale operations.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads a raw adventure config file and performs a safe file read operation to retrieve navigation parameters.</li>
<li><code class="inline-code">parseAdventureConfig</code>: Parses raw JSON data into structured interpretations, validating format and ensuring cosmic error shielding.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Extracts and validates all unique file paths referenced in the configuration, safeguarding inter-repository integrations.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Optimizes configuration data to reduce redundancy for LLM prompts, supporting large-scale automation.</li>
<li><code class="inline-code">extractCustomInstructions</code>: Retrieves custom directives for interactive adventures from the config, simplifying mission-level operations.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">function readFileIfExists(filePath: string): string | null {
  try {
    return fs.readFileSync(filePath, &#39;utf-8&#39;);
  } catch {
    // Missing or unreadable file is non-fatal
    return null;
  }
}
</code></pre>
<ul>
<li>Reads a file from the given path if it exists, returning its content or <code class="inline-code">null</code> in case of failure.</li>
<li>Utilizes <code class="inline-code">fs.readFileSync</code> to perform synchronous reads, essential for the immediate availability of navigational data.</li>
<li>Avoids fatal errors by catching exceptions, ensuring continued operations even if external configs fail.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<ul>
<li>Locates and retrieves the raw adventure config file using the specified project path and filename.</li>
<li>Depends on the <code class="inline-code">readFileIfExists</code> utility to handle file availability and permissions issues gracefully.</li>
<li>Provides the gateway for parsing interstellar navigation definitions in later stages.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<ul>
<li>Converts raw JSON text from <code class="inline-code">loadAdventureConfig</code> into structured data.</li>
<li>Implements robust error shielding by handling invalid JSON gracefully to return <code class="inline-code">null</code>.</li>
<li>Centralized parsing ensures uniform data interpretation across navigational systems.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    // Extract and validate path
    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    // Add children to stack
    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<ul>
<li>Detects navigational routes by extracting file paths referenced in the adventure configuration.</li>
<li>Validates each path for existence, ensuring critical data points are accessible.</li>
<li>Employs traversal logic using a stack to find paths in nested structures, demonstrating recursion for efficient exploration.</li>
<li>Converts results into a unique list, avoiding duplicate navigational entries.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    // Just file paths, no verbose descriptions
    const filePaths = quest.files.map((f: any) =&gt; f.path).filter(Boolean);
    formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    
    // Just function names, no descriptions
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .map((h: any) =&gt; h.name)
      .filter(Boolean);
    formatted += `Functions: ${functions.join(&#39;, &#39;)}\n\n`;
  }

  return formatted;
}
</code></pre>
<ul>
<li>Optimizes configuration data by reducing verbosity for LLM input, prioritizing only essential navigational attributes.</li>
<li>Focuses on listing quests, associated files, and key functions without including redundant descriptions.</li>
<li>Provides a compact representation, enhancing cosmic communication efficiency for large-scale automation.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Build interconnection maps using <code class="inline-code">extractUniqueFilePaths</code> to explore the entire galaxy of referenced files.</li>
<li>Use <code class="inline-code">formatAdventureConfigForPrompt</code> to compress mission data inputs for streamlined interstellar briefings.</li>
<li>Investigate design patterns in error handling within <code class="inline-code">readFileIfExists</code> for future cosmic-scale application stability.</li>
</ul>
<hr>
<p>You have mastered all the secrets of galactic navigation and repository exploration! Your adventure is complete. The crew of <em>Code Odyssey</em> celebrates your stellar achievements as you prepare to chart new journeys among the stars.</p>
<p>Stellar work, navigator! You&#39;ve charted a brilliant course through the cosmos of knowledge, propelling your mission to 80% completion‚Äîprepare for the final frontier! üöÄ‚≠êüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>