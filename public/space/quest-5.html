<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Stellar Configuration Systems - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Galactic Chronicles: The AI Odyssey</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Stellar Configuration Systems</h1>
<hr>
<p>The <em>Cerebral Voyager</em> enters its final mission orbit, tasked with uncovering hidden structures within advanced galactic-config pipelines. The starship‚Äôs AI must decode intricate cosmic schemas and align celestial directives by analyzing multiple layers of thematic coding. The crew must navigate bewildering nebulae of configurations, where each adjustable component has the potential to shift the balance of interstellar operations. Will you master the stellar systems to complete the expedition or succumb to the chaotic void of misaligned configurations? The fate of galactic harmony rests in your command.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Configuration Calibration</strong>: How does <code class="inline-code">parseAdventureConfig</code> ensure data integrity when parsing configuration files?</li>
<li>‚ö° <strong>Stellar Directives</strong>: What mechanisms are used by <code class="inline-code">extractUniqueFilePaths</code> to validate paths and prevent cosmic redundancy?</li>
<li>üõ°Ô∏è <strong>Nebula Shielding</strong>: How are error cases handled by <code class="inline-code">validateAdventureChoice</code> to prevent mission-critical failures caused by invalid inputs?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Configuration Parsing and Structural Validation</h3>
<p>This file provides core functionality to interact with the adventure configuration system. It includes mechanisms to read the configuration file, parse JSON data safely, and extract unique file paths necessary for operation. The system ensures galactic harmony by validating data formats and referencing paths across multiple layers. Leveraging these methods, the AI can avoid malformed directives and focus on cohesive mission mapping.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Safely parses the adventure configuration file while addressing corrupt or missing JSON data.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Extracts and validates unique file paths, ensuring no redundant or invalid paths hinder exploration.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Reduces configuration data for low-bandwidth interstellar communication and simplifies AI prompts.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<ul>
<li>Parses raw configuration JSON into valid objects, returning <code class="inline-code">null</code> for errors or missing files.</li>
<li>Uses a singular entry point for parsing to centralize consistency.</li>
<li>Addresses edge cases like corrupt or empty JSON files.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<ul>
<li>Leverages a stack-based traversal system for deep exploration of nested paths.</li>
<li>Validates paths against existing files in the project directory.</li>
<li>Ensures no duplication by using a <code class="inline-code">Set</code> for unique path storage.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    const filePaths = quest.files.map((f: any) =&gt; f.path).filter(Boolean);
    formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;

    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .map((h: any) =&gt; h.name)
      .filter(Boolean);
    formatted += `Functions: ${functions.join(&#39;, &#39;)}\n\n`;
  }

  return formatted;
}
</code></pre>
<ul>
<li>Formats quest configuration into a lightweight structure for AI prompts and interstellar communications.</li>
<li>Eliminates redundant descriptions to maximize efficiency.</li>
<li>Provides clean mappings of quests, associated files, and utilized functions.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input Validation to Ensure Mission Integrity</h3>
<p>This file defines validation mechanisms for user input and path configurations. It protects against invalid or harmful entries that could derail the mission‚Äôs progress. By employing this layer, the <em>Cerebral Voyager</em> ensures the integrity of commands and prevents chaotic misconfigurations during space exploration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates user input for quest choice, ensuring compliance with cosmic operation standards.</li>
<li><code class="inline-code">validateTheme</code>: Safely normalizes and checks theme inputs against valid themes.</li>
<li><code class="inline-code">validateProjectPath</code>: Ensures that path inputs are safe, useful, and free from cosmic anomalies.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Protects against empty or excessively long quest choices.</li>
<li>Ensures that input is trimmed and properly formatted.</li>
<li>Throws helpful errors to guide user correction.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Normalizes and validates theme input using string matching.</li>
<li>Rejects invalid themes and suggests appropriate options to the user.</li>
<li>Provides robust integration with the global theme subsystem.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Sanitizes project paths, providing fallbacks when no input is given.</li>
<li>Limits path length to avoid entry exhaustion.</li>
<li>Protects against invalid characters that can corrupt the path interface.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Always validate all input before attempting to parse or format configurations.</li>
<li>Use thematic functions such as <code class="inline-code">parseTheme</code> to centralize key operations across multiple systems.</li>
<li>Investigate the use of <code class="inline-code">formatAdventureConfigForPrompt</code> for efficient data compression in resource-limited environments.</li>
</ul>
<hr>
<p>You have mastered all the secrets of cosmic configurations and interstellar validation! Your adventure is complete.</p>
<p>Bravo, Cosmic Navigator! You&#39;ve charted a dazzling course through Quest 5: Stellar Configuration Systems‚Äîkeep those thrusters at full power as you rocket toward mission completion! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>