<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Configuration & Theme Navigation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Repository Adventures</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Configuration &amp; Theme Navigation</h1>
<hr>
<p>In the galaxy of Codex Prime, your crew aboard the starship <em>CodeSeeker</em> ventures into the heart of the repository‚Äôs stellar infrastructure: the Configuration &amp; Theme Navigation hub. Here lie cosmic constants, theme definitions, and validation mechanisms critical for aligning your mission‚Äôs trajectory. Your task is to map the paths of universal truths within <code class="inline-code">config.ts</code>, navigate the thematic starfields of <code class="inline-code">theme.ts</code>, and decipher the input safeguard protocols in <code class="inline-code">input-validator.ts</code>. Brace yourself‚Äîyour technical acumen will guide your ship through the nebulae of logic and design.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Nebula Mapping</strong>: How does <code class="inline-code">LLM_REQUEST_TIMEOUT</code> influence the behavior of complex operations in the adventure system, and what are its broader implications?</li>
<li>‚ö° <strong>Theme Constellation</strong>: How does the <code class="inline-code">getAllThemes</code> function dynamically orbit through the theme data structure, and what strategies enable its efficiency?</li>
<li>üõ°Ô∏è <strong>Input Shielding</strong>: How does <code class="inline-code">validateTheme</code> ensure the safety and precision of user inputs while navigating thematic choices?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Galactic Constants and Core Parameters</h3>
<p>The <code class="inline-code">config.ts</code> file encapsulates universal constants that shape the behavior of the repository adventure system. Key configurations such as request timeouts, cache size, directory patterns, and error messages serve as navigational coordinates to protect system workflows and optimize operations. Each constant reflects design decisions aimed at balancing performance, resource limits, and user experience.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Sets the maximum duration for LLM requests, ensuring no operation stalls indefinitely.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines the cache lifespan for storing generated content‚Äîcritical for balancing accuracy and efficiency.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Prevents memory overhead by enforcing file size limits during repository scans.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li>The <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures that LLM requests terminate gracefully after 60 seconds, reducing server bottlenecks.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> leverages environment variable logic to manage cache expiration dynamically, adapting to real-time needs.</li>
<li>The <code class="inline-code">MAX_FILE_SIZE_MB</code> enforces practical limits to prevent memory issues during repository scanning without sacrificing code quality insight.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Stellar Theme Definitions and Navigation</h3>
<p>The <code class="inline-code">theme.ts</code> file acts as a central beacon illuminating all theme-related operations within the adventure system. Using structures like <code class="inline-code">ThemeDefinition</code> and helper functions, it provides a seamless path to explore, validate, and parse theme inputs. Every theme‚Äîwhether predefined or custom‚Äîconnects user choices to rich thematic experiences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines immutable constants for predefined themes, each with unique identifiers and metadata.</li>
<li><code class="inline-code">getAllThemes</code>: Accesses the constellation of theme definitions, supporting dynamic iteration and theming operations.</li>
<li><code class="inline-code">parseTheme</code>: Parses user inputs into precise theme outputs by matching keys, IDs, or keywords for accuracy.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: { /* omitted for brevity */ },
  ANCIENT: { /* omitted for brevity */ },
  DEVELOPER: { /* omitted for brevity */ },
  CUSTOM: { /* omitted for brevity */ },
} as const;

export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;

  const normalized = input.trim().toLowerCase();

  // Check for exact key match
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;

  // Check for numeric ID
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }

  // Check keywords using simple includes check
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }

  return null;
}
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> dataset forms the backbone of all thematic operations, ensuring consistency across the adventure system.</li>
<li><code class="inline-code">getAllThemes</code> simplifies theme accessibility and acts as an essential function for collecting theme metadata dynamically during operations.</li>
<li><code class="inline-code">parseTheme</code> combines multi-dimensional inputs (key strings, numeric IDs, or keywords) into one parsing engine for versatile validation.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: User Input Defense Protocols</h3>
<p>The <code class="inline-code">input-validator.ts</code> module instates stringent measures to validate and sanitize user inputs for accuracy and safety. Exploring this file reveals how inputs like adventure choices or theme selections interact with underlying modules while safeguarding against erroneous or malicious inputs.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures no empty or overly verbose input compromises the adventure selection process.</li>
<li><code class="inline-code">validateTheme</code>: Validates strings against available theme definitions, safeguarding thematic consistency.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Strips harmful characters from user input, ensuring clean and readable outputs.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }

  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }

  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }

  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);

  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }

  return parsedTheme;
}

export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;

  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> enforces strict length and non-empty input guarantees for stable exploration initiation.</li>
<li>The <code class="inline-code">validateTheme</code> function tightly integrates with <code class="inline-code">theme.ts</code> helpers to maximize theme input accuracy and avoid errors.</li>
<li><code class="inline-code">sanitizeForDisplay</code> employs defensive coding practices by neutralizing harmful characters, fostering secure interactions.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the constants in <code class="inline-code">config.ts</code> to understand how different timeout and size limits balance system performance and reliability.</li>
<li>Refer to <code class="inline-code">theme.ts</code> to comprehend how themes are structured, validated, and dynamically parsed during user choices.</li>
<li>Study <code class="inline-code">input-validator.ts</code> to learn defensive coding patterns for input sanitization and validation against edge cases.</li>
</ul>
<hr>
<p>Adventure plot secured! Prepare your neural arrays for further cosmic exploration of Codex Prime‚Äôs encrypted frontiers.</p>
<p>Congratulations, navigator of the cosmic code! üåü With Quest 4 successfully charted and configured, your starship is now soaring at warp speed toward mastering the galaxy of theme navigation‚Äîkeep your engines roaring for the final frontier! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>