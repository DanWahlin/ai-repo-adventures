<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Navigating Cosmic Protocols - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Journey to the Andromeda Codebase</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Navigating Cosmic Protocols</h1>
<hr>
<p>Aboard the starship <em>AIA Explorer</em>, the engines hum steadily as you approach the swirling nexus of the Andromeda Codebase. This sector, known as the Configuration Nebula, is teeming with interconnected systems responsible for the ship‚Äôs protocols and theme alignment. Your task, starship engineer, is to delve into the galactic configuration files and ensure the seamless operation of the Long-Lived Machina (LLM). Today‚Äôs mission will have you navigating cosmic protocols that dictate the very parameters of exploration and adventure creation. With your trusty <code class="inline-code">RepoAdventureServer</code> at your fingertips, you must uncover, validate, and optimize the stellar themes and input systems pivotal to the AIA Explorer‚Äôs charting prowess.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Protocol Alignment Check</strong>: How are timeout settings and cache durations configured to ensure stability during LLM interactions?</li>
<li>‚ö° <strong>Theme Configuration</strong>: How does the system define and manage themes to bridge configurational and user-centric needs?</li>
<li>üõ°Ô∏è <strong>Input Security Scan</strong>: What mechanisms are in place to validate user-generated inputs and safeguard against invalid or malicious entries?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Cosmic Configuration Central</h3>
<p>This file serves as the hub for configuring critical constants and parameters for the starship‚Äôs operations. Settings like timeouts, cache durations, and memory limits are essential to sustaining the LLM-powered tools in varied conditions. These configurations also manage limits on file size, depth of analysis, and error reporting, ensuring cosmic ventures stay free of hazards.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Specifies the time allotted for complex LLM interactions, ensuring tasks are completed in a timely manner.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Defines the limit on file sizes to avoid processing inefficiencies and conserve resources.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Sets cache duration to balance performance with resource usage during subprocess operations.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Galaxy Repository</h3>
<p>This module encapsulates the data and logic behind defining, accessing, and validating themes. Themes are the foundation of the adventure experience, shaping the narrative style and aesthetic. The file also uses efficient data structures to keep operations straightforward, even with multiple themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A centralized object that outlines all predefined themes, their metadata, and their role in the adventure system.</li>
<li><code class="inline-code">isValidTheme</code>: Provides a guard function to check whether a theme is valid before use, preventing incorrect selections.</li>
<li><code class="inline-code">getAllThemes</code>: Returns the complete list of themes, supporting display in user interfaces and theme selection logic.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input System Firewall</h3>
<p>This file contains the essential validation functions required to safeguard starship operations against erroneous inputs. It ensures user choices are sanitized, validated, and adhere to predefined constraints, extending the reliability of input-dependent systems.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates adventure choices to ensure they meet length requirements and are well-formed.</li>
<li><code class="inline-code">validateProjectPath</code>: Sanitizes and verifies project paths, protecting the system from invalid or harmful inputs.</li>
<li><code class="inline-code">validateTheme</code>: Ensures theme inputs are valid by checking them against predefined or custom themes.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<ul>
<li>This configuration sets strict parameters to ensure system stability.</li>
<li>Timeouts like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> help prevent runaway processes during LLM interactions.</li>
<li>File size limits such as <code class="inline-code">MAX_FILE_SIZE_MB</code> optimize resource use by excluding excessively large files.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> balances performance with resource constraints by tuning cache expiration.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  // Other themes omitted for brevity
} as const;

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> defines all possible themes, ensuring alignment between user inputs and supported options.</li>
<li>Validation is performed using <code class="inline-code">isValidTheme</code>, reducing the risk of unsupported configurations.</li>
<li><code class="inline-code">getAllThemes</code> provides a mechanism to retrieve and display themes comprehensively.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}

export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> enforces constraints to ensure inputs are meaningful and safe.</li>
<li>Error handling in <code class="inline-code">validateTheme</code> guides users toward valid inputs while maintaining system integrity.</li>
<li><code class="inline-code">validateProjectPath</code> sanitizes project paths to prevent issues with invalid file references.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When debugging theme validation systems, start by examining the <code class="inline-code">isValidTheme</code> and <code class="inline-code">parseTheme</code> functions to trace logic.</li>
<li>Explore cache duration settings in <code class="inline-code">REPOMIX_CACHE_TTL</code> to optimize performance under varying workloads.</li>
<li>Test your configuration changes in a simulated environment before applying them galaxy-wide.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Mission accomplished, Navigator‚ÄîQuest 4 has been mastered with cosmic precision, propelling you 60% closer to stardom on this interstellar voyage; keep forging ahead, superstar! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>