<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Calibrating the Theme Relay - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Starship Codex: Chronicles of the Repo Nebula</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Calibrating the Theme Relay</h1>
<hr>
<p>As the <em>Starship Codex</em> hurtles deeper into the shimmering expanses of the repo nebula, the crew faces a new challenge: the cosmic Theme Relay, a critical node linking universal theme data. Disruptive code shards have thrown the relay&#39;s calibration into chaos, threatening consistent adventure generation for all interstellar explorers. Armed with the <em>Repomix Scanner</em> and the precision of the Galactic Validator Array, the team must realign the relay or risk losing the harmony of themes across the nebula. Brace yourself for a mission combining technical finesse with stellar storytelling!</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Input Validation Systems</h3>
<p>This file encapsulates the <em>Starship Codex&#39;s</em> safeguard mechanisms, ensuring all incoming user inputs are sanitized and secure. The <code class="inline-code">validateAdventureChoice()</code> function ensures user choices are meaningful and adhere to defined constraints, protecting against errors or malicious input that could corrupt the Theme Relay&#39;s calibration. Moreover, the <code class="inline-code">sanitizeForDisplay()</code> method strips unsafe characters, allowing mission logs to remain pristine and readable even under maximum stress conditions. Together with <code class="inline-code">validateTheme()</code> and <code class="inline-code">validateProjectPath()</code>, the validators shield the system from cosmic anomalies and maintain stable navigation. These functions operate akin to the ship&#39;s shield array, deflecting threats before they reach critical subsystems.</p>
<h4>Highlights</h4>
<ul>
<li><strong>Input Sanitization</strong>: <code class="inline-code">validateAdventureChoice()</code> prevents overly long or empty user inputs.  </li>
<li><strong>Theme Calibration</strong>: <code class="inline-code">validateTheme()</code> ensures only recognized themes are utilized.  </li>
<li><strong>Path Validation</strong>: Detects invalid project paths before they destabilize the flow.  </li>
<li><strong>Safety Measures</strong>: <code class="inline-code">sanitizeForDisplay()</code> filters potentially harmful content for crew logs.  </li>
<li><strong>Trim and Normalize</strong>: Consistent handling of whitespace and case discrepancies across inputs.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Core Theme Definitions</h3>
<p>This file acts as the central repository for all adventure themes, storing them in the immutable <code class="inline-code">THEMES</code> object. Each theme is meticulously defined with unique IDs, display names, emojis, descriptions, and keywords for matching user inputs. Functions like <code class="inline-code">getThemeById()</code> and <code class="inline-code">getThemeByKey()</code> ensure that themes are accessible by their identifiers or keywords, while <code class="inline-code">parseTheme()</code> interprets user input to align with defined cosmic themes. These utilities power the seamless integration of space-themed storytelling into system-generated adventures, bringing cohesion to quests like calibrating the Theme Relay.</p>
<h4>Highlights</h4>
<ul>
<li><strong>Centralized Theme Store</strong>: Immutable <code class="inline-code">THEMES</code> object containing data for all adventure themes.  </li>
<li><strong>Theme Parsing</strong>: <code class="inline-code">parseTheme()</code> converts fuzzy user inputs into properly recognized themes.  </li>
<li><strong>Validation Tools</strong>: <code class="inline-code">isValidTheme()</code> verifies the validity of user-selected themes.  </li>
<li><strong>User Display</strong>: <code class="inline-code">formatThemeOption()</code> enriches theme options with descriptive metadata.  </li>
<li><strong>Keyword Matching</strong>: Supports partial input matching to handle user error flexibly.</li>
</ul>
<hr>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>These functions act as the <em>Starship Codex&#39;s</em> firewall, rejecting unreliable inputs before they compromise the mission.</p>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<p>This object is like the ship‚Äôs navigation log, cataloging possible destinations in the cosmos and presenting them elegantly to explorers.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Always double-check theme inputs when calibrating; invalid themes disrupt storyline consistency.</li>
<li>Utilize the <code class="inline-code">sanitizeForDisplay()</code> function when handling user-generated logs to maintain readability.</li>
<li>Explore <code class="inline-code">getFormattedThemeOptions()</code> for presenting a polished list of all themes during mission briefings.</li>
</ul>
<hr>
<p>Stellar work completing Quest 4: Calibrating the Theme Relay‚Äîyour learning trajectory is soaring at warp speed, and the cosmos awaits your final triumph! ‚≠êüöÄüì°</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>