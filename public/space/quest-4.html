<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Calibrating Mission Systems - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Stellar Chronicles: The Codebase Odyssey</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Calibrating Mission Systems</h1>
<hr>
<p>The cosmic engines of the <em>Code Voyager</em> hum with anticipation as you approach the heart of its sophisticated systems. This time, your mission hinges on ensuring all is perfectly calibrated for interstellar programming adventures. The ship&#39;s central configuration module, stellar theme library, and input validation commands form the backbone of your journey through the technical nebula. Steady your nerves and prepare to unravel the inner workings of systems that drive this starship to its galactic destination.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>System Calibration Check</strong>: How does the configuration file define the foundational limits and settings essential for mission control?</li>
<li>‚ö° <strong>Theme Navigation</strong>: What mechanisms are present for selecting and validating themes, and how are data structures used to maintain interstellar theme integrity?</li>
<li>üõ°Ô∏è <strong>Input Shields</strong>: How does the input validation module ensure safety and accuracy for user-submitted commands and paths?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Core Configuration for Stellar Missions</h3>
<p>The configuration file establishes default parameters and system constraints that enable smooth mission operations. It features environmental constants for connecting APIs, timeout thresholds, and error messaging. Additionally, it provides caching and directory scanning limits‚Äîkey safeguards for resource efficiency during adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines API request duration limits for communication with the ship‚Äôs AI systems.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Establishes directory exclusions to prevent unnecessary system noise and optimize galaxy exploration performance.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Outlines default error responses to guide users when issues arise during missions.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">// Timeouts in milliseconds
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts

// Directory patterns to ignore during scanning
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;
] as const;

// Default error messages
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;
} as const;
</code></pre>
<ul>
<li>The <code class="inline-code">LLM_REQUEST_TIMEOUT</code> defines API communication limits, ensuring responsiveness in complex operations.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> filters irrelevant directories, enhancing efficiency by prioritizing mission-critical files.</li>
<li><code class="inline-code">ERROR_MESSAGES</code> provides user-friendly guidance in case of errors, maintaining clarity during exploration.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Stellar Theme Selector</h3>
<p>This file is the central module for handling adventure themes. It defines structures for themes with keyed IDs, display names, and descriptive metadata. Key functions in this file enable validation, formatting, and theme parsing based on user input or predefined rules.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A predefined list of theme definitions, ensuring consistent cosmic narratives.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves all formatted themes for display while maintaining data simplicity.</li>
<li><code class="inline-code">parseTheme</code>: Parses user input to validate and extract matching theme keys.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">// Single source of truth for all themes
export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards.&#39;
  }
} as const;

// Get all themes
export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

// Parse user theme input
export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  const normalized = input.trim().toLowerCase();
  
  // Check for exact key match
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  // Check keywords using includes
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> provides structured metadata and keywords for easy identification of adventure themes.</li>
<li><code class="inline-code">getAllThemes</code> simplifies systemic access to all themes while preserving readability and consistency.</li>
<li><code class="inline-code">parseTheme</code> ensures robust user-input validation and proper theme assignment based on user commands, enhancing mission diversity.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Defensive Shields for Exploratory Commands</h3>
<p>The input validator file is essential for ensuring user commands are accurate and secure. It contains functions to sanitize inputs, validate choices, and manage paths critical for navigation.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates user adventure selections for length and required input.</li>
<li><code class="inline-code">validateProjectPath</code>: Ensures file paths are sanitized and fall within system limits.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleans input for safe usage, preventing malfunctions caused by special characters.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> prevents invalid or excessively long adventure selections, ensuring stable operation.</li>
<li><code class="inline-code">validateProjectPath</code> defends against unsafe or overly complex paths to prioritize clean navigation.</li>
<li>These validation mechanisms ensure users&#39; actions remain securely within mission control boundaries.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the TOOLS array in <code class="inline-code">theme.ts</code> to explore additional matching mechanisms for keywords.</li>
<li>Investigate timeout constants for performance optimization logic across starship systems.</li>
<li>Next steps: Dive deeper into adventure-manager functions for generating fully interactive quest modules.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the <em>Code Voyager</em> systems!</p>
<p>Mission Control confirms Quest 4 success‚Äîyour stellar calibration has propelled the starship closer to its cosmic destination, shining bright at 60% completion! üöÄ‚≠êüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>