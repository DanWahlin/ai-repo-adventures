<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Configuring Themes and Constants - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Chronicles: The Codebase Voyager</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Configuring Themes and Constants</h1>
<hr>
<p>The <em>Infinitum</em> glides through the crystalline glow of the Digital Nebula, charting vast repositories of unexplored data. As your starship approaches a particularly dense cluster of interconnected galactic libraries, a cryptic signal emerges: the coordinates of universal constants and interstellar themes that guide missions across the cosmos. The <strong>Configuration Core</strong> onboard holds the key to aligning these celestial patterns, ensuring harmony across quests. Your crew must uncover how these constants and themes stabilize the ship‚Äôs protocol and shape the adventure narrative. Prepare to decode these vital parameters!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Constants Calibration</strong>: How are timeout settings and operational limits defined and used to ensure stable interstellar missions?</li>
<li>‚ö° <strong>Theme Identification</strong>: How does the system categorize and process adventure themes for dynamic alignment in quests?</li>
<li>üõ°Ô∏è <strong>Validation Shields</strong>: How do input validators enforce safety and prevent errors during user and crew inputs?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration Constants for Stability</h3>
<p>This file serves as the compass for many of your starship‚Äôs functions, bringing clarity and predictability to its operations. Constants such as timeouts, cache settings, and analysis limits ensure smooth navigation and galaxy-wide compliance. Each parameter tunes the ship‚Äôs systems for optimal performance in the vast and unpredictable nebula of data.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> defines the maximum time allowed for communication with the LLM, crucial for complex stellar computations.</li>
<li><code class="inline-code">FILE_ANALYSIS_TIMEOUT</code> ensures efficient scanning and analysis of repository files, preventing bottlenecks.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> prevents resource consumption by excluding unnecessary directories and files from the mission.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const FILE_ANALYSIS_TIMEOUT = 30000;
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;,
  &#39;.DS_Store&#39;,
  &#39;Thumbs.db&#39;,
] as const;
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> sets a generous timeframe to handle large prompts, ensuring smooth generation of narrative content.</li>
<li><code class="inline-code">FILE_ANALYSIS_TIMEOUT</code> avoids prolonged file scanning, maintaining dynamic responsiveness in exploration.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> filters unnecessary data traffic to prevent overloading galaxy navigation systems and focuses analysis on critical files.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Adventure Themes and Their Interface</h3>
<p>This file serves as the <strong>Navigator of Exploration</strong>, defining all possible themes and a centralized method to manage them. Themes are the guiding star for each quest, shaping how adventures are styled and contextualized. By parsing input and matching keywords, themes add kaleidoscopic variety to your mission content.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> defines the core adventure categories such as space, mythical, and developer-specific narratives.</li>
<li><code class="inline-code">isValidTheme</code> checks if an input theme exists within the defined categories to prevent invalid assignments.</li>
<li><code class="inline-code">parseTheme</code> dynamically recognizes and applies the correct theme based on input or keywords.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
};
  
export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  return exactMatch ? exactMatch.key as AdventureTheme : null;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> forms the foundation of story possibilities, offering engaging options like space exploration and cosmic frontiers.</li>
<li><code class="inline-code">isValidTheme</code> acts as a safeguard against invalid selections, ensuring consistent user inputs.</li>
<li><code class="inline-code">parseTheme</code> intelligently adapts user input into contextual themes, enhancing the narrative engine‚Äôs robustness.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Ensuring Valid Input Across Missions</h3>
<p>This file protects the ship against hazardous inputs from crew members and external signals. It guarantees only clean and precise data streams enter the <strong>Model Context Protocol</strong>, maintaining mission stability and preventing disruptions.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme</code> confirms the theme provided by users aligns with predefined categories, ensuring compatibility.</li>
<li><code class="inline-code">validateProjectPath</code> sanitizes and secures project file paths for correct navigation across repository maps.</li>
<li><code class="inline-code">sanitizeForDisplay</code> strips dangerous or invalid characters from data transforming into readable and safe content.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}

export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}

export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li><code class="inline-code">validateTheme</code> ensures user inputs are compatible with the starship‚Äôs thematic engine for smooth story navigation.</li>
<li><code class="inline-code">validateProjectPath</code> cleans and verifies project paths, preventing corruption in repository scans.</li>
<li><code class="inline-code">sanitizeForDisplay</code> filters out high-risk characters, enhancing the readability and integrity of displayed content.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> to understand how timing affects content generation efficiency.</li>
<li>Explore how <code class="inline-code">THEMES</code> creates scalable options for futuristic storytelling in the adventure system.</li>
<li>Investigate <code class="inline-code">validateTheme</code> to learn how input validation contributes to smooth operation across missions.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the <em>Infinitum</em>. The stars eagerly await your presence!</p>
<p>Star Explorer, you&#39;ve ignited the thrusters and mastered Quest 4: Configuring Themes and Constants‚Äîyour mission is now 60% cosmic brilliance, propelling you closer to intergalactic mastery! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>