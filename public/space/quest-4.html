<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Configuring Stellar Systems - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Codex: The Tales of the Starship Codexia</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Configuring Stellar Systems</h1>
<hr>
<p>The Repository Nebula‚Äôs core sectors are illuminated with radiant streams of fragmented star systems, each one pulsing with dormant energy patterns. The Codexia crew is faced with a challenge that resonates with cosmic urgency: aligning and configuring these stellar systems to stabilize data flows within the Repository. Precision is key, as missteps during the calibration process could disrupt the galaxy‚Äôs delicate balance, cascading data bursts across unreachable voids. With your astute guidance, Commander, the crew must decipher the intricate mechanisms that unlock the nebula&#39;s potential ‚Äì one system at a time.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Calibration Matrix</strong>: How does the theme system enforce cosmic coherence to standardize adventure settings in <code class="inline-code">theme.ts</code>?</li>
<li>‚ö° <strong>Validation Channels</strong>: What techniques are employed within <code class="inline-code">input-validator.ts</code> to ensure safe and accurate theme choices?</li>
<li>üõ°Ô∏è <strong>Orbital Parameters</strong>: How do configuration settings in <code class="inline-code">config.ts</code> manage environmental constraints such as timeouts and memory limits?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Theme Architecture Analysis</h3>
<p>The <code class="inline-code">theme.ts</code> file serves as the central hub for managing and validating adventure themes. It ensures consistent formatting, retrieval, and validation of themes using a structured data model (<code class="inline-code">ThemeDefinition</code>). The file also facilitates intuitive keyword mapping to enhance user input handling. Its role ensures the Codexia crew‚Äôs calibration efforts stay aligned with mission-critical objectives.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">ThemeDefinition</code>: Represents the data structure central to defining each theme&#39;s properties such as <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">description</code>, and more. This ensures clarity and extensibility.</li>
<li><code class="inline-code">parseTheme</code>: A versatile theme parser function that interprets user input and matches it to themes, handling both numeric IDs and keyword-based variations.</li>
<li><code class="inline-code">isValidTheme</code>: Validates themes using string matching to prevent users from selecting unsupported or unknown adventure themes.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">// Theme structure definition
export interface ThemeDefinition {
  readonly id: number;
  readonly key: string;
  readonly displayName: string;
  readonly emoji: string;
  readonly description: string;
  readonly keywords: readonly string[];
}
</code></pre>
<ul>
<li>Defines the structure for all themes in the adventure system.</li>
<li>Ensures that each theme has consistent and descriptive metadata.</li>
<li>Keywords allow for more user-friendly, flexible input handling.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(kw =&gt; normalized.includes(kw.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  return null;
}
</code></pre>
<ul>
<li>Combines exact matches, numeric interpretations, and keyword searches for robust user input parsing.</li>
<li>Enhances usability by supporting diverse input formats.</li>
<li>Highlights adaptability in handling edge cases such as malformed or incomplete input.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Efficiently filters invalid themes to maintain the integrity of user choices.</li>
<li>Contributions to system safety by eliminating unsupported options.</li>
<li>Uses simple iteration for readability and predictable behavior.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Input Defense Grid</h3>
<p>This file acts as the first line of defense against invalid inputs that might throw the mission&#39;s trajectory off course. It leverages user-friendly functions to clean, validate, and normalize data streams ensuring that the Repository Nebula isn&#39;t disrupted by erroneous commands.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme</code>: Normalizes input and confirms theme validity against recognized configurations, integrating closely with <code class="inline-code">theme.ts</code>.</li>
<li><code class="inline-code">validateAdventureChoice</code>: Safeguards mission directives by ensuring they meet length and formatting constraints before execution.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Scrubs user input of potentially dangerous characters to maintain a secure and stable operational environment.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<ul>
<li>Ensures all theme inputs are valid by aligning with defined themes.</li>
<li>Integrates directly with <code class="inline-code">parseTheme</code> for error handling and normalization.</li>
<li>Protects system integrity by preventing unauthorized themes.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}
</code></pre>
<ul>
<li>Verifies directives are human-readable, concise, and safe.</li>
<li>Streamlines interstellar communication with clear constraints.</li>
<li>Reduces noise and prevents processing invalid data.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  return input.replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;).replace(/\s+/g, &#39; &#39;).trim().slice(0, maxLength);
}
</code></pre>
<ul>
<li>Cleans potentially harmful characters to protect vital systems.</li>
<li>Maintains readability for frontend systems with intelligent truncation.</li>
<li>Combats injection attempts through strict sanitation rules.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Galactic Configurations</h3>
<p>This file houses the constants that configure the safe operational limits of the Repository Nebula&#39;s systems. From timeouts to memory usage caps, <code class="inline-code">config.ts</code> ensures the Codexia crew operates within reliable and secure parameters.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures the maximum allowable processing time for an LLM request, ensuring stellar efficiency.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Sets the time-to-live for cached data, balancing performance with computational resource management.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Enforces size limits to prevent large files from destabilizing the system.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000;
</code></pre>
<ul>
<li>Caps API request durations at 60 seconds, preventing congestion and delays.</li>
<li>Facilitates optimal pipeline performance and sustainable workflows.</li>
<li>A safeguard against infinite waits due to external dependency issues.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;);
</code></pre>
<ul>
<li>Defines cache expiration intervals dynamically for flexibility.</li>
<li>Reduces redundant computation by reusing recent results.</li>
<li>Combines efficiency with adaptability via environment overrides.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10;
</code></pre>
<ul>
<li>Enforces a 10MB file size limit for manageable payloads.</li>
<li>Prevents memory overflows and reduces resource contention.</li>
<li>Reflects the constraints of most real-world adventure systems.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When investigating <code class="inline-code">theme.ts</code>, pay attention to how flexible input matching enhances usability.</li>
<li>Use <code class="inline-code">input-validator.ts</code> to learn how robust input sanitation protects the system.</li>
<li>Explore how <code class="inline-code">config.ts</code> balances safety with performance via clearly defined constants.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Mission accomplished, Star Engineer! You&#39;ve successfully configured stellar systems, propelling your cosmic voyage to 60% completion‚Äîkeep your thrusters blazing as you chart the celestial map toward ultimate victory! üöÄ‚ö°‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>