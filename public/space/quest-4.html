<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Navigate Stellar Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Chronicles of the Repo Explorer</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Navigate Stellar Configurations</h1>
<hr>
<p>As the <strong>Repo Explorer</strong> sets its course deeper into the cosmic coding frontier, it approaches the dense Stellar Configurations Nebula. Within this galactic labyrinth lie the secrets to shaping the ship‚Äôs mission and adapting to uncharted territories. The crew must analyze guiding configurations while tapping into the innate logic of the <strong>Configuration &amp; Theme System</strong>, ensuring a seamless journey. This chapter in your adventure draws you closer to fully understanding the starship&#39;s tools and choosing your destiny among the stars.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üõ∞Ô∏è <strong>Configuration Horizon</strong>: How does the <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_CACHE_TTL</code> ensure stable system and data flow management in the adventure engine?</li>
<li>ü™ê <strong>Thematic Orbits</strong>: What role do <code class="inline-code">THEMES</code> and its helpers play in defining and verifying the adventure system&#39;s core narrative pathways?</li>
<li>üåå <strong>Validation Pulsar</strong>: How does <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateTheme</code> safeguard user inputs and enhance the system&#39;s adaptability?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Core Configuration of the Adventure System</h3>
<p>The <code class="inline-code">config.ts</code> file defines the constants and variables that anchor the <strong>Repo Explorer&#39;s</strong> operational parameters. From timeouts and cache behavior to LLM settings and error messages, this file governs the thresholds and constraints within which the ship operates. By utilizing environment variables and default values, it ensures adaptability to various deployment conditions and story generation demands.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Specifies timeout durations for requests to the Large Language Model, balancing system responsiveness and complex task processing.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Configures caching behavior for the system, enhancing performance while minimizing redundant operations. </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Defines limits for processing large files, ensuring the system remains performant and laser-focused on source code.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> manages the time budget for LLM interaction, critical for maintaining the ship&#39;s operational flow without stalling.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> balances resource-efficiency and performance, setting the tone for adventure data retrieval and reuse.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> prioritizes system safety and performance by skipping large files that could burden the memory.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Defining Narrative Universes</h3>
<p>This file serves as the central hub for all thematic configurations, defining the available options for adventure paths. Each theme encapsulated in <code class="inline-code">THEMES</code> offers a unique narrative layer to missions, complete with keywords for matching user input. Helper functions ensure theme validation, user-friendly selection, and accurate parsing. The file also emphasizes the importance of maintaining consistent adventure experiences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A predefined list of themes, each with specific attributes, keywords, and descriptions, allowing users to choose immersive adventure paths.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the entire roster of available themes to display or validate options.</li>
<li><code class="inline-code">parseTheme</code>: Parses user input, normalizes it, and matches it to a predefined theme, creating an intuitive user experience.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  }
} as const;
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> defines compelling adventure paths using structured objects that encapsulate key narrative and technical elements.</li>
<li>Each theme is enriched with keywords for intuitive input matching, ensuring an immersive user experience.</li>
<li>The use of <code class="inline-code">as const</code> enforces immutability for stronger type guarantees, eliminating accidental alterations.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  // Check for exact key match
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  // Check for numeric ID
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  // Check keywords using simple includes check
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>The function takes an intuitive approach by systematically parsing user input for exact matches, numeric IDs, or keyword associations.</li>
<li><code class="inline-code">normalize</code> ensures that input is case-insensitive, enhancing overall robustness and user-friendliness.</li>
<li>Iterative matching through <code class="inline-code">THEMES_ARRAY</code> adds flexibility in interpreting diverse inputs.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Safeguarding User Inputs</h3>
<p>In this file, validation rules are implemented to maintain the integrity of the <strong>Repo Explorer&#39;s</strong> user-facing systems. Functions like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateTheme</code> ensure that user inputs are clean, safe, and semantically consistent. These validators enhance reliability and provide meaningful error guidance when invalid input is encountered.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Verifies that user-provided choices are concise, non-empty, and meaningful.</li>
<li><code class="inline-code">validateTheme</code>: Ensures that only valid and registered adventure themes are used, aligning input with defined configurations.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleanses user input to prevent unintended consequences during display, prioritizing user experience and security.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> ensures meaningful and concise input by enforcing both non-emptiness and length limits.</li>
<li>Straightforward error handling provides clear guidance for invalid input.</li>
<li>Reduces potential misuse and guarantees application stability.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li><code class="inline-code">validateTheme</code> ensures the user‚Äôs selected theme exists within the system&#39;s predefined options.</li>
<li>Case normalization and <code class="inline-code">parseTheme</code> integration simplify parsing while maintaining robustness.</li>
<li>Offers direct feedback with a list of valid themes, enhancing usability.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Ensure environment variables are properly configured to avoid defaults that may not suit your system setup.</li>
<li>Use the <code class="inline-code">getFormattedThemeOptions</code> function from <code class="inline-code">theme.ts</code> to present the theme options cleanly.</li>
<li>Test all input validators with invalid data to observe and learn from the error handling processes.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the <strong>Repo Explorer</strong>. The final frontier lies ahead ‚Äì stay prepared for the ultimate challenges of this cosmic journey!</p>
<p>Mission accomplished, stellar navigator! You&#39;ve charted the cosmic map of Quest 4 with precision and brilliance‚Äîkeep your course steady as you accelerate toward the stars! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>