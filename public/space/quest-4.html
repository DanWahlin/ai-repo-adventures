<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Forge Stellar Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Odyssey: The Codex of Knowledge</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Forge Stellar Configurations</h1>
<hr>
<p>The Codex has reached the luminous expanse where stellar configurations come to life‚Äîa realm where order emerges from chaos like galaxies forming from nebulae. Your mission is to wield the power of theme navigation, validation protocols, and configuration settings to align intergalactic systems with adventure blueprints. As the lead explorer, you will delve into the harmony between foundational parameters and the adventure systems they fuel. This is no passive observation; you‚Äôll orchestrate cosmic clarity in preparation for uncharted odysseys.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üõ∞Ô∏è <strong>Signal Interpretation</strong>: How does the theme system identify, validate, and parse adventure themes to align user inputs?</li>
<li>üåå <strong>Stellar Safety Measures</strong>: What mechanisms ensure valid configurations, preventing harmful input or exceeding system boundaries?</li>
<li>üì° <strong>Energy Alignment</strong>: How do the theme definitions and configuration settings optimize the Codex&#39;s adaptability for different quests?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration and System Limits</h3>
<p>This file provides constants and configuration parameters critical for maintaining the stability of the Codex&#39;s adventure systems. It includes environment-based settings, timeout management, and error handling, ensuring that the mission remains focused and performant. These values directly influence the limitations and capabilities of the quest-generation engines.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> establishes timeout limits for API requests, ensuring the Codex does not stall during large data retrieval.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> configures caching duration for computational results, optimizing resource usage.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> sets an upper limit on analyzable file sizes, balancing scope and performance.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> avoids scenarios where large requests block the system by enforcing a 60-second limit for long-running API calls.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> improves responsiveness by reusing previous data for 1-minute intervals, ideal for iterative processes during code exploration.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> prevents memory and performance challenges by excluding files above 10 MB, ensuring analysis remains focused.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Defining Adventure Themes</h3>
<p>This file acts as the solitary database for all adventure themes, providing metadata for each option. It ensures consistency, readability, and customization for different narrative styles. These definitions impact how missions are themed, making it instrumental during adventure generation.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> defines structured metadata for all adventure themes, aligning them with display and functional requirements.</li>
<li><code class="inline-code">isValidTheme</code> validates user-provided themes by checking against existing definitions, ensuring alignment with system expectations.</li>
<li><code class="inline-code">parseTheme</code> translates raw inputs into usable adventure themes through string normalization and keyword matching.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // ... other themes omitted for brevity
};
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> offers structured metadata such as ID, display name, emoji, description, and keywords for seamless styling and identification.</li>
<li>Keywords like &quot;space&quot; or &quot;galaxy&quot; allow the <code class="inline-code">SPACE</code> theme to match inputs intuitively, ensuring an immersive experience for adventurers.</li>
<li>This centralized theme storage simplifies updates and avoids redundancy throughout the system.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li><code class="inline-code">isValidTheme</code> uses array iteration to verify if a given theme key matches a valid adventure type, mitigating errors during user input validation.</li>
<li>The utility of type-guard logic enhances system robustness by narrowing accepted inputs.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  return null;
}
</code></pre>
<ul>
<li><code class="inline-code">parseTheme</code> ensures seamless theme input and enhances the user experience through normalization and multi-step matching.</li>
<li>The inclusion of ID parsing caters to users familiar with numeric references while improving system accessibility.</li>
<li>Keyword analysis allows partial input matching to suggest the best context for user intents.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Protecting Input Integrity</h3>
<p>Ensuring that only valid data enters the system is crucial for preventing misconfigurations. This file includes various input-specific validation methods to safeguard against edge cases and erroneous data during adventure setup.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> ensures the choice input aligns with length and content rules, maintaining adventure clarity.</li>
<li><code class="inline-code">validateTheme</code> verifies that user-provided themes align with supported definitions, enhancing the quality of user interactions.</li>
<li><code class="inline-code">validateProjectPath</code> checks the validity of file paths, mitigating risks like null characters or excessive length.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> prevents missing inputs and enforces a maximum character restriction, streamlining the input process for users.</li>
<li>This ensures proper boundaries, reducing the chance of disruptive or unclear adventure paths.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li><code class="inline-code">validateTheme</code> integrates with <code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code> to confirm user inputs match supported adventure themes.</li>
<li>Error feedback includes a list of valid themes, guiding users toward valid responses.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateProjectPath</code> accounts for usability and security by trimming inputs and rejecting paths with null characters.</li>
<li>This validation allows projects to default to the working directory if no input is specified, a user-friendly fallback.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üöÄ Use <code class="inline-code">THEMES</code> to explore how metadata impacts theme selection, input validation, and display formatting.</li>
<li>üõ∞Ô∏è Compare <code class="inline-code">validateTheme</code> with <code class="inline-code">isValidTheme</code> to understand how the system integrates checks across multiple layers.</li>
<li>üåå Review timeout values in <code class="inline-code">config.ts</code> to see how they balance system responsiveness and stability.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the Codex&#39;s configuration systems and themes! Your adventure is complete.</p>
<p>Stellar navigator, you&#39;ve ignited the cosmos with brilliance by completing Quest 4, forging configurations that shimmer like supernovae‚Äîonward to the next cosmic horizon! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>