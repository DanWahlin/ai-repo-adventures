<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Mapping Configurations of the Universe - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Adventures Across the Codeverse</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Mapping Configurations of the Universe</h1>
<hr>
<p>Aboard the starship <em>Infinity Loop</em>, the crew ventures deep into the cosmic corridors of configuration. This quest is a call to unravel the secrets of universal constants and galactic themes that shape the Codeverse&#39;s navigation systems. By mapping the stellar patterns of configuration, including themes and input validation codes, the daring explorers will chart paths through uncharted nebulae of structured data, unlocking access to the adventure systems that tie together the cosmos of code.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Configuration Orbit</strong>: How are constants defined to establish universal limits for adventure generation and analysis?</li>
<li>‚ö° <strong>Stellar Theme Recognition</strong>: How does the system validate and parse themes, ensuring alignment with cosmic keywords?</li>
<li>üõ°Ô∏è <strong>Input Sanitization Shield</strong>: How is user input sanitized and validated to protect against anomalies and ensure safe display?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Galactic Configuration Framework</h3>
<p>This file houses universal constants that define the rules for the adventure system. It includes variables for API keys, timeouts, theme settings, and error messages, ensuring smooth interstellar navigation across the Codeverse. The constants are designed to prevent memory overload, limit analysis depth, and configure API interactions. Whether handling LLM requests or defining ignored directory patterns, these constants establish the boundaries of safe cosmic exploration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: A constant defining the timeout for LLM interactions. Critical for preventing stalled cosmic data exchanges.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Specifies the default adventure theme when none is provided, aligning the system with the chosen thematic direction.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: A comprehensive definition of error-handling messages, ensuring graceful handling of exceptions during exploration.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">// Timeout for LLM interactions
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<ul>
<li>Defines the maximum interaction time for LLM requests, ensuring operations don&#39;t stall due to extended processing.</li>
<li>60 seconds allows for thoughtful generation while protecting against indefinite hangs.</li>
<li>Key for balancing responsiveness and complexity of story generation.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Default adventure theme
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<ul>
<li>Sets the default theme for adventures in the absence of user input.</li>
<li>Anchors the system in the space exploration theme unless explicitly overridden.</li>
<li>Prevents ambiguity and keeps the adventure aligned with user expectations.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Error message definitions
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;,
  PERMISSION_DENIED: &#39;Permission denied accessing the specified path.&#39;,
} as const;
</code></pre>
<ul>
<li>Provides predefined error messages for common issues, ensuring understandable responses for users.</li>
<li>Improves clarity and user experience across diverse scenarios, from server downtime to invalid input.</li>
<li>Streamlines debugging by avoiding cryptic or vague error outputs.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Cosmic Theme Parser</h3>
<p>By centralizing the theme definitions, this file provides a single source of truth for thematic data, including display names, descriptions, icons, and keywords. The theme parsing and validation functions ensure user inputs adhere to celestial patterns, guiding adventures with precision and consistency.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getAllThemes</code>: Returns a list of all available themes for exploration. Key for ensuring thematic alignment in adventure generation.</li>
<li><code class="inline-code">parseTheme</code>: A parser that matches user input to themes based on IDs, keys, or keywords. Central to enabling intuitive navigation for adventurers.</li>
<li><code class="inline-code">formatThemeOption</code>: Formats theme options for display, ensuring explorers are presented with clear choices.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">// Get list of all themes
export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>Provides an array of all defined themes, serving as the backbone for dynamic options in adventure generation.</li>
<li>Ensures the system is prepared to display accurate thematic choices aligned with user input.</li>
<li>Simplifies iteration and selection for explorers.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Match user input to themes
export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Matches input strings to themes using IDs, keys, or keywords.</li>
<li>Enables flexible and intuitive user navigation inside the adventure structure.</li>
<li>Ensures user input aligns with celestial themes using robust normalization.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Format themes for display
export function formatThemeOption(theme: ThemeDefinition): string {
  return `${theme.emoji} **${theme.id}. ${theme.displayName}** - ${theme.description}`;
}
</code></pre>
<ul>
<li>Dynamically formats theme options for user-facing display.</li>
<li>Enhances clarity and accessibility by presenting structured information.</li>
<li>Anchors the user experience in well-defined visual and descriptive choices.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Starship Input Integrity</h3>
<p>This file ensures user input is sanitized and validated, protecting against anomalies. By checking required fields, input lengths, and valid formats, it maintains reliable cosmic communication standards during adventures. Functions like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">sanitizeForDisplay</code> ensure explorers can safely chart their paths without disrupting the Codeverse.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates the user&#39;s adventure selection, ensuring input fits cosmic constraints.</li>
<li><code class="inline-code">validateTheme</code>: Parses and validates theme input, aligning user choices with galactic standards.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleans up input for display, mitigating risks of cross-stellar contamination.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">// Validate adventure choice
export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Ensures exploration choices are present and within acceptable length limits.</li>
<li>Protects against empty or excessively long inputs that could disrupt the system.</li>
<li>Standardizes input for consistent cosmic processing.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Validate theme input
export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Parses and validates user-specified themes, avoiding mismatch with galactic definitions.</li>
<li>Empowers explorers to align their journeys with cosmic resonances.</li>
<li>Handles invalid themes gracefully, presenting alternatives for continued exploration.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Sanitize input for display
export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li>Cleans user input to prevent unsafe characters from contaminating outputs.</li>
<li>Limits length for manageable presentation, ensuring clarity in processed communications.</li>
<li>Protects the starship&#39;s systems from input-related vulnerabilities during deep explorations.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">getAllThemes</code> function to familiarize yourself with the thematic landscape before making adventure choices.</li>
<li>Take note of <code class="inline-code">sanitizeForDisplay</code> to ensure entered commands won&#39;t disrupt starship logs or navigation protocols.</li>
<li>Investigate <code class="inline-code">DEFAULT_THEME</code> to understand how the system reacts to absent or invalid theme input.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the Codeverse.</p>
<p>Stellar navigator, you‚Äôve charted the vast cosmic currents of &quot;Quest 4: Mapping Configurations of the Universe,&quot; hurtling closer to your final mission at warp speed‚Äî3 out of 5 triumphs secured... keep shining, cosmic pioneer! ‚≠êüöÄüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>