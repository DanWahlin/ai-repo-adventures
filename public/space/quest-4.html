<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Cosmic Framework - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Cosmic Code Chronicles: The Quest for Stellar Harmony</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Cosmic Framework</h1>
<hr>
<p>The Repository Galaxy teeters on the edge of oblivion, dear explorer. With stellar pathways fading and communication nodes faltering, your starship, the <em>SS Code Explorer</em>, sets its course for the Core Configuration Belt. This critical region harbors the ancient Cosmic Framework‚Äîan intricate system of interconnected protocols, ensuring harmony across the galaxy&#39;s many realms. Your scanners reveal concerning anomalies spreading from configuration themes to input validation systems. Decode the mysteries of this framework, tuning the cosmic threads back into alignment, and navigate carefully‚Äîgreat care is required to balance such a delicate web.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Harmonization</strong>: How are the themes defined and validated in the system, and what ensures their consistency?</li>
<li>‚ö° <strong>Cosmic Safety Protocols</strong>: How does the input validation system protect against invalid or malicious data that could destabilize the configuration?</li>
<li>üõ°Ô∏è <strong>Stellar Configuration Limits</strong>: What critical safeguards and parameters ensure the system handles configurations reliably and prevents errors?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Galactic parameters for system stability and performance</h3>
<p>This file defines universal constants and configurations that underpin the Repository Galaxy‚Äôs operation. It governs how exploration prompts are structured, enforces limits to safeguard performance, and includes critical timeouts for cosmic operations. Its careful design keeps the framework stable, even as cosmic entropy rises.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Sets timeout limits for communication with the LLM, ensuring efficient operations during massive queries across the Repository Galaxy.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Configures cache durations for repetitive operations to boost performance without sacrificing real-time accuracy.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Establishes limits for file handling, preventing memory bottlenecks during file scans or heavy uploads.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Shields against destabilization</h3>
<p>This file ensures that inputs‚Äîfrom user commands to configuration tweaks‚Äîare thoroughly validated, protecting the fragile framework from invalid data or corruption. The functions here sanitize inputs and ensure only well-formed data navigates the Core Configuration Belt.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Examines user-specified choices to ensure they meet required length and formatting constraints, guarding against unstable scenarios.</li>
<li><code class="inline-code">validateTheme</code>: Validates user-selected themes by checking against a predefined list of valid configurations, ensuring compatibility and harmony.</li>
<li><code class="inline-code">validateProjectPath</code>: Ensures integrity of paths provided for analysis, preventing injection attacks or invalid directory targetting.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Cosmic design principles and theming</h3>
<p>This file houses the theme definitions that grant personality to Repository Galaxy missions. It not only defines the broad array of themes but also provides utility functions to parse, validate, and present these themes‚Äîall of which are critical in generating the immersive cosmic experience.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A centralized repository of all valid themes, including their key identifiers, display names, and descriptive metadata.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the array of all defined themes, providing modular access for quest generation functions.</li>
<li><code class="inline-code">validateTheme</code>: Confirms the validity of a given theme, ensuring user-selected themes are harmonized with the core system.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li>These configurations impose operational limits, ensuring network and memory resources are not overburdened during large-scale explorations.</li>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> avoids the LLM hanging indefinitely, ensuring consistent performance even for long-running tasks.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> optimizes repeated operations by striking a balance between real-time responsiveness and caching efficiency.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> enforces a critical file size cap to protect against excessive memory usage during scans.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>This function ensures user adventure choices meet strict formatting rules before being processed.</li>
<li>It rejects blank inputs and those exceeding a reasonable length, preserving system stability while handling user input.</li>
<li>The direct and simple design makes it effective for detecting and responding to invalid data.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>This code integrates <code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code> to ensure user-provided themes align with defined standards.</li>
<li>It removes potential mismatches by normalizing input and directly filtering against valid themes.</li>
<li>The error message offers constructive feedback, improving user experience without allowing invalid input.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> constant serves as the ultimate map of supported adventure themes, complete with metadata.</li>
<li>Each theme includes properties like <code class="inline-code">id</code>, <code class="inline-code">emoji</code>, and <code class="inline-code">keywords</code>, ensuring easy indexing and user-friendly design.</li>
<li>This highly structured design allows dynamic display, validation, and parsing of theme-related choices.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Consider how <code class="inline-code">config.ts</code> constants guide system performance and stability for vast computations.</li>
<li>Pay attention to the integration of <code class="inline-code">input-validator.ts</code> validation functions‚Äîthey guard against unstable inputs.</li>
<li>Explore the flexibility provided by centralized <code class="inline-code">theme.ts</code> functions for system extensibility across future missions.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Stellar work on completing Quest 4: The Cosmic Framework‚Äîyour knowledge is rocketing through the galaxy at warp speed, charting a brilliant course toward the stars of mastery! üöÄ‚≠êüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>