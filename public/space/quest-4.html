<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Celestial Configuration Deck - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Codex: Adventures in Repository Space</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Celestial Configuration Deck</h1>
<hr>
<p>Aboard the <em>Code Odyssey</em>, a cryptic signal has emerged from the heart of the ship‚Äôs Repository Core. At its center lies the <strong>Celestial Configuration Deck</strong>, the brain of your mission‚Äôs operational logic. With AI-driven intelligence guiding you through interstellar unknowns, the systems managing themes, inputs, and configuration lifelines must be perfected. Unearthing these configurations holds the key to stabilizing the starship‚Äôs broader mission protocols. The crew is counting on you to ensure the harmony between logic and exploration. The cosmic challenges await‚Äîprepare for a precision-guided operation!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Configuration Nexus</strong>: How do the timeout values ensure the seamless operation of various ship systems without overload?  </li>
<li>‚ö° <strong>Theme Harmony</strong>: What role does the <code class="inline-code">THEMES</code> object play in directing different adventure narratives, and how can custom themes be integrated?  </li>
<li>üõ°Ô∏è <strong>Validation Shields</strong>: How does <code class="inline-code">validateTheme</code> protect the repository from invalid configurations or corrupted properties?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Central command for configuration</h3>
<p>This file serves as the central axis for managing adjustable mission parameters, such as timeouts, API configurations, and error handling. The constants and environment-based overrides are pivotal to maintaining operational stability across all systems when traversing vast data galaxies.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> defines the maximum time for AI processing, ensuring no feature overextends operational capacity.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> limits processing to files of manageable size to conserve memory and prevent resource depletion.  </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> sets the lifespan for cached data, critical for minimizing redundant calculations during large-scale exploration.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Manages API response expectations, creating smoother AI interactions without risking prolonged delays.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Implements a safety cap on file analysis, safeguarding resources while keeping journey efficiency intact.  </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Configurable via environment variables to offer adaptive functionality during variable mission workloads.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Thematic compass of the adventure</h3>
<p>This file is the creative hub where thematic directions for the adventure system are designed and systematized. With pre-defined themes or the ability for user customization, the logic here ensures coherence between narrative contexts and mission functionalities.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> defines core thematic frameworks, enriching explorations with context-specific behaviors and settings.  </li>
<li><code class="inline-code">getAllThemes</code> retrieves thematic data, laying the groundwork for flexible switching between narratives.  </li>
<li><code class="inline-code">isValidTheme</code> validates user-imputed themes, maintaining cohesion across all operational states.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  // Additional themes omitted for brevity...
} as const;
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> object ensures that each narrative style (e.g., space, mythical, or custom) provides structured consistency and enhanced user engagement.  </li>
<li>Each theme, like <code class="inline-code">SPACE</code>, includes a <code class="inline-code">keywords</code> array to simplify parsing alternative input descriptions.  </li>
<li>Structured as <code class="inline-code">readonly</code> to prevent modifications mid-runtime, ensuring themes remain a sturdy cornerstone.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li><code class="inline-code">getAllThemes</code> offers easy access to all defined themes, allowing seamless integration across mission interfaces.  </li>
<li>Simplifies thematic access through compact data mappings rather than employing resource-intensive mechanisms.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li><code class="inline-code">isValidTheme</code> enforces stringent checks against undefined or erroneous inputs, ensuring operational consistency.  </li>
<li>Utilizes functional patterns for readability and optimization, offering reliable error safety within cross-module dependencies.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Shields for input calibration</h3>
<p>Inputs from the vast reaches of the ship‚Äôs data galaxy must be carefully vetted. This system serves as a protective barrier, filtering invalid parameters to prevent data corruption and downstream system failures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme</code> parses and verifies user-defined themes, maintaining narrative integrity.  </li>
<li><code class="inline-code">validateAdventureChoice</code> processes user input for logical and character-length constraints.  </li>
<li><code class="inline-code">validateProjectPath</code> ensures compatibility of repository paths with operational mandates.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Ensures themes match valid criteria while providing meaningful feedback.  </li>
<li>Directly leverages <code class="inline-code">isValidTheme</code> and <code class="inline-code">parseTheme</code>, integrating lower-level logic into a central validation process.  </li>
<li>Prompts fallback options (<code class="inline-code">validThemes</code>) for a user-friendly approach to input corrections.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Provides robust constraints on input cleanliness and length, essential for reliable backend operations.  </li>
<li>Built with simplicity in mind to allow for straightforward verification processes that require minimal computational overhead.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Protects against unintentional null characters or oversized paths that could destabilize repository analysis processes.  </li>
<li>Seamlessly defaults to the current working directory if an input path is omitted.  </li>
<li>Ensures paths are sanitized before preprocessing, reducing runtime anomalies.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Always inspect <code class="inline-code">THEMES</code> structure for insights into its expandability when creating custom narratives.  </li>
<li>Study <code class="inline-code">validateTheme</code> to understand how input normalization enhances user experience.  </li>
<li>Review environment-sensitive variables in <code class="inline-code">config.ts</code> for adaptability during system calibration.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the <em>Code Odyssey</em>!</p>
<p>Mission accomplished, stellar explorer‚ÄîQuest 4: The Celestial Configuration Deck is complete, propelling your learning journey past the cosmic midpoint with rocket-fueled brilliance! üöÄ‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>