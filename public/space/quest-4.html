<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Stellar Configuration Hub - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Galactic Repository Adventures</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Stellar Configuration Hub</h1>
<hr>
<p>The starship <em>Code Voyager</em> approaches the dazzling Stellar Configuration Hub, a nebula of interwoven data streams. Within its depths lies the key to refining your ship&#39;s theme alignment and optimizing intergalactic systems. Your crew must investigate crucial patterns in configuration files, explore theme logic, and validate celestial inputs to ensure smooth navigation through the repository galaxy. Each discovery brings you closer to mastering this cosmic vessel, revealing the secrets of adventure generation and computational flow.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üåå <strong>Configuration Calibration</strong>: How are timeouts and cache limits set to maintain interstellar system stability, and what constraints do they impose?</li>
<li>‚ú® <strong>Theme Orbit</strong>: What structure and logic govern theme definitions, and how do themes influence the adventure experience?</li>
<li>üîç <strong>Input Scanner</strong>: How is user input validated and sanitized to prevent anomalies during theme selection and adventure progression?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Interstellar Configuration Management</h3>
<p>The <code class="inline-code">config.ts</code> file outlines constants and environment-driven configuration settings critical for smooth starship operations. It defines timeout limits, cache settings, and size constraints, ensuring secure and efficient exploration of cosmic repositories. It also includes error messages and ignored patterns to guide repository scans while maintaining memory and resource integrity. These configurations ensure the <em>Code Voyager</em> operates effectively during high-load missions across the galaxy.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Specifies the maximum time the system can wait for responses from the LLM engine, ensuring timely communication during quests.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Defines which directories and files should be omitted from scans, allowing exclusion of irrelevant or system-heavy components.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Sets the initial theme when none is specified, aligning the adventure experience with the ship&#39;s space exploration identity.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;,
  &#39;.DS_Store&#39;,
  &#39;Thumbs.db&#39;,
] as const;
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<ul>
<li>Limits such as <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensure operational stability during complex story generation across the repository galaxy.</li>
<li>Directory exclusions through <code class="inline-code">IGNORE_PATTERNS</code> reduce resource strain and focus on processing high-value source files.</li>
<li>The configuration&#39;s <code class="inline-code">DEFAULT_THEME</code> embeds the cosmic space identity, simplifying theme initialization.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Galactic Theme Logic</h3>
<p>The <code class="inline-code">theme.ts</code> file is the single source of truth for defining and managing adventure themes. It provides mechanisms for theme retrieval, validation, and formatting, allowing users to experience customized story paths. Themes are enriched with descriptive data, keywords for input matching, and emoji identifiers, making them intuitive and engaging. These capabilities ensure that the adventures adapt dynamically to user preferences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines available themes, connecting their metadata (e.g., descriptions, keywords) to the adventure system.</li>
<li><code class="inline-code">getThemeByKey</code>: Retrieves a theme by its unique key, ensuring quick mapping of user inputs to defined options.</li>
<li><code class="inline-code">parseTheme</code>: Implements robust theme parsing using string matching and ID-based lookup, allowing for flexible input interpretations.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Other themes omitted for brevity
} as const;

export function getThemeByKey(key: string): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.key === key) || null;
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;

  const normalized = input.trim().toLowerCase();

  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;

  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }

  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }

  return null;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> allows users to explore predefined journeys like &quot;Space Exploration,&quot; equipped with unique descriptions and identifiers.</li>
<li><code class="inline-code">getThemeByKey</code> ensures fast theme lookup via simple key-based matching, enhancing usability and system performance.</li>
<li>The flexible logic in <code class="inline-code">parseTheme</code> accommodates varied user inputs, making theme selection highly accessible.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Cosmic Input Validation</h3>
<p>The <code class="inline-code">input-validator.ts</code> file embodies the principles of interstellar input safety, validating adventure choices, themes, and project paths. It ensures that user inputs align with system requirements, protecting against anomalies that could disrupt navigation through the repository galaxy. Processing user input effectively supports the ship&#39;s theme selection and quest initiation systems.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates user-provided choices for adventures, ensuring non-empty and appropriately sized inputs.</li>
<li><code class="inline-code">validateTheme</code>: Normalizes and validates theme inputs against defined options, safeguarding against invalid selections.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleans user input for safe display, removing possible anomalies or characters that could cause rendering issues.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}

export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li>Accurate validations by <code class="inline-code">validateAdventureChoice</code> ensure users input meaningful and error-free choices, avoiding disruptions.</li>
<li>Input normalization and validation in <code class="inline-code">validateTheme</code> prevent invalid selections, maintaining consistent adventure quality.</li>
<li>Sanitization techniques in <code class="inline-code">sanitizeForDisplay</code> protect system displays from harmful or overly lengthy data, ensuring secure interactions.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Consider the role of global constants in defining the system&#39;s operational constraints.</li>
<li>Analyze how input validation patterns safeguard adventurer choices and theme integration.</li>
<li>Explore theme-related metadata to better understand its influence on user experience.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Mission accomplished, Cadet‚Äîyour precision in configuring the Stellar Hub has propelled us to 60% completion of this cosmic odyssey; the stars salute your brilliance! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>