<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö¶ Quest 2: Astro-Quest Engine - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <script>
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>
    <!-- Animated background SVG -->
    <div class="animated-background">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top: 0; left: 0; z-index: -2; opacity: 0.6;">
            <defs>
                <linearGradient id="spaceGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#64ffda" stop-opacity="0.8"/>
                    <stop offset="50%" stop-color="#82b1ff" stop-opacity="0.6"/>
                    <stop offset="100%" stop-color="#7c4dff" stop-opacity="0.4"/>
                </linearGradient>
                <linearGradient id="ancientGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#ffd700" stop-opacity="0.8"/>
                    <stop offset="50%" stop-color="#ff8c00" stop-opacity="0.6"/>
                    <stop offset="100%" stop-color="#8b4513" stop-opacity="0.4"/>
                </linearGradient>
                <linearGradient id="mythicalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#9370db" stop-opacity="0.8"/>
                    <stop offset="50%" stop-color="#da70d6" stop-opacity="0.6"/>
                    <stop offset="100%" stop-color="#4b0082" stop-opacity="0.4"/>
                </linearGradient>
                <radialGradient id="planetGradient" cx="30%" cy="30%" r="70%">
                    <stop offset="0%" stop-color="#64b5f6"/>
                    <stop offset="50%" stop-color="#1976d2"/>
                    <stop offset="100%" stop-color="#0d47a1"/>
                </radialGradient>
                <radialGradient id="moonGradient" cx="40%" cy="40%" r="60%">
                    <stop offset="0%" stop-color="#e0e0e0"/>
                    <stop offset="70%" stop-color="#9e9e9e"/>
                    <stop offset="100%" stop-color="#424242"/>
                </radialGradient>
                <linearGradient id="spaceshipGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#90caf9"/>
                    <stop offset="50%" stop-color="#64b5f6"/>
                    <stop offset="100%" stop-color="#1976d2"/>
                </linearGradient>
                <filter id="glow">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feMerge> 
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>

            <!-- Space Adventure Animation -->
            <g class="space-theme" style="display: var(--space-display, block);">
                
                <!-- Background Stars - MUCH MORE VISIBLE -->
                <g class="stars">
                    <circle cx="5%" cy="15%" r="8" fill="#ffffff" opacity="0.9">
                        <animate attributeName="opacity" values="0.6;1;0.6" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="12%" cy="25%" r="6" fill="#64ffda" opacity="0.8">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="25%" cy="10%" r="10" fill="#82b1ff" opacity="0.9">
                        <animate attributeName="opacity" values="0.6;1;0.6" dur="5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="35%" cy="30%" r="5" fill="#ffffff" opacity="0.7">
                        <animate attributeName="opacity" values="0.4;0.9;0.4" dur="6s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="45%" cy="8%" r="7" fill="#7c4dff" opacity="0.8">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="3.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="55%" cy="20%" r="6" fill="#64ffda" opacity="0.7">
                        <animate attributeName="opacity" values="0.4;0.9;0.4" dur="4.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="65%" cy="35%" r="9" fill="#ffffff" opacity="0.8">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="5.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="15%" cy="85%" r="7" fill="#82b1ff" opacity="0.8">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="30%" cy="90%" r="8" fill="#7c4dff" opacity="0.7">
                        <animate attributeName="opacity" values="0.4;0.9;0.4" dur="6s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="50%" cy="85%" r="6" fill="#ffffff" opacity="0.8">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="3s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Distant Galaxy - MUCH MORE VISIBLE -->
                <ellipse cx="75%" cy="25%" rx="40" ry="20" fill="none" stroke="url(#spaceGradient)" stroke-width="3" opacity="0.8">
                    <animateTransform attributeName="transform" type="rotate" 
                        values="0 75 25; 360 75 25" dur="120s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="8s" repeatCount="indefinite"/>
                </ellipse>

                <!-- Planet System (Right Side Outside Content) - MUCH BIGGER AND MORE VISIBLE -->
                <g class="planet-system" transform="translate(1400, 400)">
                    <!-- Planet -->
                    <circle cx="0" cy="0" r="60" fill="url(#planetGradient)" filter="url(#glow)" opacity="0.9">
                        <animate attributeName="opacity" values="0.8;1;0.8" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <!-- Planet surface details -->
                    <circle cx="-20" cy="-15" r="10" fill="#4a90e2" opacity="0.8"/>
                    <circle cx="15" cy="20" r="15" fill="#357abd" opacity="0.7"/>
                    <circle cx="-8" cy="30" r="8" fill="#4a90e2" opacity="0.9"/>
                    
                    <!-- Moon orbit path (visible for debugging) -->
                    <circle cx="0" cy="0" r="100" fill="none" stroke="#64ffda" stroke-width="1" opacity="0.3"/>
                    
                    <!-- Moon -->
                    <g class="moon">
                        <circle cx="100" cy="0" r="20" fill="url(#moonGradient)" filter="url(#glow)" opacity="0.9">
                            <animate attributeName="opacity" values="0.7;1;0.7" dur="3s" repeatCount="indefinite"/>
                        </circle>
                        <!-- Moon craters -->
                        <circle cx="105" cy="-5" r="4" fill="#666" opacity="0.6"/>
                        <circle cx="95" cy="5" r="3" fill="#666" opacity="0.5"/>
                        
                        <!-- Moon orbital animation -->
                        <animateTransform attributeName="transform" type="rotate" 
                            values="0 0 0; 360 0 0" dur="20s" repeatCount="indefinite"/>
                    </g>
                </g>

                <!-- Spaceship Journey - MUCH BIGGER AND MORE VISIBLE -->
                <g class="spaceship">
                    <!-- Spaceship body -->
                    <g>
                        <ellipse cx="0" cy="0" rx="30" ry="10" fill="url(#spaceshipGradient)" filter="url(#glow)" opacity="0.9"/>
                        <!-- Spaceship details -->
                        <rect x="-20" y="-3" width="40" height="6" fill="#82b1ff" opacity="0.9"/>
                        <circle cx="-15" cy="0" r="4" fill="#64ffda" opacity="1"/>
                        <circle cx="15" cy="0" r="3" fill="#ff6b6b" opacity="0.9"/>
                        
                        <!-- Engine glow -->
                        <ellipse cx="-30" cy="0" rx="8" ry="5" fill="#64ffda" opacity="0.8">
                            <animate attributeName="opacity" values="0.5;1;0.5" dur="0.5s" repeatCount="indefinite"/>
                        </ellipse>
                        
                        <!-- Human figure in spaceship -->
                        <g class="human" transform="translate(5, 0)">
                            <circle cx="0" cy="-3" r="3" fill="#ffcc99" opacity="0.9"/> <!-- Head -->
                            <rect x="-2" y="0" width="4" height="6" fill="#4a90e2" opacity="0.9"/> <!-- Body -->
                        </g>
                        
                        <!-- Spaceship trail -->
                        <ellipse cx="-40" cy="0" rx="15" ry="3" fill="#64ffda" opacity="0.4">
                            <animate attributeName="opacity" values="0.2;0.6;0.2" dur="1s" repeatCount="indefinite"/>
                        </ellipse>
                    </g>
                    
                    <!-- Journey Animation (60 second cycle) -->
                    <animateTransform attributeName="transform" type="translate"
                        values="100 400; 100 400; 500 400; 600 400; 600 400; 500 400; 100 400; 100 400"
                        dur="60s" repeatCount="indefinite"/>
                    
                    <!-- Opacity for fade out effect -->
                    <animate attributeName="opacity" 
                        values="0;1;1;1;1;1;1;0" 
                        dur="60s" repeatCount="indefinite"/>
                </g>

                <!-- Spaceship Trail Effect - MORE VISIBLE -->
                <g class="spaceship-trail">
                    <path d="M 100 400 Q 300 250 500 400" stroke="url(#spaceGradient)" stroke-width="5" 
                          fill="none" opacity="0.8" stroke-dasharray="10,10">
                        <animate attributeName="stroke-dashoffset" values="0;-20" dur="1s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" 
                            values="0;0;0.8;1;0.8;0;0;0" 
                            dur="60s" repeatCount="indefinite"/>
                    </path>
                </g>

            </g>

            <g class="ancient-theme" style="display: var(--ancient-display, none);">
                <polygon points="10,20 20,20 15,10" fill="url(#ancientGradient)" opacity="0.4" 
                         transform="translate(50, 200)">
                    <animateTransform attributeName="transform" type="translate" 
                        values="50,200; 80,160; 50,200" dur="12s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.2;0.6;0.2" dur="8s" repeatCount="indefinite"/>
                </polygon>
                <rect x="640" y="240" width="8" height="8" fill="url(#ancientGradient)" opacity="0.3"
                      transform="rotate(45, 644, 244)">
                    <animateTransform attributeName="transform" type="rotate" 
                        values="45 644 244; 405 644 244; 45 644 244" dur="20s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.3;0.7;0.3" dur="6s" repeatCount="indefinite"/>
                </rect>
                <circle cx="20%" cy="70%" r="4" fill="none" stroke="url(#ancientGradient)" 
                        stroke-width="2" opacity="0.4">
                    <animate attributeName="r" values="4;6;4" dur="10s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.2;0.5;0.2" dur="7s" repeatCount="indefinite"/>
                </circle>
            </g>

            <g class="mythical-theme" style="display: var(--mythical-display, none);">
                <path d="M 15,25 L 18,22 L 21,25 L 18,28 Z M 15,25 L 12,22 L 15,19 L 18,22 Z" 
                      fill="url(#mythicalGradient)" opacity="0.5" transform="translate(80, 240)">
                    <animateTransform attributeName="transform" type="rotate" 
                        values="0 98 258; 360 98 258; 0 98 258" dur="8s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.3;0.8;0.3" dur="4s" repeatCount="indefinite"/>
                </path>
                <path d="M 5,10 L 7,8 L 9,10 L 7,12 Z" fill="url(#mythicalGradient)" 
                      opacity="0.4" transform="translate(600, 160)">
                    <animateTransform attributeName="transform" type="translate" 
                        values="600,160; 624,120; 600,160" dur="6s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.2;0.7;0.2" dur="3s" repeatCount="indefinite"/>
                </path>
                <circle cx="25%" cy="75%" r="3" fill="url(#mythicalGradient)" opacity="0.4">
                    <animate attributeName="r" values="3;6;3" dur="5s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.3;0.8;0.3" dur="4s" repeatCount="indefinite"/>
                </circle>
            </g>
        </svg>
    </div>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">üöÄ Starship Polaris: Navigators of the Code Nebula</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1><span class="header-prefix">üö¶ Quest 2:</span> Astro-Quest Engine</h1>
<hr>
<p>The Starship Polaris glides deeper into the Code Nebula, its Astro-Quest Engine humming with potential. This chapter calls for mastery of the Neural Navigation Grid, where stellar code clusters unravel into cosmic clarity. As you calibrate the Repomix Scanner and synchronize LLM cores, your crew is challenged to decipher the operational protocols powering the MCP adventure tools. Each system check brings you closer to mapping the nebula‚Äôs mysteries, transforming tangled digital wormholes into clear pathways and unlocking new realms for exploration.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">src/server.ts:</span> MCP server protocol implementation that hosts the adventure tools</h3>
<p>This critical module powers the nerve center of your Starship Polaris‚Äîthe MCP server that interfaces with the myriad adventure tools. The <code class="inline-code">RepoAdventureServer</code> class plays a commanding role here, especially its <code class="inline-code">setupHandlers</code> method. This method acts like mission control, registering crucial MCP protocol handlers that connect your ship‚Äôs MCP ListTools and CallTool requests to their proper internal processes, much like linking the ship&#39;s sensors to the bridge consoles.</p>
<p>The <code class="inline-code">run</code> method ensures your engine stays primed, connecting the stdio transport channels and pre-generating repomix content, akin to charging the starship‚Äôs engines before jump to warp speed. Finally, the <code class="inline-code">main</code> function initiates the MCP server launch sequence, overseeing graceful shutdown and error recovery mechanisms. This ensures your mission remains smooth even in cosmic turbulence.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">RepoAdventureServer.setupHandlers</code>: Registers MCP protocol handlers for tool requests  </li>
<li><code class="inline-code">RepoAdventureServer.run</code>: Connects stdio transport and primes repomix content  </li>
<li><code class="inline-code">main</code>: Entry point managing launch, shutdown, and error handling  </li>
<li>Placeholder bullet</li>
</ul>
<h3><span class="header-prefix">src/tools/tools.ts:</span> The 4 main MCP tools that provide the user interface to the adventure system</h3>
<p>The tools module embodies the Starship‚Äôs interactive dashboard with four primary MCP tools acting as command panels. The <code class="inline-code">start_adventure.handler</code> initiates the mission sequence by analyzing code repositories and presenting available thematic star charts to the crew, establishing a shared mission vision.</p>
<p>The <code class="inline-code">choose_theme.handler</code> handshakes with the LLM cores to generate vivid themed stories and adventures, setting narrative courses for exploration. Meanwhile, <code class="inline-code">explore_quest.handler</code> pilots each quest execution, dynamically tracking progress across waypoints. Finally, the <code class="inline-code">view_progress.handler</code> offers a real-time status board, reporting completed quests and stellar mission metrics. Together, these handlers empower the crew to navigate the nebula with structured control.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">start_adventure.handler</code>: Initiates repo analysis and theme selection  </li>
<li><code class="inline-code">choose_theme.handler</code>: Generates themed stories and adventures  </li>
<li><code class="inline-code">explore_quest.handler</code>: Executes quests with progress tracking  </li>
<li><code class="inline-code">view_progress.handler</code>: Displays mission progress and stats</li>
</ul>
<h3><span class="header-prefix">src/adventure/adventure-manager.ts:</span> Adventure orchestration managing state, themes, and user interactions</h3>
<p>At the heart of the Polaris exploration system is the AdventureManager, orchestrating journey flow with precision. Its <code class="inline-code">initializeAdventure</code> method sets the starship‚Äôs coordinates by establishing project context, selecting themes, and invoking LLM generation for story and adventurous quests that chart the data galaxy.</p>
<p>When the crew chooses a quest, <code class="inline-code">exploreQuest</code> validates navigation inputs and invokes new or cached content generation for efficiency. The manager intelligently merges configuration files from <code class="inline-code">adventure.config.json</code>, ensuring the precise files needed for quests align with the navigational charts. The <code class="inline-code">progressPercentage</code> property offers a stellar dashboard metric, reflecting overall journey completion as the crew conquers each cosmic puzzle.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Starts quest journey with story and theme  </li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Validates and executes quests, caching results  </li>
<li><code class="inline-code">AdventureManager.generateQuestContent</code>: Generates targeted or full repomix content  </li>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Tracks progress through the adventure map</li>
</ul>
<h3><span class="header-prefix">src/adventure/story-generator.ts:</span> LLM-powered story creation with theme-based narratives and prompt engineering</h3>
<p>The StoryGenerator is the captain‚Äôs translator, converting raw code nebula data into compelling interstellar narratives. Using advanced LLM prompts, it synthesizes the mission briefing and quest details aligned with thematic cosmic vocabulary. Methods like <code class="inline-code">generateStoryAndQuests</code> orchestrate initial story creation, parsing the LLM‚Äôs markdown-coded responses into actionable adventure quests.</p>
<p>When the crew requires detailed guidance, <code class="inline-code">generateQuestContent</code> streams targeted code insights and exploration prompts, illuminating the dark matter of codebases. The <code class="inline-code">generateCompletionSummary</code> wraps each quest with starlogs of progress and achievement. Robust validation using Zod schemas and timeouts ensures smooth POI transmissions. This engine blends space mythos and rigorous technical guidance into one seamless voyage.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndQuests</code>: Creates story and adventure list via LLM  </li>
<li><code class="inline-code">generateQuestContent</code>: Delivers detailed quest narratives with code context  </li>
<li><code class="inline-code">generateCompletionSummary</code>: Summarizes mission progress with thematic flair  </li>
<li>Uses prompt engineering and validation schemas for reliability</li>
</ul>
<h2>Code</h2>
<h3>src/server.ts</h3>
<pre><code class="language-typescript">import * as mcp from &#39;@mcp/protocol&#39;;
import { RepoAdventureServer } from &#39;./server/repo-adventure-server.js&#39;;

async function main() {
  try {
    const server = new RepoAdventureServer();
    await server.setupHandlers();
    await server.run();
  } catch (error) {
    console.error(&#39;üö® Fatal error in MCP server:&#39;, error);
    process.exit(1);
  }

  // Graceful shutdown handling
  process.on(&#39;SIGINT&#39;, () =&gt; {
    console.log(&#39;Shutting down MCP server...&#39;);
    process.exit();
  });
}

// Start the server on script execution
main();
</code></pre>
<p>This code is like mission control launching your starship‚Äôs core MCP server, with setup, run, and emergency shutdown protocols ready for smooth operations.</p>
<hr>
<h3>src/tools/tools.ts</h3>
<pre><code class="language-typescript">import { MCPTool } from &#39;@mcp/toolkit&#39;;

// Handler for starting new adventure and analyzing repo
export const start_adventure = {
  handler: async (request) =&gt; {
    const repoData = await analyzeRepository(request.repoPath);
    const themes = getAvailableThemes();
    return { message: &#39;Choose your theme&#39;, themes, repoData };
  }
};

// Handler for theme selection and story generation
export const choose_theme = {
  handler: async (request) =&gt; {
    const story = await generateStoryForTheme(request.theme, request.repoData);
    return { story, quests: story.quests };
  }
};

// Handler for exploring individual quest
export const explore_quest = {
  handler: async (request) =&gt; {
    const questResult = await executeQuest(request.questId);
    return questResult;
  }
};

// Handler to view adventure progress
export const view_progress = {
  handler: (request) =&gt; {
    return getAdventureProgress();
  }
};
</code></pre>
<p>Picture these handlers as your starship‚Äôs interactive panels, responding instantly as you chart new adventures or check mission logs in real time.</p>
<hr>
<h3>src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">export class AdventureManager {
  private state: AdventureState = new AdventureState();

  async initializeAdventure(projectInfo, theme, projectPath) {
    this.state.reset();
    this.state.projectInfo = projectInfo;
    this.state.currentTheme = theme;
    this.state.projectPath = projectPath || process.cwd();

    const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);

    this.state.title = storyResponse.title;
    this.state.story = storyResponse.story;

    this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);

    return this.formatStoryWithQuests({ ...storyResponse, quests: this.state.quests });
  }

  async exploreQuest(choice) {
    const quest = this.findQuest(choice);
    if (!quest) {
      return { narrative: &quot;Quest not found. Please choose from the available quests.&quot;, choices: this.getAvailableQuestChoices() };
    }

    let content, summary;
    const cached = this.state.questContentCache.get(quest.id);

    if (cached) {
      content = cached.content;
      summary = cached.summary;
      content = { ...content, adventure: `üîÑ **[REVISITING COMPLETED QUEST]**\n\n${content.adventure}` };
    } else {
      content = await this.generateQuestContent(quest);
      summary = await this.generateCompletionSummary(quest);
      this.state.questContentCache.set(quest.id, { content, summary });
    }

    this.state.completedQuests.add(quest.id);

    return {
      narrative: this.formatQuestResult(content, summary),
      choices: this.getAvailableQuestChoices(),
      completed: true,
      progressUpdate: `Progress: ${this.state.progressPercentage}% complete (${this.state.completedQuests.size}/${this.state.quests.length} quests finished)`
    };
  }
}
</code></pre>
<p>This manager runs like the starship‚Äôs mission computer, tracking every step and caching previous discoveries to speed future voyages through the cosmic code.</p>
<hr>
<h3>src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">export class StoryGenerator {
  async generateStoryAndQuests(projectInfo, theme, projectPath) {
    const repomixContent = projectInfo.repomixContent || &#39;&#39;;
    const formattedConfig = projectPath ? formatAdventureConfigForPrompt(projectPath) : &#39;&#39;;

    const prompt = loadStoryGenerationPrompt({
      theme,
      repomixContent,
      adventureGuidance: formattedConfig
    });

    const response = await this.llmClient.generateResponse(prompt, { maxTokens: LLM_MAX_TOKENS_STORY });

    let parsed = parseMarkdownToStoryResponse(response.content);

    return parsed;
  }

  async generateQuestContent(quest, theme, codeContent) {
    const prompt = loadQuestContentPrompt({
      theme,
      adventureTitle: quest.title,
      codeContent,
      storyContent: this.currentStoryContent || &#39;&#39;
    });

    const response = await this.llmClient.generateResponse(prompt, { maxTokens: LLM_MAX_TOKENS_QUEST });

    let content = response.content.trim();

    if (content.startsWith(&#39;```markdown&#39;)) {
      content = content.replace(/^```markdown\s*/, &#39;&#39;).replace(/\s*```$/, &#39;&#39;);
    }

    return {
      adventure: content,
      fileExploration: &#39;&#39;,
      codeSnippets: [],
      hints: []
    };
  }
}
</code></pre>
<p>This generator acts like the ship‚Äôs onboard storyteller, translating stellar code signals into captivating mission logs and quest briefings.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Focus on understanding how the MCP server (<a href="https://github.com/danwahlin/mcp-repo-adventure/blob/main/src/server.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/server.ts</code></a>) integrates with the asynchronous adventure tool handlers to form a responsive exploration engine.</li>
<li>Dive deep into how <code class="inline-code">AdventureManager</code> manages quest caching, ensuring smooth re-entries to quests and efficient resource use.</li>
<li>Next, explore prompt engineering details in <code class="inline-code">story-generator.ts</code> to learn how to customize narrative styles and enhance thematic storytelling for brand new mission logs.</li>
</ul>
<hr>
<p>Mission accomplished: You‚Äôve successfully ignited the Astro-Quest Engine, propelling your starship 25% closer to cosmic mastery‚Äîonward to the stars!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: üõ∞Ô∏è Quest 3: Nebula Scan Systems ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/mcp-repo-adventure" target="_blank" rel="noopener noreferrer" class="repo-link">MCP Repo Adventure</a>
        </div>
    </footer>
</body>
</html>