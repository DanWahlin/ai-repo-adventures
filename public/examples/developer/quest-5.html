<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuration & Theme Customization Patterns - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Repository Adventurer's Technical Blueprint</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration &amp; Theme Customization Patterns</h1>
<hr>
<p>Our journey concludes in the realm of configurations and themes: a cornerstone of a streamlined, modern development workflow. Here, you‚Äôll explore how the system defines, validates, and integrates configuration and themes within the adventure framework. Understanding these patterns will help you uncover techniques for creating adaptable, tightly coupled systems while adhering to developer-friendly design principles.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Definitions</strong>: How are the available themes structured, and what flexibility does the system provide for adding custom themes? </li>
<li>‚ö° <strong>Configuration Variables</strong>: How does the system manage default values and overrides for key project settings such as timeouts and file size limits?</li>
<li>üõ°Ô∏è <strong>Validation Techniques</strong>: How are inputs like project paths and themes validated to ensure system safety and accuracy?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Configuration file handling</h3>
<p>This file provides key functions for managing the <code class="inline-code">adventure.config.json</code> file, which defines essential settings for the system. Functions cover the loading, parsing, and transformation of the configuration data. Key highlights include parsing configuration safely, extracting file paths used in the project, and formatting data to optimize its use for machine-learning prompts.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads the entire adventure configuration file as a raw string.</li>
<li><code class="inline-code">parseAdventureConfig</code>: Parses the raw configuration JSON into a valid object and handles errors gracefully.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Identifies and collects all valid file paths referenced in the configuration.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<ul>
<li>This function reads the configuration file from the specified project path.</li>
<li>Ensures the file exists before attempting to read, protecting against runtime errors.</li>
<li>A utility-centric approach minimizes coupling for better reusability.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<ul>
<li>Parses the raw configuration JSON using a single entry point.</li>
<li>Includes fallback mechanisms for missing files or invalid JSON, ensuring robustness.</li>
<li>Promotes clean separation between reading and parsing.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];
  // More code for traversing and gathering unique paths
  return Array.from(unique);
}
</code></pre>
<ul>
<li>Implements a breadth-first traversal to find file paths in nested configurations.</li>
<li>Uses <code class="inline-code">Set</code> to ensure uniqueness, avoiding duplicate processing.</li>
<li>Validates paths dynamically, making the system more adaptable to changes.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Theme declarations and utilities</h3>
<p>This file centralizes theme definitions, providing functions for retrieval and utility methods for matching, parsing, and formatting themes. Themes are internally represented as constants, ensuring reliability and ease of extension.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A constant object defining all preconfigured themes with properties like <code class="inline-code">id</code> and <code class="inline-code">emoji</code>.</li>
<li><code class="inline-code">getAllThemes</code>: Returns all available themes as an array for easy iteration or display.</li>
<li><code class="inline-code">isValidTheme</code>: Confirms whether a given input corresponds to a valid theme.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust.&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical realms where databases are dragon hoards.&#39;,
    keywords: [&#39;magic&#39;, &#39;castle&#39;, &#39;dragon&#39;]
  },
  // Additional themes...
};
</code></pre>
<ul>
<li>Defines all themes with structured, descriptive properties.</li>
<li>Reduces complexity by centralizing data in a single location.</li>
<li>Customizable keywords make theme selection versatile and intuitive.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>Provides a consistent way to retrieve all themes as an iterable array.</li>
<li>Decouples client logic from data structure designs like objects or arrays.</li>
<li>Simplifies any need for extension or new integrations.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Implements a type guard to ensure safe usage of themes.</li>
<li>Uses minimal iteration for concise, readable validation logic.</li>
<li>Enhances error handling by ensuring invalid inputs are caught early.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a>: Dynamic theme management</h3>
<p>This file encapsulates low-level operations for CSS management and theme-related utilities. It focuses on the physical representation of themes (e.g., CSS files and icons) in the project.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateThemeCSS</code>: Dynamically compiles theme-specific CSS into final output files.</li>
<li><code class="inline-code">getGitHubLogo</code>: Determines the appropriate GitHub logo based on theme specifications.</li>
<li><code class="inline-code">parseThemeArg</code>: Parses and translates CLI arguments into valid themes.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    // Additional CSS files...
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf-8&#39;);
    }
  });
  
  fs.writeFileSync(path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;), combinedCSS);
}
</code></pre>
<ul>
<li>Aggregates multiple CSS files for a cohesive theme experience.</li>
<li>Validates each file‚Äôs existence dynamically, avoiding runtime errors.</li>
<li>Modular approach allows for scalable inclusion of new themes or styles.</li>
</ul>
<hr>
<pre><code class="language-typescript">isLightTheme(theme: AdventureTheme): boolean {
  const lightThemes: AdventureTheme[] = [&#39;mythical&#39;];
  return lightThemes.includes(theme);
}
</code></pre>
<ul>
<li>Separates logic for light/dark theme identification.</li>
<li>Prepares the system for thematic adjustments based on user interaction.</li>
</ul>
<hr>
<pre><code class="language-typescript">parseThemeArg(themeArg: string): AdventureTheme | &#39;all&#39; | null {
  if (themeArg === &#39;all&#39;) return &#39;all&#39;;
  const validThemes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
  
  // Match theme input to predefined themes
  // ...
  return null;
}
</code></pre>
<ul>
<li>Simplifies theme parsing for command-line interfaces.</li>
<li>Handles misconfigurations gracefully, reducing user errors.</li>
<li>Supports only valid options, reinforcing integrity.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Start by exploring the format and validation functions in <code class="inline-code">adventure-config.ts</code> ‚Äì¬†these are crucial for system reliability.</li>
<li>Customize themes through <code class="inline-code">theme.ts</code> and <code class="inline-code">theme-manager.ts</code> to see immediate results in CSS and outputs.</li>
<li>Look for patterns like centralization (e.g., <code class="inline-code">THEMES</code>) for flexibility in your projects.</li>
</ul>
<hr>
<p>You have mastered all the secrets of developer-driven architecture and theme integration! Your adventure is complete.</p>
<p>Congratulations, developer‚ÄîQuest 5: Configuration &amp; Theme Customization Patterns is complete; you&#39;ve successfully refactored your skillset with precision, aligning coding practices to flexibility and scalability‚Äînext stop, Quest 6! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>