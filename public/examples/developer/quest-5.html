<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration and Theme System - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Developer's Guide to AI Repo Adventures</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration and Theme System</h1>
<hr>
<p>In the Developer Documentation realm, the Configuration and Theme System serves as the backbone for customizing the adventure experience. It harmonizes technical constraints and creative storytelling by defining themes, validating inputs, and managing system-wide settings. This system ensures adventures are tailored to user preferences while adhering to performance limits and security protocols. Through its modular architecture, developers can explore how configuration files and theme definitions interact to shape the narrative and functionality of AI Repo Adventures.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Theme Management</strong>: How themes are defined, validated, and utilized across the system.</li>
<li>üîç <strong>Configuration Design</strong>: How centralized settings control performance, security, and feature toggles.</li>
<li>‚ö° <strong>Input Validation</strong>: Techniques for sanitizing and validating user inputs to prevent errors and vulnerabilities.</li>
<li>üí° <strong>Cross-Package Integration</strong>: How shared modules enable consistent functionality across different system components.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<p>This file defines the structure and logic for themes in AI Repo Adventures. It provides a centralized repository of theme data, including their properties, keywords, and helper functions for accessing and validating themes. This module ensures consistent theme management across the codebase and supports dynamic user input parsing for theme selection.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A constant object defining all built-in themes and their properties, including IDs, names, descriptions, and keywords.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a>: A function to match user input to a theme based on keywords, IDs, or names.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L125" target="_blank" rel="noopener noreferrer"><code class="inline-code">getFormattedThemeOptions</code></a>: Generates a formatted list of theme options for display, enhancing user interface clarity.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  }
} as const;
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> defines the foundational data structure for theme management, ensuring all themes are centralized and easily accessible.</li>
<li>Each theme includes descriptive metadata, enabling dynamic matching and display.</li>
<li>The use of <code class="inline-code">readonly</code> properties enforces immutability, preventing accidental modifications.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> dynamically matches user input to a theme based on multiple criteria: exact key, numeric ID, or keyword presence.</li>
<li>The function handles edge cases, such as invalid input or unmatched themes, ensuring robustness.</li>
<li>This approach simplifies user input handling, enhancing the flexibility of theme selection.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<p>This file centralizes system-wide configuration settings, including environment variables, timeouts, limits, and error messages. It provides a single source of truth for managing operational parameters and ensures consistency across the codebase.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the maximum duration for LLM requests, balancing responsiveness and complexity.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Limits the size of files analyzed to optimize performance and prevent memory exhaustion.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Specifies the fallback theme when user input is invalid or missing.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.REPO_ADV_LLM_REQUEST_TIMEOUT || &#39;60000&#39;);
export const MAX_FILE_SIZE_MB = 10;
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures that long-running LLM operations are capped, preventing indefinite delays.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> focuses analysis on manageable file sizes, avoiding resource-intensive operations on large files.</li>
<li><code class="inline-code">DEFAULT_THEME</code> provides a safety net by defining a fallback theme, ensuring the system remains functional in edge cases.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
} as const;
</code></pre>
<ul>
<li>Centralized error messages improve maintainability and ensure consistent feedback across the system.</li>
<li>The use of <code class="inline-code">as const</code> enforces immutability, reducing the risk of accidental changes.</li>
<li>These predefined messages enhance user experience by providing clear, actionable information.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<p>This file manages theme-related operations for the HTML generator, including CSS generation, icon selection, and theme parsing. It bridges the gap between theme definitions and their practical application in the generated adventures.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Combines multiple CSS files into a single theme-specific stylesheet for consistent styling.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a>: Maps themes to specific icons used in templates, enhancing visual differentiation.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseThemeArg</code></a>: Parses command-line arguments to determine the selected theme or handle bulk operations.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>This function automates the creation of theme-specific stylesheets by combining base and theme-specific CSS files.</li>
<li>The use of <code class="inline-code">fs</code> ensures compatibility with file-based operations, while <code class="inline-code">path</code> handles cross-platform directory management.</li>
<li>This modular approach simplifies the process of adding new themes or updating existing ones.</li>
</ul>
<hr>
<pre><code class="language-typescript">getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {
  const themeIcons = {
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },
    developer: { theme: &#39;üíª&#39;, quest: &#39;üîß&#39; }
  };
  
  return themeIcons[theme] || themeIcons.space;
}
</code></pre>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a> maps themes to specific icons, enhancing the visual identity of generated adventures.</li>
<li>The fallback mechanism ensures that all themes have a default icon, maintaining consistency even for unsupported themes.</li>
<li>This function demonstrates the importance of user interface design in improving user engagement.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Review how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> handles edge cases to understand robust input validation techniques.</li>
<li>Explore the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> function to see how modular CSS files are combined for dynamic styling.</li>
<li>Study the <code class="inline-code">DEFAULT_THEME</code> configuration to learn how fallback mechanisms enhance system reliability.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Add a New Theme</strong>: Define a custom theme in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>. Include unique keywords and descriptions, then test its integration with the HTML generator.</li>
<li><strong>Modify CSS Generation</strong>: Update the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> function to include additional animations or styles. Observe how changes affect the generated adventures.</li>
<li><strong>Validate Theme Parsing</strong>: Add console.log statements in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> to trace how user input is matched to themes. Test with edge cases like invalid keywords or mixed-case input.</li>
</ol>
<hr>
<p>You have mastered all the secrets of the Configuration and Theme System! Your adventure is complete.</p>
<p>Congratulations on successfully deploying the Configuration and Theme System‚Äîyour codebase now shines with modular elegance and dynamic styling efficiency, bringing you one commit closer to the final milestone! üöÄ‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>