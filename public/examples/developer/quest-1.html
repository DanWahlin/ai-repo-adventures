<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Adventure Generator - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Developer's Guide to AI Repository Adventures</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Adventure Generator Essentials</h1>
<hr>
<p>The HTML Adventure Generator is the forge where code repositories are transformed into interactive adventures. This tool integrates storytelling with static site generation, allowing developers to explore their codebases through themed narratives. In this quest, you will uncover the inner workings of the generator, understanding how templates, assets, and quests are crafted and assembled into a cohesive HTML experience.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Template Rendering</strong>: How the <code class="inline-code">TemplateEngine</code> processes templates and replaces placeholders dynamically.</li>
<li>üîç <strong>Asset Management</strong>: The role of the <code class="inline-code">AssetManager</code> in copying and organizing assets for single and multi-theme adventures.</li>
<li>‚ö° <strong>HTML Generation Workflow</strong>: How the <code class="inline-code">HTMLAdventureGenerator</code> orchestrates the entire pipeline, from theme selection to quest page creation.</li>
<li>üí° <strong>Modular Design</strong>: The importance of separating concerns between template rendering, asset management, and HTML generation.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> is responsible for rendering HTML templates by replacing placeholders with dynamic content. It uses a caching mechanism to optimize repeated template loading and supports rendering both full pages and template fragments. This file demonstrates efficient template handling and modular design principles.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a> caches and loads template files from the filesystem, ensuring efficient reuse.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> replaces <code class="inline-code">{{key}}</code> placeholders in templates with corresponding values from a variables object.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a> combines a base template with a content template to generate complete HTML pages.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>This code ensures templates are only loaded once, leveraging caching for performance.</li>
<li>The <code class="inline-code">templateCache</code> Map minimizes redundant file reads, improving efficiency during repeated renders.</li>
<li>Error handling provides clear feedback when templates are missing or inaccessible.</li>
<li>The modular design makes this function reusable across different template types.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>This function processes placeholders dynamically, enabling flexible template customization.</li>
<li>Regular expressions ensure all instances of a placeholder are replaced, not just the first occurrence.</li>
<li>Fallbacks (empty strings) prevent rendering issues when variables are missing.</li>
<li>This approach decouples content from structure, adhering to the separation of concerns principle.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);

  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines a base template with dynamic content to produce a full HTML page.</li>
<li>The use of <code class="inline-code">CONTENT</code> as a variable allows seamless integration of content into the base structure.</li>
<li>This modular rendering pipeline supports both static and dynamic content generation.</li>
<li>The design ensures templates remain reusable and adaptable across different themes.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> handles all asset-related tasks, including copying images, CSS, and shared resources. This ensures that the generated adventures are visually consistent and fully functional, regardless of the selected theme.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyImages</code></a> copies theme-specific and shared images to the appropriate output directories.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a> ensures navigation assets (CSS, JS, icons) are included in the output.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a> consolidates shared assets for multi-theme adventures.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);

  try {
    if (fs.existsSync(sourceImagesDir)) {
      fs.mkdirSync(targetImagesDir, { recursive: true });
      const imageFiles = fs.readdirSync(sourceImagesDir);
      imageFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceImagesDir, file);
        const targetPath = path.join(targetImagesDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy images from source directory&#39;));
  }
}
</code></pre>
<ul>
<li>Copies images from the source directory to the output directory, ensuring they are accessible in the generated site.</li>
<li>The <code class="inline-code">recursive</code> option in <code class="inline-code">mkdirSync</code> ensures directories are created as needed.</li>
<li>Error handling provides resilience against missing or inaccessible source directories.</li>
<li>Supports both single-theme and multi-theme setups through the <code class="inline-code">isMultiTheme</code> flag.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);

  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  fs.mkdirSync(assetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
}
</code></pre>
<ul>
<li>Ensures navigation assets are included in the output, enabling user-friendly quest navigation.</li>
<li>The modular design allows these assets to be reused across different themes.</li>
<li>Error handling ensures the process continues even if some assets are missing.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> orchestrates the entire HTML generation process, from analyzing the repository to creating quest pages. It integrates the <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code> to produce a cohesive adventure experience.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> analyzes the codebase, generates quests, and builds the HTML structure.</li>
<li><code class="inline-code">generateAllThemes</code> supports multi-theme generation by isolating theme-specific processes.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> combines theme-specific, base, and animation styles into a single CSS file.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();

  this.htmlBuilder = new HTMLBuilder(
    this.adventureManager,
    this.templateEngine,
    this.contentProcessor,
    this.projectPath,
    this.selectedTheme,
    this.isMultiTheme,
    this.quests
  );

  console.log(chalk.dim(&#39;üé® Creating theme styling...&#39;));
  await this.generateThemeCSS();

  console.log(chalk.dim(&#39;üìù Creating main adventure page...&#39;));
  this.generateIndexHTML();

  console.log(chalk.dim(&#39;üìñ Generating quest pages...&#39;));
  await this.contentGenerator.generateQuestPages();
}
</code></pre>
<ul>
<li>Combines repository analysis, story generation, and HTML building into a single cohesive workflow.</li>
<li>Modular components (<code class="inline-code">htmlBuilder</code>, <code class="inline-code">contentGenerator</code>) ensure separation of concerns.</li>
<li>Supports extensibility by allowing additional steps to be integrated into the pipeline.</li>
<li>The use of async/await ensures non-blocking operations, improving performance.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Explore the <code class="inline-code">TemplateEngine</code> to understand how placeholder replacement enables dynamic content rendering.</li>
<li>Review the <code class="inline-code">AssetManager</code> to see how assets are organized and copied for single and multi-theme adventures.</li>
<li>Examine the <code class="inline-code">HTMLAdventureGenerator</code> to understand how the generation process integrates various components.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Add a New Placeholder</strong>: Modify the <code class="inline-code">TemplateEngine</code> to support a new placeholder (e.g., <code class="inline-code">{{FOOTER}}</code>) and update templates to use it. Observe how the rendering process changes.</li>
<li><strong>Customize Assets</strong>: Add a new image or CSS file to the <code class="inline-code">assets</code> directory and ensure it is copied correctly by the <code class="inline-code">AssetManager</code>. Test its visibility in the generated site.</li>
<li><strong>Limit Quests</strong>: Modify the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> method to limit the number of quests generated. Observe how this affects the output.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the HTML Adventure Generator.</p>
<p>Congratulations on successfully deploying your first &#39;HTML Adventure Generator&#39;‚Äîyour DOM manipulation and semantic structuring skills are now live and ready to scale; keep iterating towards 100% completion! üöÄüíé‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>