<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Configuration Nexus - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Galactic Code Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Cosmic Configuration Nexus</h1>
<hr>
<p>As the Galactic Voyager approaches the outer edges of the codebase nebula, you find yourself at the Cosmic Configuration Nexus. Here, the ship‚Äôs core systems converge to ensure harmony between themes, adventures, and the vast expanse of configuration parameters. This nexus is the lifeline of the starship, where the interplay between themes and system settings guides the crew‚Äôs stellar journey. Your mission is to decode the secrets of configuration, validate inputs, and optimize the ship‚Äôs theme systems to ensure smooth navigation through the cosmic adventures.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Theme System Design</strong>: How themes are structured and dynamically accessed for adventure generation.</li>
<li>üîç <strong>Configuration Management</strong>: How centralized constants and environment variables drive system behavior.</li>
<li>‚ö° <strong>Input Validation Patterns</strong>: Techniques for ensuring user input is secure and adheres to constraints.</li>
<li>üí° <strong>CSS Generation</strong>: How theme-specific assets are combined for consistent visual experiences.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<p>The <code class="inline-code">theme.ts</code> file defines the Galactic Voyager‚Äôs thematic framework, offering a structured approach to theme management. It centralizes theme definitions, provides helper functions for theme parsing, and ensures that adventures are linked to their respective visual and narrative styles. This file is critical for maintaining the thematic cohesion of the ship&#39;s cosmic journeys.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> provides a structured catalog of available themes, each with unique identifiers, descriptions, and keywords.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L74" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeById</code></a> retrieves a theme by its numeric ID for easy reference.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> uses advanced string matching to identify themes based on user input, ensuring flexibility in theme selection.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L120" target="_blank" rel="noopener noreferrer"><code class="inline-code">formatThemeOption</code></a> formats themes for display, combining visual elements like emojis with descriptions.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L125" target="_blank" rel="noopener noreferrer"><code class="inline-code">getFormattedThemeOptions</code></a> generates a complete list of formatted themes for user selection.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Other themes omitted for brevity
};
</code></pre>
<ul>
<li>Defines structured theme data, ensuring consistency across the adventure system.</li>
<li>Each theme includes keywords for flexible user input parsing, enhancing usability.</li>
<li>Themes are stored as constants, reducing the risk of accidental modification.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Implements a flexible theme parser, handling numeric IDs, exact matches, and keyword-based matching.</li>
<li>Demonstrates robust input handling to accommodate diverse user inputs.</li>
<li>Highlights the importance of fallback mechanisms for parsing errors.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<p>The <code class="inline-code">config.ts</code> file serves as the ship&#39;s configuration hub, managing constants, environment variables, and system-wide limits. This file ensures that the ship operates within safe boundaries, balancing performance and resource constraints during its cosmic exploration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> specifies allowable time for LLM responses, ensuring timely story generation.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> controls caching duration for repository analysis, optimizing resource usage.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> enforces size limits on analyzed files to prevent memory issues.</li>
<li><code class="inline-code">DEFAULT_THEME</code> defines the fallback theme for adventures, maintaining system consistency.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> lists directories to exclude during analysis, improving scan efficiency.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.REPO_ADV_LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPO_ADV_REPOMIX_CACHE_TTL || &#39;300000&#39;); // 5 minutes
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues
export const DEFAULT_THEME = &#39;space&#39; as const;
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;dist&#39;,
  &#39;coverage&#39;,
  &#39;*.log&#39;,
];
</code></pre>
<ul>
<li>Centralizes configuration for consistent access across modules.</li>
<li>Environment variables allow dynamic adjustments without code changes.</li>
<li>Ensures system stability by enforcing size and timeout limits.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<p>The <code class="inline-code">theme-manager.ts</code> file handles the generation of theme-specific CSS and assets, ensuring each adventure&#39;s visual identity aligns with its narrative. It plays a vital role in the presentation layer of the Galactic Voyager‚Äôs adventures.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseThemeArg</code></a> parses command-line arguments for theme selection, supporting both numeric and string inputs.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> combines multiple CSS files into a unified stylesheet for a selected theme.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a> provides theme-specific icons for templates, enhancing visual storytelling.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">public generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>Reads multiple CSS files and combines them into a single theme-specific stylesheet.</li>
<li>Ensures modular organization of visual assets, simplifying maintenance.</li>
<li>Highlights the importance of file existence checks to prevent runtime errors.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Explore how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> handles diverse inputs to understand robust parsing techniques.</li>
<li>Notice the use of constants in <code class="inline-code">config.ts</code> to enforce system-wide limits and defaults.</li>
<li>Study the modular CSS generation approach in <code class="inline-code">theme-manager.ts</code> to learn best practices for asset management.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Add a New Theme</strong>: Extend <code class="inline-code">THEMES</code> in <code class="inline-code">theme.ts</code> with a new theme. Include unique keywords and test its parsing in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a>. This will help you understand theme extensibility.</li>
<li><strong>Modify CSS Generation</strong>: Add a new CSS file to the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> method and observe how it integrates into the final output. Experiment with animations or custom styles for your theme.</li>
<li><strong>Validate Inputs</strong>: Enhance <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts#L686" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateTheme</code></a> in <code class="inline-code">input-validator.ts</code> to provide more descriptive error messages when invalid themes are selected.</li>
</ol>
<hr>
<p>You have mastered all the secrets of the Cosmic Configuration Nexus! Your adventure is complete.</p>
<p>Mission accomplished, star voyager! üöÄ You&#39;ve aligned the Cosmic Configuration Nexus with stellar precision, propelling your quest trajectory to 80% completion‚Äîkeep shining like a supernova! ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>