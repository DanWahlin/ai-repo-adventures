<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration and Theme Management - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Cosmic Codebase Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration and Theme Management</h1>
<hr>
<p>As the Starship Codex glides through the Repository Nebula, a new challenge emerges on the horizon. The ship&#39;s thematic systems must be finely tuned to ensure the crew&#39;s journeys are both immersive and efficient. The Configuration Core hums with energy, managing critical parameters, while the Theme Manager refines the visual and narrative experience of the adventures. Your mission is to delve into these systems, ensuring they are aligned and optimized for the galaxy of code exploration ahead.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:  </p>
<ul>
<li>üéØ <strong>Theme Parsing</strong>: How themes are dynamically identified and matched to user input.  </li>
<li>üîç <strong>Configuration Constants</strong>: How centralized configuration simplifies system-wide parameter management.  </li>
<li>‚ö° <strong>CSS Generation Pipeline</strong>: How theme-specific CSS is dynamically composed and written to output directories.  </li>
<li>üí° <strong>Validation Patterns</strong>: Techniques for validating and sanitizing user input to maintain system integrity.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<p>The <code class="inline-code">theme.ts</code> file serves as the central hub for all theme-related definitions and operations. It defines the structure of themes, provides helper functions for parsing and validating themes, and supports dynamic theme matching based on user input or keywords. This file ensures the seamless integration of multiple themes into the adventure system.  </p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L78" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeByKey</code></a> retrieves a theme definition based on its unique key, ensuring consistent access to theme metadata.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> attempts to match user input to a valid theme, supporting both exact matches and keyword-based matching.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L125" target="_blank" rel="noopener noreferrer"><code class="inline-code">getFormattedThemeOptions</code></a> generates a user-friendly list of available themes for display purposes.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export function getThemeByKey(key: string): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.key === key) || null;
}
</code></pre>
<ul>
<li>Provides a simple and efficient way to access theme metadata using a unique key.  </li>
<li>Ensures that theme-related operations are centralized, reducing duplication.  </li>
<li>Plays a critical role in validating user input against predefined theme keys.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  return null;
}
</code></pre>
<ul>
<li>Implements a robust parsing mechanism to match user input to themes.  </li>
<li>Supports multiple input formats, including numeric IDs and keyword searches.  </li>
<li>Enhances user experience by providing flexible input options.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getFormattedThemeOptions(): string {
  return getAllThemes()
    .sort((a, b) =&gt; a.id - b.id)
    .map(formatThemeOption)
    .join(&#39;\n&#39;);
}
</code></pre>
<ul>
<li>Generates a well-structured and visually appealing list of themes.  </li>
<li>Facilitates user interaction by presenting options in an accessible format.  </li>
<li>Demonstrates the use of functional programming techniques for data transformation.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<p>The <code class="inline-code">theme-manager.ts</code> file is responsible for handling theme-specific operations within the HTML generation pipeline. It manages the parsing of theme arguments, CSS generation, and the selection of theme-specific assets. This file is crucial for ensuring that the generated adventures are visually cohesive and aligned with the selected theme.  </p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseThemeArg</code></a> processes command-line arguments to identify the selected theme or handle &quot;all&quot; themes.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> dynamically composes and writes theme-specific CSS files.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a> retrieves theme-specific icons for consistent branding across the adventure.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">parseThemeArg(themeArg: string): AdventureTheme | &#39;all&#39; | null {
  if (themeArg === &#39;all&#39;) return &#39;all&#39;;
  const validThemes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
  if (validThemes.includes(themeArg as AdventureTheme)) {
    return themeArg as AdventureTheme;
  }
  const themeNum = parseInt(themeArg);
  if (themeNum &gt;= 1 &amp;&amp; themeNum &lt;= 4) {
    return validThemes[themeNum - 1];
  }
  return null;
}
</code></pre>
<ul>
<li>Provides a flexible mechanism for parsing theme arguments from the command line.  </li>
<li>Supports both direct theme names and numeric IDs for user convenience.  </li>
<li>Ensures invalid inputs are gracefully handled by returning <code class="inline-code">null</code>.</li>
</ul>
<hr>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  let combinedCSS = &#39;&#39;;
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>Dynamically combines multiple CSS files into a single output for the selected theme.  </li>
<li>Ensures that theme-specific styles are applied consistently across the generated adventure.  </li>
<li>Demonstrates the use of file system operations for dynamic content generation.</li>
</ul>
<hr>
<pre><code class="language-typescript">getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {
  const themeIcons = {
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },
    mythical: { theme: &#39;üè∞&#39;, quest: &#39;‚öîÔ∏è&#39; },
    ancient: { theme: &#39;üè∫&#39;, quest: &#39;üìú&#39; },
    developer: { theme: &#39;üíª&#39;, quest: &#39;üîß&#39; },
    custom: { theme: &#39;üé®&#39;, quest: &#39;‚≠ê&#39; }
  };
  return (themeIcons as any)[theme] || themeIcons.space;
}
</code></pre>
<ul>
<li>Provides a centralized mapping of icons to themes for consistent branding.  </li>
<li>Enhances the visual appeal of the generated adventures.  </li>
<li>Simplifies the process of accessing theme-specific assets.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L93" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseTheme</code></a> function to experiment with different user inputs and observe how themes are matched.  </li>
<li>Study the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> method to understand how multiple CSS files are combined dynamically.  </li>
<li>Explore the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a> function to see how visual elements are tailored to each theme.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:  </p>
<ol>
<li><p><strong>Add a New Theme</strong>: Define a new theme in <code class="inline-code">theme.ts</code> and update the <code class="inline-code">theme-manager.ts</code> file to support it. Test its integration by generating an adventure with the new theme.  </p>
</li>
<li><p><strong>Enhance Validation</strong>: Modify the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">parseThemeArg</code></a> function to provide detailed error messages when invalid inputs are encountered.  </p>
</li>
<li><p><strong>Dynamic Asset Loading</strong>: Extend the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> method to include additional assets like fonts or images based on the selected theme.</p>
</li>
</ol>
<hr>
<p>You have mastered all the secrets of the Starship Codex&#39;s configuration and theme systems! Your adventure is complete.</p>
<p>Mission accomplished, Star Navigator! You&#39;ve successfully charted the cosmic pathways of Configuration and Theme Management, propelling your learning starship to 80% completion‚Äînext stop: the final frontier! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>