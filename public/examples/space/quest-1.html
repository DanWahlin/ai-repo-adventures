<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stellar HTML Generation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Stellar Repository Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: Stellar HTML Generation</h1>
<hr>
<p>As the Starship Codebreaker NX-2023 ventures into the uncharted galaxy of repositories, the crew prepares to activate the HTML generation system. This system transforms raw cosmic code clusters into interactive adventures, ready to be explored by distant civilizations. Onboard engineers work tirelessly to ensure the process is seamless‚Äîmerging themes, quests, and assets into a unified experience. Your role is critical: guide the ship&#39;s systems to harness the full potential of its HTML generation capabilities, ensuring every adventure is a stellar masterpiece.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Dynamic HTML Generation</strong>: How to generate complete HTML adventure pages using modular and reusable components.</li>
<li>üîç <strong>Template Systems</strong>: The importance of templates and placeholder replacement in creating dynamic content.</li>
<li>‚ö° <strong>Asset Management</strong>: Techniques for handling and copying static assets across themes and output directories.</li>
<li>üí° <strong>Multi-Theme Support</strong>: Key strategies for generating and managing multiple themes in parallel.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>This file serves as the command center for HTML generation, orchestrating the transformation of code repositories into HTML adventures. The <code class="inline-code">HTMLAdventureGenerator</code> class manages the flow, from analyzing the repository and preparing content to generating theme-specific pages. It demonstrates modular design, allowing for both single-theme and multi-theme generation.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a>: Coordinates the complete adventure generation process, including project analysis, story generation, and quest page creation.</li>
<li><code class="inline-code">generateAllThemes</code>: Orchestrates the generation of all available themes in parallel or sequentially, ensuring isolation between themes.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L339" target="_blank" rel="noopener noreferrer"><code class="inline-code">saveLlmOutput</code></a>: Logs raw LLM outputs for debugging and transparency during content generation.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  console.log(chalk.dim(&#39;‚ú® Generating themed story and quests...&#39;));
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo,
    this.selectedTheme,
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();

  console.log(chalk.dim(&#39;üé® Creating theme styling...&#39;));
  await this.generateThemeCSS();

  console.log(chalk.dim(&#39;üñºÔ∏è Copying images...&#39;));
  const assetManager = await this.getAssetManager();
  assetManager.copyImages(this.outputDir);

  console.log(chalk.dim(&#39;üìñ Generating quest pages...&#39;));
  await this.contentGenerator.generateQuestPages();

  console.log(chalk.dim(&#39;üéâ Creating adventure summary page...&#39;));
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>Coordinates the full adventure generation workflow, linking repository analysis, story creation, and quest page production.</li>
<li>Uses modular components like <code class="inline-code">repoAnalyzer</code>, <code class="inline-code">adventureManager</code>, and <code class="inline-code">contentGenerator</code> for better separation of concerns.</li>
<li>Highlights the importance of asset management to ensure all necessary files are included in the final output.</li>
<li>Demonstrates a clean, step-by-step approach to managing complex workflows.</li>
</ul>
<hr>
<pre><code class="language-typescript">static async generateSingleThemeStatic(theme: AdventureTheme, themeDir: string, ...): Promise&lt;void&gt; {
  const themeGenerator = new HTMLAdventureGenerator();
  themeGenerator.selectedTheme = theme;
  themeGenerator.outputDir = themeDir;

  try {
    await themeGenerator.generateAdventure();
  } finally {
    themeGenerator.cliInterface.close();
  }
}
</code></pre>
<ul>
<li>Isolates theme generation to ensure no state corruption when generating multiple themes.</li>
<li>Demonstrates the use of static factory methods to create self-contained instances for parallel processing.</li>
<li>Highlights a robust error-handling approach with <code class="inline-code">finally</code> to ensure proper cleanup.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> class encapsulates the logic for loading and rendering templates. It facilitates dynamic content generation by replacing placeholders with actual values, making it a cornerstone for generating HTML pages.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a>: Combines a base template with a content template, replacing placeholders to generate complete HTML pages.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a>: Replaces all placeholders in a given template with provided values, ensuring dynamic content rendering.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Demonstrates the process of integrating content templates into a base layout for consistent styling.</li>
<li>Highlights the use of a two-step placeholder replacement process to ensure flexibility.</li>
<li>Encapsulates rendering logic, making it reusable across different content types.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  return result;
}
</code></pre>
<ul>
<li>Implements a straightforward method for replacing placeholders, ensuring templates are dynamically populated.</li>
<li>Uses regular expressions to handle multiple occurrences of the same placeholder.</li>
<li>Demonstrates the use of default values to prevent rendering issues when variables are missing.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> class handles the copying and organization of assets such as images and shared files. It ensures all necessary files are included in the generated HTML output.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a>: Copies shared assets like images and CSS files to global directories.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a>: Handles the copying of quest navigator files for single-theme generation.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
  const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
  fs.mkdirSync(targetImagesDir, { recursive: true });

  const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
  globalImages.forEach(file =&gt; {
    const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
    if (fs.existsSync(sourcePath)) {
      const targetPath = path.join(globalAssetsDir, &#39;shared&#39;, file);
      fs.copyFileSync(sourcePath, targetPath);
    }
  });
}
</code></pre>
<ul>
<li>Demonstrates how to ensure critical assets are copied to the correct locations.</li>
<li>Highlights the use of defensive programming with checks for file existence.</li>
<li>Uses directory creation to handle scenarios where target directories do not exist.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const assetsDir = path.join(outputDir, &#39;assets&#39;);

  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
}
</code></pre>
<ul>
<li>Focuses on copying files specific to the quest navigation system.</li>
<li>Highlights modularity by encapsulating theme-specific asset handling in a dedicated method.</li>
<li>Ensures the generated HTML includes all required navigation features.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When debugging, use <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L339" target="_blank" rel="noopener noreferrer"><code class="inline-code">saveLlmOutput</code></a> to analyze the raw outputs of the LLM during adventure generation.</li>
<li>Experiment with different themes to see how <code class="inline-code">TemplateEngine</code> dynamically adjusts content and styling.</li>
<li>Use <code class="inline-code">generateAllThemes</code> to explore parallel processing techniques for multi-theme generation.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Create a New Theme</strong>: Add a custom theme by creating a new CSS file and updating the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L82" target="_blank" rel="noopener noreferrer"><code class="inline-code">getAllThemes</code></a> function. Test the theme using the <code class="inline-code">generate-html</code> command.</li>
<li><strong>Trace Template Rendering</strong>: Add <code class="inline-code">console.log</code> statements in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a> and <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> to observe how placeholders are replaced during rendering.</li>
<li><strong>Optimize Asset Copying</strong>: Modify <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a> to log the time taken for copying assets. Explore ways to optimize file copying for large projects.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the galaxy&#39;s repositories.</p>
<p>Your quest to master Stellar HTML Generation has launched like a rocket through the coding cosmos‚Äîkeep charting the stars, future web navigator! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>