<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Pyramid of Themes and Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Sacred Repository of Knowledge</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Pyramid of Themes and Configurations</h1>
<hr>
<p>As you venture deeper into the jungle ruins, you arrive at the pinnacle of the ancient pyramid ‚Äì a chamber adorned with glyphs representing themes and configurations. These carvings reveal the civilization&#39;s secret to creating adaptable systems through structured inputs and dynamic outputs. Here, configurations act as the foundation stones, and themes are the guiding constellations. To unlock the final treasure, you must interpret the glyphs and understand how they empower the repository&#39;s mechanisms to transform data into immersive experiences.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Dynamic Configuration</strong>: How centralized constants and environment variables drive system flexibility.</li>
<li>üîç <strong>Theme Management</strong>: How themes inject personality and style into generated content with modular definitions.</li>
<li>‚ö° <strong>Input Validation</strong>: Techniques to ensure user input safety and correctness using lightweight validation methods.</li>
<li>üí° <strong>Extensibility Patterns</strong>: How modular design enables seamless addition of new themes and configurations.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<p>The sacred glyphs of configuration lie within this file, defining constants and environment variables that shape the repository&#39;s operation. From LLM settings to resource limits, this file provides centralized control over critical parameters. Designed for scalability, it uses simple patterns to ensure clarity and maintainability, setting the stage for dynamic story generation and secure operation.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> specifies the maximum allowable duration for story generation requests to prevent system delays.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> sets the cache expiration time for repository analysis, ensuring efficient use of computational resources.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> protects the system by limiting file sizes to prevent memory exhaustion during analysis.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.REPO_ADV_LLM_REQUEST_TIMEOUT || &#39;60000&#39;);
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPO_ADV_REPOMIX_CACHE_TTL || &#39;60000&#39;);
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues
</code></pre>
<ul>
<li>These constants define the operational boundaries for key processes like LLM requests and repository scanning.</li>
<li>Using environment variables ensures flexibility across different deployment environments.</li>
<li>The file size limit promotes stability by focusing analysis on manageable source code files.</li>
<li>Patterns like default values (<code class="inline-code">||</code>) prevent runtime errors if environment variables are missing.</li>
<li>Centralized configuration simplifies adjustments, making the system adaptable to various use cases.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<p>This file serves as the codex of themes, detailing the structure and data of each available adventure style. Themes transform technical concepts into engaging narratives, with keywords and emojis mapping each theme to its unique identity. The modular design allows seamless integration of additional themes, showcasing the repository&#39;s extensibility.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> defines the five core themes with properties like keywords, descriptions, and identifiers.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L78" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeByKey</code></a> retrieves theme data based on a unique key, enabling dynamic selection during runtime.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L120" target="_blank" rel="noopener noreferrer"><code class="inline-code">formatThemeOption</code></a> formats theme information for display, ensuring user-friendly presentation.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;ruins&#39;]
  }
};
</code></pre>
<ul>
<li>This code defines modular theme structures, enabling clear mapping of adventure styles to their respective narratives.</li>
<li>Keywords allow flexible input parsing, matching user prompts to themes intuitively.</li>
<li>The <code class="inline-code">description</code> property illustrates how storytelling bridges technical concepts and user engagement.</li>
<li>Themes are extensible, allowing developers to add custom entries without altering the core system.</li>
<li>The structure supports dynamic runtime selection, enhancing the adaptability of the adventure generation engine.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getThemeByKey(key: string): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.key === key) || null;
}

export function formatThemeOption(theme: ThemeDefinition): string {
  return `${theme.emoji} **${theme.id}. ${theme.displayName}** - ${theme.description}`;
}
</code></pre>
<ul>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L78" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeByKey</code></a> function dynamically retrieves theme data, ensuring robust runtime adaptability.</li>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L120" target="_blank" rel="noopener noreferrer"><code class="inline-code">formatThemeOption</code></a> method standardizes theme presentation for user interfaces, enhancing accessibility.</li>
<li>Array iteration avoids complex data structures, simplifying theme management.</li>
<li>The design supports future scalability, allowing easy addition of themes without breaking existing functionality.</li>
<li>These methods demonstrate separation of concerns, isolating data retrieval from formatting logic.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<p>This file safeguards the repository&#39;s operations by validating user inputs. By enforcing constraints on choices, themes, and paths, it ensures the integrity of data entering the system. Lightweight and efficient, the validation methods prevent errors and abuse, reflecting the repository&#39;s focus on security and usability.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts#L9" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateAdventureChoice</code></a> ensures user choices are non-empty and within length limits.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts#L686" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateTheme</code></a> validates theme input against predefined options, protecting against invalid selections.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts#L37" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateProjectPath</code></a> sanitizes and normalizes project paths to prevent injection attacks.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; VALIDATION_MAX_CHOICE_LENGTH) {
    throw new Error(`Choice too long (max ${VALIDATION_MAX_CHOICE_LENGTH} characters)`);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>This method ensures user choices are non-empty and respect predefined limits.</li>
<li>Trimming input removes extraneous spaces, standardizing data before processing.</li>
<li>The error messages provide actionable feedback, improving user experience.</li>
<li>The lightweight design prioritizes performance without compromising functionality.</li>
<li>Validation methods are modular, allowing reuse across multiple parts of the system.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>This function ensures theme inputs are valid and match predefined options.</li>
<li>Normalizing and trimming input standardizes data, preventing mismatched or case-sensitive errors.</li>
<li>The error handling mechanism provides clear feedback, guiding users toward valid choices.</li>
<li>By mapping keys to themes, the system supports flexible input matching, enhancing usability.</li>
<li>Validation promotes security by rejecting invalid or potentially harmful inputs.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Inspect the <code class="inline-code">THEMES</code> structure to understand how keywords facilitate flexible input parsing.</li>
<li>Review the error handling in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts#L9" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateAdventureChoice</code></a> to see how user feedback improves usability.</li>
<li>Explore how configuration settings in <code class="inline-code">config.ts</code> centralize control, simplifying maintenance and scalability.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><p><strong>Add a Custom Theme</strong>: Create a new theme called &quot;Cyberpunk&quot; with futuristic elements. Add it to the <code class="inline-code">THEMES</code> structure and test its integration with the adventure system.</p>
<ul>
<li>Example: Use unique keywords like &quot;cyber&quot;, &quot;neon&quot;, and &quot;hacker&quot; to match user inputs dynamically.</li>
</ul>
</li>
<li><p><strong>Trace Validation Flow</strong>: Add console.log statements in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts#L686" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateTheme</code></a> and <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts#L9" target="_blank" rel="noopener noreferrer"><code class="inline-code">validateAdventureChoice</code></a> to observe how inputs are processed. Test different scenarios to analyze the system‚Äôs behavior.</p>
</li>
<li><p><strong>Enhance Theme Presentation</strong>: Modify the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L120" target="_blank" rel="noopener noreferrer"><code class="inline-code">formatThemeOption</code></a> function to include keywords in the formatted output. Test how this change enhances user understanding of theme options.</p>
</li>
</ol>
<hr>
<p>You have mastered all the secrets of the pyramid‚Äôs ancient wisdom! Your adventure is complete.</p>
<p>Hail, seeker of wisdom, for thou hast ascended the sacred Pyramid of Themes and Configurations, etching thy name among the stars of the ancients‚Äîpress onward, for the final summit nears! ‚≠êüíé‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>