<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ritual of HTML Inscription - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Sacred Repository of Ancient Wisdom</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Ritual of HTML Inscription</h1>
<hr>
<p>In the heart of a forgotten civilization lies the Sacred Repository, an ancient vault of wisdom guarded by intricate glyphs and enigmatic artifacts. This repository, built by the ancients, holds the secrets of transforming mundane codebases into interactive adventures. As a daring archaeologist, your mission is to uncover the rituals and mechanisms that power this wondrous creation. From deciphering glyphs to activating ancient devices, every discovery brings you closer to unlocking the full potential of this sacred knowledge.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>HTML Generation Pipeline</strong>: How the <code class="inline-code">HTMLAdventureGenerator</code> orchestrates static site creation for interactive adventures.</li>
<li>üîç <strong>Template Rendering</strong>: How <code class="inline-code">TemplateEngine</code> replaces placeholders dynamically to render complete HTML pages.</li>
<li>‚ö° <strong>Asset Management</strong>: How <code class="inline-code">AssetManager</code> ensures proper handling of shared and theme-specific resources during generation.</li>
<li>üí° <strong>Dynamic Theme Integration</strong>: How CSS and assets adapt for multi-theme or single-theme modes.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> serves as the central mechanism for transforming code repositories into interactive HTML adventures. It coordinates repository analysis, story generation, and static site creation, leveraging other components like <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code>. This file demonstrates advanced orchestration patterns, including multi-theme generation, dynamic content processing, and integration with CLI interfaces.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> orchestrates the entire generation process, from code analysis to quest page creation.</li>
<li><code class="inline-code">generateAllThemes</code> enables multi-theme generation with isolated state management for each theme.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L339" target="_blank" rel="noopener noreferrer"><code class="inline-code">saveLlmOutput</code></a> logs story content generated by LLMs for debugging.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> dynamically creates and combines CSS files for selected themes.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L382" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateIndexHTML</code></a> builds the main adventure page, serving as the entry point for quests.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  // Analyze codebase and initialize adventure
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );
  this.saveLlmOutput(&#39;story.output.md&#39;, storyContent);

  // Generate CSS and HTML files
  await this.generateThemeCSS();
  this.generateIndexHTML();
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>Coordinates repository analysis, story generation, and static site creation.</li>
<li>Uses <code class="inline-code">repoAnalyzer</code> to extract contextual insights from the codebase.</li>
<li>Saves LLM output for debugging and traceability.</li>
<li>Demonstrates modular generation of CSS and HTML components.</li>
</ul>
<hr>
<pre><code class="language-typescript">async generateAllThemes(
  themeCallback: (theme: AdventureTheme, themeDir: string) =&gt; Promise&lt;void&gt;,
  assetManagerCallback: () =&gt; Promise&lt;AssetManager&gt;
): Promise&lt;void&gt; {
  const themes = getAllThemes();
  for (const theme of themes) {
    const themeDir = path.join(this.outputDir, theme.key);
    await themeCallback(theme, themeDir);
    const assetManager = await assetManagerCallback();
    assetManager.copyGlobalAssets(themeDir);
  }
}
</code></pre>
<ul>
<li>Implements multi-theme generation by iterating over all available themes.</li>
<li>Leverages isolated state to avoid concurrency issues.</li>
<li>Ensures proper asset copying for each theme directory.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> is responsible for rendering HTML templates by replacing placeholders with dynamic variables. This file showcases efficient caching mechanisms for templates and flexible methods for rendering pages and fragments.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a> combines base and content templates to produce complete HTML pages.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> dynamically substitutes variables into template placeholders.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a> caches templates to optimize repeated usage.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base and content templates into a complete HTML page.</li>
<li>Uses placeholder substitution to dynamically inject content.</li>
<li>Ensures modularity by separating base and content rendering logic.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Implements dynamic content injection using regular expressions.</li>
<li>Ensures flexibility by allowing any variable to be substituted into templates.</li>
<li>Demonstrates efficient string manipulation techniques.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> handles the copying and management of assets like images, CSS, and shared files. This file emphasizes modular asset handling for both single-theme and multi-theme modes.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a> ensures global assets are available across themes.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a> adds navigation files to theme-specific directories.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> dynamically loads theme-specific CSS files with fallback options.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
  const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
  fs.mkdirSync(targetImagesDir, { recursive: true });

  const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
  globalImages.forEach(file =&gt; {
    const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
    if (fs.existsSync(sourcePath)) {
      const targetPath = path.join(globalAssetsDir, &#39;shared&#39;, file);
      fs.copyFileSync(sourcePath, targetPath);
    }
  });
}
</code></pre>
<ul>
<li>Copies global assets like icons and shared files to the output directory.</li>
<li>Ensures consistency across themes by centralizing shared resources.</li>
<li>Demonstrates defensive programming with existence checks.</li>
</ul>
<hr>
<pre><code class="language-typescript">loadThemeCSS(theme: string): string {
  return this.loadCSSFile(`themes/${theme}.css`, &#39;themes/default.css&#39;);
}
</code></pre>
<ul>
<li>Dynamically loads CSS files for the selected theme.</li>
<li>Provides fallback options to ensure robustness.</li>
<li>Simplifies theme-specific styling integration.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Explore how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> orchestrates multiple components to create adventures.</li>
<li>Study the caching mechanism in <code class="inline-code">TemplateEngine</code> to optimize template loading.</li>
<li>Notice how <code class="inline-code">AssetManager</code> handles shared resources for both single and multi-theme modes.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Create a Custom Theme</strong>: Add a new theme to the system by creating a CSS file and corresponding assets. Update <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L82" target="_blank" rel="noopener noreferrer"><code class="inline-code">getAllThemes</code></a> to include your theme and generate an adventure using it.</li>
<li><strong>Trace Asset Flow</strong>: Add logging statements in <code class="inline-code">AssetManager</code> methods to trace how assets are copied and organized. Observe the differences between single-theme and multi-theme modes.</li>
<li><strong>Enhance Placeholder Replacement</strong>: Modify <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> to support conditional blocks (e.g., <code class="inline-code">{{if:variable}}content{{endif}}</code>). Test your implementation with complex templates.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the Sacred Repository.</p>
<p>By the sacred fires of the Temple of Codex, thou hast inscribed the first sacred glyphs of HTML upon the eternal scrolls‚Äîthy journey begins with wisdom&#39;s light guiding thee forth! ‚ö°üíéüìú</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>