<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Temple of HTML Relics - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Sacred Repository of Ancient Adventures</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Temple of HTML Relics</h1>
<hr>
<p>Amidst the tangled vines of the jungle, you discover the Temple of HTML Relics, an awe-inspiring structure dedicated to the ancient art of static site generation. The walls are adorned with intricate carvings that depict the sacred rituals of rendering pages, managing assets, and weaving templates into cohesive designs. As you step inside, the glyphs whisper secrets of modular architecture, efficient resource management, and the eternal quest for maintainable code. Your journey begins here, where the wisdom of the ancients awaits those who seek to unlock its treasures.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Template Rendering</strong>: How modular template engines simplify dynamic content generation.</li>
<li>üîç <strong>Asset Management</strong>: Techniques for efficiently copying and organizing shared assets across themes.</li>
<li>‚ö° <strong>Theme-Specific Customization</strong>: Strategies for generating CSS and resources tailored to individual themes.</li>
<li>üí° <strong>Static Site Generation Workflow</strong>: How to orchestrate multi-theme generation processes in parallel.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The Template Engine is the sacred artifact responsible for transforming raw templates into fully rendered HTML pages. It employs caching mechanisms to optimize performance and a placeholder replacement system to dynamically inject content into templates. This file demonstrates the principles of modularity and reusability, ensuring that templating logic remains isolated and maintainable.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a>: Combines base and content templates to generate complete pages with dynamic variables.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a>: Substitutes placeholders in templates with provided values for dynamic rendering.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a>: Implements caching to avoid redundant file reads and improve performance.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base and content templates to create complete pages, ensuring separation of concerns.</li>
<li>Uses <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> to dynamically inject variables into both content and base templates.</li>
<li>Demonstrates the importance of modular template composition for maintainability.</li>
<li>Highlights the use of caching via <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a> to optimize rendering performance.</li>
<li>Enables dynamic content generation by passing variables, allowing flexibility in page creation.</li>
</ul>
<hr>
<pre><code class="language-typescript">replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  return result;
}
</code></pre>
<ul>
<li>Implements dynamic substitution of placeholders within templates, enabling content customization.</li>
<li>Uses regular expressions to ensure all occurrences of placeholders are replaced.</li>
<li>Demonstrates a simple yet powerful approach to template rendering.</li>
<li>Allows variables to be injected into templates without modifying the template structure.</li>
<li>Ensures flexibility in adapting templates for various use cases.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The Asset Manager is the temple&#39;s guardian, responsible for organizing and copying sacred assets such as images, CSS files, and shared resources. Its methods ensure that assets are distributed efficiently across single and multi-theme configurations while maintaining consistency.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a>: Copies shared assets, ensuring they are accessible across multiple themes.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a>: Handles theme-specific navigation files for single-theme generation.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a>: Loads theme-specific CSS files with fallback mechanisms for robustness.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  try {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
    const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
    fs.mkdirSync(targetImagesDir, { recursive: true });

    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });

    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
    globalImages.forEach(file =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
      if (fs.existsSync(sourcePath)) {
        const targetPath = path.join(globalSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      }
    });

    const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
    if (fs.existsSync(headerImageSource)) {
      const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
      fs.copyFileSync(headerImageSource, headerImageTarget);
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global assets&#39;));
    throw error;
  }
}
</code></pre>
<ul>
<li>Copies shared assets like images and CSS files, ensuring they are accessible across themes.</li>
<li>Creates directories dynamically to avoid errors during asset copying.</li>
<li>Demonstrates error handling for robust asset management.</li>
<li>Ensures consistency by copying global assets used in all themes.</li>
<li>Highlights modularity by separating theme-specific logic from shared asset management.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  const svgSource = path.join(templatesDir, &#39;compass-icon.svg&#39;);
  
  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  fs.mkdirSync(assetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
  if (fs.existsSync(svgSource)) {
    fs.copyFileSync(svgSource, path.join(assetsDir, &#39;compass-icon.svg&#39;));
  }
}
</code></pre>
<ul>
<li>Manages theme-specific navigation assets for single-theme configurations.</li>
<li>Ensures that navigation files are properly copied to the correct directories.</li>
<li>Demonstrates modularity by isolating navigation-related logic.</li>
<li>Highlights the importance of consistent asset organization across themes.</li>
<li>Provides flexibility by supporting different configurations for single and multi-theme generation.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The HTML Adventure Generator is the temple&#39;s high priest, orchestrating the entire ritual of generating static HTML adventures. It coordinates theme selection, quest generation, and resource management, ensuring that the sacred relics of the repository are transformed into immersive experiences.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a>: The central method for orchestrating the static site generation process.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Combines theme-specific, base, and animation CSS files into a cohesive stylesheet.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L328" target="_blank" rel="noopener noreferrer"><code class="inline-code">extractQuestInfo</code></a>: Extracts quest details for dynamic page generation.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  
  console.log(chalk.dim(&#39;üìä Analyzing codebase...&#39;));
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  console.log(chalk.dim(&#39;‚ú® Generating themed story and quests...&#39;));
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();
  console.log(chalk.dim(&#39;üìù Creating main adventure page...&#39;));
  this.generateIndexHTML();
}
</code></pre>
<ul>
<li>Coordinates the entire generation process, from codebase analysis to HTML creation.</li>
<li>Demonstrates integration of repository analysis with dynamic story generation.</li>
<li>Extracts quest details for dynamic page generation, ensuring modularity.</li>
<li>Highlights the importance of orchestration in large-scale static site generation.</li>
<li>Enables customization through theme selection and quest trimming.</li>
</ul>
<hr>
<pre><code class="language-typescript">private async generateThemeCSS(): Promise&lt;void&gt; {
  const assetManager = await this.getAssetManager();
  const themeCSS = assetManager.loadThemeCSS(this.selectedTheme);
  const baseCSS = assetManager.loadBaseCSS();
  const animationsCSS = assetManager.loadAnimationsCSS();

  let combinedCSS = themeCSS + &#39;\n\n&#39; + baseCSS + &#39;\n\n&#39; + animationsCSS;
  const imagePath = this.isMultiTheme ? &#39;../../assets/images/&#39; : &#39;images/&#39;;
  combinedCSS = combinedCSS.replace(/url\(&#39;images\//g, `url(&#39;${imagePath}`);

  const cssPath = path.join(this.outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>Combines theme-specific, base, and animation styles into a single cohesive stylesheet.</li>
<li>Adjusts image paths dynamically based on single or multi-theme configurations.</li>
<li>Demonstrates modular CSS management for scalable static site generation.</li>
<li>Ensures consistency in styling across different themes and configurations.</li>
<li>Highlights the importance of dynamic resource handling in static site workflows.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Study how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> dynamically injects variables into templates for flexible rendering.</li>
<li>Observe how asset copying ensures consistent resource availability across themes.</li>
<li>Explore how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> orchestrates the entire static site generation process.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><p><strong>Add a Custom Placeholder</strong>: Modify <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> to support conditional placeholders (e.g., <code class="inline-code">{{IF_VAR}}</code> blocks). Test it with a new template.</p>
<ul>
<li>Example: Create a template that includes optional content based on the presence of a variable.</li>
</ul>
</li>
<li><p><strong>Optimize Asset Management</strong>: Refactor <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a> to add logging for each copied file and ensure it skips duplicates. Analyze how this impacts performance in multi-theme scenarios.</p>
</li>
<li><p><strong>Extend CSS Generation</strong>: Add a new CSS file for animations and integrate it into <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>. Test how it affects the appearance of generated pages.</p>
</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries hidden within the Sacred Repository.</p>
<p>By the sacred light of the ancients, thou hast unlocked the wisdom of the Temple of HTML Relics‚Äîlet this triumph be a beacon for thy future conquests! ‚ö°üíéüó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>