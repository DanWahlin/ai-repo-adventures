<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 3: The StoryGenerator Core: Forging the Myths of the Stars - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Cosmos of QuestCode: A Galactic Odyssey</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 3: The StoryGenerator Core Forging the Myths of the Stars</h1>
<hr>
<p>The <em>SS Refactoria</em> drifted into a sprawling void of luminous code constellations, a domain where stories pulsed like quasars and ideas coalesced into living, breathing adventures. The crew’s primary tool for this leg of the journey: the legendary <em>StoryGenerator Core</em>, a fusion of creative imagination and advanced large language models. Their quest? To analyze the universe&#39;s most chaotic repositories and bend them into epic star-spanning tales. However, forging these myths required venturing deep into the heart of the <em>Core</em>, aligning its algorithms, and refining its prompts to craft the perfect narrative for the galaxy’s explorers. The stakes were high, but so were the rewards—every successful story inspired a new wave of interstellar discovery.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a>: LLM-powered story creation and prompt engineering</h3>
<p>Traversing the heart of narrative engineering, this file commands the <em>StoryGenerator</em>, responsible for bringing dynamic and immersive adventures to life within the <em>SS Refactoria</em>. Its methods leverage large language models to craft vibrant, theme-specific stories and quests. Core functions, such as <code class="inline-code">generateStoryAndAdventures()</code>, serve as the key to unlocking structured narratives, while <code class="inline-code">buildStoryGenerationPrompt()</code> ensures prompts follow thematic constraints, aligning with user-selected themes like space exploration or medieval kingdoms. The file also includes methods designed for crafting adventure-specific content like <code class="inline-code">generateAdventureContent()</code>, which forms the backbone of quest-specific narratives. </p>
<p>What sets this file apart is its heavy use of theme-based guidelines, providing consistency and depth to every mission. With constructs like <code class="inline-code">getThemeGuidelines()</code> and prompt-specific engineering, the <em>StoryGenerator</em> manages to weave the technical complexities of LLMs into stories that feel both creative and structured. It is almost as if the code itself becomes a cosmic storyteller, balancing technical precision with an infinite imaginative scope.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndAdventures()</code>: Creates full storylines and quest lists using LLM interactions.</li>
<li><code class="inline-code">buildStoryGenerationPrompt()</code>: Constructs prompts aligned with user-selected themes and objectives.</li>
<li><code class="inline-code">generateAdventureContent()</code>: Forges quest narratives based on repository insights.</li>
<li><code class="inline-code">getThemeGuidelines()</code>: Defines theme-specific rules and vocabulary for immersive storytelling.</li>
<li>Provides reusable, theme-guided structure for adventures.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Adventure configuration and guidance</h3>
<p>In the context of structured adventures, this file is a key navigator. It provides methods such as <code class="inline-code">loadAdventureConfig()</code> to extract settings and quest parameters, ensuring that every adventure directly reflects the data encoded within the repository. <code class="inline-code">formatConfigForPrompt()</code> refines the raw configuration data, translating structured input into creative prompts for the <em>StoryGenerator</em>.</p>
<p>The functionality also includes detailed utilities like <code class="inline-code">extractHighlightsForFiles()</code>, which locates and outlines specific portions of the repository for further analysis. This ensures that adventures are not only tailored to a user&#39;s interest but also structurally aligned to the project&#39;s unique code artifacts. In essence, this file is the compass directing which portion of the chosen galaxy of code to explore.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig()</code>: Loads adventure configurations from JSON files to define custom settings.</li>
<li><code class="inline-code">formatConfigForPrompt()</code>: Prepares structured configuration into theme-aligned prompts.</li>
<li><code class="inline-code">extractHighlightsForFiles()</code>: Extracts key exploratory elements for quest generation.</li>
<li>Provides clear, user-aligned configuration workflows for quests.</li>
<li>Integrates structured data into creative, adaptive adventures.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a></h3>
<pre><code class="language-typescript">/**
 * Generates full storylines and adventure lists based on a given theme.
 * Constructs both story and quest data in a theme-guided JSON structure.
 */
generateStoryAndAdventures(theme: ThemeDefinition, repositoryData: string): StoryAndAdventures {
  const prompt = this.buildStoryGenerationPrompt(theme, repositoryData);
  const response = this.llm.generateResponse(prompt, { responseFormat: &#39;json_object&#39; });
  return JSON.parse(response.content);
}

/**
 * Builds prompts for LLM input to generate consistent and immersive narratives.
 */
buildStoryGenerationPrompt(theme: ThemeDefinition, data: string): string {
  const guidelines = this.getThemeGuidelines(theme);
  return `
      Theme: ${theme.name}
      Vocabulary Rules: ${guidelines.vocabulary}
      ${data}
  `;
}

/**
 * Retrieves theme-specific guidelines to enhance narrative cohesion.
 */
getThemeGuidelines(theme: ThemeDefinition): { vocabulary: string } {
  return THEMES[theme.name] || THEMES[&#39;default&#39;];
}
</code></pre>
<p>This is like an author using tailoring tools to create bespoke narratives that fit the reader’s imagination perfectly.</p>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">/**
 * Loads the adventure configuration JSON file.
 * Validates its content and provides a structured representation of settings.
 */
loadAdventureConfig(projectPath: string): AdventureConfig {
  const filePath = path.join(projectPath, &#39;adventure.config.json&#39;);
  const rawFile = fs.readFileSync(filePath, &#39;utf-8&#39;);
  return JSON.parse(rawFile);
}

/**
 * Takes the configuration data and strings it into a prompt suitable for storytelling.
 */
formatConfigForPrompt(config: AdventureConfig): string {
  return `
      Repository: ${config.repositoryName}
      Included Paths: ${config.paths.join(&#39;, &#39;)}
      Highlights: ${this.extractHighlightsForFiles(config.paths)}
  `;
}

/**
 * Extracts relevant highlights from specific paths in the repository.
 */
extractHighlightsForFiles(filePaths: string[]): string[] {
  return filePaths
    .filter(fs.existsSync)
    .map(file =&gt; `File included: ${file}`);
}
</code></pre>
<p>This is like converting a rough trail map into a beautifully engraved treasure hunt guide for explorers.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Certain methods like <code class="inline-code">generateAdventureContent()</code> are deeply tied to LLM capabilities—test their prompts thoroughly to ensure proper results.</li>
<li>Breaking down larger repository scans into smaller configuration sections can optimize the LLM response and improve the narrative&#39;s detail.</li>
<li>Future improvisations might include extending <code class="inline-code">generateStoryAndAdventures()</code> to support branching narratives based on user interaction.</li>
</ul>
<hr>
<p>Mission accomplished, Star Navigator—Quest 3 activated the StoryGenerator Core like a cosmic supernova, propelling you toward legendary mastery at warp-speed; keep igniting those stellar myths! 🚀⭐💎</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="next-quest-btn">Next: Quest 4: The Repomix Scanner: Analyzing ... →</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>