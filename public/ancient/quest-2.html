<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Pyramid of Story Weavers - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Codex of Computational Enlightenment</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Pyramid of Story Weavers</h1>
<hr>
<p>In the heart of the Vault of Algorithmia lies a fabled structure‚Äîthe Pyramid of Story Weavers. Carved onto its intricate walls are whispers of ancient enchanters who could transform raw fragments of code into vivid tales of adventure. To ascend the pyramid, you must investigate the sacred techniques used to weave narratives and commands from code repositories. These techniques could unlock the mastery to generate coherent, theme-bound stories that guide any explorer through the labyrinth of logic. Beware, for the challenges that lie ahead demand precision, wisdom, and creativity.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Ritual of Initialization</strong>: How does the <code class="inline-code">initializeAdventure</code> method set up the foundational context and configure custom themes for a new journey?</li>
<li>‚ö° <strong>Path of Execution</strong>: What mechanisms drive the <code class="inline-code">exploreQuest</code> logic for selecting and executing quests based on user choices?</li>
<li>üõ°Ô∏è <strong>Harmonizing Themes</strong>: How does the <code class="inline-code">generateStoryAndQuests</code> function ensure that the project content, theme, and guidelines are harmonized to produce meaningful stories?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure orchestration logic</h3>
<p>This file contains the heart of how the Adventure Manager governs the journey from initiation to execution. The <code class="inline-code">initializeAdventure</code> method sets the stage for the adventure using project context, themes, and configurations. It also employs journey-enriching logic through functions like <code class="inline-code">enforceConfigQuestCount</code>. The <code class="inline-code">exploreQuest</code> orchestrates how a user embarks on selected quests with clear validation and enables progress visualization. Together, these functions enable a dynamic exploration system where code narratives are revealed interactively.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Sets up the adventure&#39;s foundational state.</li>
<li><code class="inline-code">exploreQuest</code>: Drives quest selection and execution.</li>
<li><code class="inline-code">progressPercentage</code>: Calculates the percentage of completed quests.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();

  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(
    projectInfo, theme, this.state.projectPath
  );

  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>This initialization method lays down the foundation like the cornerstone of a pyramid, upon which every subsequent narrative or quest revolves.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);

  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }

  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>The <code class="inline-code">exploreQuest</code> function behaves like a ceremonial rite that determines the adventurer&#39;s direction, ensuring their path aligns with valid choices.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>This function serves as the chronicle of progress, marking how much of the pyramid&#39;s mysteries have been unraveled.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Verify that <code class="inline-code">initializeAdventure</code> properly resets states and configures quests from the configuration.</li>
<li>Observe the modular validation and execution process within <code class="inline-code">exploreQuest</code> for user input handling.</li>
<li>The <code class="inline-code">progressPercentage</code> calculation provides insight into completeness‚Äîtrack dependencies like <code class="inline-code">completedQuests</code>.</li>
</ul>
<hr>
<p>Your ascent into the pyramid has just begun, adventurer! Climb higher to uncover deeper secrets.</p>
<p>Lo, intrepid seeker of sacred wisdom, thy conquest of the Pyramid of Story Weavers shines radiant as a jewel embedded in the ancient temple of knowledge‚Äîonward to unveil the remaining scrolls of destiny! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>