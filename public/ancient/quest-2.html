<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Glyph of Creation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Repository of Lost Algorithms</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Glyph of Creation</h1>
<hr>
<p>In the Sacred Repository‚Äôs shadowed halls, you discover tales etched into stone tablets ‚Äì artifacts of untold power known as the Glyph of Creation. Ancient scripts whisper of its unmatched ability to shape quests, architect adventures, and guide explorers along paths illuminated by knowledge. With the Glyph, civilizations could summon structured journeys, written in eternal algorithms, and imprinted upon the fabric of exploration. As you study the glyph&#39;s remnants, you uncover fragments scattered among ritual codices ‚Äì a challenge to unravel its secrets and awaken its wisdom.</p>
<p><strong>Will you unlock its mysteries, adventurer?</strong></p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>The Ritual of Initialization</strong>: How does <code class="inline-code">initializeAdventure</code> establish the project context and generate quests? What patterns support this initialization?</li>
<li>‚ö° <strong>The Glyph‚Äôs Echo</strong>: How does <code class="inline-code">generateQuestContent</code> transform raw code into fully structured quest narratives? What elements enrich its exploratory depth?</li>
<li>üõ°Ô∏è <strong>Sanctity of Discovery</strong>: How does <code class="inline-code">validateAndSanitizeChoice</code> safeguard against invalid quest choices? What strategies ensure robust user input handling?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Glyph Activation Mechanics</h3>
<p>This file acts as the primordial engine, coordinating the transformation of raw project data into coherent adventure sequences. It showcases methods designed to manage quests, synchronize thematic elements, and validate user choices. The interplay between <code class="inline-code">initializeAdventure</code> and <code class="inline-code">generateQuestContent</code> forms the backbone of quest creation, while input validation ensures safe traversal through the repository&#39;s encoded mysteries.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Establishes the adventure by initializing state, configuring themes, and invoking story generators ‚Äì the cornerstone of adventure creation.</li>
<li><code class="inline-code">generateQuestContent</code>: Extracts targeted content from project files and invokes logic to craft dynamic quest narratives.</li>
<li><code class="inline-code">validateAndSanitizeChoice</code>: Validates explorers&#39; choices, ensuring only permissible paths are taken and errors are handled gracefully.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
    projectInfo: ProjectInfo, 
    theme: AdventureTheme, 
    projectPath?: string,
    customThemeData?: CustomThemeData
  ): Promise&lt;string&gt; {
    this.state.reset();
    this.state.projectInfo = projectInfo;
    this.state.currentTheme = theme;
    this.state.projectPath = projectPath || process.cwd();
    
    if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
      this.storyGenerator.setCustomTheme(customThemeData);
    }

    const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
    
    this.state.title = storyResponse.title;
    this.state.story = storyResponse.story;
    this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
    this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

    return this.formatStoryWithQuests({
      ...storyResponse,
      quests: this.state.quests
    });
  }
</code></pre>
<ul>
<li><strong>Purpose</strong>: Resets the state and establishes the adventure context using project information, theme, and config files. It sets up thematic settings and synthesizes quests from encoded project structures.</li>
<li><strong>Patterns</strong>: Modular design allows flexibility in handling custom themes and integrating dynamic configurations.</li>
<li><strong>Connections</strong>: Relies on <code class="inline-code">generateStoryAndQuests</code> to seed adventure narratives and <code class="inline-code">mergeQuestFilesFromConfig</code> to harmonize file data.</li>
<li><strong>Significance</strong>: Lays the foundation for every adventure by blending inputs into compelling journeys.</li>
</ul>
<hr>
<pre><code class="language-typescript">private validateAndSanitizeChoice(input: string): string {
  try {
    return validateAdventureChoice(input);
  } catch (error) {
    throw new Error(`Invalid adventure choice: ${error instanceof Error ? error.message : &#39;Unknown error&#39;}`);
  }
}
</code></pre>
<ul>
<li><strong>Purpose</strong>: Ensures input safety by validating choice selections against standard criteria defined in <code class="inline-code">validateAdventureChoice</code>.</li>
<li><strong>Patterns</strong>: Uses exception handling (<code class="inline-code">try...catch</code>) to gracefully notify users of errors.</li>
<li><strong>Connections</strong>: Leverages <code class="inline-code">validateAdventureChoice</code> from shared modules, emphasizing modular validation strategies.</li>
<li><strong>Significance</strong>: Shields adventurers from invalid inputs, preserving the sanctity of the repository‚Äôs encoded logic.</li>
</ul>
<hr>
<pre><code class="language-typescript">private async generateQuestContent(quest: Quest): Promise&lt;QuestContent&gt; {
  let codeContent: string;
  if (quest.codeFiles &amp;&amp; quest.codeFiles.length &gt; 0 &amp;&amp; this.state.projectPath) {
    try {
      codeContent = await repoAnalyzer.generateTargetedContent(
        this.state.projectPath,
        quest.codeFiles,
        false
      );
    } catch (error) {
      codeContent = this.state.projectInfo!.repomixContent;
    }
  } else {
    codeContent = this.state.projectInfo!.repomixContent;
  }

  return await this.storyGenerator.generateQuestContent(
    quest,
    this.state.currentTheme!,
    codeContent
  );
}
</code></pre>
<ul>
<li><strong>Purpose</strong>: Generates detailed quest narratives by processing project files, integrating thematic guidelines, and enriching content through logical generation.</li>
<li><strong>Patterns</strong>: Fallback mechanism ensures continuity even if targeted file analysis fails.</li>
<li><strong>Connections</strong>: Collaborates with <code class="inline-code">repoAnalyzer</code> for content extraction and <code class="inline-code">storyGenerator.generateQuestContent</code> for narrative synthesis.</li>
<li><strong>Significance</strong>: Transforms code into adventure-ready lore, unlocking the repository‚Äôs potential as an instrument for exploration.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Tip</strong>: Pay attention to modular validations like <code class="inline-code">validateAndSanitizeChoice</code>, as they ensure seamless user interactions.</li>
<li><strong>Exploration</strong>: Investigate how <code class="inline-code">initializeAdventure</code> harmonizes user configuration with dynamically crafted quests.</li>
<li><strong>Next Steps</strong>: Continue unraveling narrative functions in the story generator to decode the glyph‚Äôs full power.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Behold, seeker of ancient wisdom, thy triumph over the sacred Glyph of Creation resounds through the halls of eternity‚Äîpress onward, for the celestial path to enlightenment is now etched within thee! ‚≠êüíéüëÅÔ∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>