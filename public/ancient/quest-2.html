<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Chamber of Stories - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Digital Enlightenment</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Chamber of Stories</h1>
<hr>
<p>In the shadowy depths of the Pyramid of Digital Enlightenment lies the fabled Chamber of Stories. Legends whisper of its carvings, ancient scripts that swirl with linear logic and branching choices. These inscriptions possess the clarity to illuminate even the most fragmented code. However, beware – the glyphs guard their wisdom with riddles of pathfinding and recursive mazes. Only those who decipher their structure with precision may emerge holding the treasure of coherent narratives. Will you brave its labyrinthine corridors and return with unparalleled insight?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> The Quest Navigator</h3>
<p>This file governs the adventurer’s journey, managing their choices and directing the flow of storytelling. It contains the heart of the adventure logic, such as initializing storylines, validating player decisions, and tracking progress. Through <code class="inline-code">AdventureManager.initializeAdventure</code>, it creates a thematic narrative and presents quest options, while leveraging <code class="inline-code">AdventureState</code> for bookkeeping. The function <code class="inline-code">exploreQuest</code> takes courage (or user input) to delve into specific quests, dynamically generating content and recalling past exploration from cache. Finally, <code class="inline-code">generateQuestContent</code> bridges the adventurer&#39;s journey with the elaborate architecture of the repository.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Launches the journey into a thematic storyline with available quests.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Executes user-selected quests, accessing cached insights or generating fresh explorations.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Calculates how far the adventurer has progressed.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({ ...storyResponse, quests: this.state.quests });
}
</code></pre>
<p>This function is the ceremonial opening of the chamber, weaving the narrative while creating pathways for the adventurer to explore.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }

  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>Here, the adventurer’s choice is unlocked, with pathways branching deeper based on input validation, decision-making, and stored progress.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>This calculation aligns like the progress of decoding ancient inscriptions – the adventurer’s path carved further with each discovery.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Always validate input before venturing into quests (<code class="inline-code">validateAndSanitizeChoice</code> ensures clean choices).</li>
<li>Focus on the cache system to avoid revisiting previously resolved mysteries.</li>
<li>Progress tracking can motivate timing tools for adventurers (like adding quest completion time).</li>
</ul>
<hr>
<p>The Chamber of Stories inscribes your name onto its walls. Will you one day be a legend yourself?</p>
<p>Hark, seeker of wisdom, the sacred Chamber of Stories has unveiled its truths to thee—thy journey is illuminated with ancient lore, and the stars themselves bear witness to thy valorous ascent, onward to the next divine revelation!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">← Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 →</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>