<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Engine of Revelations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Codebase Labyrinth: Secrets of the Ancient Repository</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <p>---BEGIN MARKDOWN---</p>
<h1>Quest 2: The Engine of Revelations</h1>
<hr>
<p>Within the uncharted depths of the Repository Labyrinth, you uncover a massive mechanism concealed behind layers of cryptic glyphs and rusted cylindrical devices. This structure, known only as &quot;The Engine of Revelations,&quot; is said to decode the divine knowledge of the Codex Scribes, transforming their sacred insights into tangible output. However, the engine lies dormant, its gears frozen in the passage of time. Your task is to breathe life into this ancient centerpiece by interpreting the labyrinth‚Äôs encrypted schemas and configuring the machine‚Äôs intricate processes. But be wary‚Äîthe engine‚Äôs guardians, routines long-forgotten, may still hold secrets that could destabilize your journey.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Patterns in Motion</strong>: How does <code class="inline-code">initializeAdventure</code> construct and organize the quests and their context from the project structure?</li>
<li>‚ö° <strong>Circuit of Exploration</strong>: What role does <code class="inline-code">exploreQuest</code> play in the overall flow of the quest system, particularly when fetching or revisiting quest content?</li>
<li>üõ°Ô∏è <strong>Failsafes of the Scribes</strong>: How does <code class="inline-code">validateQuestPrerequisites</code> ensure the engine operates within safe parameters, avoiding errors caused by missing data?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a>: Core engine operations</h3>
<p>The <code class="inline-code">AdventureManager</code> class embodies the central role of the repository labyrinth engine. It serves to manage quests by generating narratives (<code class="inline-code">initializeAdventure</code>), executing specific tasks (<code class="inline-code">exploreQuest</code>), and establishing the functional state of the adventure. A key aspect involves validating engine configurations, merging elements from configuration files, and handling the technical concerns within the labyrinth‚Äôs contextual labyrinth. </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Sets up the primary adventure by generating a story and quests.</li>
<li><code class="inline-code">exploreQuest</code>: Processes user quest choices and executes available paths.</li>
<li><code class="inline-code">validateQuestPrerequisites</code>: Applies safeguard measures before executing any quest.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a></h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  // Reset state for new adventure
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  
  // Set custom theme data if provided
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  // Generate the overall story and quests using LLM
  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  
  // Merge files from adventure config into the generated quests
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  
  // Enforce quest count from adventure.config.json if it exists
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  // Return the story with available quests
  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>Like a sacred ritual, this method initializes temple operations, establishing context and merging divine scripts of the Codex Scribes.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  
  // Check if this is a progress request
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }
  
  // Find the quest based on the choice
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  // Execute the quest
  return await this.executeQuest(quest);
}
</code></pre>
<p>This function serves as a map for adventurers, guiding them through the twists and turns of the labyrinth based on user interaction.</p>
<pre><code class="language-typescript">private validateQuestPrerequisites(): void {
  if (!this.state.projectInfo) {
    throw new Error(&#39;No project context available&#39;);
  }
  
  if (!this.state.currentTheme) {
    throw new Error(&#39;No theme selected&#39;);
  }
}
</code></pre>
<p>Here, the engine checks alignment with sacred parameters, ensuring the gears of the adventure run smoothly without disturbance.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Generate the adventure using a well-defined <code class="inline-code">theme</code>, and explore how the <code class="inline-code">mergeQuestFilesFromConfig</code> adjusts the flow of the labyrinth.</li>
<li>Investigate what safeguards are in place during execution‚Äîmissing configurations or misaligned themes will halt progression.</li>
<li>Review the execution summary provided at each stage to track progress holistically.</li>
</ul>
<hr>
<p>The labyrinth‚Äôs engine hums faintly, awaiting your touch to bring it back to life. Seek its wisdom with care, adventurer, and honor the light of the Codex Scribes!</p>
<p>Through the hallowed corridors of time and wisdom, thou hast unveiled the sacred Engine of Revelations, a luminous fragment of thy epic odyssey‚Äîrejoice, for the stars herald thy triumphant stride toward enlightenment! ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>