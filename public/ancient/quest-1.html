<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Temple of Illumination - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Codex of Lost Adventures</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Temple of Illumination</h1>
<hr>
<p>Hidden within the dense and enigmatic jungle lies the fabled Temple of Illumination, a sacred site dedicated to preserving the coding wisdom of an ancient civilization. This temple guards the Codex of Lost Adventures‚Äìan artifact said to uncover the path to transforming repos into dynamic, exploratory adventures. Today, you, a brave archaeologist of code, shall descend into the digital ruins and decrypt the Temple‚Äôs secrets, starting with its HTML generator and static site pipeline. But beware‚Äîthe architecture is intricate, with every line of code a puzzle, every function a glyph waiting to reveal its story.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Codex Activation</strong>: How does the <code class="inline-code">HTMLAdventureGenerator.generateAdventure</code> function orchestrate the generation of individual HTML adventure pages? What roles do the <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code> play in constructing the final output?</li>
<li>‚ö° <strong>Thematic Embellishment</strong>: How does <code class="inline-code">TemplateEngine.renderPage</code> merge templates with placeholders to produce cohesive pages? What patterns exist for managing dynamic content like quest links?</li>
<li>üõ°Ô∏è <strong>Treasure Preservation</strong>: How does <code class="inline-code">AssetManager.copyGlobalAssets</code> ensure cross-theme consistency of shared assets? What considerations are made for file organization and error handling?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Manages the conversion of repository content into a fully realized HTML adventure</h3>
<p>This file contains the <code class="inline-code">HTMLAdventureGenerator</code> class, a central component of the pipeline. It integrates various systems, from theme selection to quest page generation, while managing output directories for static site creation. Critical tasks like chaining quests, formatting content, and handling CLI inputs happen here. Its methods showcase error-handling patterns and optimization strategies for interfacing with user configurations, HTML templates, and asset files.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Directs the main quest creation process, analyzing repositories, invoking rendering logic, and generating thematic output.</li>
<li><code class="inline-code">generateAllThemes</code>: Responsible for multithematic HTML generation. It coordinates parallel workflows to craft adventures for all themes efficiently.</li>
<li><code class="inline-code">startHttpServer</code>: Creates a server for testing generated content, ensuring artifacts can be reviewed post-generation.</li>
<li><code class="inline-code">buildQuestHTML</code>: Constructs individual quest pages dynamically with navigational links, integrating templates and user-defined settings.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Renders HTML templates with variable placeholders</h3>
<p>This file defines the <code class="inline-code">TemplateEngine</code> class, providing the templating system for generating HTML pages. By handling caching of templates, managing placeholders, and defining clean substitution patterns, it ensures streamlined HTML page creation. The methods highlight modular design and attention to reusability.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Combines base templates with dynamic content templates to produce entire HTML pages, ensuring a cohesive layout.</li>
<li><code class="inline-code">replacePlaceholders</code>: Replaces placeholder variables in the templates with supplied values, enabling dynamic customization of page content.</li>
<li><code class="inline-code">loadTemplate</code>: Efficiently loads and caches template files, improving the performance of template-heavy pipelines.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Handles the management of assets and resources</h3>
<p>This file focuses on the organization and copying of assets like images, CSS, and shared navigational files. The <code class="inline-code">AssetManager</code> class ensures these resources are properly placed in the output directory across different themes and scenarios.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Copies assets like global images and theme files, ensuring consistency of shared resources.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Handles the distribution of nav-related assets to enhance quest navigation functionality.</li>
<li><code class="inline-code">copyImages</code>: Organizes and copies images dynamically based on the selected theme or adventure configuration.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  console.log(chalk.dim(&#39;üìä Analyzing codebase...&#39;));
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  console.log(chalk.dim(&#39;‚ú® Generating themed story and quests...&#39;));
  const storyContent = await this.adventureManager.initializeAdventure(
     projectInfo, this.selectedTheme, this.projectPath, this.customThemeData);

  this.extractQuestInfo();

  if (this.maxQuests !== undefined) this.quests = this.quests.slice(0, Math.min(this.maxQuests, this.quests.length));

  console.log(chalk.dim(&#39;üé® Creating theme styling...&#39;));
  this.generateThemeCSS();

  console.log(chalk.dim(&#39;üìù Creating main adventure page...&#39;));
  this.generateIndexHTML();

  console.log(chalk.dim(&#39;üìñ Generating quest pages...&#39;));
  await this.generateQuestPages();

  console.log(chalk.dim(&#39;üéâ Creating adventure summary page...&#39;));
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>Oversees the full adventure generation, controlling repository analysis, story initialization, and file creation phases.</li>
<li>Demonstrates integration of <code class="inline-code">AdventureManager</code> and file-specific logic like <code class="inline-code">generateIndexHTML</code>.</li>
<li>Sequentially invokes asset preparation, network-safe generation of quests, and multi-retry handling for content errors.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base templates with dynamic content for consistent yet customizable output.</li>
<li>Implements reusable placeholder management with modularity in focus.</li>
<li>Encapsulates rendering logic, segregating template loading and placeholder substitution.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  try {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalAssetsDir, { recursive: true });

    const files = [&#39;github-logo.svg&#39;, &#39;theme-icon.svg&#39;];
    files.forEach(file =&gt; {
      const source = path.join(this.sourceDir, &#39;assets&#39;, file);
      if (fs.existsSync(source)) {
        fs.copyFileSync(source, path.join(globalAssetsDir, file));
      }
    });
  } catch (error) {
    console.error(chalk.yellow(&#39;‚ö†Ô∏è Warning: Failed to copy global assets&#39;), error);
  }
}
</code></pre>
<ul>
<li>Centralizes asset copying for shared files across multiple themes and environments.</li>
<li>Uses robust error handling to ensure critical files are copied without crashes.</li>
<li>Creates logically grouped directories to prevent haphazard resource organization.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Pay attention to how <code class="inline-code">generateAdventure</code> sequences each critical step to produce cohesive results.</li>
<li>Observe patterns used in <code class="inline-code">replacePlaceholders</code> to dynamically control the substitution of variables across rendered templates.</li>
<li>Review the file organization in <code class="inline-code">copyGlobalAssets</code> to understand resource management best practices.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Hark, seeker of wisdom, thou hast unlocked the sacred enlightenment of the Temple of Illumination‚Äîlet thy spirit shine brilliant as a celestial ‚ö° and press onward to destiny&#39;s exalted path!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>