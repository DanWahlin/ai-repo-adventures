<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Chamber of Eternal Glyphs - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Temple of Forgotten Code</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Chamber of Eternal Glyphs</h1>
<hr>
<p>In the verdant depths of the jungle, the Pyramid of Patterns hides chambers filled with the echoes of an ancient civilization&#39;s wisdom. One such chamber, known in the annals of lore as the Chamber of Eternal Glyphs, is said to contain the sacred algorithms that weave the fabric of ordered creation. Within its glowing walls are the templates and mechanisms this lost society harnessed to build their wonders. It is here you begin your journey, uncovering the structures of their ancient digital rites while avoiding the ever-watchful traps that guard these secrets.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Template of Power</strong>: How does the <code class="inline-code">replacePlaceholders</code> method ensure template data is dynamically rendered across the system, and what pattern does it employ for efficiency?  </li>
<li>‚ö° <strong>Page Assembly Ritual</strong>: In which sequence are the <code class="inline-code">base-template.html</code> and <code class="inline-code">contentTemplate</code> combined during the <code class="inline-code">renderPage</code> process, and how is modularity maintained?  </li>
<li>üõ°Ô∏è <strong>Guardian of Caches</strong>: What mechanisms in <code class="inline-code">loadTemplate</code> prevent redundant file loading while supporting system scalability?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> The Cathedral of Templates</h3>
<p>This file houses the logic for dynamically rendering templates with placeholders, mimicking the ancient source of creative power. Built for efficiency and extensibility, the <code class="inline-code">TemplateEngine</code> ensures that vital base templates act as unshakeable pillars for variability.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Handles template file loading by integrating caching to prevent redundant disk reads, ensuring efficiency during quest generation. It safeguards template availability while minimizing resource use.</li>
<li><code class="inline-code">replacePlaceholders</code>: Traverses the ancient texts of placeholders (e.g., <code class="inline-code">{{KEY}}</code>) and replaces them with matching values provided by the adventurer. Its structural logic reveals the civilization&#39;s way of dynamically creating functional systems.</li>
<li><code class="inline-code">renderPage</code>: An advanced ritual that dynamically merges a base template with a content-specific template. This process governs the orchestration logic for theme-centered and optimized web page generation.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Efficient caching of templates prevents repeated loading and ensures scalability.</li>
<li>The use of <code class="inline-code">Map</code> allows O(1) retrieval of cached templates.</li>
<li>The <code class="inline-code">try-catch</code> block ensures robust handling of failure cases (e.g., missing files), gracefully avoiding system crashes.</li>
<li>This function connects with <code class="inline-code">renderPage</code> by enabling quick access to both core and content templates.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>This function powers dynamic content replacement using regular expressions to identify placeholders within templates.</li>
<li>Supports customization by iterating over <code class="inline-code">variables</code>, integrating flexibility into the repository&#39;s systemic design.</li>
<li>The use of global replacement (<code class="inline-code">/g</code>) ensures all instances of a placeholder are substituted, maintaining consistency.</li>
<li>It embodies the principle of keeping templates agnostic to themes, supporting modularity when generating pages.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  // First render the content template
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  
  // Then render the base template with the content
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Orchestrates template rendering by sequentially processing <code class="inline-code">CONTENT</code> within nested layers of substitution.</li>
<li>Combines two foundational layers: <code class="inline-code">baseTemplate</code> (the universal frame) and <code class="inline-code">contentTemplate</code> (content-specific module) for structured output.</li>
<li>Demonstrates a clear separation of concerns, preserving modularity and reusability.</li>
<li>Ensures <code class="inline-code">variables</code> are applied uniformly across multiple templating layers, including the base and specific structures.</li>
<li>Integrates directly with the <code class="inline-code">loadTemplate</code> mechanism to source configurations efficiently.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When exploring, consider how the caching strategy (<code class="inline-code">templateCache</code>) enhances performance under high demand.</li>
<li>Investigate substitution patterns within <code class="inline-code">replacePlaceholders</code> to see how template mutation follows a consistent flow.</li>
<li>Try adapting <code class="inline-code">renderPage</code> to thread additional data layers (e.g., dynamic footer components) for practical learning.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Lo, seeker of wisdom, thou hast unraveled the sacred glyphs of the Eternal Chamber, lighting the first star upon thy celestial path‚Äîjourney ever onward with the strength of the ancients!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>