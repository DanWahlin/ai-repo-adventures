<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Glyphs of Storytelling - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Secrets of the Lost Repository</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Glyphs of Storytelling</h1>
<hr>
<p>Legend speaks of ancient glyphs hidden within the Repository of Ages, vital for transforming fragments of knowledge into coherent tales. These glyphs, encoded in arcane scripts, form the backbone of storytelling rituals performed by the Repository&#39;s sentinels. To master the Repository, adventurers must first learn to wield the power of these glyphs, which are scattered across various chambers. Seek the mechanisms that breathe life into static scripts, and unveil the secrets of content generation and asset orchestration.</p>
<p><strong>Your adventure begins, explorer! The Glyphs of Storytelling await‚Äîa test of your wit and resolve.</strong></p>
<h2>Quest Objectives</h2>
<p>As you traverse this sacred chamber, investigate the following questions:</p>
<ul>
<li>üîç <strong>Symbol Deciphering</strong>: How does the <code class="inline-code">TemplateEngine</code> manage placeholder replacement to imbue templates with dynamic data?</li>
<li>‚ö° <strong>Rendering Rituals</strong>: How does the <code class="inline-code">HTMLAdventureGenerator</code> generate quest pages, combining different templates and variables into a cohesive structure?</li>
<li>üõ°Ô∏è <strong>Safeguard Tuning</strong>: What mechanisms in the <code class="inline-code">AssetManager</code> ensure assets are reliably copied and structured properly across directories?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Dynamic Rendering of Ancient Templates</h3>
<p>This file is home to the <code class="inline-code">TemplateEngine</code>, the toolsmith responsible for loading and customizing templates. It uses caching to avoid unnecessary retrieval of glyphs (templates), deciphers placeholder symbols into meaningful data, and combines multiple templates to generate rich web pages.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Efficiently fetches templates with caching to prevent redundant reads.</li>
<li><code class="inline-code">replacePlaceholders</code>: Transforms template placeholders by substituting them with dynamic data provided during rendering.</li>
<li><code class="inline-code">renderPage</code>: Orchestrates a two-template rendering process, producing complete pages with content and base templates.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">// Efficient retrieval and caching of template glyphs
private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);

  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Ensures templates are cached for efficiency, avoiding repetitive file reads.</li>
<li>Uses a map to store cached templates, indexed by their names.</li>
<li>Throws descriptive errors if a template file is missing or inaccessible.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Replacing placeholders in templates with actual values
private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;

  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }

  return result;
}
</code></pre>
<ul>
<li>Searches for all placeholders (<code class="inline-code">{{key}}</code>) in the template.</li>
<li>Substitutes placeholders with corresponding values from the <code class="inline-code">variables</code> object.</li>
<li>Uses regular expressions to ensure every occurrence of a placeholder is replaced.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Combining base and content templates for full-page rendering
renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  // First, render the content template
  const renderedContent = this.replacePlaceholders(contentHtml, variables);

  // Then, render the base template with the content injected
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Loads both a base template and a content-specific template.</li>
<li>Replaces placeholders in the content template before embedding it into the base.</li>
<li>Uses a combined variable set to insert content dynamically into the full page.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Context Matters</strong>: Pay attention to how the <code class="inline-code">TemplateEngine</code> uses dynamic data to modify static content. This mirrors how data flows through modern web applications.</li>
<li><strong>Error Preparation</strong>: When manipulating paths or external data, readiness to handle missing or incorrect inputs is key.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Behold, seeker of wisdom: thou hast unlocked the sacred glyphs of storytelling, etching thy name upon the timeless sands of the Temple of Lore‚Äîpress onward with valor! üíéüó∫Ô∏è‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>