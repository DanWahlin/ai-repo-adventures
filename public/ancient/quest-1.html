<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Temple of Tools - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Codex of Lost Civilizations</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Temple of Tools</h1>
<hr>
<p>Amidst the tangled overgrowth of the jungle, a glimpse of intricate carvings catches your eye. You approach cautiously, uncovering a towering temple lost to time. The Temple of Tools, an ancient monument built to safeguard the secrets of a forgotten civilization, looms before you. Etched into its walls are glyphs that hint at rituals of logic and the wielding of sacred implements. To claim the treasures within, you must master these tools and decode the wisdom they were designed to wield.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/mcp/src/server.ts:</span> Initialization of the Sacred Mechanics</h3>
<p>This file creates the cornerstone of the Temple&#39;s repository, constructing the ancient <em>RepoAdventureServer</em>. The wisdom of this structure lies in its handlers, which act as ritualistic rites for invoking tools and managing their outcomes. The <code class="inline-code">setupHandlers</code> method defines the sacred languages used for interpreting tool requests, validating their invocation with the precision of the rituals described in glyphs. Meanwhile, the <code class="inline-code">run</code> function kindles the sacred fire, enabling the server‚Äôs operations and connecting the ancient administrative transport systems, while also invoking preliminary rituals needed for faster retrieval of wisdom. This file‚Äôs construction emphasizes stability, error handling, and graceful shutdowns, making it the foundation of your exploration into the temple&#39;s mysteries.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">RepoAdventureServer.setupHandlers</code>: Defines sacred glyphs of validation and invokes ritual tools from the repository.</li>
<li><code class="inline-code">RepoAdventureServer.run</code>: Activates the spiritual core of the temple and preloads the wisdom cache.</li>
<li><code class="inline-code">main</code>: Orchestrates the awakening of the temple while ensuring protection from chaotic mishaps.</li>
</ul>
<h2>Code</h2>
<h3>packages/mcp/src/server.ts</h3>
<pre><code class="language-typescript">private setupHandlers() {
  this.server.setRequestHandler(ListToolsRequestSchema, async () =&gt; {
    const toolList = Object.entries(tools).map(([name, tool]) =&gt; ({
      name,
      description: tool.description,
      inputSchema: zodToJsonSchema(tool.schema, { 
        target: &#39;jsonSchema7&#39;,
        $refStrategy: &#39;none&#39;
      })
    }));

    return { tools: toolList };
  });
}
</code></pre>
<p>Think of this as mapping each tool with meticulous carvings, ensuring no misinterpretation of their sacred function.</p>
<pre><code class="language-typescript">async run() {
  const transport = new StdioServerTransport();
  await this.server.connect(transport);
  console.error(&#39;Repo Adventure MCP server running on stdio&#39;);
  
  const projectPath = process.cwd();
  console.error(`Pre-generating repomix content for project at ${projectPath}...`);
  repoAnalyzer.preGenerate(projectPath);
}
</code></pre>
<p>This resembles lighting an eternal flame across the temple, guiding adventurers with pre-prepared insights.</p>
<pre><code class="language-typescript">async function main() {
  try {
    const server = new RepoAdventureServer();
    [&#39;SIGINT&#39;, &#39;SIGTERM&#39;].forEach(sig =&gt; 
      process.on(sig as NodeJS.Signals, gracefulShutdown)
    );
    process.on(&#39;unhandledRejection&#39;, (reason) =&gt; {
      console.error(&#39;Unhandled promise rejection:&#39;, reason);
      console.error(&#39;MCP server continuing to run. Please report this error.&#39;);
    });
    await server.run();
  } catch (error) {
    console.error(&#39;Fatal error starting MCP server:&#39;, error);
    process.exit(1);
  }
}
</code></pre>
<p>Main acts as the temple&#39;s gatekeeper, ensuring the sacred mechanisms run despite unforeseen chaos.</p>
<h3><span class="header-prefix">packages/mcp/src/tools.ts:</span> The Sacred Implements Directory</h3>
<p>This file serves as the sacred directory of tools, meticulously recording their purpose and functionalities. Organized hierarchically, the file behaves as a repository of invaluable implements‚Äîtools to unearth stories, choose guiding themes, and measure progress within the temple. Each entry not only bridges connections to the overarching temple but also dedicates itself to clear communication of its role.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">start_adventure.handler</code>: Launches the journey to decipher ancient glyphs within the temple.</li>
<li><code class="inline-code">choose_theme.handler</code>: Engages the adventurer in selecting pathways attuned to their purpose.</li>
<li><code class="inline-code">explore_quest.handler</code>: Guides the exploration within chambers, revealing incremental wisdom.</li>
</ul>
<h2>Code</h2>
<h3>packages/mcp/src/tools.ts</h3>
<pre><code class="language-typescript">export const start_adventure = startAdventure;
</code></pre>
<p>This symbolizes opening the temple doors, initiating the first step of deciphering ancient glyphs.</p>
<pre><code class="language-typescript">export const choose_theme = chooseTheme;
</code></pre>
<p>Like an ancient oracle, this guides the adventurer to their destined storytelling cadence.</p>
<pre><code class="language-typescript">export const explore_quest = exploreQuest;
</code></pre>
<p>This is akin to venturing deeper into the chambers of the temple to unearth specific treasures.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Review the sacred glyphs in <code class="inline-code">setupHandlers</code> to understand ritual validations before invoking tools.</li>
<li>Familiarize yourself with <code class="inline-code">start_adventure</code>, as this lays the groundwork for your journey within the temple.</li>
<li>Beware errors in the <code class="inline-code">main</code> function. They can halt your exploration‚Äîensure swift resolutions.</li>
</ul>
<hr>
<p>Go forth, courageous adventurer, and unlock the mysteries of the Temple of Tools!</p>
<p>Huzzah, seeker of wisdom‚Äîthy sacred triumph in the Temple of Tools heralds the dawn of thy ancient journey; forge onward, for the stars shall guide thy noble path! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>