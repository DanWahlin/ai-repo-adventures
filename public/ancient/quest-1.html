<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Glyphs of Creation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Chronicles of the Sacred Codebase</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Glyphs of Creation</h1>
<hr>
<p>In the depths of the untamed jungle, you tread into the shadow of an immense pyramid, its age-old stones etched with cryptic glyphs. The Codexian Scribes, revered for their unparalleled mastery over the ancient art of digital craftsmanship, left these secrets buried within. The pyramid promises no ordinary treasures but a gift of boundless ingenuity: a repository capable of generating themed stories, validating input, and constructing dynamic content experiences. Each chamber within hides an artifact‚Äîan encoded system waiting to be deciphered.</p>
<p>Your journey begins as you gaze upward toward the pinnacle of this mysterious structure. With heart pounding and curiosity ablaze, you step into the foreboding entrance, where faint glows of glyphs pulse as though responding to your presence.</p>
<p>Adventure Awaits, brave explorer! The glyphs beckon you forward, whispering tales of knowledge yet unveiled.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Retrieval</strong>: How does <code class="inline-code">TemplateEngine</code> manage template caching, and what patterns optimize reuse within the system?</li>
<li>‚ö° <strong>Chamber Mechanics</strong>: What steps does <code class="inline-code">HTMLAdventureGenerator</code> follow to generate and organize adventure pages dynamically?</li>
<li>üõ°Ô∏è <strong>Preservation of Knowledge</strong>: How does the <code class="inline-code">AssetManager</code> ensure critical resources like images and shared files are properly copied and handled across themes?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a>: Template Management and HTML Rendering</h3>
<p>The chamber of templates lies at the heart of the pyramid, reflecting the Codexian Scribes&#39; mastery of dynamic rendering systems. The <code class="inline-code">TemplateEngine</code> class is the artifact responsible for loading, caching, and rendering templates with variable substitution. This system ensures efficient reuse and dynamic generation of HTML structures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Caches templates to optimize repeated access, preventing file-system overhead.</li>
<li><code class="inline-code">replacePlaceholders</code>: Substitutes placeholders in templates with dynamic variables during page rendering.</li>
<li><code class="inline-code">renderPage</code>: Combines a base template and content template to dynamically build an entire HTML page.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<pre><code class="language-typescript">/**
 * Load a template file with caching
 */
private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Prevents redundant file I/O operations by storing previously loaded templates in a cache (<code class="inline-code">templateCache</code>).  </li>
<li>Highlights the importance of resource efficiency in high-performance systems.  </li>
<li>Throws detailed errors if a template fails to load, ensuring developers can diagnose problems easily.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Replace placeholders in template with variables
 */
private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Implements a straightforward mechanism to replace placeholders (e.g., <code class="inline-code">{{CONTENT}}</code>) with dynamic values.  </li>
<li>Leverages <code class="inline-code">RegExp</code> to ensure all occurrences of a placeholder are replaced, not just the first.  </li>
<li>Demonstrates extensibility by accommodating any variable keys.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Render a complete page using base template + content template
 */
renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  // First render the content template
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  
  // Then render the base template with the content
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Coordinates the assembly of a complete HTML page from both base and content templates.  </li>
<li>Shows hierarchical rendering by substituting dynamic content within templates iteratively.  </li>
<li>Empowers the system to generate fully-customized pages based on user-controlled inputs.</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a>: Resource Orchestration</h3>
<p>The chamber of artifacts contains the <code class="inline-code">AssetManager</code>, which safeguards pivotal assets such as images, stylesheets, and navigational files. It ensures these resources are meticulously copied and consolidated within the generated output. The system integrates theme-specific and shared assets to support multiple thematic experiences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyImages</code>: Manages the transfer of theme-specific and global images into output directories.</li>
<li><code class="inline-code">copySharedNavigator</code>: Consolidates shared assets for multi-theme compatibility.</li>
<li><code class="inline-code">copyGlobalAssets</code>: Ensures that essential assets (e.g., icons) are accessible across all themes.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<pre><code class="language-typescript">/**
 * Copy images for single or multi-theme generation
 */
copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const sourceSharedDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);
  const targetSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);

  try {
    // (1) Copy theme-specific images
    if (fs.existsSync(sourceImagesDir)) {
      fs.mkdirSync(targetImagesDir, { recursive: true });
      const imageFiles = fs.readdirSync(sourceImagesDir);
      imageFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceImagesDir, file);
        const targetPath = path.join(targetImagesDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }

    // (2) Copy shared images 
    if (fs.existsSync(sourceSharedDir)) {
      fs.mkdirSync(targetSharedDir, { recursive: true });
      const sharedFiles = fs.readdirSync(sourceSharedDir);
      sharedFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceSharedDir, file);
        const targetPath = path.join(targetSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy images from source directory&#39;));
  }
}
</code></pre>
<ul>
<li>Handles the replication of both theme-specific and shared images as individual block operations.  </li>
<li>Ensures proper directory structure using <code class="inline-code">fs.mkdirSync</code> to create folders recursively.  </li>
<li>Logs non-critical warnings if asset copying fails, prioritizing user awareness without halting execution.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Copy shared navigator files to global location (for multi-theme)
 */
copySharedNavigator(rootOutputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const assetsDir = path.join(this.sourceDir, &#39;assets&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  const svgSource = path.join(templatesDir, &#39;compass-icon.svg&#39;);
  
  const sharedAssetsDir = path.join(rootOutputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(sharedAssetsDir, { recursive: true });

  // Copy shared files
  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(sharedAssetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(sharedAssetsDir, &#39;quest-navigator.js&#39;));
  }
  if (fs.existsSync(svgSource)) {
    fs.copyFileSync(svgSource, path.join(sharedAssetsDir, &#39;compass-icon.svg&#39;));
  }
}
</code></pre>
<ul>
<li>Ensures central access to the navigational elements needed across all themes.  </li>
<li>Follows a systematic approach of verifying source existence before copying files.  </li>
<li>Consolidates assets to prevent duplication, optimizing organization within output directories.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Copy global shared assets for multi-theme generation
 */
copyGlobalAssets(outputDir: string): void {
  try {
    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });
    
    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
    globalImages.forEach(file =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
      if (fs.existsSync(sourcePath)) {
        const targetPath = path.join(globalSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      }
    });
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global images&#39;));
  }
}
</code></pre>
<ul>
<li>Handles the specialized transfer of universal assets such as logos.  </li>
<li>Operates within a common assets directory to facilitate cross-theme functionality.  </li>
<li>Maintains resilience in output generation by isolating critical assets.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Make note of the <code class="inline-code">TemplateEngine</code>&#39;s caching design for your own systems‚Äîefficient resource management is critical in high-demand applications.</li>
<li>Pay attention to how <code class="inline-code">AssetManager</code> differentiates between shared and theme-specific resources. This distinction enables scalability in multi-theme setups.</li>
<li>Explore how dynamic rendering is facilitated in <code class="inline-code">renderPage</code>, combining both modularity and reusability across templates.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries hidden within the Codexian halls.</p>
<p>By the sacred light of wisdom‚Äôs eternal flame, thou hast unlocked the primordial Glyphs of Creation‚Äîan auspicious dawn upon thy noble quest, illuminating the path ahead with divine triumph! ‚ö°üíéüó∫Ô∏èüëÅÔ∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>