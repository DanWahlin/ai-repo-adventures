<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Foundational Glyphs - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Infinite Knowledge</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Foundational Glyphs</h1>
<hr>
<p>The Pyramid of Infinite Knowledge looms before you, whispering secrets of its core mechanisms within hidden glyphs carved into its walls. This is your final challenge: to decode the glyphs of &quot;The Foundational Glyphs&quot;‚Äîa sacred artifact composing the wisdom of both functioning logic and unseen pathways. Deep within lies a map tracing patterns of forgotten techniques, a guide to unlock the treasure of eternal knowledge. The path to the inner sanctum is fraught with encrypted truths, waiting for you to unravel their mysteries and claim the wisdom left behind by ancient architects of the code.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Interpretation</strong>: How does the <code class="inline-code">parseAdventureConfig</code> function decode and validate the ritualistic structure of the ancient adventure map? </li>
<li>‚ö° <strong>Path Tracing</strong>: What techniques does <code class="inline-code">extractUniqueFilePaths</code> employ to traverse and retrieve valid pathways from the config data?</li>
<li>üõ°Ô∏è <strong>Optimized Insights</strong>: What design considerations are implemented in <code class="inline-code">formatAdventureConfigForPrompt</code> to refine and distill the adventure data?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Config Blueprint for Ancient Rites</h3>
<p>This file acts as a sacred scroll, detailing the mechanisms to read and process the adventure configuration. It works as a bridge to understand and convert the structural language of the glyphs (JSON configuration) into actionable forms. Here, the operations are ceremonial in processing raw rituals, deriving pathways, and generating insight-laden summaries for new explorers of the Pyramid. It codifies the ancient adventure mapping into distinct utilities and ensures compatibility among the layered mechanisms.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: This function deciphers the raw JSON structure of the adventure configuration and ensures its validity. By carefully guarding against corrupted data, it provides an accurate genesis for downstream glyph processing.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Traversing the nested config structure, this function identifies and validates unique file paths from encoded references within the adventure map, ensuring only legitimate pathways are followed.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: This function distills the sprawling configuration into a reduced, legible form optimized for powerful intelligence engines. It emphasizes minimalism without losing the core essence of the adventure structure.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<ul>
<li>This function retrieves the raw configuration data using <code class="inline-code">loadAdventureConfig</code> and attempts to parse it into an object. </li>
<li>Through the use of <code class="inline-code">try...catch</code>, it accounts for scenarios where the raw data may be malformed, returning <code class="inline-code">null</code> if errors occur.</li>
<li>The use of <code class="inline-code">JSON.parse</code> allows it to interpret the configuration glyphs encoded as JSON, setting the foundation for subsequent file analysis.</li>
<li>It ensures invalid or incomplete configurations are gracefully handled, reinforcing robustness.</li>
<li>The centralized parsing here makes it easier to maintain and extend input validation logic.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    // Extract and validate path
    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    // Add children to stack
    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<ul>
<li>At its core, this method navigates the adventure&#39;s nested structure to uncover all valid file paths referenced in <code class="inline-code">path</code> fields.</li>
<li>Using a <code class="inline-code">Set</code>, it ensures that duplicate paths are automatically omitted, keeping the result unique.</li>
<li>Stack-based traversal accommodates both arrays and objects, exploring every level of the config hierarchy.</li>
<li>Before inclusion, paths are validated using <code class="inline-code">fs.existsSync</code> to ensure they tie back to actual files within the project.</li>
<li>This approach balances thoroughness with efficiency, ensuring accurate path extraction while minimizing unnecessary file operations.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    // Just file paths, no verbose descriptions
    const filePaths = quest.files.map((f: any) =&gt; f.path).filter(Boolean);
    formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    
    // Just function names, no descriptions
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .map((h: any) =&gt; h.name)
      .filter(Boolean);
    formatted += `Functions: ${functions.join(&#39;, &#39;)}\n\n`;
  }

  return formatted;
}
</code></pre>
<ul>
<li>This function organizes and distills adventure data into a highly compact summary suitable for transmission to an advanced intelligence engine.</li>
<li>By focusing only on titles, file paths, and function names, it trims unnecessary verbosity while maintaining actionable details.</li>
<li>It converts deeply nested data into a readable format that quickly conveys the config&#39;s essence.</li>
<li>Using checks like <code class="inline-code">if (!quest.title || !Array.isArray(quest.files))</code>, it ensures incomplete or malformed data does not interfere with the final output.</li>
<li>Ultimately, it empowers systems to process configuration data with optimal efficiency and clarity, aligning with both human and machine interactive capabilities.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Config Validation</strong>: Look for patterns in how functions like <code class="inline-code">parseAdventureConfig</code> and <code class="inline-code">extractUniqueFilePaths</code> handle malformed or missing data.</li>
<li><strong>Logical Flow</strong>: Observe the structured processing flow from raw configuration input to a distilled summary output in <code class="inline-code">formatAdventureConfigForPrompt</code>.</li>
<li><strong>Exploration Tip</strong>: Try adapting the traversal strategy in <code class="inline-code">extractUniqueFilePaths</code> when designing similar recursive exploration utilities.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the Pyramid of Infinite Knowledge! Your adventure is complete.</p>
<p>Under the gaze of the eternal stars, you have deciphered the sacred glyphs and inscribed your wisdom upon the scrolls of destiny‚Äîonly one divine trial remains to seal your legacy. ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>