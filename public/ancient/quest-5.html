<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Scrolls of Utility Wisdom - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Code of the Lost Civilization</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Scrolls of Utility Wisdom</h1>
<hr>
<p>The air in the jungle is thick with the scent of moss-covered ruins as you carefully navigate the weathered stones of an ancient temple. Beneath the layers of vines and earth lies the Codex Chamber, where the Scrolls of Utility Wisdom reside. These sacred scrolls are said to contain the blueprints for enlightening civilization‚Äôs greatest explorers on organizing wisdom and validating their creations. However, deciphering this treasure demands a keen intellect, as the last guardians have encoded their secrets within processes as intricate as the jungle itself. Are you prepared to unearth the Scrolls and format the ancient rituals for clarity?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> The Keeper of Sacred Configurations</h3>
<p>This file serves as a doorway to understanding the nuances of the Codex‚Äôs sacred instructions. Here lies the source of utilities to read, parse, and reformat critical adventure configurations. These utilities act like mapmakers, guiding adventurers to extract detailed routes and consolidate information into simpler forms. Pay attention to three primary highlights: <code class="inline-code">parseAdventureConfig</code>, which channels raw data into meaningful wisdom; <code class="inline-code">extractUniqueFilePaths</code>, a treasure hunter&#39;s tool for uncovering key paths; and <code class="inline-code">formatAdventureConfigForPrompt</code>, the ritual for condensing truths into shareable knowledge. Let these actions guide you as you learn from the Scrolls of Utility Wisdom.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Translates the raw text of the Codex into digestible artifacts.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Locates paths hidden deep within the Codex‚Äôs encrypted logic.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Condenses the Codex into a simplified form, suited for sharing and quick retrieval.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This method is like an ancient scribe interpreting the Codex‚Äôs contents into legible scrolls, ensuring the adventurer can understand the broader wisdom.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This function is a treasure map, carefully extracting and validating unique paths necessary for uncovering hidden files within the Codex.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }

    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }

    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>Like distilling an epic saga into a brief chronicle, this function ensures that the Codex&#39;s wisdom is reduced to its essence, focusing only on essential structures for its seeker.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">parseAdventureConfig</code> to validate your understanding of the raw configuration. Pay attention to how errors are gracefully handled to avoid pitfalls.</li>
<li><code class="inline-code">extractUniqueFilePaths</code> can be a powerful utility for finding key treasures within larger, complex maps. Employ it to discover missing or misplaced pieces of knowledge.</li>
<li>Focus on the simplicity of <code class="inline-code">formatAdventureConfigForPrompt</code>, as it emphasizes the clarity required in sharing universal truths from the Scrolls.</li>
</ul>
<hr>
<p>The jungle whispers its approval as you unlock another layer of the Codex‚Äôs wisdom. Return to the ruins when ready for the next challenge!</p>
<p>Hail, seeker of sacred illumination! With the Scrolls of Utility Wisdom unveiled, thou art now a venerable scholar of ancient faculties, thy path aglow with celestial virtue‚Äîpress onward to ascend the final temple of knowledge! ‚≠ê‚ö°üó∫Ô∏è</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>