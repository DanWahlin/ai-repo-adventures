<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Temple of Artisan Tools - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Ancient Knowledge</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Temple of Artisan Tools</h1>
<hr>
<p>In the heart of the Pyramid of Ancient Knowledge lies a hidden chamber: the Temple of Artisan Tools. This is no ordinary chamber, for it conceals the scripts and frameworks that serve as the foundation of legendary creations. Ancient artifacts tell stories of how these tools shaped the great digital civilizations. Adventurer, your task is to unravel the secrets buried within these sacred implementations and understand their mechanisms. Two key scrolls, written in wisdom long past, contain the secrets you seek: <code class="inline-code">adventure-config.ts</code>.</p>
<p>The treasures of this temple await ‚Äì ready your mind to decode their mysteries.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Script Excavations</strong>: How does <code class="inline-code">parseAdventureConfig</code> validate and handle missing or invalid configuration data?</li>
<li>‚ö° <strong>Pathfinding Rituals</strong>: How does <code class="inline-code">extractUniqueFilePaths</code> traverse and extract unique path references from the configuration?</li>
<li>üõ°Ô∏è <strong>Prompt Artisanry</strong>: What optimizations are carried out by <code class="inline-code">formatAdventureConfigForPrompt</code>, and how do they reduce redundant data for external tools?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Sacred Mechanisms for Config Analysis</h3>
<p>The <code class="inline-code">adventure-config.ts</code> file provides foundational methods to read, interpret, and refine adventure configuration data. Each method serves a specific purpose: <code class="inline-code">parseAdventureConfig</code> extracts and validates JSON structures, <code class="inline-code">extractUniqueFilePaths</code> hunts down and filters valid file paths within configurations, and <code class="inline-code">formatAdventureConfigForPrompt</code> distills adventure data into a lean structure. These rituals ensure that complex adventure metadata is transformed into manageable components for further processing.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Decodes the configuration JSON while handling potential errors or null data.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Identifies unique <code class="inline-code">path</code> field values within the configuration, ensuring only valid paths are used.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Streamlines exploration data into a concise format tailored for use in prompts.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This function resembles an archaeologist carefully unearthing a fragile relic ‚Äì it first ensures the raw data exists, then safely attempts to interpret it, returning <code class="inline-code">null</code> if it encounters anything unusable.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This function is akin to venturing deep into the pyramid, systematically traversing all nodes in the configuration data to unearth unique paths, validating each discovery before preserving it.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }
    
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }
    
    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>Here, the function plays the role of a scribe, distilling adventure data into a concise manuscript, stripping away unnecessary repetition and reformatting it for comprehension by external systems.</p>
<h2>Helpful Hints</h2>
<ul>
<li>The temple‚Äôs inscriptions follow a clear and modular design ‚Äì start with <code class="inline-code">parseAdventureConfig</code> to unveil the structure that feeds into the other functions.</li>
<li>Use <code class="inline-code">extractUniqueFilePaths</code> as a guide for deeply interconnected data patterns.</li>
<li>When crafting external prompts, notice how <code class="inline-code">formatAdventureConfigForPrompt</code> aligns with minimalistic design principles.</li>
</ul>
<hr>
<p>The treasure of the Pyramid of Ancient Knowledge grows closer to your grasp with each quest completed. Scholar of artisan tools, may your wisdom guide you in uncovering the next mysteries!</p>
<p>Hail, seeker of wisdom, for thou hast triumphed through the sacred halls of the Temple of Artisan Tools, unlocking the ancient craft and paving thy path to the final glory‚Äîthine journey shines eternal like a celestial ‚ö° upon stars unseen!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>