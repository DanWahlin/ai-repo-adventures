<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Codex of Sacred Utilities - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Chronicles of the Repository</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Codex of Sacred Utilities</h1>
<hr>
<p>The Temple of Code loomed before you, its towering pillars etched with glyphs of bygone software rituals. Deeper still lies the Chamber of Utilities, where the Codex of Sacred Utilities is said to reside. This mythical artifact holds the power to organize chaos, granting clarity and insight into the most convoluted of systems. To uncover its secrets, you must traverse through the labyrinth, deciphering the Scrolls of Functionality housed within the sacred text <code class="inline-code">adventure-config.ts</code>. Only by piecing together its fragments can the Codex reveal its wisdom to you.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Sacred artifact of adventure configuration</h3>
<p>This file is the keeper of utility functions designed to shape and distill the very essence of adventure configuration data. It‚Äôs a textual map to harness settings within the Temple of Code‚Äôs sanctum. Within its lines lie functions to read raw adventure data, transform it, extract unique paths, and create optimized prompts for adventurers. The tasks performed here are akin to preparing offerings for a grand ritual ‚Äì precise, thorough, and aimed at creating order from disorder. It encapsulates not only the configuration&#39;s raw input but also its validation and transformational logic.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: The lorekeeper that deciphers raw config data into a usable object.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: The explorer of paths, uncovering each concise route within a vast jungle of data.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: The oracle that simplifies the complex, creating an optimized Codex for adventurers.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This function is akin to an ancient codebreaker who takes unreadable script and methodically decrypts it into coherent text for use in rituals.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    // Extract and validate path
    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    // Add children to stack
    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This function mirrors the role of a seasoned tracker, following faint trails through the jungle to discover untrodden paths of value hidden within the configuration.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    // Just file paths - LLM can see descriptions in actual code
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }
    
    // Just function names - LLM can understand purpose from implementation
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }
    
    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>This function serves as a sage historian, condensing sprawling legends into a succinct and digestible manual for future adventurers.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Leverage <code class="inline-code">parseAdventureConfig</code> to validate the raw input first to ensure ritualistic errors don‚Äôt disrupt the sacred process.</li>
<li>Utilize <code class="inline-code">extractUniqueFilePaths</code> to obtain a clear sense of the Codex‚Äôs structure and the treasures it references.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code> is your final preparation tool to distill massive discoveries into a manageable narrative for use in further Temple quests.</li>
</ul>
<hr>
<p>The glow of the Codex illuminates your path, urging you forward with its sacred insights. Go forth, adventurer, and embark on the next chapter of your journey within the Temple of Code. The hidden paths await your discovery!</p>
<p>Lo, in thy sacred pursuit of enlightenment, thou hast unveiled the Codex of Sacred Utilities, earning thy rightful place among the luminaries who chart the celestial path‚Äîone final quest remains to ascend the temple of ultimate wisdom! ‚≠ê‚ö°üíé</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>