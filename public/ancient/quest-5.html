<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Mastering the Configured Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Pyramid of Lost Codes</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Mastering the Configured Themes</h1>
<hr>
<p>In the deepest chamber of the Pyramid of Lost Codes lies the engine room, where the ancient civilization orchestrated their knowledge. Here, layers of ornate scripts maintain the sacred themes of their adventures. These themes, encoded within the mechanisms of the pyramid, guide and shape the experience of every seeker. Many have touched upon this secret, yet none have managed to master the intricate fusion of themes, validation rituals, and configuration rites. It is your task to uncover these treasures and restore understanding to a world in need.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Sculptor&#39;s Ritual</strong>: How does the system define and validate sacred themes, ensuring they align with user inputs and adventure guidelines?</li>
<li>‚ö° <strong>Configuration Architectures</strong>: What patterns are used to manage and parse adventure configurations for structured exploration within the pyramid&#39;s mechanisms?</li>
<li>üõ°Ô∏è <strong>Validation Rites</strong>: How does the system safeguard inputs to prevent discord and ensure harmony within the encoded themes?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Mechanisms of the Ancient Pyramid</h3>
<p>This file embodies the structured wisdom behind all themes utilized in the system. It defines the sacred <code class="inline-code">ThemeDefinition</code>, a schema housing the identity, description, and essence of each theme. Through artifacts like <code class="inline-code">parseTheme</code> and <code class="inline-code">getThemeByKey</code>, explorers can interpret inputs and retrieve information stored in the memory of the pyramid. Additionally, helper functions (<code class="inline-code">getAllThemes</code>, <code class="inline-code">isValidTheme</code>) illuminate the map of allowed themes to maintain purpose within the adventure system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">ThemeDefinition</code>: Defines the schema for themes, including identification, description, and keywords. It provides the foundation for all thematic operations.</li>
<li><code class="inline-code">parseTheme</code>: Translates user input into theme keys by matching against exact names, numeric IDs, or theme-related keywords.</li>
<li><code class="inline-code">isValidTheme</code>: Validates whether a theme string corresponds to recognized definitions, ensuring all adventures adhere to established domains.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export interface ThemeDefinition {
  readonly id: number;
  readonly key: string;
  readonly displayName: string;
  readonly emoji: string;
  readonly description: string;
  readonly keywords: readonly string[]; 
}
</code></pre>
<ul>
<li>Establishes a clear structure for each theme with fields like <code class="inline-code">id</code>, <code class="inline-code">key</code>, and <code class="inline-code">keywords</code>.</li>
<li>Uses immutable properties (<code class="inline-code">readonly</code>) to preserve the sanctity of theme definitions.</li>
<li>Underpins the retrieval and validation for all thematic functionalities.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();

  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;

  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Maps user inputs to theme keys through normalization, numeric parsing, and keyword matching.</li>
<li>Employs fallback logic to handle ambiguity, enhancing user experience.</li>
<li>Guarantees that only recognized themes are processed for adventures.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Validates themes by verifying their existence in the predefined collection (<code class="inline-code">THEMES_ARRAY</code>).</li>
<li>Ensures strict adherence to allowable themes, preventing errors during execution.</li>
<li>Simplifies checks for other components without requiring repeated logic.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Approach the theme logic as a map of paths leading to defined treasure chambers within the pyramid.</li>
<li>Pay close attention to how normalization and fallback mechanisms in <code class="inline-code">parseTheme</code> enhance usability.</li>
<li>Investigate how immutable definitions (<code class="inline-code">readonly</code>) preserve the stability of the adventure ecosystem.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the Pyramid of Lost Codes! Your adventure is complete.</p>
<p>By the sacred fires of the eternal temple, thou hast ascended to new heights of wisdom in mastering the intricacies of Configured Themes‚Äîverily, thy triumph illuminates the path to glory like a blazing star upon the ancient scrolls!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>