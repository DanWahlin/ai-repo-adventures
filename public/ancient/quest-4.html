<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Ritual of Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'ancient' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Lost Code</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Ritual of Themes</h1>
<hr>
<p>The Pyramid of Lost Code casts its shadow across the dense jungle, its apex lit by the glow of an eternal flame. Deep within its layers lies the Chamber of Themes‚Äîan ancient shrine dedicated to preserving the essence of civilizations long past. To restore balance to the digital world, adventurer, you must decode the patterns of ancient wisdom stored within. The fragments of sacred themes, etched in the stone walls, hold the key to navigating this labyrinthine temple. Yet, beware‚Äîonly the worthy can align the themes correctly and awaken the digital harmony.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Central Definitions for Themes</h3>
<p>The <code class="inline-code">theme.ts</code> file acts as the cornerstone of the adventure system by defining all theme-related data in one cohesive structure. This includes the properties, keywords, and descriptions for each available theme, such as &quot;space,&quot; &quot;mythical,&quot; &quot;ancient,&quot; and &quot;developer.&quot; It introduces the <code class="inline-code">ThemeDefinition</code> interface, which ensures every theme adheres to a consistent structure. The <code class="inline-code">THEMES</code> constant stores pre-defined themes as objects, each with an ID, display name, description, and related keywords. This structure allows a clean way to match user inputs with available themes, ensuring a robust and dynamic theme selection mechanism.</p>
<p>Functions like <code class="inline-code">getThemeById()</code> and <code class="inline-code">parseTheme()</code> serve as utility methods for fetching or validating themes by ID, keyword, or input string. The file ensures that no input validation process occurs without checking whether the theme exists in the system, utilizing <code class="inline-code">isValidTheme()</code> to filter out unsupported options. This file plays a critical role in allowing adventurers to immerse themselves in theme-appropriate stories, enriching the quest experience.</p>
<h4>Highlights</h4>
<ul>
<li>Defines the <code class="inline-code">THEMES</code> object, storing pre-configured theme details including keywords and unique descriptions.</li>
<li>Implements <code class="inline-code">parseTheme()</code> to dynamically match user input to valid themes by ID or keyword.</li>
<li>Provides utility functions like <code class="inline-code">getThemeById()</code> and <code class="inline-code">getAllThemes()</code> to retrieve theme data for user interactions.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Input Validation for Secure Interactions</h3>
<p>The <code class="inline-code">input-validator.ts</code> file is the gatekeeper of the adventure‚Äôs inputs, ensuring any choices made by the user are valid and secure. It introduces lightweight functions for validating user selections, parsing themes, and sanitizing inputs to prevent malicious attacks. For example, <code class="inline-code">validateAdventureChoice()</code> checks that user inputs are non-empty and within character length limits, throwing errors for invalid choices. Similarly, the <code class="inline-code">validateTheme()</code> function ensures selections align with known themes, rejecting improper inputs with contextual error messages listing valid options.</p>
<p>A standout function, <code class="inline-code">sanitizeForDisplay()</code>, strips harmful characters like <code class="inline-code">&lt;</code>, <code class="inline-code">&gt;</code>, and <code class="inline-code">&quot;</code> from user inputs and ensures only clean data is displayed or stored. By proactively validating inputs and ensuring their safety, <code class="inline-code">input-validator.ts</code> protects the boundaries of the quest from being corrupted by bad data or technical mishaps, creating a sturdy foundation for exploring the Pyramid of Lost Code.</p>
<h4>Highlights</h4>
<ul>
<li>Validates user choices with clear, concise checks in <code class="inline-code">validateAdventureChoice()</code>, ensuring error transparency.</li>
<li>Implements <code class="inline-code">sanitizeForDisplay()</code> to secure and clean user-provided data.</li>
<li>Strengthens the player experience by preventing invalid or unsafe theme inputs through <code class="inline-code">validateTheme()</code>.</li>
</ul>
<hr>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<p>The <code class="inline-code">THEMES</code> object serves as a treasure chest, each theme like a rare artifact with its own unique history and significance.</p>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>This function ensures the adventurer chooses a theme written in the mystical script of the Pyramid by comparing it to known inscriptions.</p>
<hr>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>This function polishes rough and potentially unsafe inputs into harmless, gleaming relics ready for the sacred altar of the quest.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Explore how the <code class="inline-code">THEMES</code> object and <code class="inline-code">validateTheme()</code> work together to ensure that user choices align with predefined guidelines.</li>
<li>Consider extending the <code class="inline-code">THEMES</code> object to add more nuanced themes, potentially for interactive or seasonal adventures.</li>
<li>Dive into the functions <code class="inline-code">parseTheme()</code> and <code class="inline-code">isValidTheme()</code> to better understand how input string matching influences the overall player experience.</li>
</ul>
<hr>
<p>Hark, seeker of sagacity, the sacred Rite of Themes is complete; thy wisdom ascends like stars eternal, 60% forged upon the path to triumph‚Äîonward, for glory awaits thee! ‚ö°üíéüó∫Ô∏èüëÅÔ∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Sacred Configuration Vault ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>