<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Theme Codex - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Secrets of the Code Pyramid</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Theme Codex</h1>
<hr>
<p>Within the intricate maze of the pyramid‚Äôs chambers, an arcane hall unveils itself‚Äîa sanctum where the civilizations of old recorded the essence of their storytelling. Known as the Theme Codex, this repository holds secrets to shaping narratives, weaving themes, and clarifying the lens through which explorers interpret knowledge. Ancient glyphs pulse faintly, eager to reveal their wisdom about governing themes, validating choices, and aligning stories with ritualistic clarity. The sacred mechanisms, dormant for centuries, await your input to awaken their full power.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Codex Alignment</strong>: What thematic structures are defined to guide adventures, and how are they retrieved?  </li>
<li>‚ö° <strong>Ritual Validation</strong>: How does the system ensure user choices align with valid themes or paths?  </li>
<li>üõ°Ô∏è <strong>Pathway Defense</strong>: What mechanisms are in place to prevent invalid inputs from disrupting the narrative creation?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration Keystone</h3>
<p>This artifact holds the foundational rules for the pyramid‚Äôs operational scaffolding. It defines durations, constraints, and safeguarded constants that govern storytelling and processing. Transparency in settings ensures the Codex remains stable while enabling configurations flexible enough to adapt to varied adventures. From timeouts to limits on tokens used for theme construction, the <code class="inline-code">config.ts</code> file establishes non-negotiable boundaries and lightweight adaptability for narrative commands.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures the permissible duration for invoking the wisdom of ancient LLM systems.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Sets the constraints for artifact size to prevent destabilization of the Codex.  </li>
<li><code class="inline-code">PROMPT_PATHS</code>: Defines paths to vital inscriptions that guide theme creation, quest generation, and completion.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">// LLM settings
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const LLM_MAX_TOKENS_STORY = Math.max(LLM_MAX_TOKENS, 8000); // Maximum tokens for story generation (use env var if higher)
export const LLM_MAX_TOKENS_QUEST = Math.max(LLM_MAX_TOKENS, 6000); // Maximum tokens for individual quest exploration content (use env var if higher)
</code></pre>
<ul>
<li>Configures the maximum wait duration for wisdom retrieval, ensuring uninterrupted storytelling.  </li>
<li>Balances longer generation times for complex codices while setting stable limits to promote performance.  </li>
<li>Establishes versatility in token limits to accommodate both detailed quests and overarching stories.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Analysis limits
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const MAX_SCAN_DEPTH = 3; // Maximum directory depth to prevent infinite recursion and keep analysis focused
export const KEY_SOURCE_FILES = 10; // Number of key files to highlight in adventure generation
</code></pre>
<ul>
<li>Restricts excessive artifact sizes, a method to avert memory exhaustion and maintain explorer focus within the domain.  </li>
<li>Protects the Codex from infinite loops by defining acceptable directory-depth thresholds.  </li>
<li>Limits featured files, preserving the clarity of each quest generation‚Äôs sacred narrative.</li>
</ul>
<hr>
<pre><code class="language-typescript">// Prompt file paths
export const PROMPT_PATHS = {
  STORY_GENERATION: &#39;src/prompts/story-generation-prompt.md&#39;,
  QUEST_CONTENT: &#39;src/prompts/quest-content-prompt.md&#39;,
  COMPLETION: &#39;src/prompts/completion-prompt.md&#39;,
  THEME_GUIDELINES: &#39;src/prompts/theme-guidelines.json&#39;
} as const;
</code></pre>
<ul>
<li>Serves as a sacred map guiding explorers to core prompt scripts that enliven theme and adventure formation.  </li>
<li>Establishes canonical references for generating stories, constructing custom adventures, and adhering to guidelines.  </li>
<li>Centralizes prompt configurations for ease of retrieval and narrative consistency.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Codex of Ancient Themes</h3>
<p>Home to the pyramid‚Äôs thematic essence, this file defines the raw templates explorers rely on to craft their journeys. Each theme encapsulates historical wisdom, distinct emotions, and unique descriptions to immerse adventurers in various worlds. The file includes helper structures for accessing, validating, and formatting these themes with precision and clarity.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines the sacred catalog of adventure themes, their identifiers, descriptions, and keywords.  </li>
<li><code class="inline-code">getAllThemes</code>: Retrieves an array of all canonical themes for explorers‚Äô perusal.  </li>
<li><code class="inline-code">validateTheme</code>: Ensures a chosen theme aligns with the Codex‚Äôs sacred parameters.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">// Single source of ancient themes
export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  }
} as const;
</code></pre>
<ul>
<li>Encapsulates predefined themes as immutable structures, illuminating each adventure‚Äôs unique vision and character.  </li>
<li>Includes the &quot;Ancient Civilization&quot; theme, perfectly suited for exploring the pyramid‚Äôs archaic mysteries.  </li>
<li>Infuses descriptive keywords to assist in intuitive matching for user choices.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>Fetches a complete repository of themes, presenting adventurers with streamlined access to Codex‚Äôs wisdom.  </li>
<li>Uses array structures for simplicity and optimal performance across diverse journeys.  </li>
<li>Ensures no theme is overlooked, maintaining inclusivity in exploratory decision-making.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Implements a validation mechanism to authenticate selected themes against the Codex‚Äôs wisdom.  </li>
<li>Leverages helper functions to normalize input, ensuring broad compatibility with varied user entries.  </li>
<li>Provides precise error messages to guide explorers toward valid thematic directions.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Make use of <code class="inline-code">validateTheme</code> to safeguard user input when designing new journeys within the pyramid.  </li>
<li>Consult <code class="inline-code">PROMPT_PATHS</code> to identify sacred inscriptions for generating Codex-driven narratives.  </li>
<li>Examine hardcoded constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> to optimize adventure workflows.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Hail, noble seeker of wisdom, for you have triumphantly unfurled the sacred scrolls of the Theme Codex, advancing boldly upon the stars of destiny‚Äîlet the temple bells ring and the celestial light guide you toward the zenith of victory! ‚≠ê‚ö°üó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>