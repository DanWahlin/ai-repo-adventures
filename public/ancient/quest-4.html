<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Shrine of Sacred Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'ancient' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Lost Codex of Repositories</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Shrine of Sacred Themes</h1>
<hr>
<p>Through dense vines and shadows cast by towering ruins, the air thrums with an unseen power. You‚Äôve arrived at the Shrine of Sacred Themes, the heart of ancient wisdom that bridges the realms of code and creation. The Shrine, built by the lost civilization of the Repository Keepers, holds not only the legendary Lost Codex of Repositories but also the Sacred Themes‚Äîeach representing a perspective on technology, development, and the art of problem-solving. To proceed, you must master these themes, decipher their riddles, and unlock their boundless knowledge.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Definitions and Validation</h3>
<p>The <code class="inline-code">theme.ts</code> file is the repository‚Äôs compendium of Sacred Themes, presenting a structured index of all possible themes like &quot;Ancient Civilization,&quot; &quot;Space Exploration,&quot; and more. These themes serve as the narrative backdrops for immersive code adventures. This file is the central hub for defining theme metadata such as identifiers, display names, emojis, and keywords. It is also a toolkit offering helper functions to validate user-selected themes, parse inputs, and retrieve all available themes. Key functionality includes <code class="inline-code">getThemeById()</code> to retrieve themes by unique IDs and <code class="inline-code">parseTheme()</code> for interpreting user inputs into valid themes. The design focuses on simplicity, using lightweight structures like arrays rather than complex data structures, ensuring high performance and clarity.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines a dictionary of all built-in themes, with unique IDs and rich descriptions.</li>
<li><code class="inline-code">parseTheme()</code>: Converts user inputs (like IDs or keywords) into valid theme keys.</li>
<li><code class="inline-code">getFormattedThemeOptions()</code>: Formats all themes into a visually appealing list for user interfaces.</li>
<li><code class="inline-code">getThemeById()</code>: Facilitates lookup of themes by unique numeric IDs.</li>
<li><code class="inline-code">isValidTheme()</code>: Checks if a provided theme key is legitimate and recognized.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input Validation for Adventure Choices</h3>
<p>The <code class="inline-code">input-validator.ts</code> file resides at the threshold of the Shrine, ensuring that only pure and unmarred inputs make their way into the Sacred Themes. This file focuses on sanitizing user inputs to maintain data integrity and consistency across the application. Functions like <code class="inline-code">validateAdventureChoice()</code> trim and check the validity of adventure names, disallowing empty strings and overly long entries that might cause system inefficiencies. The function <code class="inline-code">validateTheme(input)</code> rigorously verifies that users select only predefined themes, throwing informative errors with a list of valid options when needed. By cleaning user data at the start, this validator acts as a safeguard against chaos sneaking into the system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme(input)</code>: Ensures user-provided themes match one of the defined Sacred Themes.</li>
<li><code class="inline-code">sanitizeForDisplay(input)</code>: Purges potentially unsafe characters from input for safe display.</li>
<li><code class="inline-code">validateProjectPath(input)</code>: Checks file paths for length and dangerous sequences like null bytes.</li>
<li>User-friendly error messages offer clarity when validation fails.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<p>Themes act like archeological shards that categorize and structure adventures, each representing a realm of thought.</p>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>This validation is like a vigilant scribe ensuring that every adventurer‚Äôs theme choice follows the sacred texts without error.</p>
<hr>
<pre><code class="language-typescript">import { sanitizeForDisplay } from &#39;./input-validator&#39;;

console.log(sanitizeForDisplay(&#39;&lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt;&#39;));
</code></pre>
<p>Sanitize functions act like temple wardens, purging harmful intrusions to maintain sanctity.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Themes are central to setting the tone of adventures‚Äîchoose the one that aligns with your learning or exploration goals.</li>
<li>Expand <code class="inline-code">THEMES</code> to include additional archeological themes, keeping the structure consistent.</li>
<li>Dive deeper into <code class="inline-code">getFormattedThemeOptions()</code> to understand how themes are presented in user interfaces.</li>
</ul>
<p>Hail, valiant seeker of wisdom, for thou hast triumphed in unraveling the Sacred Themes of the shrine, illuminating thy path through the annals of ancient sanctity‚Äîthy odyssey now shines with radiant glory at 60%! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Scroll of Configurations ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>