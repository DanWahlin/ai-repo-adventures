<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Pillars of Sacred Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Infinite Knowledge</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Pillars of Sacred Configurations</h1>
<hr>
<p>The Pyramid of Infinite Knowledge reveals yet another layer of its intricate glyphs. Inscribed upon a tablet within its Chamber of Frameworks lie the Pillars of Sacred Configurations. These ancient scripts hold the foundation for managing and safeguarding the world of mystical repositories, from ritualistic input validation to guiding adventurers toward harmonious theme selection. Your task is to decode the scrolls, tracing the pathways of ancient wisdom encoded in these configurations. By uncovering their secrets, the engine powering the Pyramid‚Äôs boundless treasure will hum to life with precision and clarity.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Ritual of Input Validation</strong>: How does the system sanitize and validate vital inputs like themes and project paths?  </li>
<li>‚ö° <strong>Glyph of Configuration Harmony</strong>: What key constants in the configuration file define system behavior, and why were these boundaries chosen?  </li>
<li>üõ°Ô∏è <strong>Guardians of Theme Selection</strong>: How do themes integrate into the adventure system, and what mechanisms prevent invalid theme choices?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration Scrolls</h3>
<p>This file defines constants and environmental variables critical to the Pyramid&#39;s inner workings. It acts as a foundation by controlling limits, managing timeouts, and structuring error handling. It ensures the Pyramid‚Äôs stability during complex computations and vast analyses, protecting the adventurers from systemic chaos. The intricate constants highlight design choices emphasizing efficiency and error resilience.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_API_KEY</code>: Retrieves the sacred key enabling text-generation glyphs to access infinite intelligence. Its significance lies in security and seamless initializations.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Sets the threshold for file size validation, ensuring memory stability and maintaining clarity of glyph rendering.  </li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Outlines sacred filters protecting the Pyramid from analyzing forbidden paths, safeguarding its sanctity and focus.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Rites of Validation</h3>
<p>This file ensures inputs are properly purified and worthy of traversal within the Pyramid&#39;s chambers. It provides rites for validating adventurers&#39; choices, sanitizing their paths, and guiding them toward selecting themes aligned with the Pyramid‚Äôs configuration rituals. Each method protects against corruption by malformed inputs.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice(input: string)</code>: Safeguards against null or excessively long strings for adventure choice selections, maintaining a dignified traversal of quests.  </li>
<li><code class="inline-code">validateProjectPath(input: string)</code>: Ensures project paths are sanitized and correctly formatted to prevent system breaches.  </li>
<li><code class="inline-code">validateTheme(input: string)</code>: Normalizes and validates themes, offering guidance should an invalid selection be made.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> The Codex of Themes</h3>
<p>This file provides a structured guide to all themes, including their definitions, validation mechanisms, and retrieval functions. As a single source of truth, it ensures themes remain cohesive across the Pyramid‚Äôs glyphs, offering adventurers clarity on their journey.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getThemeByKey(key: string)</code>: Fetches a specific theme by its key, linking adventurers to thematic elements of their quest configuration.  </li>
<li><code class="inline-code">isValidTheme(theme: string)</code>: Validates the theme string against current options, acting as a sentinel against false themes.  </li>
<li><code class="inline-code">getFormattedThemeOptions()</code>: Formats themes for display, presenting the wisdom of choices to adventurers in a comprehensible form.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_API_KEY = process.env.LLM_API_KEY || &#39;&#39;;
export const MAX_FILE_SIZE_MB = 10;
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.env&#39;,
];
</code></pre>
<ul>
<li><code class="inline-code">LLM_API_KEY</code>: Manages access to the Pyramid&#39;s text-generation engine while preserving its security.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Prevents system overloading by skipping excessively large files, ensuring clarity and feasibility in analysis.  </li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Protects traversal purity by ignoring irrelevant or sensitive directories.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}

export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Shields the system from overly lengthy or empty adventure choices, ensuring stability in flow.  </li>
<li><code class="inline-code">validateProjectPath</code>: Sanitizes paths for compatibility while preventing malicious injections via invalid characters.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function getThemeByKey(key: string): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.key === key) || null;
}

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function getFormattedThemeOptions(): string {
  return getAllThemes()
    .sort((a, b) =&gt; a.id - b.id)
    .map(formatThemeOption)
    .join(&#39;\n&#39;);
}
</code></pre>
<ul>
<li><code class="inline-code">getThemeByKey</code>: Enables precise retrieval of themes based on their symbolic keys.  </li>
<li><code class="inline-code">isValidTheme</code>: Protects the adventure by ensuring only recognized themes are allowed.  </li>
<li><code class="inline-code">getFormattedThemeOptions</code>: Formats the available themes into an accessible display, offering adventurers clarity and wisdom.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Study the validation methods to uncover protective patterns ensuring secure system flows.  </li>
<li>Compare configuration constants to determine their interconnected role in orchestrating harmony.  </li>
<li>Examine theme mechanisms to understand integration processes and safeguards.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Hail, seeker of wisdom! By unraveling the enigma of the Pillars of Sacred Configurations, thou hast ascended further upon the ancient path, thy mind a temple of growing mastery‚Äîpress on, for the stars yet hold their secrets! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>