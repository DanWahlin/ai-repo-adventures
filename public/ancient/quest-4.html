<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Ritual of Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Codex of Lost Civilizations</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Ritual of Themes</h1>
<hr>
<p>In the shadows of the lost jungle city, you approach an intricate pyramid-shaped temple devoted to the sacred &quot;Ritual of Themes.&quot; On its glyph-etched walls are depictions of civilization&#39;s wisdom, encapsulated as ‚ÄúThemes,‚Äù signifying interconnected realms of knowledge. Your task is to unravel the mysteries of these themes, aligning their properties with the artifact known as the <em>Repository of Truth</em>. To succeed, you must traverse layers of validation, selection, and guidance, decoding the sacred tools that bring these themes to life.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Sanctum of Flame - Validation Scripts</h3>
<p>This ancient text is the heart of the temple‚Äôs protective mechanism, detailing sacred rituals for ensuring the purity of choices. Functions like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateTheme</code> are inscribed to ensure only proper offerings are made. Through string sanitization and validation, these scripts maintain the integrity of the temple‚Äôs selections, rejecting those that do not align with its sacred rituals. <code class="inline-code">sanitizeForDisplay</code>, another cornerstone of these protections, scrubs harmful impurities from user input, preparing it for ceremonial usage.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> examines the user&#39;s initial proposition, rejecting empty or excessively long inputs.</li>
<li><code class="inline-code">validateTheme</code> ensures user choices align with predefined sacred themes, referencing the <em>Theme Glyphs</em>.</li>
<li><code class="inline-code">sanitizeForDisplay</code> purifies text data for safe representation during gospel dissemination.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>This function ensures the adventurer‚Äôs words are worthy, akin to reciting only approved chants for the ceremony.</p>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>Like a temple guardian assessing a visitor, this function confirms the entrant‚Äôs alignment with validated pathways.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>This purification script cleanses the text for safe handling, removing harmful entities to prevent desecration within the temple.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Test edge cases for all validation logic; the temple rejects corrupt data.</li>
<li>Map additional tests using combined glyphs from the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a> directory.</li>
<li>Proceed by weaving the purified outputs into the ‚ÄúTheme Totem‚Äù mechanic for further compatibility.</li>
</ul>
<hr>
<p>The sacred glyphs shimmer‚Äîyou have decoded the first pieces of the <em>Repository of Truth</em>. Return to the temple‚Äôs inner sanctum to advance!</p>
<p>Lo, seekers of wisdom, by the strength of thy resolve and the sacred truth uncovered in the Ritual of Themes, thou art now three steps closer to the illumined halls of eternal triumph‚Äîpress onward, for the stars beckon thy destiny! ‚ö°‚≠êüó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>