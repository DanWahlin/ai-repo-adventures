<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Configuring the Path of Knowledge - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Secrets of the Lost Codebase</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Configuring the Path of Knowledge</h1>
<hr>
<p>Amidst the overgrown foliage and beneath the crumbling stone arches of the Temple of Lost Logic, you uncover a secluded chamber. This chamber, known as the &quot;Path of Knowledge,&quot; holds sacred scripts detailing configurations and validations essential for unraveling the temple&#39;s greatest mysteries. Here lies the wisdom to structure your journey, define rules, and validate the choices that lead to enlightenment. To traverse this path, you must decipher ancient definitions and examine the mechanisms of the temple‚Äôs configuration.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Mapping the Glyphs</strong>: How does the <code class="inline-code">THEMES</code> object define and organize the ancient narrative settings available to adventurers?</li>
<li>‚ö° <strong>Trail Validation</strong>: What techniques does <code class="inline-code">validateTheme</code> use to ensure adventurers choose valid paths, and how does it handle erroneous selections?</li>
<li>üõ°Ô∏è <strong>Config Wall of Protection</strong>: What safeguards are present in configuration constants to prevent errors and ensure stability of the adventure system?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Central theme definitions for adventure</h3>
<p>This file acts as the single source of truth for all themes within the adventure system. It provides precise definitions for each theme, ensuring consistent and reusable data throughout the application. The <code class="inline-code">THEMES</code> object is the cornerstone, reflecting the cultural elements of ancient civilizations, enchanted kingdoms, and more. Helper functions such as <code class="inline-code">getAllThemes</code> and <code class="inline-code">isValidTheme</code> simplify the process of discovering and validating these narrative paths.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Provides a structured repository for defining theme options, complete with identifiers, keywords, and descriptions, acting as the cornerstone of the tale&#39;s configurations.</li>
<li><code class="inline-code">isValidTheme</code>: Ensures that a given theme string matches an allowed theme, safeguarding the system against undefined paths.</li>
<li><code class="inline-code">parseTheme</code>: Uses exact matching and keyword detection to interpret user inputs and map them to valid themes, enabling flexibility in input handling.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> object encapsulates complete metadata for each theme, including human-readable names, identifiers, and related keywords‚Äîallowing for precise matching and display.</li>
<li>Each theme is represented as an immutable structure (<code class="inline-code">as const</code>), preventing accidental modifications.</li>
<li>Keywords within themes enable flexible input resolution by mapping broader user intents to specific themes.</li>
<li>Adding themes is simplified by extending the object, keeping the architecture easily maintainable.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Validates that a user-provided theme matches one of the predefined keys in <code class="inline-code">THEMES</code>.</li>
<li>Demonstrates concise validation using functional programming patterns like <code class="inline-code">array.some</code>, ensuring maintainable code with minimal logic duplication.</li>
<li>Plays a critical role in protecting the system from invalid configurations.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Implements a multi-step resolution process for user inputs. Priorities are exact matches, numeric identifiers, and keyword includes checks for broader input flexibility.</li>
<li>Utilizes normalized strings to enable case-insensitive matching, enhancing user experience without sacrificing precision.</li>
<li>Demonstrates thoughtful handling of null or undefined inputs, improving robustness in various scenarios.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Core configuration repository</h3>
<p>This file defines critical constants for the adventure system, including timeouts, size limits, and API settings. It ensures cohesive and error-free operation of all interconnected tools and components.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Specifies a consistent API request timeout, ensuring stability even under heavy loads.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Establishes size restrictions for input files, preventing memory exhaustion during large project analysis.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Provides predefined responses for common error conditions, simplifying debugging and improving readability.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures that lengthy requests to the Machine Oracle do not hang indefinitely, applying sensible timeout limits.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> guards against potential memory issues caused by excessively large files, enhancing application stability and efficiency.</li>
<li>These configurations promote scalability and consistent performance across varying project sizes.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
} as const;
</code></pre>
<ul>
<li>Provides a centralized location for error messages, making it easier to maintain and update user-facing feedback.</li>
<li>The <code class="inline-code">as const</code> designation guarantees immutability, reducing the possibility of unintended overwrites.</li>
<li>Improves developer efficiency and error traceability across the codebase.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üó∫Ô∏è When adding new themes, ensure the <code class="inline-code">THEMES</code> object includes descriptive keywords for flexible user input handling.</li>
<li>üõ°Ô∏è Validate user input rigorously at multiple levels (e.g., string normalization and keyword matching) to avoid runtime surprises.</li>
<li>üîë Consider expanding predefined error messages to further guide users during interaction with the system.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries within the Temple of Lost Logic.</p>
<p>Hark, seeker of enlightenment, the sacred glyphs of Quest 4 are now etched upon the eternal tablets of wisdom‚Äîyour path toward the celestial apex gleams brighter, for thou art 60% ascended into the annals of ancient mastery! ‚ö°‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>