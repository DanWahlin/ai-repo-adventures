<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Repository Mapmakers - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Ancient Knowledge</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Repository Mapmakers</h1>
<hr>
<p>In the heart of the Pyramid of Ancient Knowledge lies the Hall of Cartography, where scholars of old charted the secrets of structured creation. On the dusty walls, glyphs whisper of techniques to validate integrity, assign purpose, and decode the wisdom of thematic elements. Whispering winds beckon you to investigate these ancient scrolls of configuration and schema, their secrets encoded in three pivotal artifacts. With each fragment you unlock, the mysteries of structured adventures come closer to being revealed.</p>
<p><strong>Venture forth, seeker of framework ‚Äì for the mapmakers of old await your wisdom!</strong></p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üó∫Ô∏è <strong>Integrity Check</strong>: How do the ancient mechanisms ensure adventure choices are validated and formatted correctly?</li>
<li>üìú <strong>Thematic Design</strong>: How is the repository of ancient themes structured, and how can one decipher the system of keywords, properties, and formatting methods?</li>
<li>üîê <strong>Configuration Runes</strong>: What are the limits and safeguards in the configuration and caching rituals, and how are they maintained across critical system parameters?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Ancient Validation Rites</h3>
<p>This script holds the sacred glyphs responsible for ensuring the inputs to the repository are pure and validated. Four main functions emerge as essential rituals: <code class="inline-code">validateAdventureChoice</code>, for cleansing and checking adventure choices; <code class="inline-code">validateTheme</code>, for theme sanctification; <code class="inline-code">validateProjectPath</code>, for confirming the project&#39;s path; and <code class="inline-code">sanitizeForDisplay</code>, which purifies strings for display in ancient scrolls. Together, they maintain the integrity of the system by validating user interactions.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> ensures user input meets constraints and is trimmed for clarity.</li>
<li><code class="inline-code">validateTheme</code> cross-references themes against the repository&#39;s records.</li>
<li><code class="inline-code">sanitizeForDisplay</code> purifies and formats user input for text output.</li>
</ul>
<h3>Code</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>An ancient filter ensures that no empty or excessive choices corrupt the repository.</p>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>A thematic sieve parses and validates theme input, avoiding deviation from the path.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>This cleansing glyph removes dangerous characters and ensures tidy presentation.</p>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: The Great Archive of Themes</h3>
<p>Here lies the grand definition of the repository&#39;s ancient themes, enumerating their structure and mapping their keywords to match user intent. Charts like <code class="inline-code">THEMES</code> and <code class="inline-code">getAllThemes</code> serve as a compass for adventurers to choose their journeys, while deciphering tools like <code class="inline-code">isValidTheme</code> and <code class="inline-code">parseTheme</code> ensure alignment between input and the archive. This sacred scroll organizes themes simply and elegantly.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> outlines the entire structure of predefined themes.</li>
<li><code class="inline-code">getAllThemes</code> provides a full inventory of the archive.</li>
<li><code class="inline-code">parseTheme</code> interprets input to align it with appropriate themes.</li>
</ul>
<h3>Code</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  }
} as const;
</code></pre>
<p>The grand ledger organizes all themes, each adorned with unique properties and keywords.</p>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<p>A complete scroll listing all themes for perusal is at your service.</p>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<p>An interpretive riddle matches input strings to their thematic archetypes.</p>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: The Glyphs of Configuration</h3>
<p>This tome contains the parameters that define the boundaries and behaviors of the repository mapmakers. Constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> govern time constraints, while <code class="inline-code">MAX_FILE_SIZE_MB</code> establishes memory limitations. Every safeguard for the inner workings resides in its well-organized constants, pledging reliability throughout the system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> sets limits on request durations for operations.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> defines the time-to-live for cache, ensuring freshness.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> restricts file size to maintain manageable memory use.</li>
</ul>
<h3>Code</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000;
export const LLM_CACHE_TTL = 300000;
export const MAX_FILE_SIZE_MB = 10;
</code></pre>
<p>The framework‚Äôs lifeblood: fixed rituals that control core limits and boundaries.</p>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;);
export const REPOMIX_MAX_BUFFER_SIZE = 100 * 1024 * 1024; 
</code></pre>
<p>These environmental bindings are configured to ensure steady flow and safety.</p>
<pre><code class="language-typescript">export const PROMPT_PATHS = {
  STORY_GENERATION: &#39;src/prompts/story-generation-prompt.md&#39;,
  QUEST_CONTENT: &#39;src/prompts/quest-content-prompt.md&#39;,
};
</code></pre>
<p>Wayfinders for where the sacred prompts and scripts dwell.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">validateTheme</code> to trace integration with the <code class="inline-code">theme.ts</code> definitions.</li>
<li>Cross-reference caching configurations to ensure game responses are swift.</li>
<li>Experiment with <code class="inline-code">getAllThemes</code> to better understand thematic flexibility.</li>
</ul>
<hr>
<p>Having charted this segment of the pyramid, the mapmakers testify to your skill. Venture onward, as memories of ancient civilizations urge you to decode deeper truths.</p>
<p>Hail, noble seeker of sacred lore, thy valor hath unveiled the third inscription upon the Repository‚Äôs ancient map, etching thy path to eternal wisdom and celestial triumph! ‚≠êüíéüó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>