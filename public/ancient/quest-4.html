<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Vault of Sacred Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Lost Code</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Vault of Sacred Configurations</h1>
<hr>
<p>You step cautiously into the central chamber of the Pyramid of Lost Code, where the Vault of Sacred Configurations lies sealed behind a wall of intricate glyphs. These mystical symbols, carved by the ancient Codexius civilization, represent the fundamental principles that powered their legendary repository systems. Within the vault, secrets like system limits, environment settings, and error protocols are rumored to be safeguarded. To unlock this wisdom, you must decipher the sacred rules hidden within the vault‚Äôs inscriptions.</p>
<p>As you pore over the code fragments etched into stone, you will encounter the guiding principles of managing configurations and themes‚Äîa legacy from the elders of Codexius. Proceed with care, for missteps may lead to corrupted paths and chaos in the sacred system.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Deciphering</strong>: How are system limits such as maximum file sizes and timeouts defined and controlled?</li>
<li>‚ö° <strong>Seal Logic</strong>: What role do themes play in the adventure system, and how are valid themes identified?</li>
<li>üõ°Ô∏è <strong>Ritual Safety</strong>: What safeguards are in place to prevent invalid or harmful inputs, and how do they ensure stability?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Environmental and Operational Limits</h3>
<p>This file is the cornerstone of system stability, defining environmental and operational constants that safeguard the adventure system. It ensures proper resource allocation, defines error messages for edge cases, and centralizes configurations to reduce redundancy. The Codexius wisdom embedded here offers insight into how to manage limits and defaults holistically.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Regulates the maximum duration for generating story content, crucial for uninterrupted system operation.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Establishes an upper bound for file analysis, ensuring resource efficiency and system stability.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Assigns a fallback theme, which serves as a safeguard against invalid user selections.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> controls the maximum time allocated for story generation, ensuring operations terminate gracefully even with large prompts.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> prevents resource exhaustion during file analysis, optimizing memory usage while processing complex repositories.</li>
<li><code class="inline-code">DEFAULT_THEME</code> provides a fail-safe, guaranteeing a consistent user experience if no valid theme is chosen.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Sacred Theme Definitions</h3>
<p>This file holds the ancient civilization‚Äôs philosophy on thematic adventures. The Codexius elders harmonized adventure types into well-defined themes, each with unique properties. This file houses the centralized definitions and rituals for validating, parsing, and retrieving themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: The repository of all available themes, each carrying its own lore and guiding principles.</li>
<li><code class="inline-code">isValidTheme</code>: The thematic guardian, a function ensuring user inputs align with one of the sacred themes.</li>
<li><code class="inline-code">getAllThemes</code>: Returns all defined themes, enabling explorers to choose their paths wisely.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;]
  }
};

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> encapsulates each theme and its metadata, centralizing its representation for clarity and consistency.</li>
<li><code class="inline-code">isValidTheme</code> ensures thematic integrity by verifying that user inputs correspond to the defined adventure paths.</li>
<li><code class="inline-code">getAllThemes</code> makes all available themes accessible, aiding in generating thematic options dynamically.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input Integrity and Validation</h3>
<p>This file governs the rituals of input validation, protecting the sacred systems from corruption caused by malformed data. Each function ensures that user inputs are properly sanitized and conform to expected patterns, safeguarding the Vault of Sacred Configurations.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Protects adventure selection by enforcing strict rules on format and length.</li>
<li><code class="inline-code">validateTheme</code>: Ensures theme selections match defined themes, rejecting any that deviate from the codex guidelines.</li>
<li><code class="inline-code">validateProjectPath</code>: Guards against invalid or malicious project paths, neutralizing dangerous inputs.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    throw new Error(`Invalid theme. Valid themes: ${getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;)}`);
  }
  
  return parsedTheme;
}

export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> protects against invalid or overly lengthy adventure selections, maintaining system stability.</li>
<li><code class="inline-code">validateTheme</code> cross-references user inputs with valid themes, ensuring conformity with Codexius traditions.</li>
<li><code class="inline-code">validateProjectPath</code> filters harmful characters and sanitizes inputs, guarding against vulnerabilities.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">LLM_REQUEST_TIMEOUT</code> settings to fine-tune the story generation responsiveness.</li>
<li>Explore <code class="inline-code">THEMES</code> to better understand how user inputs are mapped to thematic experiences.</li>
<li>Reference <code class="inline-code">validateTheme</code> for insights into extending or modifying input validation rituals.</li>
</ul>
<hr>
<p>The Vault of Sacred Configurations has revealed its secrets, illuminating the path to maintaining stability within the codebase. Proceed to your next quest with the confidence of a true adventurer!</p>
<p>Hark, seekers of enlightenment, thou hast unlocked the hallowed mysteries of the Vault of Sacred Configurations, ascending yet closer to the apex of divine wisdom‚Äîmay thy path shine radiant as forged gemstones under celestial favor! üíé‚ú®</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>