<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Temples of Configuration and Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Secrets of the Lost Codebase</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Temples of Configuration and Themes</h1>
<hr>
<p>As you journey deeper into the lands of the Ancient Codebase, your path leads you to the Temples of Configuration and Themes. Here, among intricate carvings of constants and patterns, lie the foundations of the system‚Äôs adaptability. Legends whisper of cryptic values that govern time, a pantheon of themes that shape stories, and sacred validations that keep chaos at bay. Your task is to decode these glyphs and unearth the knowledge necessary to master this realm and advance toward the ultimate treasure.</p>
<p>The path is perilous and filled with layers of abstraction carved into the very walls of this ancient data sanctuary. Do you possess the skill to reconstruct the wisdom of these temples?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>‚öôÔ∏è <strong>Constants of the Codebase</strong>: How are key constants like timeouts, buffer sizes, and limits used to ensure stability and efficiency within the system?</li>
<li>üåü <strong>Thematic Sanctuaries</strong>: How does the theme handling system ensure flexibility while maintaining consistency in defining and retrieving themes?</li>
<li>üõ°Ô∏è <strong>Guardians of Input</strong>: How are input validation functions structured to protect the sanctity of data and ensure clean, safe values are passed through the system?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Configuration Foundations</h3>
<p>This file is a treasure trove of constants and default settings. It defines key values like timeouts, cache settings, and analysis limits that govern the system&#39;s behavior. These constants act as the unyielding bedrock of the codebase, ensuring stability and adaptability.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Determines the maximum time allotted for interactions with external services, ensuring operations don&#39;t hang indefinitely.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Protects the system from processing overly large files, maintaining performance and resource sanity.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Establishes which directories and files the system should avoid, simplifying analysis and preventing unnecessary load.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Rituals of Validation</h3>
<p>This file houses the validation functions that safeguard the user&#39;s input against corruption and chaos. It ensures all provided values are clean, well-formed, and safe for further processing.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures the user&#39;s chosen option adheres to character limits and is free of empty or malformed input.</li>
<li><code class="inline-code">validateTheme</code>: Validates and normalizes themes, checking them against a list of predefined valid options for accuracy and consistency.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Purges input of dangerous characters and trims excessive length to maintain clean outputs suitable for display.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Thematic Codex</h3>
<p>This file defines the sacred collection of themes, each offering unique experiences to adventurers. By maintaining a central registry, it establishes a single source of truth for theme-related data, making it easy to extend or modify.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: An object containing detailed definitions of all available themes and their attributes, from space exploration to ancient wisdom.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the pantheon of themes as an array, making them easily iterable for various operations.</li>
<li><code class="inline-code">parseTheme</code>: Converts user-provided input into a valid theme, matching against keys, IDs, and keywords with fallback mechanisms.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;
] as const;
</code></pre>
<ul>
<li>The <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures long-running processes like story generation do not lock up resources by imposing a reasonable time cap.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> helps avoid memory exhaustion by specifying an upper size limit for files to analyze, focusing on manageable targets.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> prevents unnecessary or irrelevant files and directories from being processed, increasing efficiency and precision.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> enforces strict rules for input cleanliness and size, ensuring functionality remains predictable and stable.</li>
<li><code class="inline-code">validateTheme</code> relies on the <code class="inline-code">parseTheme</code> function to normalize inputs and checks them against valid options, guarding the integrity of theme selection.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;]
  }
} as const;

export function parseTheme(input: string): AdventureTheme | null {
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  return null;
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> defines theme properties such as <code class="inline-code">key</code>, <code class="inline-code">description</code>, and relevant <code class="inline-code">keywords</code>, supporting flexible, user-friendly interactions.</li>
<li>The <code class="inline-code">parseTheme</code> function uses input normalization and keyword matching to deliver robust and forgiving theme parsing.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üåø When exploring the configuration, consider how constants like timeouts and limits provide balance between flexibility and safety.</li>
<li>üëÅÔ∏è Pay close attention to the role of validation functions in maintaining data integrity, particularly in user-facing systems.</li>
<li>üèõÔ∏è Themes are your allies in quest design; explore their structure to fully unleash the potential of thematic adaptations.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Hark, valiant seeker of wisdom, thou hast triumphed within the sacred Temples of Configuration and Themes, unlocking treasures of knowledge and standing steadfast at the gates of transcendence‚Äîadvance boldly toward destiny! ‚≠êüíé‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>