<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Glyphs of Harmony - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Temple of Code: Unraveling the Lost Algorithms</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Glyphs of Harmony</h1>
<hr>
<p>In the shadowy depths of the forgotten jungle, the Temple of Code reveals yet another sacred chamber, where the Glyphs of Harmony shimmer faintly on crumbling stone. These ancient inscriptions narrate the legend of balance within the programming language ecosystem, their power derived from proper validation, configuration, and thematic wisdom. To decode their meaning, you must delve into the sacred texts housed in the files below, illuminating the connection between validation rituals, theme selection, and configuration constants. Only through these harmonious glyphs can the temple&#39;s inner sanctum be reached.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Pathfinder‚Äôs Validation</strong>: How are user inputs sanitized and error conditions handled in <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateTheme</code>?</li>
<li>‚ö° <strong>Thematic Resonance</strong>: How does the <code class="inline-code">ThemeDefinition</code> structure and the <code class="inline-code">THEMES</code> constant establish thematic wisdom within the adventure system?</li>
<li>üõ°Ô∏è <strong>The Glyph of Configuration</strong>: What design patterns support maintainability and extensibility within sacred constants such as <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">IGNORE_PATTERNS</code>?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Simplified Input Validation</h3>
<p>This file houses validation rituals for adventure inputs, ensuring proper user guidance and error handling. The functions here ensure no forbidden choices are made when selecting project paths, adventure themes, or decisions. These ancient scripts safeguard against invalid characters, excessive text lengths, and thematic errors, guiding adventurers toward wisdom.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Protects decision inputs with checks for missing values, excessive lengths, and trims redundant characters to ensure clear considerations.</li>
<li><code class="inline-code">validateTheme</code>: Harmonizes user themes with the adventure system, verifying theme legitimacy through the sacred definitions in <code class="inline-code">THEMES</code>.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleans text for display, removing dangerous or excessive characters and trims outputs to prevent visual disorder.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Thematic Wisdom Repository</h3>
<p>This sacred file establishes the foundational glyphs that define valid themes for the adventure system. It encodes the structure of thematic definitions, ensuring adventurers can choose paths aligned with ancient wisdom. Utilizing theme identifiers, keywords, and parsing rituals, ancient harmonies guide explorers through valid selections.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A central constant containing predefined ancient themes, such as &quot;Space Exploration&quot; and &quot;Ancient Civilization,&quot; capturing their essence and keywords.</li>
<li><code class="inline-code">parseTheme</code>: Converts user inputs into recognized themes by matching keywords, IDs, and exact keys, ensuring alignment with the repository of wisdom.</li>
<li><code class="inline-code">getFormattedThemeOptions</code>: Displays formatted themes with emoji embellishments and descriptions, enhancing clarity and immersion.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Sacred Constants and Rituals</h3>
<p>This repository of constants defines the rules of the coding adventure world. With configuration glyphs such as timeouts, buffer sizes, directory patterns, and external API settings, the file protects adventurers from chaos and inefficiency. It serves as the silent guardian of the Temple&#39;s system balance.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Determines the maximum time allowed for LLM requests, ensuring swift responses during sacred code generation processes.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Safeguards scanning rituals by excluding irrelevant or dangerous directories, enabling focused and efficient exploration.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Establishes a fallback theme when adventurers stray from harmonious selections.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Simplifies validation rituals for choices and themes through trimming and error handling.</li>
<li>Enforces length limits, ensuring adventure decisions are concise and manageable.</li>
<li>Harmonizes input with ancient glyphs defined in the <code class="inline-code">THEMES</code> constant.</li>
<li>Guarantees graceful navigation of error cases for thematic selection.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
};

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Encodes sacred themes in the <code class="inline-code">THEMES</code> constant, ensuring availability of harmonious paths.</li>
<li>Implements <code class="inline-code">parseTheme</code> to harmonize user inputs with sacred keywords and exact matches.</li>
<li>Utilizes structured data for clarity and modularity, connecting thematic wisdom across files.</li>
</ul>
<hr>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts

export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
];
</code></pre>
<ul>
<li>Defines reasonable LLM timeouts for responsiveness without risking inefficiency.</li>
<li>Employs filtering patterns in <code class="inline-code">IGNORE_PATTERNS</code> to shield explorers from irrelevant and distracting file structures.</li>
<li>Ensures sacred constants are aligned with broader adventure system goals.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üçÇ Be mindful of how inputs are validated; notice both error handling and normalization rituals.</li>
<li>üè∫ Study the glyphs of the <code class="inline-code">THEMES</code> constant; observe how they guide explorers with thematic keywords and descriptions.</li>
<li>üìú Reflect on configuration rituals such as <code class="inline-code">IGNORE_PATTERNS</code> to balance exploration and efficiency.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Hark, noble seeker, with the sacred Glyphs of Harmony now unveiled, the path to enlightenment glimmers brighter‚Äîforge onward, for destiny beckons! üó∫Ô∏è‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>