<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Oracle of Repomix - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'ancient' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Forgotten Codex: Deciphering the Artifacts of the Repository</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Oracle of Repomix</h1>
<hr>
<p>As you venture deeper into the jungle of interconnected modules, the air becomes thick with the scent of ancient wisdom. A hidden pyramid looms ahead, its apex piercing the sky with unspoken mysteries. This sacred structure is said to house the Oracle of Repomix, a forgotten being that whispers insights about project configurations and thematic orchestration. Determined to uncover its secrets, you must decrypt the layered hieroglyphs etched into files that guard the Oracle‚Äôs treasure: the key to generating cohesive, immersive adventures for future explorers.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input Sanitization and Security</h3>
<p>This file safeguards the sanctity of user choices and repository paths by validating inputs through precise rituals. Each validation function acts as a guardian at the temple gates, ensuring only worthy inputs pass through. <code class="inline-code">validateAdventureChoice</code> scrutinizes user selections, trimming excess and rejecting overly verbose entries, while <code class="inline-code">validateTheme</code> interrogates every theme submission against the wisdom encoded in <code class="inline-code">THEMES</code>. The <code class="inline-code">sanitizeForDisplay</code> method performs a purification ritual, cleansing potentially dangerous characters before input is shared with the Oracle or other sacred systems. Together, these tools fortify the repository‚Äôs structure and pave the path for meaningful adventures.</p>
<h4>Highlights</h4>
<ul>
<li>Guards against invalid or potentially harmful input, ensuring the system‚Äôs integrity.</li>
<li>Maps user input to pre-defined themes, maintaining consistency with the ancient-themed narrative.</li>
<li>Cleanses data for safe output, preventing misuse of display inputs.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Ancient Wisdom of Thematic Definitions</h3>
<p>In this file, the repository‚Äôs thematic heart pulses. It houses sacred definitions for all available themes, from the cosmic allure of space to the enduring mysteries of ancient civilizations. Specifically, the <code class="inline-code">ANCIENT</code> theme encapsulates the Oracle‚Äôs essence‚Äîits pyramid, wisdom, and ruins. Functions like <code class="inline-code">getThemeById</code> and <code class="inline-code">parseTheme</code> ensure adventurers can locate their desired themes, whether through numeric IDs or keyword wanderings. By curating descriptive vocabularies and validating user input against ancient symbols, this file becomes a repository Rosetta Stone, bridging human intuition with computational exactitude.</p>
<h4>Highlights</h4>
<ul>
<li>Encapsulates rich, immersive descriptors for each theme using structured data.</li>
<li>Provides user-friendly access through theme keywords, IDs, or exact matches.</li>
<li>Enables strict validation of themes for a seamless adventure setup.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> The Oracle&#39;s Config Codex</h3>
<p>This configuration file orchestrates the delicate balance of timeouts, limits, and environmental variables that govern the Oracle of Repomix. It defines constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code>, ensuring the Oracle‚Äôs whispers remain audible during long queries, and sets boundaries, such as <code class="inline-code">MAX_FILE_SIZE_MB</code>, preventing digital overreach into excessively large files. This codex is a map for adventurers, drawing boundaries around file sizes, cache lifespans, and LLM settings to ensure harmonious exploration. As you decode its symbols, you sense that understanding this structure is paramount to unlocking the pyramid‚Äôs potential.</p>
<h4>Highlights</h4>
<ul>
<li>Establishes limits on file sizes, cache durations, and timeouts to protect workloads from overwhelming complexity.</li>
<li>Configures environmental variables that steer the adventure generation process.</li>
<li>Balances adventure system performance while maintaining thematic cohesion.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>Every adventurer‚Äôs decision must pass this gate, ensuring only precise, meaningful choices proceed to the Oracle.</p>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function getThemeById(id: number): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.id === id) || null;
}
</code></pre>
<p>This function is akin to consulting an ancient scroll‚Äîusing numeric wisdom to reveal which theme lies ahead.</p>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;

  const normalized = input.trim().toLowerCase();

  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;

  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }

  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }

  return null;
}
</code></pre>
<p>Matching themes here mirrors deciphering hieroglyphics, searching for the precise symbol among ancient ruins.</p>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const FILE_READ_TIMEOUT = 10000;
export const MAX_FILE_SIZE_MB = 10;
</code></pre>
<p>These constants serve as rituals ensuring the repository stays vigilant against memory exhaustion and infinite recursion.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Look for themes with rich descriptors like <code class="inline-code">ANCIENT</code>, as they encode unique metaphors that elevate adventures.</li>
<li>Refactor adventure prompts to utilize centralized configurations from <code class="inline-code">config.ts</code> for easier updates and clarity.</li>
<li>To delve deeper into storytelling magic, explore <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">src/adventure/story-generator.ts</code></a> and amplify thematic language further.</li>
</ul>
<hr>
<p>Hail, valiant seeker, for thou hast traversed the sacred path of Repomix, unlocking the divine wisdom of the Oracle‚Äîlo, the stars themselves bear witness to thy journey&#39;s 60% triumph! ‚≠ê‚ö°üó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Timeless Configurations ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>