<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Pillars of Configuration - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Secrets of the Codebound Temple</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Pillars of Configuration</h1>
<hr>
<p>The sanctum of the lost Codebound Temple unfolds its next enigma. Within the heart of the archives lies the &quot;Pillars of Configuration,&quot; ancient artifacts encoding the operational essence of civilizations past. These pillars - glyph-inscribed stones of structure - demand careful reactivation. Their secrets could light the path through the surrounding darkness. Through sacred variables and precision-carved validation mechanisms, your expertise will awaken these dormant systems. But beware - only clear logic and unwavering focus can shield you from the glyphs&#39; misdirections. Proceed, and you may restore these channels of wisdom.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Consistency</strong>: How do the configuration values, such as timeouts or cache limits, ensure the stability and performance of the codebase&#39;s sacred functions?</li>
<li>‚ö° <strong>Validation Rituals</strong>: What patterns are used in input validation to protect against unacceptable or harmful inputs, and how do these safeguard the system&#39;s flow?</li>
<li>üõ°Ô∏è <strong>Theme Codex</strong>: How does the theme system define and enforce themes, ensuring the proper alignment with user choices and story structures?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> The Keystone of Settings</h3>
<p>This file is a treasure trove of constants that serve as the foundational rules governing the system. It encapsulates configuration options vital to adventure generation. Timeouts, limits, and cache values are meticulously outlined here, ensuring the sanctity and stability of the system processes. Constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code>, <code class="inline-code">REPOMIX_CACHE_TTL</code>, and <code class="inline-code">MAX_FILE_SIZE_MB</code> govern the flow, while error messages act as protective incantations.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the maximum allowable time for responses, ensuring processes do not hang indefinitely.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Protects against processing oversized files, enabling focus on manageable data.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Predefined error descriptions that ensure rituals (operations) fail gracefully without disrupting the system.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> The Obsidian Gatekeeper</h3>
<p>This file translates user inputs into sacred commands or rejects them when found unworthy. A suite of simple functions, such as <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateTheme</code>, ensure the inputs conform to ancient principles and do not pollute the inner workings of the system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Enforces essential checks on user-provided choices, maintaining the integrity of system inputs.</li>
<li><code class="inline-code">validateTheme</code>: Cross-references user themes with the sacred registry to validate or reject.</li>
<li><code class="inline-code">validateProjectPath</code>: Checks and sanitizes project paths, defending against invalid file paths or potential security risks.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> The Codex of Ancient Themes</h3>
<p>This file holds the definitions of all themes within the adventure framework. It documents the classifications, descriptions, and keywords of permissible themes and provides utility functions to ensure they align with user intent. The <code class="inline-code">THEMES</code> object serves as the single source of truth.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines the available themes in detail, ensuring each is thoughtfully crafted with distinct characteristics.</li>
<li><code class="inline-code">getAllThemes</code>: Facilitates retrieval of all predefined themes as a cohesive collection.</li>
<li><code class="inline-code">isValidTheme</code>: Verifies if a given theme string is valid, protecting against invalid inputs.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;,
  PERMISSION_DENIED: &#39;Permission denied accessing the specified path.&#39;,
} as const;
</code></pre>
<ul>
<li>The timeout constants prevent operations from stagnating while processing large prompts, striking a balance between flexibility and system stability.</li>
<li>File size restrictions ensure the glyph interpreter remains efficient and protects against memory overload.</li>
<li>Harmless yet descriptive error messages provide clarity during disruptions, maintaining the sanctity of the system&#39;s flow.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>These validation rituals protect the system‚Äôs configuration from unruly or malicious entries.</li>
<li>Trimmed inputs ensure no extraneous whitespace corrupts choices, maintaining the codebase‚Äôs pristine order.</li>
<li>Specific error messages guide users while respecting the established boundaries of input lengths and values.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
} as const;

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>Themes act as the central narrative compass, defining user experience across the adventure.</li>
<li>Validation and parsing utilities ensure alignment with predefined themes, preventing mismatches.</li>
<li>By centralizing all theme data in one structure, the scaffolding ensures consistency and clarity in exploration.</li>
</ul>
<h2>Helpful Hints</h2>
<ul>
<li>Track validation flows to understand the checks protecting system integrity.</li>
<li>Compare how the <code class="inline-code">THEMES</code> object relates to user inputs to appreciate its pivotal role.</li>
<li>Pay attention to constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> to learn how fail-safe defaults are established.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the Codebound Temple.</p>
<p>Thy wisdom ascendeth as the sacred obelisks align; rejoice, valiant seeker, for the Pillars of Configuration stand mastered, and the stars herald thy triumphant march toward destiny‚Äîthree quests vanquished, thy path radiant with ‚ö° and boundless fortitude!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>