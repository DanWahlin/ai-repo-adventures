<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 3: The Themes of Legend - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Mythos of the Codebase Chronicles</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 3: The Themes of Legend</h1>
<hr>
<p>In the mystical world of Repository Adventure Engine, codebases breathe life into grand narratives. Today, you embark on &quot;The Themes of Legend,&quot; a journey to uncover the secrets held in configuration and theme files. These artifacts define the aesthetic and structure of the adventures you‚Äôll create. Only by investigating them can you harness the Engine‚Äôs full creative potential to weave masterful stories. Prepare to explore the inner workings of themes, input validation, and how choices shape gameplay!</p>
<p><strong>Adventure Awaits</strong> ‚Äì Choose your quest wisely, brave adventurer!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>System Timing Calibration</strong>: How are timeouts like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and cache durations such as <code class="inline-code">REPOMIX_CACHE_TTL</code> configured, and how do these values influence system behavior?</li>
<li>‚ö° <strong>Theme Mastery</strong>: How does the <code class="inline-code">THEMES</code> object or <code class="inline-code">getAllThemes</code> function organize and describe themes, and how might additional themes be incorporated?</li>
<li>üõ°Ô∏è <strong>Input Defenses</strong>: What safeguards are in place to validate theme input with <code class="inline-code">validateThemeInput</code> or project path errors with <code class="inline-code">validateProjectPath</code>?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Core configuration constants</h3>
<p>This file is the backbone of the Engine, housing critical constants that define operation timeouts, cache durations, and file size limits. The configuration ensures that the Engine handles tasks efficiently and avoids failures caused by resource limits.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the maximum duration for LLM requests, ensuring stability.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Specifies the cache time-to-live (TTL), optimizing reuse of processed data.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Sets limits on supported file sizes to prevent memory overload.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;30000&#39;, 10);
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;3600000&#39;, 10); // 1 hour
export const MAX_FILE_SIZE_MB = parseInt(process.env.MAX_FILE_SIZE_MB || &#39;5&#39;, 10);
</code></pre>
<ul>
<li><strong>Timeout Configuration</strong>: <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures requests are aborted if they exceed 30 seconds (default), preserving system responsiveness.</li>
<li><strong>Caching Efficiency</strong>: <code class="inline-code">REPOMIX_CACHE_TTL</code> controls how long cache persists (default 1 hour), reducing redundant reprocessing of unchanged files.</li>
<li><strong>Resource Management</strong>: <code class="inline-code">MAX_FILE_SIZE_MB</code> protects system performance by rejecting overly large files that could exhaust memory.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme definition and utilities</h3>
<p>This file manages the definition and retrieval of themes supported by the Engine. Themes are central to the type of adventures users can create, shaping the visual and narrative experience.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A dictionary object defining all available themes and their summaries.</li>
<li><code class="inline-code">getAllThemes</code>: A utility function that returns the <code class="inline-code">THEMES</code> object, enabling theme enumeration.</li>
<li><code class="inline-code">ThemeDefinition</code>: A type that ensures consistency in theme structure.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES: Record&lt;string, ThemeDefinition&gt; = {
  fantasy: { summary: &#39;Epic quests in magical worlds of heroes and dragons.&#39; },
  sciFi: { summary: &#39;Explorations into futures of advanced technology and aliens.&#39; },
};

export function getAllThemes(): Record&lt;string, ThemeDefinition&gt; {
  return THEMES;
}

export interface ThemeDefinition {
  summary: string;
}
</code></pre>
<ul>
<li><strong>Centralized Theme Management</strong>: <code class="inline-code">THEMES</code> defines adventures like &quot;fantasy&quot; and &quot;sciFi&quot;, each with a unique summary.</li>
<li><strong>Theme Retrieval</strong>: <code class="inline-code">getAllThemes</code> provides programmatic access to available themes for other modules, supporting dynamic querying of themes.</li>
<li><strong>Consistency</strong>: <code class="inline-code">ThemeDefinition</code> ensures each theme object adheres to a structured format.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input validation utilities</h3>
<p>This file contains input validation functions critical to maintaining system robustness and preventing errors caused by invalid user data.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateThemeInput</code>: Checks if a selected theme is valid.</li>
<li><code class="inline-code">validateProjectPath</code>: Ensures a project path input is safe and valid, avoiding issues like path traversal.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">import { THEMES } from &#39;./theme&#39;;

export function validateThemeInput(theme: string): void {
  if (!THEMES[theme]) {
    throw new Error(`Invalid theme: ${theme}`);
  }
}

export function validateProjectPath(projectPath: string): void {
  if (!projectPath || typeof projectPath !== &#39;string&#39;) {
    throw new Error(&#39;Project path must be a non-empty string.&#39;);
  }

  if (projectPath.includes(&#39;\0&#39;) || projectPath.includes(&#39;..&#39;)) {
    throw new Error(&#39;Project path contains invalid characters.&#39;);
  }
}
</code></pre>
<ul>
<li><strong>Theme Validation</strong>: <code class="inline-code">validateThemeInput</code> ensures only themes defined in <code class="inline-code">THEMES</code> can be selected, promoting conformity.</li>
<li><strong>Path Integrity</strong>: <code class="inline-code">validateProjectPath</code> protects against invalid or malicious paths, preventing security vulnerabilities like path traversal.</li>
<li><strong>Error Handling</strong>: Both functions provide clear error messages, facilitating debugging.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Timeout Strategies</strong>: Consider reducing <code class="inline-code">LLM_REQUEST_TIMEOUT</code> if latency is a concern, but ensure it matches API responsiveness.</li>
<li><strong>Adding Themes</strong>: To introduce new themes, update the <code class="inline-code">THEMES</code> object and confirm documentation aligns with <code class="inline-code">ThemeDefinition</code>.</li>
<li><strong>Path Validation Best Practices</strong>: Always sanitize paths before file operations to safeguard against malicious inputs.</li>
</ul>
<hr>
<p>The Themes of Legend lie within your grasp! Uncover their mysteries and guide the Repository Adventure Engine to legendary heights.</p>
<p>Mission accomplished: &quot;Quest 3: The Themes of Legend&quot; is now pushed to the main branch with zero merge conflicts‚Äîoutstanding progress at 40% completion, developer, your codebase of knowledge is scaling like a well-optimized algorithm! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-2.html" class="prev-quest-btn">‚Üê Previous: Quest 2</a>
        <a href="quest-4.html" class="next-quest-btn">Next: Quest 4 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>