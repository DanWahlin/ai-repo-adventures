<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: HTML Generator & Static Site Pipeline - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Architecture of Adventures: An Exploration of a Developer's Toolkit</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Generator &amp; Static Site Pipeline</h1>
<hr>
<p>The adventure begins with the HTML Generator, the centerpiece of the system that transforms source code into stunning, interactive static sites. This quest focuses on the mechanisms responsible for parsing templates, processing assets, and orchestrating a seamless pipeline for generating HTML artifacts. Your task is to explore the architecture, template rendering strategies, and asset management workflows embedded within the code.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Pipeline Fabrication</strong>: How does the <code class="inline-code">HTMLAdventureGenerator</code> orchestrate the entire adventure generation pipeline, from template loading to HTML output?</li>
<li>‚ö° <strong>Template Substitution</strong>: How does the <code class="inline-code">TemplateEngine.renderPage</code> handle placeholders and combine multiple templates to construct a complete HTML document?</li>
<li>üõ°Ô∏è <strong>Asset Coordination</strong>: What role does the <code class="inline-code">AssetManager</code> play in managing shared assets, and how does it handle different modes like multi-theme or single-theme generation?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Handles the orchestration of adventure generation</h3>
<p>This file features the <code class="inline-code">HTMLAdventureGenerator</code> class, which manages the full lifecycle of site generation. It includes methods for theme selection, asset preparation, and HTML page creation. Understanding this file will reveal how dynamic pipelines are created and executed.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Central to the pipeline, it orchestrates theme selection, code analysis, asset preparation, and final HTML creation.</li>
<li><code class="inline-code">generateAllThemes</code>: Enables multi-theme generation by spinning up parallel processes for each theme.</li>
<li><code class="inline-code">startHttpServer</code>: Provides an optional HTTP server for hosting the generated site locally.</li>
<li><code class="inline-code">buildQuestHTML</code>: Constructs individual quest pages by injecting content into templates.</li>
</ul>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
    ...
    await this.generateQuestPages();
    await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>Orchestrates the entire pipeline from repository analysis to summary creation.</li>
<li>Handles functional decomposition, invoking asset management and template rendering.</li>
</ul>
<pre><code class="language-typescript">async generateAllThemes(args: Map&lt;string, string&gt;): Promise&lt;void&gt; {
    ...
    const themePromises = themes.map(async (theme, index) =&gt; { ... });
}
</code></pre>
<ul>
<li>Simplifies multi-theme generation by running theme-specific pipelines in parallel using promises.</li>
<li>Incorporates robust error handling to ensure partial failures do not disrupt the overall process.</li>
</ul>
<pre><code class="language-typescript">private async startHttpServer(port: number = 8080): Promise&lt;void&gt; {
    ...
}
</code></pre>
<ul>
<li>Sets up an optional HTTP server to serve generated files, enhancing developer experience.</li>
<li>Ensures correct MIME types and prioritizes security checks for serving files.</li>
</ul>
<hr>
<pre><code class="language-typescript">private buildQuestHTML(quest: QuestInfo, content: string, questIndex: number): string {
    ...
    return this.templateEngine.renderPage(&#39;quest-template.html&#39;, variables);
}
</code></pre>
<ul>
<li>Focuses on constructing individual quest pages by injecting variables into templates.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Modular template processing and rendering</h3>
<p>The <code class="inline-code">TemplateEngine</code> class provides methods for loading templates, replacing placeholders, and constructing HTML pages using reusable layouts. Its design abstracts rendering logic for consistency and reusability.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Combines base and content templates to generate a full HTML page.</li>
<li><code class="inline-code">replacePlaceholders</code>: Substitutes placeholders in a template string using provided variables.</li>
</ul>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
    const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
    ...
    return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Serves as the core method for rendering dynamic HTML pages by composing templates and injecting variables.</li>
</ul>
<pre><code class="language-typescript">replacePlaceholders(template: string, variables: TemplateVariables): string {
    ...
}
</code></pre>
<ul>
<li>Replaces placeholders efficiently using regular expressions, ensuring proper variable substitution.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Asset copying and management for themes</h3>
<p>The <code class="inline-code">AssetManager</code> is responsible for managing assets, including images, CSS, and shared files. It facilitates proper coordination between different output modes such as single-theme and multi-theme adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Copies shared assets to the root of the output directory, ensuring accessibility across all themes.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Specifically targets navigator files for single-theme setups.</li>
</ul>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
    ...
}
</code></pre>
<ul>
<li>Handles global asset preparation, ensuring key assets are properly located for rendering.</li>
</ul>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
    ...
    const assetsDir = path.join(outputDir, &#39;assets&#39;);
    ...
}
</code></pre>
<ul>
<li>Manages navigator-specific assets, maintaining visual consistency across themes.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Check how the <code class="inline-code">TemplateEngine</code> caches templates to optimize performance.</li>
<li>Look into how the <code class="inline-code">AssetManager</code> creates directories dynamically to prevent asset copying errors.</li>
<li>Review how <code class="inline-code">HTMLAdventureGenerator.generateAllThemes</code> maintains output directory cleanliness in multi-theme workflows.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>üöÄ Congratulations, developer! You&#39;ve successfully refactored knowledge functions and committed a clean, performant pipeline for HTML generation, marking Quest 1 as complete‚Äîonto the next milestone!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>