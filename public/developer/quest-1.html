<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: HTML Generator & Static Site Pipeline - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Repository Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to dark mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Generator &amp; Static Site Pipeline</h1>
<hr>
<p>Embark on a journey through the intricate systems that transform codebases into dynamic, developer-themed static sites. Unearth how the <code class="inline-code">HTMLAdventureGenerator</code>, <code class="inline-code">TemplateEngine</code>, and <code class="inline-code">AssetManager</code> modules intertwine to render structured, themed adventures while automating asset management. </p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Render Orchestration</strong>: How does <code class="inline-code">HTMLAdventureGenerator</code> manage the sequence of operations to build a complete HTML site?  </li>
<li>‚ö° <strong>Template Integration</strong>: How does the <code class="inline-code">TemplateEngine.renderPage</code> combine templates and variables to generate HTML content dynamically?  </li>
<li>üõ°Ô∏è <strong>Asset Safeguarding</strong>: What error handling patterns are implemented in <code class="inline-code">AssetManager</code> when working with file operations?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Core HTML Generation Pipeline</h3>
<p><code class="inline-code">HTMLAdventureGenerator</code> orchestrates the construction of a cohesive static site by managing templates, assets, and thematic content organization. This module configures output directories, sequences the content generation for quests, and prepares the HTTP server for serving generated files.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Centralized function to analyze the repository, prepare templates, and generate full HTML output, handling themes and navigation integration.  </li>
<li><code class="inline-code">generateAllThemes</code>: Supports the generation of themed outputs for multiple adventure types concurrently, leveraging parallel processing.  </li>
<li><code class="inline-code">buildQuestHTML</code>: Constructs HTML for individual quest pages by injecting navigation and formatting quest content.  </li>
<li><code class="inline-code">startHttpServer</code>: Spins up an HTTP server to preview the generated static site locally.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Dynamic Template Processing</h3>
<p>The <code class="inline-code">TemplateEngine</code> provides an interface for loading templates from files, caching them for efficiency, and replacing placeholders with variables specific to quests and themes.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Utilizes a base template and dynamically replaces placeholders with contextual variables to produce structured HTML pages.  </li>
<li><code class="inline-code">replacePlaceholders</code>: Implements placeholder parsing and substitution algorithms to seamlessly inject dynamic content.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Efficient Asset Management</h3>
<p><code class="inline-code">AssetManager</code> handles the movement and organization of files, such as shared images, CSS, and JavaScript assets, ensuring proper linking and consolidation across output directories.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Ensures shared resources (e.g., images, navigation scripts) are consistently placed in the output structure, while handling potential I/O errors.  </li>
<li><code class="inline-code">copyQuestNavigator</code>: Manages the movement of navigator-specific styles and scripts unique to individual or shared themes.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  // Analyze codebase and initialize with thematic context
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);
  const storyContent = await this.adventureManager.initializeAdventure(projectInfo, this.selectedTheme);
  this.extractQuestInfo();

  const questsToGenerate = this.quests.length;
  for (let i = 0; i &lt; questsToGenerate; i++) {
    const quest = this.quests[i];
    console.log(`  üìñ Generating quest ${i + 1}/${questsToGenerate}: ${quest.title}`);
    const questContent = await this.adventureManager.exploreQuest(quest.id);
    const html = this.buildQuestHTML(quest, questContent, i);
    fs.writeFileSync(path.join(this.outputDir, quest.filename), html);
  }

  console.log(chalk.green.bold(&#39;üéâ Adventure website generated successfully!&#39;));
}
</code></pre>
<ul>
<li>Coordinates code analysis, story generation, and quest page assembly into a seamless pipeline.  </li>
<li>Scales through modular quest-by-quest generation, enabling adaptability to varying project complexities.  </li>
<li>Ensures output directory integrity before HTML rendering.</li>
</ul>
<hr>
<pre><code class="language-typescript">async generateAllThemes(args: Map&lt;string, string&gt;): Promise&lt;void&gt; {
  console.log(chalk.green(&#39;‚úÖ Generating all themes&#39;));
  const themes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
  const themePromises = themes.map(async (theme) =&gt; {
    this.selectedTheme = theme;
    await this.generateAdventure();
  });
  await Promise.allSettled(themePromises);
  console.log(chalk.green.bold(&#39;üéâ All themes generated successfully!&#39;));
}
</code></pre>
<ul>
<li>Implements concurrency for generating themed outputs efficiently.  </li>
<li>Dynamically adjusts generation parameters for each theme (<code class="inline-code">selectedTheme</code>) to avoid state conflicts.</li>
</ul>
<hr>
<pre><code class="language-typescript">private buildQuestHTML(quest: QuestInfo, content: string, questIndex: number): string {
  const variables = { ...this.getCommonTemplateVariables(), PAGE_TITLE: quest.title, QUEST_CONTENT: content };
  return this.templateEngine.renderPage(&#39;quest-template.html&#39;, variables);
}
</code></pre>
<ul>
<li>Engages the template-engine integration point to join quest data with HTML structure.  </li>
<li>Encapsulates dynamic behavior into reusable variables for improved maintainability.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  return this.replacePlaceholders(baseTemplate, { ...variables, CONTENT: renderedContent });
}
</code></pre>
<ul>
<li>Chains multiple templates (base and content) to create a layered rendering system.  </li>
<li>Demonstrates functional separation for templating to support modular designs.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  return result;
}
</code></pre>
<ul>
<li>Simplifies dynamic variable substitution with flexible regex-based replacements.  </li>
<li>Handles repetitive patterns without introducing unnecessary complexity.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  try {
    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });
    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-icon.png&#39;];
    globalImages.forEach((file) =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;shared&#39;, file);
      fs.copyFileSync(sourcePath, path.join(globalSharedDir, file));
    });
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global assets.&#39;));
  }
}
</code></pre>
<ul>
<li>Creates shared asset directories and handles cross-theme resource management.  </li>
<li>Leverages error handling to prevent interruptions during file operations.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
}
</code></pre>
<ul>
<li>Ensures navigator assets are localized to match theme and quest directories.  </li>
<li>Demonstrates modular copying aligned to quest-specific or global contexts.</li>
</ul>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Focus on Modularity</strong>: Observe how each module cleanly separates concerns such as HTML generation, templating, and asset management.  </li>
<li><strong>Dynamic Theming</strong>: Dive into <code class="inline-code">generateAllThemes</code> to understand efficient concurrent theme generation patterns.  </li>
<li><strong>Error-Tolerant Patterns</strong>: Examine how file operations in <code class="inline-code">AssetManager</code> gracefully handle failures to minimize application disruption.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Congratulations on successfully deploying your first custom HTML Generator and Static Site Pipeline‚Äîyour codebase is now a robust MVP, and you&#39;re clearing the backlog like a true full-stack üöÄ‚ö°!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>