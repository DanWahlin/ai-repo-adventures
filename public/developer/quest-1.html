<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Static Site Forge - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Codex of Repository Insights: A Developer's Guide</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Static Site Forge</h1>
<hr>
<p>Unveiling the intricacies of generating HTML-based adventures, The Static Site Forge delves into the fusion of theme rendering, asset management, and static site orchestration. This quest invites developers to explore the dynamic relationship between template engines, asset pipelines, and the structured workflows powering adventure websites. By examining the real-world implementation of these systems, you&#39;ll discover how complex repositories are transformed into accessible, visually-striking narratives.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Template Optimization</strong>: How does <code class="inline-code">TemplateEngine</code> manage caching and efficiently load templates?  </li>
<li>‚ö° <strong>Thematic Integration</strong>: How are placeholders dynamically replaced, and how does <code class="inline-code">renderPage</code> integrate base and content templates for complete output?  </li>
<li>üõ°Ô∏è <strong>Asset Management Resilience</strong>: How does <code class="inline-code">AssetManager</code> handle missing resources or shared assets during copying, ensuring stability in operations?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a>: Core template engine responsible for rendering dynamic HTML files through caching and placeholder replacement.</h3>
<p>Through its nimble caching system and modular design, <code class="inline-code">TemplateEngine</code> optimizes template processing while integrating variables across base and content frameworks.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Loads an HTML template file into memory, leveraging caching to reduce redundant file reads. Key to improving performance in large-scale operations.  </li>
<li><code class="inline-code">replacePlaceholders</code>: Substitutes placeholders in templates with provided variable values, ensuring content remains dynamic and theme-relevant.  </li>
<li><code class="inline-code">renderPage</code>: Combines base and content templates with placeholders to generate a complete HTML page, demonstrating modular composability.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a>: Organizes and ensures asset availability, including images, CSS, and shared resources for multi-theme or single-theme setups.</h3>
<p>The <code class="inline-code">AssetManager</code> simplifies handling of static files while ensuring resource consistency across directories.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Copies and consolidates shared resources like CSS and images into the global output structure, centralizing access for multi-theme generation.  </li>
<li><code class="inline-code">copyQuestNavigator</code>: Strategically duplicates essential quest navigation assets, maintaining consistency for theme-specific HTML scaffolding.  </li>
<li><code class="inline-code">copyImages</code>: Ensures the proper replication of theme-specific and shared images, enhancing flexibility in static site configurations.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }
  const templatePath = path.join(this.templatesDir, templateName);
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Improves performance by caching templates, reducing disk I/O.  </li>
<li>Uses <code class="inline-code">Map</code> for efficient cache checks and updates, aligning with best practices.  </li>
<li>Highlights the importance of error handling to prevent failures during file reads.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  return result;
}
</code></pre>
<ul>
<li>Dynamically replaces placeholders (<code class="inline-code">{{key}}</code>) with values, ensuring seamless integration of variables.  </li>
<li>Uses regular expressions to allow consistent, global replacements across templates.  </li>
<li>Avoids hardcoded dependencies, making it versatile for different themes or configurations.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base and content templates with placeholders to assemble coherent HTML output.  </li>
<li>Separates concerns via modular templates, enhancing flexibility for different layouts.  </li>
<li>Demonstrates logical layering of rendering steps, emphasizing composability.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
  const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
  fs.mkdirSync(targetImagesDir, { recursive: true });
  const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
  globalImages.forEach(file =&gt; {
    const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
    if (fs.existsSync(sourcePath)) {
      const targetPath = path.join(globalAssetsDir, &#39;shared&#39;, file);
      fs.copyFileSync(sourcePath, targetPath);
    }
  });
}
</code></pre>
<ul>
<li>Copies critical shared resources for uniformity, critical for multi-theme projects.  </li>
<li>Utilizes <code class="inline-code">recursive: true</code> to prevent errors when creating nested directory structures.  </li>
<li>Prevents runtime failures by ensuring resource existence using <code class="inline-code">fs.existsSync</code>.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  [cssSource, jsSource].forEach(source =&gt; {
    if (fs.existsSync(source)) {
      fs.copyFileSync(source, path.join(assetsDir, path.basename(source)));
    }
  });
}
</code></pre>
<ul>
<li>Simplifies handling of essential theme-independent assets for quest navigation.  </li>
<li>Dynamically resolves template root paths, reducing hardcoded dependencies.  </li>
<li>Ensures flexibility by targeting both CSS and JS files for duplication.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);
  if (fs.existsSync(sourceImagesDir)) {
    fs.mkdirSync(targetImagesDir, { recursive: true });
    const imageFiles = fs.readdirSync(sourceImagesDir);
    imageFiles.forEach(file =&gt; {
      const sourcePath = path.join(sourceImagesDir, file);
      const targetPath = isMultiTheme 
        ? path.join(outputDir, &#39;shared&#39;, file) 
        : targetPath;
      fs.copyFileSync(sourcePath, targetPath);
    });
  }
}
</code></pre>
<ul>
<li>Adapts image copying logic for both single and multi-theme configurations.  </li>
<li>Balances efficiency and resource reuse through shared directory strategies.  </li>
<li>Highlights the importance of consistent directory structure for seamless asset management.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use cache wherever possible for frequent operations like template loading to enhance performance.  </li>
<li>Ensure paths and resources exist before copying to avoid runtime issues.  </li>
<li>Modularize templating and asset management for flexibility across various configurations.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Congratulations on successfully deploying &quot;Quest 1: The Static Site Forge&quot;‚Äîyour codebase is now a finely-tuned machine, primed for production; onward to refactor brilliance and scalable horizons! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>