<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Configuration & Theme System - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Repository Chronicles: Developer's Blueprint</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Configuration &amp; Theme System</h1>
<hr>
<p>Dive into the core systems that enable customization and adaptability within the MCP repository. This segment examines the configuration modules and theme management interfaces. Through precise configuration parameters and a centralized theme system, the repository achieves extensive flexibility, allowing developers to tailor adventures to different contexts. Explore how environment variables, validation logic, and modular theme definitions empower interactive workflows and maintain ease of extensibility.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Mapping</strong>: How is theme-related data structured to ensure consistency across the adventure system?  </li>
<li>‚ö° <strong>Configurable Limits</strong>: What mechanisms allow system limits, such as timeouts and file size constraints, to be dynamically adjusted using environment variables?  </li>
<li>üõ°Ô∏è <strong>Validation Safeguards</strong>: What validation rules prevent invalid inputs, enabling robust project and theme selection?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration management essentials</h3>
<p>This file outlines constants and configurations for the MCP repository. It demonstrates the use of environment variables to set dynamic constraints and defaults, ensuring the system adapts to various usage scenarios. By supporting modular configuration parameters, it ensures interoperability across tools, APIs, and external dependencies, such as LLMs.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures timeout values for LLM requests, balancing speed and reliability.  </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Dynamically adjusts caching periods to manage server load effectively.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Limits the size of files analyzed, preventing resource exhaustion and maintaining focused processing.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input validation safeguards</h3>
<p>This file establishes rules to sanitize and validate user inputs required for theme selection, adventure choice, and file paths. Through simple yet effective validation functions, it restricts invalid or unsafe data, upholding system integrity for predefined workflows.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme</code>: Verifies theme input against predefined options, ensuring alignment with supported stories and contexts.  </li>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures user choices adhere to character limits and are non-empty.  </li>
<li><code class="inline-code">validateProjectPath</code>: Validates and sanitizes file paths to prevent unexpected errors or security issues.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme definitions and helpers</h3>
<p>Centralized theme management occurs here. The file defines individual themes and provides utility functions to access, validate, and format theme data. By encapsulating theme logic, it allows seamless incorporation of new themes without altering core code.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines all supported adventure themes, unifying their metadata and keywords.  </li>
<li><code class="inline-code">getAllThemes</code>: Retrieves an array representation of all themes to simplify iteration and processing.  </li>
<li><code class="inline-code">parseTheme</code>: Provides logic to interpret user input, mapping strings or numbers to valid themes.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">// Configure timeouts and caching
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // Default: 60 seconds
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to prevent memory issues
</code></pre>
<ul>
<li>These constants set adjustable system thresholds, leveraging <code class="inline-code">process.env</code> for dynamic configurations.  </li>
<li>They ensure operations scale appropriately for different system sizes and avoid application bottlenecks.  </li>
<li>Simple and static default fallback values guarantee operational consistency without requiring prior setup.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }

  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);

  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    throw new Error(&#39;Invalid theme. Valid themes: &#39; + getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;));
  }

  return parsedTheme;
}
</code></pre>
<ul>
<li>The function handles theme validation by ensuring inputs align with available options or keywords.  </li>
<li>Parsing logic incorporates normalization techniques to handle minor deviations in user-specified inputs.  </li>
<li>By leveraging <code class="inline-code">isValidTheme</code> and <code class="inline-code">getAllThemes</code>, the mechanism ensures strict adherence to supported themes.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;galaxy&#39;, &#39;astronaut&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;debug&#39;]
  }
};
</code></pre>
<ul>
<li>Centralized storage of metadata ensures uniform theme definitions across the adventure system.  </li>
<li>Structured as constants for immutability, themes prevent accidental modifications during runtime.  </li>
<li>Each theme includes helpful descriptors like <code class="inline-code">id</code>, <code class="inline-code">key</code>, and keywords for intuitive processing in parsing functions.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use sanitized environment variables for configurations affecting runtime constraints.  </li>
<li>Map user inputs to valid options through normalization and backend utilities like <code class="inline-code">getAllThemes</code>.  </li>
<li>Extend themes dynamically by adding definitions to the <code class="inline-code">THEMES</code> constant and updating input validation logic.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Achievement unlocked: Quest 4 complete! You&#39;ve successfully modularized the Configuration &amp; Theme System‚Äîyour codebase is a shining beacon of scalability and customization ‚≠êüöÄ‚ö°!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>