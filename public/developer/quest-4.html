<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Mastering Configuration & Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Chronicles of Repository Adventure</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Mastering Configuration &amp; Themes</h1>
<hr>
<p>In the Repository Adventure Engine&#39;s mystical fabric, Configuration &amp; Themes serve as the keystone. These harmonize the engine‚Äôs mechanics while weaving narratives that guide adventurers. Today, you will uncover the secrets embedded in the configuration structures and theme definitions, exploring their interplay and learning how the engine breathes life into its adventures. This is no ordinary quest‚Äîit is the call to master the key elements that support thematic and functional coherence.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Key Configuration Constants</strong>: How does the system define and enforce limits like timeouts, token sizes, and default settings in <code class="inline-code">config.ts</code>?  </li>
<li>‚ö° <strong>Theme Magic</strong>: What structure does <code class="inline-code">theme.ts</code> use to define and manage adventure themes, and how does it ensure support for flexibility?  </li>
<li>üõ°Ô∏è <strong>Validation Mechanisms</strong>: How do the functions in <code class="inline-code">input-validator.ts</code> ensure valid and safe inputs for theme selection and configuration?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Central configuration file</h3>
<p>This file defines constants required throughout the Repository Adventure Engine, from API integration to file analysis constraints. The design prioritizes simplicity with direct environment variable usage (<code class="inline-code">dotenv</code>) and flat object structures. Focus on limits for file size, timeouts, and defaults that provide consistent boundaries.</p>
<h4>Highlights</h4>
<ul>
<li><strong><code class="inline-code">LLM_REQUEST_TIMEOUT</code></strong>: Controls the timeout for API requests to the LLM.</li>
<li><strong><code class="inline-code">REPOMIX_CACHE_TTL</code></strong>: Sets cache expiry time for the Repomix system.</li>
<li><strong><code class="inline-code">MAX_FILE_SIZE_MB</code></strong>: Determines the file size limit for inclusion in analysis.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme definitions and operations</h3>
<p>This module acts as the thematic backbone, defining all supported adventure themes and related utilities. Using strongly-defined objects, it ensures themes are unambiguous and easily managed. It encapsulates data retrieval methods to connect user inputs with predefined themes.</p>
<h4>Highlights</h4>
<ul>
<li><strong><code class="inline-code">THEMES</code></strong>: Comprehensive theme definitions.</li>
<li><strong><code class="inline-code">getAllThemes</code></strong>: Retrieves all available themes.</li>
<li><strong><code class="inline-code">isValidTheme</code></strong>: Validates whether a given input matches any theme.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input validation utilities</h3>
<p>Validation guards the system against invalid inputs or unsafe data. This file focuses on streamlining user decisions for adventure choices and themes. It offers utility functions to sanitize, validate, and enforce constraints for these key interactions, ensuring robust user-driven customization.</p>
<h4>Highlights</h4>
<ul>
<li><strong><code class="inline-code">validateAdventureChoice</code></strong>: Sanitizes and validates user input for adventure options.</li>
<li><strong><code class="inline-code">validateTheme</code></strong>: Validates theme input against defined themes.</li>
<li><strong><code class="inline-code">validateProjectPath</code></strong>: Ensures safe and valid file paths for project analysis.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<p>Like an hourglass, this governs the maximum time to complete an external API request.</p>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds
</code></pre>
<p>A ticking clock for how long cached data remains fresh.</p>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this
</code></pre>
<p>A gateway limit that prevents analysis of exceptionally large files.</p>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: { id: 1, key: &#39;space&#39;, displayName: &#39;Space Exploration&#39;, emoji: &#39;üöÄ&#39;, ... },
  MYTHICAL: { id: 2, key: &#39;mythical&#39;, displayName: &#39;Enchanted Kingdom&#39;, emoji: &#39;üè∞&#39;, ... },
  ANCIENT: { id: 3, key: &#39;ancient&#39;, displayName: &#39;Ancient Civilization&#39;, emoji: &#39;üè∫&#39;, ... },
  DEVELOPER: { id: 4, key: &#39;developer&#39;, displayName: &#39;Developer Documentation&#39;, emoji: &#39;üìñ&#39;, ... },
  CUSTOM: { id: 5, key: &#39;custom&#39;, displayName: &#39;Custom Theme&#39;, emoji: &#39;üé®&#39;, ... }
} as const;
</code></pre>
<p>A living catalogue of all adventures in this coding multiverse.</p>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<p>An inventory retrieval spell to fetch all themes.</p>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<p>A checkpoint to confirm whether a given theme exists.</p>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}
</code></pre>
<p>A gatekeeper that ensures adventure choices aren&#39;t empty or overly verbose.</p>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<p>An oracle to translate user inputs into predefined themes, raising errors for unsupported inputs.</p>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  return input.trim();
}
</code></pre>
<p>Guardrails to ensure project paths are acceptable and sanitized.</p>
<h2>Helpful Hints</h2>
<ul>
<li>When modifying <code class="inline-code">config.ts</code>, ensure values for key constants are logically aligned with the repository‚Äôs expected operations.</li>
<li>Consider extending <code class="inline-code">theme.ts</code> to include additional methods for dynamic theme updates.</li>
<li>Verify inputs by running manual test cases on <code class="inline-code">input-validator.ts</code> to simulate edge cases.</li>
</ul>
<hr>
<p>Congratulations on uncovering the foundations of configuration and themes! Document your learnings well, for they‚Äôll guide the paths of future adventurers.</p>
<p>üéâ Congratulations on achieving a clean commit with Quest 4: Mastering Configuration &amp; Themes‚Äîyour codebase of knowledge is 60% deployed, and you&#39;re debugging your way to total mastery like a true architect of efficiency! üöÄüíé‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>