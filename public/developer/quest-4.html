<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Architect‚Äôs Codex - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'developer' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Code Chronicles: Forge of Adventures</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Architect&#39;s Codex</h1>
<hr>
<p>The Forge of Adventures buzzed softly as the adventurers gazed at their newly minted challenge. This quest, &quot;The Architect‚Äôs Codex,&quot; would take them deep into the foundation of the adventure engine itself‚Äîlaying bare its centralized logic and revealing the shimmering brilliance of its theme-driven creation process. In this journey, the explorers sought mastery of the codes that dictated the guiding themes, configuration limits, and their interplay in crafting coherent adventures. With the Architect‚Äôs Codex in hand, would they uncover the arcane secrets shaping their creativity? Let‚Äôs journey forward to discover the craft behind the themes.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Definitions and Utilities</h3>
<p>The <code class="inline-code">theme.ts</code> file is a cornerstone of the adventure system&#39;s narrative engine. It centralizes the management of themes, allowing the Forge of Adventures to provide users with immersive settings like exploring galaxies, venturing into enchanted kingdoms, or discovering ancient ruins. This file defines the <code class="inline-code">ThemeDefinition</code> interface, mapping out each theme&#39;s unique identifier, key, display name, emoji, description, and keywords. These keywords allow the system to match user preferences effortlessly. Each theme‚Äîwhether a voyage among the stars or a medieval quest‚Äîbrims with descriptors ensuring that even snippets of a user‚Äôs input lead to the right choice.</p>
<p>With helper functions like <code class="inline-code">getThemeByKey()</code> and <code class="inline-code">parseTheme()</code>, <code class="inline-code">theme.ts</code> simplifies the task of identifying and validating a user&#39;s choice. For example, <code class="inline-code">parseTheme()</code> manages potential inputs, enabling recognition through key names, numeric IDs, or keywords. The file‚Äôs design fosters consistency and versatility, which ensures that both developers adding new themes and adventurers altering their settings can interact seamlessly. It confirms its importance by prominently integrating user input with the mechanics of creativity.</p>
<h4>Highlights</h4>
<ul>
<li>Defines a structured set of themes with clear vocabulary and display information.</li>
<li>Includes <code class="inline-code">parseTheme()</code> for intuitive theme identification via name, keywords, or numeric IDs.</li>
<li>Supplies <code class="inline-code">getFormattedThemeOptions()</code> for generating user-friendly displays of theme choices.</li>
<li>Enforces validation with the <code class="inline-code">isValidTheme()</code> function, ensuring robust input handling.</li>
<li>Empowers developers to expand themes easily through the <code class="inline-code">ThemeDefinition</code> structure.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Central Configuration and Limits</h3>
<p>The <code class="inline-code">config.ts</code> file oversees the central configuration of the adventure engine, acting as the Architect‚Äôs manual for the Forge. This file specifies crucial runtime constants, such as timeouts, file size limits, and LLM behavior configurations. For instance, constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_CACHE_TTL</code> dictate how the system manages resource-heavy operations, balancing performance and reliability. Environmental variables come into play here, ensuring adaptability across development, testing, and production environments.</p>
<p>Among the highlights is the inclusion of adventure-related settings such as <code class="inline-code">DEFAULT_THEME</code> and <code class="inline-code">MAX_FILE_LINES_FOR_LLM</code>, which directly influence the crafting of quests. These constants ensure that the Core Engine remains stable and predictable, even in the face of massive repositories. The <code class="inline-code">IGNORE_PATTERNS</code> array is another key feature, filtering out irrelevant files and directories like <code class="inline-code">node_modules</code> to streamline analysis. Altogether, <code class="inline-code">config.ts</code> ensures the system operates within manageable boundaries while enabling customization for various user needs.</p>
<h4>Highlights</h4>
<ul>
<li>Centralizes environment variables and defaults, ensuring predictable configurations across deployments.</li>
<li>Defines runtime limits, including <code class="inline-code">MAX_FILE_SIZE_MB</code> and <code class="inline-code">LLM_MAX_TOKENS_STORY</code>, to maintain consistency.</li>
<li>Introduces adventure-specific settings like <code class="inline-code">DEFAULT_THEME</code> to influence user journeys.</li>
<li>Minimizes extraneous file processing with <code class="inline-code">IGNORE_PATTERNS</code> during code analysis.</li>
<li>Enables configurable caching and timeout settings for performance tuning.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">// Define the structure of a theme
export interface ThemeDefinition {
  readonly id: number;
  readonly key: string;
  readonly displayName: string;
  readonly emoji: string;
  readonly description: string;
  readonly keywords: readonly string[]; // For matching user input
}

// Single source of truth for all themes
export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  }
};
</code></pre>
<p>This is like setting up a detailed menu in a restaurant where each dish has a name, a category, a description, and a list of flavors to ensure customers easily find their preferred choice.</p>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">// Timeouts in milliseconds
export const FILE_READ_TIMEOUT = 10000;
export const FILE_ANALYSIS_TIMEOUT = 30000;
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const REPOMIX_SUBPROCESS_TIMEOUT = parseInt(process.env.REPOMIX_SUBPROCESS_TIMEOUT || &#39;120000&#39;); // 2 minutes, configurable via env

// Default error messages
export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;
};
</code></pre>
<p>This is like setting a timer on a coffee machine to ensure it brews the perfect cup every single time, while also displaying clear warnings for low water levels or errors.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">theme.ts</code> as a guidepost for understanding how the adventure engine aligns user preferences with narratives.</li>
<li>Explore <code class="inline-code">config.ts</code> to adjust timeouts or limits when adapting the Forge for larger projects or slower environments.</li>
<li>Consider adding detailed descriptions to error messages and limits to improve developer experience.</li>
</ul>
<hr>
<p>Function complete: &quot;Architect‚Äôs Codex&quot; successfully deployed‚Äî75% of the journey executed, refactor your focus and prepare for the final sprint; brilliance in code architecture achieved! üöÄüíé‚≠ê</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>