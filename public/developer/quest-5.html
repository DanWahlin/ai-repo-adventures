<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuration & Theme System - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Repository Atlas: A Guided Exploration of the Codebase</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration &amp; Theme System</h1>
<hr>
<p>The culmination of your exploration into this dynamic adventure engine leads you to the heart of customization‚Äîunveiling the architecture that controls configuration and themes. This quest delves into the fundamental components that bring adaptability and personalization to developer-driven storytelling. The files you will explore govern user-configurable options, theme definitions, and validation rules, working together to create a seamless experience for both developers and users.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>System Customization</strong>: How does the configuration system allow for environment-specific adjustments and user overrides?</li>
<li>‚ö° <strong>Theme Data Flow</strong>: How are theme definitions structured, retrieved, and validated across the system?</li>
<li>üõ°Ô∏è <strong>Validation Mechanisms</strong>: What safeguards ensure user inputs (like themes or paths) are valid and sanitized?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Global Configuration Management</h3>
<p>This file centralizes system-wide configuration options, ensuring ease of customization and maintainability. It leverages <code class="inline-code">dotenv</code> for environment variable loading and defines constants to control behavior such as API timeouts, file limits, and caching.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures the timeout for language model requests, critical for handling long operations efficiently.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Determines the file size threshold for analysis, preventing excessive memory usage.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines the cache duration for Repomix subprocess outputs, balancing performance and freshness of data.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Theme Definitions and Operations</h3>
<p>This file is the single source of truth for theme-related data. It manages predefined themes, utility functions for validation and parsing, and facilitates theme-based customization of the adventure system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A constant object that defines all available themes, their attributes, and metadata.</li>
<li><code class="inline-code">isValidTheme</code>: Validates if a given theme key exists within the predefined themes.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the full array of themes for use in the system, aiding in consistent access.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a>: Theme-Specific CSS Management</h3>
<p>The <code class="inline-code">ThemeManager</code> class handles theme-specific operations, including generating CSS files and managing theme-based assets. This ensures that the application&#39;s visual presentation aligns with selected themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateThemeCSS</code>: Compiles and writes the combined CSS for a specific theme, enabling customization of the visual experience.</li>
<li><code class="inline-code">getGitHubLogo</code>: Determines the appropriate GitHub logo (dark or light) to use based on the current theme.</li>
<li><code class="inline-code">getThemeIcons</code>: Provides theme-relevant icons for UI elements like templates and quests for better accessibility.</li>
</ul>
<hr>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation with large prompts, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<ul>
<li>This code establishes defaults while allowing overrides via environment variables.</li>
<li>It prevents excessive wait times and resource usage, ensuring efficient operation.</li>
<li>The use of constants simplifies maintenance and promotes a clear separation of configuration concerns.</li>
<li>Integrates seamlessly with the overall system by providing predictable behavior.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  }
};
</code></pre>
<ul>
<li>This snippet defines theme attributes such as <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">displayName</code>, <code class="inline-code">emoji</code>, and more.</li>
<li>The use of keywords ensures flexible matching for user inputs.</li>
<li>Writing clear, descriptive metadata enhances usability and readability.</li>
<li>Enables easy extension by simply adding more theme objects.</li>
</ul>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>A type-safe validation function that checks theme existence.</li>
<li>Ensures robust error handling downstream when working with theme-dependent features.</li>
<li>Maintains central validation logic for consistent behavior across the application.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;

  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>This method combines theme-specific CSS files into a single output file.</li>
<li>Ensures that only existing files are included, preventing runtime errors.</li>
<li>Provides a straightforward and maintainable solution for theme-based customization.</li>
<li>Highlights the use of <code class="inline-code">fs</code> and <code class="inline-code">path</code> modules to handle file and path operations.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">THEMES</code> constant as a reference guide for building new themes.</li>
<li>Examine the <code class="inline-code">validateThemeInput</code> function for insights into enforcing consistent user input.</li>
<li>Experiment with modifying <code class="inline-code">REPOMIX_CACHE_TTL</code> to test its impact on performance.</li>
</ul>
<hr>
<p>You have mastered all the secrets of this dynamic adventure system! Your adventure is complete.</p>
<p>üéâ System.out.println(&quot;Achievement Unlocked: Quest 5 ‚Äì Configuration &amp; Theme System successfully deployed; you&#39;re refactoring your skills like a pro, and the final milestone is within reach! üöÄ‚ö°üíé&quot;);</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>