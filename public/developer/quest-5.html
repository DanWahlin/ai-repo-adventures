<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Thematic Configurations Workshop - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Codex of Repository Insights: A Developer's Guide</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Thematic Configurations Workshop</h1>
<hr>
<p>The configuration and theme systems act as the backbone of the MCP Repo Adventure. With their structured rules and foundational constants, they empower developers to create highly customized workflows. Through specialized validation logic, modular theme definitions, and centralized configuration management, the system lays the groundwork for integrating unique features tailored to varied narratives and best practices.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Configuration Calibration</strong>: How does the structure and default values in <code class="inline-code">config.ts</code> ensure robust operational performance and developer customization?</li>
<li>‚ö° <strong>Theme Sourcing</strong>: What mechanisms in <code class="inline-code">theme.ts</code> simplify the retrieval and validation of themes while maintaining flexibility for future customization?</li>
<li>üõ°Ô∏è <strong>Validation Shield</strong>: How does <code class="inline-code">input-validator.ts</code> ensure safe and consistent input handling while guarding against errors and vulnerabilities?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Centralized Configuration Management</h3>
<p>This file serves as the cornerstone for managing environment variables, timeouts, and application-wide constants. By consolidating all such configurations in one location, it ensures consistency across the codebase and reduces the risk of misconfiguration. Highlighting scalability, the use of environment variables and defaults provides flexibility for different platforms and use cases.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the timeout for LLM requests, ensuring operations can handle large, complex prompts efficiently without delays.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Enforces directory exclusion rules to simplify scanning while improving performance and security.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Specifies the default theme for quests, enabling seamless onboarding without additional configuration.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); 
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;,
  &#39;.DS_Store&#39;,
  &#39;Thumbs.db&#39;,
] as const;
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures operation timeouts for large LLM interactions, balancing latency and prompt complexity by making settings adjustable via the environment.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Avoids analyzing irrelevant directories or files, protecting memory while accelerating processing pipelines.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Predefines onboarding paths for users with no explicit preferences, ensuring UX consistency in default cases.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Centralized Theme System</h3>
<p>This file provides a unified approach to defining and managing themes. By organizing themes into a single source of truth, it simplifies updates, guarantees consistency, and offers extensibility for additional adventure themes. It uses helper functions to efficiently manage validation, formatting, and retrieval of themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getAllThemes</code>: Provides a complete list of available themes, useful for presenting options or iterating through theme data.</li>
<li><code class="inline-code">isValidTheme</code>: Implements type-safe validation for user-selected themes, ensuring accuracy and preventing invalid inputs.</li>
<li><code class="inline-code">parseTheme</code>: Simplifies theme lookup through matching keys, IDs, and keywords, with fallback mechanisms for incorrect entries.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  return null;
}
</code></pre>
<ul>
<li><code class="inline-code">getAllThemes</code>: Centralizes all theme records into a sorted export, reducing complexity during theme selection and rendering.</li>
<li><code class="inline-code">isValidTheme</code>: Protects workflows against invalid values, improving validation reliably without requiring external checks.</li>
<li><code class="inline-code">parseTheme</code>: Allows flexible user inputs, whether structured or keyword-based, and accounts for errors with fallback logic.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Comprehensive Input Validation</h3>
<p>This file focuses on ensuring user input is clean, safe, and actionable. By addressing various validation scenarios like choice selection, theme parsing, and path sanitization, it prevents collisions and errors while upholding rigorous safety standards.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates user-chosen quest inputs, ensuring reasonable length and the presence of required fields.</li>
<li><code class="inline-code">validateTheme</code>: Checks theme inputs for completeness and correctness, guided by the rules established in <code class="inline-code">theme.ts</code>.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Removes potentially dangerous characters to secure user data against injection attacks or rendering issues.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}

export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures user inputs are meaningful, concise, and error-free by enforcing constraints like maximum length.</li>
<li><code class="inline-code">validateTheme</code>: Integrates with the theme definitions to ensure users can only choose valid or recognized options, guarding application pathways cost-effectively.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Implements filtering to eliminate unsafe characters for secure data usage inside logs, displays, or interfaces.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When modifying configurations, consider future scalability and portability. Use environment variables where optional adjustments are needed.</li>
<li>For themes, maintain descriptive keywords and IDs to simplify validation and search logic.</li>
<li>Validation functions should remain straightforward and modular for reusability across projects.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the MCP Repo Adventure! Your adventure is complete.</p>
<p>Congratulations, developer‚ÄîQuest 5 complete! You&#39;ve elegantly refactored your skills in thematic configurations with precision; you&#39;re now debugging your way to 100%‚Äîkeep deploying that brilliance! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>