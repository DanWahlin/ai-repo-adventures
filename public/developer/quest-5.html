<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Theme Nexus - Binding the Realm with Patterns - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'developer' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Chronicles of the Code Repository: The Architect's Adventure</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Theme Nexus - Binding the Realm with Patterns</h1>
<hr>
<p>Armed with newfound insights into the digital tapestry of the Architect&#39;s realm, you venture deeper into the labyrinth of interconnected systems. Here lies the Theme Nexus, a shimmering core of creative energy where patterns bind the fabric of adventures. By understanding themes that govern story generation, you will weave them seamlessly into the narrative structure—unlocking puzzles and bringing coherence to the vast realm. The Architect’s secrets beckon, hidden amidst the strands of logic and imagination.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Configuration System for Guided Adventures</h3>
<p>This file is the hub for reading, parsing, and structuring the <code class="inline-code">adventure.config.json</code> file—a pivotal role in guiding story generation and shaping quests. It provides the glue that connects configuration files to the narrative scaffolding built by the Adventure Manager. The <code class="inline-code">loadAdventureConfig</code> function serves as the entry point, directly reading the configuration file&#39;s raw contents, while <code class="inline-code">parseAdventureConfig</code> ensures that these contents are parsed into usable JSON objects. For adventurers navigating the endless rows of code repositories, the <code class="inline-code">extractUniqueFilePaths</code> function simplifies the discovery of referenced paths, enabling streamlined analysis. Finally, <code class="inline-code">formatAdventureConfigForPrompt</code> shapes data into clear, actionable prompts for an LLM, ensuring all thematic details are structured for maximum coherence.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads raw configuration data, acting as the gateway to the adventure setup logic.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Traverses complex nested data and identifies valid file references efficiently.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Converts an adventure config into a structured prompt for seamless LLM integration.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Definitions and Validation for Story Themes</h3>
<p>This file encapsulates the foundation of themes used in the adventure system, providing the vocabulary, style guidelines, and logic for validation. Themes define the tone, structure, and flavor of the generated stories—including settings like medieval realms, ancient worlds, or cosmic frontiers. The <code class="inline-code">THEMES</code> constant is a collection of theme objects, each containing its specific vocabulary and context. The <code class="inline-code">validateThemeInput</code> function ensures user-selected themes are valid, protecting the adventure system from unintended disruptions. For seamless exploration, <code class="inline-code">getAllThemes</code> presents a comprehensive list of available choices for adventurers seeking new thematic experiences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Contains predefined themes with detailed vocabulary and structural styles.</li>
<li><code class="inline-code">validateThemeInput</code>: Ensures user-selected inputs match recognized thematic options.</li>
<li><code class="inline-code">getAllThemes</code>: Offers a full list of predefined themes for adventurers to select.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">const ADVENTURE_CONFIG_FILE = &#39;adventure.config.json&#39;;

function readFileIfExists(filePath: string): string | null {
  try {
    return fs.readFileSync(filePath, &#39;utf-8&#39;);
  } catch {
    return null;
  }
}

export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}

export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This code gathers all nested file paths and checks if they exist—like navigating a treasure map to unearth valid paths to hidden treasures.</p>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  medieval: { name: &#39;Medieval&#39;, vocabulary: [&#39;castle&#39;, &#39;knight&#39;, &#39;dragon&#39;], style: &#39;Fantasy&#39; },
  ancient: { name: &#39;Ancient&#39;, vocabulary: [&#39;temple&#39;, &#39;oracle&#39;, &#39;artifact&#39;], style: &#39;Mythic&#39; },
  cosmic: { name: &#39;Cosmic&#39;, vocabulary: [&#39;star&#39;, &#39;nebula&#39;, &#39;wormhole&#39;], style: &#39;SciFi&#39; }
};

export function validateThemeInput(theme) {
  const allowedThemes = Object.keys(THEMES);
  return allowedThemes.includes(theme);
}

export function getAllThemes() {
  return Object.values(THEMES);
}
</code></pre>
<p>This code acts like a matchmaking service for themes—combining your story ambitions with the perfect stylistic match.</p>
<h2>Helpful Hints</h2>
<ul>
<li>To ensure robust adventures, always verify configuration file contents are valid and paths correctly resolve.</li>
<li>Explore <code class="inline-code">validateThemeInput</code> to design custom adventure themes or extend the existing ones.</li>
<li>Next steps could include integrating user-driven dynamic theme generation, enriching narratives with unlimited creativity.</li>
</ul>
<hr>
<p>Congratulations on refactoring the Theme Nexus blueprint and achieving 80% code coverage in the realm—this pattern-driven architecture is a ⭐stellar⭐ demonstration of your modular mastery and developer precision!</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>