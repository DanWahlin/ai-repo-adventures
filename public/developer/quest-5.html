<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Scrolls of Adventure Utilities - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Repository Chronicles</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Scrolls of Adventure Utilities</h1>
<hr>
<p>Nestled deep within the repository vaults of Codeoria, the Scrolls of Adventure Utilities lie waiting to be unveiled. These ancient scripts allow Devknights to read, configure, and format dynamic adventures. Mastery over these scrolls provides unparalleled clarity over the hidden pathways of code, guiding the adventurer step by step through quests both treacherous and rewarding. The scrolls beckon to the curious and the clever‚Äîwill you unlock their mysteries to propel the kingdom forward?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Core Adventure Configuration</h3>
<p>This file serves as the backbone for managing and decoding <code class="inline-code">adventure.config.json</code>, the key configuration file for crafting quests. It contains functions essential for reading, parsing, extracting, and formatting the adventure configuration to be used in other systems. Written with modularity in mind, its methods separate concerns cleanly: file I/O, JSON parsing, and utility creation for downstream processes like prompt building. Each function begins with robust error handling to ensure the file can gracefully adapt to missing or malformed configurations. By consolidating functionality into this central place, the file streamlines access to adventure data for quest generation and validation systems.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Parses and validates configuration JSON into usable objects.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Extracts unique file paths from nested adventure data.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Optimizes configuration data for prompt efficiency with reduced size.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>Like translating a cryptic ancient language, this function deciphers the adventure configuration into modern objects, ensuring the data is legible.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This utility is akin to a treasure hunter identifying the exact location of buried chests, focusing on valid paths in the adventure.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;

    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }

    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }

    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>This function compresses the intricate details of an adventure into a concise guide, much like a map simplifying complex roads into a clean and readable layout.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Always verify the structure of <code class="inline-code">adventure.config.json</code> before testing; malformed data may impact readability and parsing functions.</li>
<li>Use <code class="inline-code">extractUniqueFilePaths</code> to quickly audit all files referenced in an adventure and ensure their validity within the project.</li>
<li>For integrating new quest formats, extend <code class="inline-code">formatAdventureConfigForPrompt</code> to support additional fields.</li>
</ul>
<hr>
<p>The magic of adventure utilities is now in your hands, brave Devknight. Use these scripts wisely to illuminate the hidden paths of Codeoria!</p>
<p>Congratulations on pushing Quest 5: Scrolls of Adventure Utilities to production‚Äîyour codebase for knowledge now stands at 80% completeness, and you&#39;re debugging the path to mastery like a true architect of innovation! üöÄ‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4: Thematic Frameworks o...</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>