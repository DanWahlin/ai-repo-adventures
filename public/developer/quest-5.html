<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Configuration and Theme Builders - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Developer's Codex: A Guide to Modular Systems</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Configuration and Theme Builders</h1>
<hr>
<p>Dive into the backbone of the adventure system, where configurable parameters and modular themes work in harmony. Behind the scenes of bold, immersive adventures lie robust configuration files and intelligent theme management systems. In this quest, you&#39;ll uncover how configuration options are structured, validated, and injected into the runtime. You&#39;ll also explore the modular theme building process, where aesthetic elements and logic meet to craft a seamless user experience.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Config Dynamics</strong>: How does the system ensure external configuration files are efficiently validated and loaded?</li>
<li>‚ö° <strong>Theme Integration</strong>: What techniques are used to manage theme data and maintain a single source of truth for theme properties like names or emojis?</li>
<li>üõ°Ô∏è <strong>Error Resilience</strong>: How does the configuration system handle missing or invalid inputs gracefully without disrupting the entire system?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: System-wide Configuration Management</h3>
<p>This file acts as the central hub for managing critical system-wide constants and configurations. By exposing default values and loading environment variables via <code class="inline-code">dotenv</code>, it ensures extensibility and developer configurability. Additionally, it sets timeouts, defines error messages, and manages LLM-related properties required for advanced AI interactions.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Specifies the processing limit for communication with the language model, ensuring scalable and responsive applications.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Limits the maximum size of files processed, enforcing memory efficiency within the quest analysis system.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Collection of standardized error messages, streamlining error reporting and maintaining a user-friendly interface.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation with large prompts, configurable via env
</code></pre>
<ul>
<li>Represents the timeout for interaction with the Language Model.</li>
<li>Uses <code class="inline-code">parseInt</code> to ensure the value is numerical and defaults to 60,000 ms if undefined.</li>
<li>Helps prevent operations from stalling indefinitely during complex prompt generations.</li>
<li>Links directly to processing pipelines and sets expectations for other modules relying on LLM responses.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li>A simple but crucial safeguard against excessive memory usage for large files.</li>
<li>Helps developers focus on manageable source files and prevents buffer overflow errors.</li>
<li>Supports adjustable scalability for future-proofing as requirements or resources evolve.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable. Please check your configuration.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project. Please ensure the path is valid.&#39;,
  THEME_INVALID: &#39;Invalid theme specified. Using default theme.&#39;,
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;,
  PERMISSION_DENIED: &#39;Permission denied accessing the specified path.&#39;,
} as const;
</code></pre>
<ul>
<li>A centralized collection for standardizing error reporting.</li>
<li>Minimizes the effort needed to add new error cases or modify existing ones.</li>
<li>Reduces code duplication and ensures a consistent user experience during failures.</li>
<li>Defines immutable messages to avoid accidental overwrites.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Thematic Structure and Utility</h3>
<p>This file manages theme structures, ensuring seamless integration of aesthetic aspects like names, icons, and descriptions across the adventure system. With a focus on simplicity, it uses lightweight functions to operate on array data and provide user-friendly options.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Immutable object containing all theme constants, acting as the single source of truth.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves all available themes, supporting theme enumeration and validation across the application.</li>
<li><code class="inline-code">parseTheme</code>: Converts user-provided input into a valid <code class="inline-code">AdventureTheme</code>, applying nuanced validation logic.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  DEVELOPER: {
    id: 4,
    key: &#39;developer&#39;,
    displayName: &#39;Developer Documentation&#39;,
    emoji: &#39;üìñ&#39;,
    description: &#39;Technical documentation approach with clear explanations, best practices, and code analysis&#39;,
    keywords: [&#39;developer&#39;, &#39;code&#39;, &#39;technical&#39;, &#39;debug&#39;, &#39;guide&#39;, &#39;tutorial&#39;, &#39;binary&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<ul>
<li>Theme declarations rely on immutability (<code class="inline-code">as const</code>) to prevent accidental changes.</li>
<li>Facilitates the addition of new themes without impacting existing logic.</li>
<li>Aligns with the configuration system to ensure consistent theme-related data throughout the project.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>Provides a complete list of themes as an array, enabling iteration or validation.</li>
<li>Simplifies theme enumeration for user interfaces (e.g., dropdowns or console menus).</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  // Check for exact key match
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  // Check for numeric ID
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  // Check keywords using simple includes check
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Robust theme parser with built-in normalization for flexibility.</li>
<li>Supports multiple forms of input, like numeric IDs, exact keys, or keywords.</li>
<li>Enhances usability by accommodating non-standard user input formats without requiring strict matches.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Experiment with modifying <code class="inline-code">env</code> variables locally to simulate potential LLM-related bottlenecks or changes in themes.</li>
<li>Use the <code class="inline-code">THEMES</code> object as a starting point to add new themes or adjust descriptions specific to your context.</li>
<li>Investigate how error messages and timeouts are propagated together through the connected modules.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the developer-themed adventure system! Your adventure is complete.</p>
<p>You&#39;ve successfully refactored your coding arsenal with Quest 5: The Configuration and Theme Builders‚Äîyour workflow is now optimized at 80% completion, blazing towards the final delivery with üöÄ precision and üíé craftsmanship!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>