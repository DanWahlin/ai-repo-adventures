<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuration & Theme System - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Architecture of Adventures: An Exploration of a Developer's Toolkit</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration &amp; Theme System</h1>
<hr>
<p>The Configuration and Theme System defines essential parameters for customizing the adventure experience, managing themes, and enabling efficient interaction between components. It establishes constants, validators, and mechanisms to ensure robust functionality across modules. By investigating this system, you will explore how themes are defined and managed, how configurations are structured, and how input validations protect the integrity of the adventure generator platform.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Design Foundations</strong>: How are themes structured and accessed in the <code class="inline-code">THEMES</code> configuration, and what ensures their consistency?</li>
<li>‚ö° <strong>Validation Mechanisms</strong>: How are inputs validated to prevent errors or unexpected edge cases?</li>
<li>üõ°Ô∏è <strong>CSS Integration</strong>: How does <code class="inline-code">ThemeManager.generateThemeCSS</code> combine styles for adventures based on the selected theme?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Simplified configuration settings</h3>
<p>This file establishes constants and configurations for the adventure system, focusing on environment variables, default settings, and constraints. It safeguards the platform against misuse and sets boundaries that keep operations efficient. </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines API request timeouts for language model interactions, ensuring a balance between performance and prompt size.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Sets a limit on file sizes analyzed to prevent memory-related issues.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Specifies directories and files to exclude during repository scans.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Central theme definitions</h3>
<p>This file is the single source of truth for themes within the adventure system, providing structured definitions and utility functions for theme management.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Stores all predefined themes with rich metadata such as keywords and descriptions.</li>
<li><code class="inline-code">parseTheme</code>: Parses user input to identify and translate it into a valid theme.</li>
<li><code class="inline-code">getFormattedThemeOptions</code>: Formats and displays a list of theme options for users.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/theme-manager.ts:</span> Theme management utilities</h3>
<p>This file handles theme-specific operations, including processing user arguments and generating CSS files. It enables dynamic customization for the adventure platform.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateThemeCSS</code>: Combines template-specific stylesheets and theme-specific CSS for output.</li>
<li><code class="inline-code">getGitHubLogo</code>: Selects an appropriate GitHub logo variant based on theme type.</li>
<li><code class="inline-code">getThemeIcons</code>: Fetches theme-specific icons for template usage, maintaining the visual identity.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Validation utilities</h3>
<p>This file performs input validation to ensure theme selections, project paths, and user inputs are sanitized and safe for further processing.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates user input for adventure selection, protecting against excessive length and missing inputs.</li>
<li><code class="inline-code">validateTheme</code>: Checks and normalizes theme strings, ensuring compatibility with predefined themes.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Strips potentially dangerous characters from input for safe rendering.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Parsing and formatting configurations</h3>
<p>This file handles adventure-specific configurations, parsing files and generating summaries for use in prompts.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Parses configuration files into structured objects or returns null on failure.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Extracts file paths referenced in configurations, ensuring uniqueness and existence.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Minimizes configuration data for efficient incorporation into language model prompts.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;);
export const MAX_FILE_SIZE_MB = 10;
export const IGNORE_PATTERNS = [&#39;node_modules&#39;, &#39;.git&#39;, &#39;.nuxt&#39;, &#39;*.log&#39;, &#39;.env&#39;, &#39;.DS_Store&#39;];
</code></pre>
<ul>
<li>Defines API request timeout duration to prevent hanging requests.</li>
<li>Establishes a maximum file size to avoid performance degradation.</li>
<li>Specifies patterns for excluded files and directories, reducing unnecessary processing and enhancing focus.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: { id: 1, key: &#39;space&#39;, displayName: &#39;Space Exploration&#39;, emoji: &#39;üöÄ&#39;, description: &#39;Journey through cosmic codebases...&#39;, keywords: [&#39;space&#39;] },
  MYTHICAL: { id: 2, key: &#39;mythical&#39;, displayName: &#39;Enchanted Kingdom&#39;, emoji: &#39;üè∞&#39;, description: &#39;Explore magical realms...&#39;, keywords: [&#39;mythical&#39;] },
  ANCIENT: { id: 3, key: &#39;ancient&#39;, displayName: &#39;Ancient Civilization&#39;, emoji: &#39;üè∫&#39;, description: &#39;Discover lost temples...&#39;, keywords: [&#39;ancient&#39;] },
  DEVELOPER: { id: 4, key: &#39;developer&#39;, displayName: &#39;Developer Documentation&#39;, emoji: &#39;üìñ&#39;, description: &#39;Technical documentation...&#39;, keywords: [&#39;developer&#39;] }
};
export function parseTheme(input: string): AdventureTheme | null { ... }
export function getFormattedThemeOptions(): string { ... }
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> defines adventure options with consistent structure and detailed metadata.</li>
<li><code class="inline-code">parseTheme</code> intelligently matches user input with theme definitions, handling direct matches and keywords.</li>
<li><code class="inline-code">getFormattedThemeOptions</code> presents themes in a user-friendly format.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/theme-manager.ts</h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string) {
  const cssFiles = [`${theme}.css`, &#39;base.css&#39;, ...];
  let combinedCSS = &#39;&#39;;
  cssFiles.forEach(cssFile =&gt; { if (fs.existsSync(cssFile)) combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) });
  fs.writeFileSync(`${outputDir}/theme.css`, combinedCSS);
}
</code></pre>
<ul>
<li>Combines base and theme-specific CSS into a single file for streamlined delivery.</li>
<li>Ensures essential assets are appropriately sourced or skipped if missing.</li>
<li>Compiles theme-specific styling, reinforcing distinct user experiences.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) throw new Error(&#39;Invalid theme. Valid themes: ...&#39;);
  return parsedTheme;
}
</code></pre>
<ul>
<li>Validates and normalizes theme input, rejecting invalid options while guiding correct input.</li>
<li>Prevents invalid or malformed inputs from propagating through the system.</li>
<li>Integrates with the theme module for effortless validation.</li>
</ul>
<hr>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return &#39;&#39;;
  let formatted = `## Quest Structure\n`;
  for (const quest of adventure.quests) { formatted += `### ${quest.title}\nFiles: ${quest.files.map(...)}\n`; }
  return formatted;
}
</code></pre>
<ul>
<li>Compresses configuration data to optimize language model prompts.</li>
<li>Extracts meaningful sections, eliminating redundancy for practicality.</li>
<li>Represents quests and their components succinctly.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">parseTheme</code> for flexible project theme mappings and enrich adventure interactivity.</li>
<li>Generate theme-specific CSS dynamically for tailored outputs.</li>
<li>Investigate error handling patterns in <code class="inline-code">config.ts</code> for robust platform reliability.</li>
</ul>
<hr>
<p>You have mastered all the secrets of this intricate system! Your adventure is complete.</p>
<p>You&#39;ve successfully refactored the configuration and theme system to be robust and modular‚Äîyour codebase just leveled up to ‚≠ê production-ready ‚≠ê status; keep pushing, you&#39;re 80% to deployment! üöÄ</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>