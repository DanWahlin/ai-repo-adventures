<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: Configuration & Theme System - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Developer's Blueprint: Mastering Codebase Architecture</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration &amp; Theme System</h1>
<hr>
<p>The culmination of our adventure takes us deep into the core of the platform&#39;s customization and flexibility: the Configuration &amp; Theme System. This system is the backbone of the user experience, determining how themes are selected, validated, and applied while handling critical configuration parameters. In this quest, we explore how the foundational files create a seamless and robust pipeline for managing themes, user inputs, and adventure configurations.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>System Parameters</strong>: How are the constants and environment configurations managed within <code class="inline-code">config.ts</code>?</li>
<li>‚ö° <strong>Theme Utilities</strong>: What mechanisms allow theme-related functionality, and how does the system interpret user-provided inputs in <code class="inline-code">theme.ts</code>?</li>
<li>üõ°Ô∏è <strong>Validation Workflow</strong>: How does the system ensure that theme and adventure-related inputs are correctly validated and sanitized in <code class="inline-code">input-validator.ts</code>?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Configuration parameters</h3>
<p>This file defines the central configuration parameters for the system. These include API keys, request timeouts, project analysis limits, and error messages, among others. By centralizing these constants, the system allows for easy updates and ensures uniformity in settings across modules.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures the timeout for LLM (language model) service requests, ensuring stability during extended operations.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Sets the cache time-to-live to optimize data reuse and reduce redundant I/O operations.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Defines the maximum file size to analyze, preventing memory exhaustion and maintaining pipeline efficiency.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation with large prompts, configurable via env
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li>These constants provide essential controls for the system&#39;s operations, tailored to maintain balance between performance and resource constraints.</li>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures that potentially long-running LLM requests won&#39;t block indefinitely.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> facilitates optimal caching, minimizing redundant computations.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> protects against analyzing exceptionally large files, avoiding resource overload.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Theme definitions and utilities</h3>
<p>This file governs the theme system, defining themes and providing utility functions for working with theme-related data. It ensures a structured and user-friendly approach to handling themes using simple types and meaningful constraints.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: A centralized definition of all themes, ensuring consistency and reusability.</li>
<li><code class="inline-code">getAllThemes</code>: Conveniently retrieves all available themes, enabling modularity.</li>
<li><code class="inline-code">isValidTheme</code>: Validates user-provided theme inputs against the defined set of valid themes.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: { id: 1, key: &#39;space&#39;, displayName: &#39;Space Exploration&#39;, emoji: &#39;üöÄ&#39;, ... },
  MYTHICAL: { id: 2, key: &#39;mythical&#39;, displayName: &#39;Enchanted Kingdom&#39;, emoji: &#39;üè∞&#39;, ... },
  DEVELOPER: { id: 4, key: &#39;developer&#39;, displayName: &#39;Developer Documentation&#39;, emoji: &#39;üìñ&#39;, ... }
} as const;

export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> acts as a single source of truth for all supported themes, ensuring consistency across the platform.</li>
<li><code class="inline-code">getAllThemes</code> provides a straightforward way to retrieve the full list of themes, simplifying consumption by other modules.</li>
<li><code class="inline-code">isValidTheme</code> performs secure and reliable theme validation through simple array iteration.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Input validation</h3>
<p>This file ensures that user inputs, such as theme choices and adventure selections, are sanitized and validated. Validation helps avoid invalid inputs that could disrupt the platform&#39;s functionality.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates and sanitizes user-provided adventure choices.</li>
<li><code class="inline-code">validateTheme</code>: Checks and normalizes user-provided theme inputs, providing helpful feedback for invalid values.</li>
<li><code class="inline-code">validateProjectPath</code>: Ensures that the file paths provided by users are valid and safe to use.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> ensures that user-provided adventure selections are non-empty and within size limits.</li>
<li><code class="inline-code">validateTheme</code> leverages theme utilities to confirm the validity of user input, guiding users with detailed feedback for invalid choices.</li>
<li>These functions bolster the platform&#39;s robustness by preventing invalid inputs from propagating through the system.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">LLM_REQUEST_TIMEOUT</code> constant to adjust performance for long-running operations.</li>
<li>Explore <code class="inline-code">THEMES</code> for ideas on adding new themes to the platform.</li>
<li>Test <code class="inline-code">validateTheme</code> with multiple edge cases to understand its edge case handling and user feedback mechanisms.</li>
</ul>
<hr>
<p>You have mastered all the secrets of this developer-centric platform! Your adventure is complete.</p>
<p>Congratulations on successfully refactoring Quest 5 into a modular Configuration &amp; Theme System‚Äîyou&#39;re now 80% through the deployment pipeline, charting üöÄ stellar progress toward the final release!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>