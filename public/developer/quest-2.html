<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: Writ of Story Weaving - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Mystic Archives of RepoVentures</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: Writ of Story Weaving</h1>
<hr>
<p>Through the lenses of configuration and narrative, Quest 2 plunges you into the heart of crafting enriched learning journeys. Armed with the tools of validation and adaptability, you channel the powers of <code class="inline-code">AdventureState</code> and <code class="inline-code">StoryGenerator</code>. Here, the realm of story weaving becomes a place where creativity thrives, and the abstract kernels of code are transformed into an epic tapestry of quests that developers will navigate. Can you extract and refine the threads hidden inside real project configurations?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure State Management and Quest Orchestration</h3>
<p>At the nucleus of storytelling rests the <code class="inline-code">AdventureManager</code> and its trusted ally, <code class="inline-code">AdventureState</code>. Together, they serve as the control tower for managing quests and syncing configurations. The <code class="inline-code">progressPercentage</code> method within <code class="inline-code">AdventureState</code> reveals the percentages of completed tasks, calculating the adventurer&#39;s journey. Similarly, <code class="inline-code">AdventureManager</code> anchors the player&#39;s experience by initializing quests via <code class="inline-code">initializeAdventure</code>. This function introduces the participant to the realm of story creation while utilizing flexible themes and customizations. Lastly, <code class="inline-code">exploreQuest</code> unlocks the paths of chosen quests, evaluating user selections and dynamically responding to user input.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Computes and returns progress as a percentage.</li>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Prepares the journey by setting up the state, loading configurations, and assigning quests.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Executes the selected quest and ensures pre-validation and state management.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>Tracks how far along an adventurer is, akin to filling sections of a treasure map.</p>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  
  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>Prepares the adventurer&#39;s starting point, deciding the world‚Äôs settings, tools, and companions.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }
  
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>Decodes the adventurer&#39;s intent, evaluating whether to tread onward or glance at progress charts.</p>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Practical Tip</strong>: Use <code class="inline-code">initializeAdventure</code> within controlled tests to ensure themes and configurations are respected.</li>
<li><strong>Exploration Recommendation</strong>: Pair <code class="inline-code">progressPercentage</code> with real-time logging for user tutorials.</li>
<li><strong>Next Steps</strong>: Examine the code in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a> to understand the thematic logic behind generated stories.</li>
</ul>
<hr>
<p>The strands of your tapestry grow in detail. Weave further into the realm of storytelling, adventurer!</p>
<p>Congratulations on committing Quest 2: Writ of Story Weaving to the project&#39;s main branch‚Äîyou&#39;re debugging the narrative and deploying brilliance at 20% completion! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>