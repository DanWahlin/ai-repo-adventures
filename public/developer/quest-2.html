<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Forge of Quests - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Adventures in the Repository Realms</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Forge of Quests</h1>
<hr>
<p>In the Repository Realms, your journey takes you to &quot;The Forge of Quests,&quot; where raw ideas become fully-fledged adventures. This mystical forge breathes life into abstract prompts, translating them into actionable objectives. Symbols of code and endless discovery surround you. As an Archivist Adventurer, your task is to delve into the mechanisms behind quest generation and explore the processes that help the Archive maintain its dynamic nature. Equipped with tools and configured paths, you must inspect, calibrate, and enhance the Forge&#39;s design to power future explorations.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Quest Crafting</strong>: How does <code class="inline-code">AdventureManager.initializeAdventure</code> handle the setup and configuration of new quests?</li>
<li>‚ö° <strong>Content Infusion</strong>: How does <code class="inline-code">StoryGenerator.generateStoryAndQuests</code> bring themes and project information into quest creation?</li>
<li>üõ°Ô∏è <strong>Input Safeguards</strong>: How does <code class="inline-code">AdventureManager.exploreQuest</code> validate user choices and ensure proper quest execution?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> packages/core/src/adventure/adventure-manager.ts - The core of adventure management</h3>
<p>The <code class="inline-code">adventure-manager.ts</code> file is pivotal in managing quests within the Repository Realms. It provides methods to initialize adventures, validate user inputs, and execute quests. The <code class="inline-code">AdventureState</code> acts as a central state configuration object, tracking progress and caching completed quest data. <code class="inline-code">initializeAdventure</code> orchestrates the creation of quests using <code class="inline-code">StoryGenerator</code>. Meanwhile, <code class="inline-code">exploreQuest</code> validates user inputs for quests, retrieves specific quests, and manages their execution. The file is structured to integrate seamlessly with repository files and themes, ensuring quests are dynamic and cohesive.</p>
<h4><span class="header-prefix">Highlights:</span></h4>
<ul>
<li><code class="inline-code">initializeAdventure</code></li>
<li><code class="inline-code">exploreQuest</code></li>
<li><code class="inline-code">AdventureState.progressPercentage</code></li>
</ul>
<h3><span class="header-prefix">File:</span> packages/core/src/adventure/story-generator.ts - The quest creation engine</h3>
<p>This file is where prompts and themes are converted into concrete quests. The <code class="inline-code">StoryGenerator</code> interacts with an AI-driven Language Model to construct engaging story narratives and quests from user-specified themes. <code class="inline-code">generateStoryAndQuests</code> takes center stage by assembling the narrative and quests based on project information. A variety of helper methods ensure adherence to contextual inputs like themes or project details, making the content highly relevant and tailored.</p>
<h4><span class="header-prefix">Highlights:</span></h4>
<ul>
<li><code class="inline-code">generateStoryAndQuests</code></li>
<li><code class="inline-code">generateQuestContent</code></li>
<li><code class="inline-code">parseMarkdownToStoryResponse</code></li>
</ul>
<h2>Code</h2>
<h3><span class="header-prefix">File:</span> packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }
  
  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>Like crafting blueprints from materials, this function synthesizes project details and themes into quests and stories.  </p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }
  
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>This method ensures that adventurers embark on valid quests, filtering choices with precision akin to smith-checking a forge‚Äôs quality.  </p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>Progress tracking here echoes calculating the proportion of forged creations completed relative to the total intended production.</p>
<h3><span class="header-prefix">File:</span> packages/core/src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">async generateStoryAndQuests(projectInfo: ProjectInfo, theme: AdventureTheme, projectPath?: string): Promise&lt;StoryResponse&gt; {
  this.currentProject = projectInfo;
  this.projectPath = projectPath;
  
  const validatedTheme = this.validateTheme(theme);
  return await this.generateWithLLM(projectInfo, validatedTheme);
}
</code></pre>
<p>Themes forge raw material into shiny narratives using AI-guided design.  </p>
<pre><code class="language-typescript">async generateQuestContent(
  quest: Quest,
  theme: AdventureTheme,
  codeContent: string
): Promise&lt;QuestContent&gt; {
  let adventureGuidance = &#39;&#39;;
  if (this.projectPath) {
    const formattedConfig = formatAdventureConfigForPrompt(this.projectPath);
    if (formattedConfig) {
      adventureGuidance = formattedConfig;
    }
  }

  const prompt = loadQuestContentPrompt({
    theme,
    adventureTitle: quest.title,
    codeContent,
    storyContent: this.currentStoryContent || &#39;No story context available.&#39;,
    adventureGuidance: adventureGuidance || &#39;&#39;,
    ...(this.customThemeData &amp;&amp; { customThemeData: this.customThemeData })
  }) + &#39;\n\nIMPORTANT: Respond with ONLY markdown content between explicit delimiters.\n\nFormat your response EXACTLY like this:\n\n---BEGIN MARKDOWN---\n[Your markdown content here starting with the quest title]\n

Congratulations, developer! You&#39;ve successfully pushed Quest 2: The Forge of Quests to production, achieving a 20% deployment milestone‚Äîyour code is resilient, your logic is solid, and the journey ahead is an executable adventure! üöÄ‚ö°üíé
</code></pre>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>