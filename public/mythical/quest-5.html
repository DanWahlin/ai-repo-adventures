<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Warden of Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Framework of Mythica</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Warden of Themes</h1>
<hr>
<p>In the heart of Mythica&#39;s enchanted kingdom lies the Tower of Themes, a luminous structure where the essence of all magical quests is refined into compelling adventures for brave heroes. Yet, this mystical process, powered by the artifact known as the &quot;Code of Unity,&quot; has grown unstable. Its mechanism‚Äîcrafted from enchanted logic‚Äîrelies on the precise calibration of themes, validation of choices, and seamless integration into the flow of quests. To restore harmony and ensure the endless spark of creativity, you must journey to the Tower and unveil the secrets hidden in its theme system.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Calibration</strong>: How does <code class="inline-code">getThemeById</code> ensure the correct theme definitions are retrieved based on ID, and how are its validations structured?</li>
<li>‚ö° <strong>Validation Spells</strong>: How does <code class="inline-code">validateAdventureChoice</code> handle user input and safeguard the quest&#39;s integrity from improper data?</li>
<li>üõ°Ô∏è <strong>CSS Enchantment</strong>: How does <code class="inline-code">ThemeManager.generateThemeCSS</code> dynamically construct theme-based styles and which file dependencies does it address?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Central theme definitions and helper functions for adventure themes</h3>
<p>The <code class="inline-code">theme.ts</code> file serves as the source of truth for the magical themes that drive each quest in Mythica. It defines every theme‚Äôs properties such as its identifier, description, keywords, and associated emoji. It also provides powerful spells (functions) to find, parse, and validate these themes, ensuring that adventurers always experience coherent and enchanting journeys. The file is critical in maintaining the consistency of theme transitions and ensuring their impact is seamless across the system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">getThemeById</code>: This spell retrieves a specific theme definition by ID, ensuring themes are reliably referenced by their unique number.</li>
<li><code class="inline-code">isValidTheme</code>: Guards the sanctity of the realm by validating that a theme key legitimately matches one of the defined themes.</li>
<li><code class="inline-code">parseTheme</code>: A magical parser that transforms raw user input into actionable theme keys, enabling intuitive and flexible theme matching.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function getThemeById(id: number): ThemeDefinition | null {
  return THEMES_ARRAY.find(theme =&gt; theme.id === id) || null;
}
</code></pre>
<ul>
<li>Verifies a theme by numerical ID, ensuring it matches one of the predefined <code class="inline-code">ThemeDefinition</code> structures.</li>
<li>Uses a concise array search via <code class="inline-code">find</code>, simplifying the lookup process for efficiency.</li>
<li>Important for consistency, as ID-based retrieval prevents conflicts in identifier mismatches.</li>
<li>Integrates seamlessly with <code class="inline-code">AdventureTheme</code>, standardizing functionality across the system.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Protects integrity by confirming a theme key exists within the system‚Äôs predefined list.</li>
<li>Uses <code class="inline-code">Array.some</code> for a quick check, demonstrating best practices in validation.</li>
<li>Enhances error handling by ensuring invalid or nonsensical keys cannot disrupt adventures.</li>
<li>Acts as a critical safeguard across user inputs and system transitions.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Parses user input seamlessly into actionable theme keys using straightforward transformations.</li>
<li>Validates by matching against IDs, direct keys, or keywords for flexible input robustness.</li>
<li>Demonstrates clear handling of edge cases like missing input or mismatched values.</li>
<li>Is fundamental to the adaptive nature of the adventure system‚Äôs user experience.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Validation spells for user inputs</h3>
<p>The <code class="inline-code">input-validator.ts</code> file plays the role of the kingdom‚Äôs Magical Gatekeeper, ensuring every adventurer‚Äôs choices and inputs meet the necessary requirements before embarking on a quest. It uses precision-crafted validation patterns to sanitize input data, prevent errors, and maintain the artifact&#39;s stability. These methods ensure that all interactions align with the kingdom‚Äôs mystical standards.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures user-entered choices are reasonable and free of harmful or oversized data.</li>
<li><code class="inline-code">validateTheme</code>: Sanctions theme inputs to confirm they map correctly to existing definitions and expectations.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Purifies outputs for safe presentation, removing potential ill-intentioned artifacts.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Ensures adventurers provide meaningful input without exceeding character limits for safety.</li>
<li>Prevents empty or malformed choices from progressing into the system.</li>
<li>Uses simple trimming and error throwing for clear validation results.</li>
<li>Guards against harmful payloads or oversized requests with strict character enforcement.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/theme-manager.ts:</span> CSS creation and theme asset management</h3>
<p>The <code class="inline-code">theme-manager.ts</code> file enables the enchantment of Mythica‚Äôs visual realm through dynamic CSS generation tailored to each theme. It manipulates CSS assets and validates that file paths are correctly processed for rich user experiences. This file is key in ensuring the look and feel of adventures match their magical narratives.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateThemeCSS</code>: Combines multiple CSS assets to generate unified, theme-centric styles.</li>
<li><code class="inline-code">getGitHubLogo</code>: Dynamically selects logo variants based on theme-specific requirements.</li>
<li><code class="inline-code">getThemeIcons</code>: Fetches thematic symbols, granting pages their unique magical flavor.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/theme-manager.ts</h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, &#39;homepage.css&#39;), 
    path.join(this.themesDir, &#39;animations.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>Dynamically generates CSS by combining theme-specific and base styling files.</li>
<li>Ensures seamless output by validating file presence before crafting assets.</li>
<li>Improves organization by centralizing CSS paths and reducing fragmentation.</li>
<li>Strengthens visual identity by allowing theme-specific customizations.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Pay attention to how validation functions prevent improper inputs from disrupting the system‚Äîthey are fundamental to maintaining the framework&#39;s stability.</li>
<li>Observe the interplay between <code class="inline-code">theme.ts</code> and <code class="inline-code">theme-manager.ts</code> in establishing and utilizing theme properties.</li>
<li>The CSS generation approach illustrates an effective method for asset management leveraging dynamic input handling.</li>
</ul>
<hr>
<p>You have mastered all the secrets of the enchanted theme system interwoven into Mythica‚Äôs adventures! The Code of Unity is now stable, ensuring generations of magical quests for brave heroes. Your journey is complete‚Äîcarry your tales with honor and let the realm flourish in eternal creativity!</p>
<p>Huzzah, noble seeker! You have triumphed over the enigmatic Warden of Themes, forging your wisdom like celestial steel and advancing boldly toward the final chapter of this legendary odyssey‚Äîvictory glimmers on the horizon, oh valiant crusader! ‚öîÔ∏è ‚≠ê ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>