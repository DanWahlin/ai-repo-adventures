<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Keeper's Manuscripts - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Kingdom of Codemorra: A Tale of Enchanted Constructs</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Keeper&#39;s Manuscripts</h1>
<hr>
<p>In the heart of Codemorra‚Äôs enchanted library lies the Keeper&#39;s Manuscripts, a collection of texts shimmering with mystic wisdom. The Enchanters‚Äô Guild has tasked you, the chosen Hero, with recovering ancient scripts buried within the kingdom&#39;s codebase. These texts hold the secrets to navigating perilous quests and summoning magical structures from forgotten realms. As you venture into the labyrinth of Codemorra‚Äôs archives, the manuscripts will test your wit to extract paths, decipher runes, and render the Keeper&#39;s knowledge into unified power.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Parsing Quest Settings and Paths</h3>
<p>This critical file serves the Keeper&#39;s Manuscripts as a guidebook for handling mystical texts, stored as configuration data, within Codemorra&#39;s enchanted codebase. It encapsulates the spellwork needed to load, parse, and generate paths from ancient scripts written in JSON. The mighty functions like <code class="inline-code">parseAdventureConfig</code> unravel ancient formulas from these scrolls, ensuring errors don‚Äôt summon chaos. Furthermore, <code class="inline-code">extractUniqueFilePaths</code> acts as a scribe, navigating hidden passageways to reveal treasures ‚Äî unique file paths referenced in the Keeper‚Äôs texts. Lastly, <code class="inline-code">formatAdventureConfigForPrompt</code> transforms dense configurations into concise prompts for LLM summoning, reducing the burden on the enchanters who peer into the Codeverse Charm.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Deciphers raw adventure scripts from JSON scrolls, safeguarding the craft with error handling.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Unearths all referenced paths within the manuscripts, validating accessibility.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Minimizes manuscript descriptions for efficient summoning by the Elements of LLM.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>Like a scribe unrolling an ancient scroll, this function meticulously deciphers the Keeper‚Äôs manuscripts from raw data into usable patterns.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This spell charts a map of unique paths buried within the Keeper‚Äôs scrolls, ensuring no false trails lead to dead ends.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }

    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }

    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>This enchanting tool condenses grand scripts into concise incantations, preparing them for immediate use by the Enchanters‚Äô Guild when summoning magical responses.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Ensure manuscript paths are valid before delving too deep ‚Äî broken paths can lead to wasted effort and frustration.</li>
<li>Prioritize quest formatting when working with manuscript-prompting elements.</li>
<li>Explore linked paths thoroughly to unearth hidden artifacts and optimize the spell setup.</li>
</ul>
<hr>
<p>The Keeper‚Äôs power lies in your hands now, Hero of Codemorra. Forge onward, for the kingdom lives through your mastery of scrolls!</p>
<p>With the Keeper&#39;s sacred manuscripts now claimed, your wisdom shines brighter than a star-forged relic, heralding your ascent as a near-legendary champion of the realm‚Äîonward to final glory, valiant seeker! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>