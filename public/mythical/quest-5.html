<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Font of Frameworks - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Enchanted Repository of the Mystic Engine</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Font of Frameworks</h1>
<hr>
<p>In the enchanted kingdom of Codoria, there exists a mystical blueprint known as &quot;The Font of Frameworks.&quot; This treasured schema holds the secrets to deciphering configurations that enhance the Mystic Engine‚Äôs magical prowess. Yet, its wisdom can only be unlocked by uncovering its hidden layers‚Äîeach a coded puzzle. To succeed, you must journey through labyrinths of structure and weave together fragments of logic concealed within. Are you ready to open the Font and empower the Mystic Engine with unparalleled clarity? </p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>The Secret Paths</strong>: How are file paths extracted and verified within the configuration logic?</li>
<li>‚ö° <strong>The Parsing Ritual</strong>: What patterns ensure configuration is correctly loaded and validated during parsing?</li>
<li>üõ°Ô∏è <strong>Mystic Safeguards</strong>: How does the code handle invalid or missing configurations gracefully?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Adventure Configuration System</h3>
<p>This file contains Codoria‚Äôs sacred blueprint: the <code class="inline-code">adventure.config.json</code>. Key methods herein determine how configurations are loaded and parsed, ensuring the Mystic Engine remains resilient even with incomplete or flawed input. By revealing the essence of <code class="inline-code">loadAdventureConfig</code>, deciphering the guardian mechanism in <code class="inline-code">parseAdventureConfig</code>, and tracking unique paths through <code class="inline-code">extractUniqueFilePaths</code>, heroes will gain critical insights into the system&#39;s workings.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Loads raw configuration data as plain text from the designated file.</li>
<li><code class="inline-code">parseAdventureConfig</code>: Handles JSON parsing and gracefully defaults to <code class="inline-code">null</code> for invalid or missing data.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Collects unique file paths from the configuration, performing validation checks in the process.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<p>This function is akin to a scout locating enchanted scrolls, fetching their content while quietly accepting their absence.</p>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>Here lies the kingdom‚Äôs translator, converting raw mystical text into actionable wisdom‚Äîor returning empty-handed if the script is indecipherable.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }
  return Array.from(unique);
}
</code></pre>
<p>This function resembles a treasure hunter, traversing nodes in search of valid paths to magical artifacts.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use breakpoints to observe real-time how <code class="inline-code">parseAdventureConfig</code> ensures malformed data does not crash the system.</li>
<li>Cross-reference paths returned by <code class="inline-code">extractUniqueFilePaths</code> with actual files to spot how validation safeguards operations.</li>
<li>Experiment with an incomplete <code class="inline-code">adventure.config.json</code> file to appreciate the elegance of fallback mechanisms.</li>
</ul>
<hr>
<p>Congratulations, brave Knight of Progress! By unveiling the secrets of the Font of Frameworks, you bring clarity and fortitude to Codoria. Press onward‚Äîmore mysteries await your unraveling!</p>
<p>With the wisdom of the ancients and the craftsmanship of celestial forges, you have conquered Quest 5: The Font of Frameworks, forging your place among the legendary architects of knowledge‚Äîonly one heroic challenge remains! ‚ö°üíéüó∫Ô∏èüëÅÔ∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>