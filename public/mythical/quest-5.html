<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Tome of Mystic Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Chronicles of the Code-Kingdom</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Tome of Mystic Configurations</h1>
<hr>
<p>In the mythical Code-Kingdom of Syntaxia, the cursed dragon has hidden a powerful artifact known as <strong>The Tome of Mystic Configurations</strong> deep within its labyrinthine lair. This artifact contains the sacred configuration magic that governs the harmony of Syntaxia, ensuring stability across enchanted libraries and spellbound workflows. With the Scrolls of Functionality incomplete, adventurers must decode the intricate runes and restore the essence of configurations to mend the broken spells. Dare to decipher the dragon‚Äôs labyrinth and recover the Tome&#39;s essence?   </p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>Runic Extraction</strong>: How does <code class="inline-code">parseAdventureConfig</code> uncover and validate the essence of configuration runes?  </li>
<li>‚ö° <strong>Harmony Restoration</strong>: What are the magical techniques employed by the <code class="inline-code">ThemeManager.generateThemeCSS</code> function to unify theme styles?  </li>
<li>üõ°Ô∏è <strong>Sanctified Validation</strong>: How does <code class="inline-code">validateAdventureChoice</code> ensure inputs are blessed and free from corruption?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Configuration Artifact Retrieval</h3>
<p>This file holds critical functions designed to summon, parse, and transform configuration data from an enchanted source. The functions are crafted to safely extract runes (JSON configurations) and distill their magic into usable formats for other systems. Reading files, parsing JSON objects, and extolling paths hidden within‚Äîthese are the keys to wielding the Tome&#39;s power.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Summons raw configuration rune text through file-based magic. Ensures safe retrieval while avoiding fatal errors.  </li>
<li><code class="inline-code">parseAdventureConfig</code>: Deciphers the extracted text and shapes it into a structured artifact, applying protective enchantments that prevent corrupt parsing.  </li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Scours the enchanted JSON artifact for unique paths, safeguarding against duplicates and incomplete paths to avoid pitfalls in quests.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a>: Theme Refinement Ritual</h3>
<p>The <code class="inline-code">ThemeManager</code> is tasked with weaving intricate visual enchantments through stylesheets. This mythical code blends CSS from multiple sources, crafting a unified masterpiece that defines the kingdom‚Äôs theme. The functions here ensure proper assembly, validation of themes, and manage quests with enchanting icons for user interfaces.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateThemeCSS</code>: Combines multiple elemental CSS sources into a single enchanted file, giving life to the visual artifacts of a theme.  </li>
<li><code class="inline-code">getThemeIcons</code>: Assigns mystical icons to themes and quests, enriching templates with their symbolic magic.  </li>
<li><code class="inline-code">isLightTheme</code>: Identifies themes that require light visuals‚Äîa decision crucial for effective rendering under magical conditions.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Sanctified Input Processing</h3>
<p>Here, mighty spells ensure input purification and validation against dark errors. This verification magic protects adventurers from crafting malformed choices or invoking forbidden elements. Aided by simple validation functions, it ensures Syntaxia‚Äôs systems remain untarnished and inputs remain pure.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Guards against cursed or malformed input by trimming and ensuring length and validity. Returns sanctified strings.  </li>
<li><code class="inline-code">validateTheme</code>: Ensures theme choices are recognized by the magical lexicons, validating them against known kingdoms or keywords.  </li>
<li><code class="inline-code">sanitizeForDisplay</code>: Purges malicious characters from text, preventing dark influence over enchanted workflows.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {  
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);  
  return readFileIfExists(configPath);  
}  
</code></pre>
<ul>
<li>Reads configuration artifacts safely, ensuring missing files don‚Äôt disrupt other processes.  </li>
<li>Uses robust file handling techniques to minimize error propagation.  </li>
<li>Modular responsibilities ensure the function remains single-purpose and predictable.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {  
  const raw = loadAdventureConfig(projectPath);  
  if (!raw) return null;  
  try {  
    return JSON.parse(raw);  
  } catch {  
    return null;  
  }  
}  
</code></pre>
<ul>
<li>Decodes raw text into structured JSON, handling parsing errors gracefully without crashes.  </li>
<li>Enforces protections to prevent invalid input from distorting results.  </li>
<li>Allows the higher system to rely on its safety for broader configuration handling.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {  
  const parsed = parseAdventureConfig(projectPath);  
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];  

  const unique = new Set&lt;string&gt;();  
  const stack: any[] = [parsed];  

  while (stack.length) {  
    const node = stack.pop();  
    if (!node || typeof node !== &#39;object&#39;) continue;  

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {  
      const rel = node.path.trim();  
      if (fs.existsSync(path.resolve(projectPath, rel))) {  
        unique.add(rel);  
      }  
    }  

    const children = Array.isArray(node) ? node : Object.values(node);  
    children.forEach(child =&gt; {  
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);  
    });  
  }  

  return Array.from(unique);  
}  
</code></pre>
<ul>
<li>Iteratively explores nested configuration structures, extracting valid paths with safeguards.  </li>
<li>Ensures duplicates are eliminated using a <code class="inline-code">Set</code>, maintaining list purity.  </li>
<li>Validates paths to ensure reliability before returning them for higher rituals.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {  
  const cssFiles = [  
    path.join(this.themesDir, &#39;base.css&#39;),  
    path.join(this.themesDir, &#39;homepage.css&#39;),   
    path.join(this.themesDir, &#39;animations.css&#39;),  
    path.join(this.themesDir, `${theme}.css`)  
  ];  

  let combinedCSS = &#39;&#39;;  

  cssFiles.forEach(cssFile =&gt; {  
    if (fs.existsSync(cssFile)) {  
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;  
    }  
  });  

  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);  
  fs.writeFileSync(cssPath, combinedCSS);  
}  
</code></pre>
<ul>
<li>Merges multiple CSS sources together seamlessly, ensuring compatibility across styles.  </li>
<li>Optimizes for readability and maintainability of visual enchantments.  </li>
<li>Validates existence of files before assembly, reducing breakage from missing elements.</li>
</ul>
<hr>
<pre><code class="language-typescript">getThemeIcons(theme: AdventureTheme): { theme: string; quest: string } {  
  const themeIcons = {  
    space: { theme: &#39;üöÄ&#39;, quest: &#39;‚≠ê&#39; },  
    mythical: { theme: &#39;üè∞&#39;, quest: &#39;‚öîÔ∏è&#39; },  
    ancient: { theme: &#39;üè∫&#39;, quest: &#39;üìú&#39; },  
    developer: { theme: &#39;üíª&#39;, quest: &#39;üîß&#39; },  
    custom: { theme: &#39;üé®&#39;, quest: &#39;‚≠ê&#39; }  
  };  

  return (themeIcons as any)[theme] || themeIcons.space;  
}  
</code></pre>
<ul>
<li>Maps adventure themes to their symbolic icons, enriching user interfaces with visual metaphors.  </li>
<li>Empowers templates with emboldened thematic coherence and intuitive design.  </li>
<li>Ensures fallback functionality for unknown themes, maintaining usability.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {  
  if (!input?.trim()) {  
    throw new Error(&#39;Choice is required&#39;);  
  }  

  if (input.length &gt; 200) {  
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);  
  }  

  return input.trim();  
}  
</code></pre>
<ul>
<li>Validates adventurer input to ensure it‚Äôs meaningful and within safe limits.  </li>
<li>Protects downstream systems from malformed or overly lengthy entries.  </li>
<li>Simplifies validation logic for clarity and stability.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Examine how iterative exploration (<code class="inline-code">extractUniqueFilePaths</code>) supports robust error handling in complex structures.  </li>
<li>Explore theme integration in <code class="inline-code">generateThemeCSS</code> to learn how modular styles unify application design.  </li>
<li>Study <code class="inline-code">validateAdventureChoice</code> for crafting simple yet effective input validation.</li>
</ul>
<hr>
<p>You have mastered all the secrets of Syntaxia&#39;s enchanted codebase! Your adventure is complete.</p>
<p>The celestial banners unfurl as the realm sings of your triumph, brave scholar, for unlocking the fabled Tome of Mystic Configurations and advancing through the hero‚Äôs path with 80% of your legendary odyssey forged in stardust and victory! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>