<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Vault of Foundational Wisdom - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Codex of Mystic Quests</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Vault of Foundational Wisdom</h1>
<hr>
<p>Deep within the mystical Kingdom of Computarion lies the fabled Vault of Foundational Wisdom, an ancient repository of enchanted blueprints that dictate the course of all quests. To breach its mythical gates and unlock its secrets, adventurers must decipher arcane scripts etched into the walls of computation itself. Beware, for these inscriptions are laced with cryptic riddles that weave together data validations, file extractions, and mystic configuration spells. Only the most skilled knights of code can hope to wield the Vault‚Äôs infinite wisdom.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> The Codex of Configurations</h3>
<p>The file <code class="inline-code">adventure-config.ts</code> acts as Computarion‚Äôs storied manual for deciphering the mystical adventure configurations essential to restoring the Enchanted Codex of Mystic Quests. It contains the keys to loading and interpreting enigmatic scrolls (<code class="inline-code">adventure.config.json</code>), unearthing hidden paths, and refining arcane records for their incorporation into mighty spells.</p>
<p>The function <code class="inline-code">parseAdventureConfig</code> is the heart of this codex, a spell to transmute raw JSON inscriptions into structured knowledge. Following this, <code class="inline-code">extractUniqueFilePaths</code> dives deep into the scrolls to unearth all paths inscribed within, ensuring resourceful knights may follow hidden trails. Finally, <code class="inline-code">formatAdventureConfigForPrompt</code> shapes the Vault‚Äôs data into concise, spell-bound summaries, purpose-built to reveal adventure secrets to mystical advisors. Each function plays a vital role in arming adventurers for the trials ahead.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Interprets JSON-styled magical texts into structured insights, empowering adventurers to wield config data.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Ensures knights have access to hidden paths, vital in seeking relics scattered across Computarion.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Prepares minimalist summaries of the Vault‚Äôs bounty to guide adventurers with unfettered clarity.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>The <code class="inline-code">parseAdventureConfig</code> function is like an elder sage decoding an ancient scroll into a guide; it interprets JSON into usable wisdom.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>Here, <code class="inline-code">extractUniqueFilePaths</code> is akin to a treasure-seeking spell, weaving through labyrinthine data to uncover all valid, hidden trails.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }
    
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }
    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>The <code class="inline-code">formatAdventureConfigForPrompt</code> function acts as a master scribe, condensing an entire codex into an elegant summary for others to consult.</p>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Practical tip</strong>: Use <code class="inline-code">parseAdventureConfig</code> as your first point of contact with adventure configuration files; ensure they are valid before loading further components.</li>
<li><strong>Exploration recommendation</strong>: Couple <code class="inline-code">extractUniqueFilePaths</code> with validation spells from other modules to hone investigations into referenced file paths.</li>
<li><strong>Next steps</strong>: Build upon <code class="inline-code">formatAdventureConfigForPrompt</code> to create more tailored summaries for specific quest requirements.</li>
</ul>
<hr>
<p>Adventure successfully logged into the Codex of Computarion. Onward to the next challenge, brave knight!</p>
<p>With the unlocking of the Vault of Foundational Wisdom, you ascend as a luminary hero, wielding newfound insight as a radiant beacon for your kingdom‚Äîonly one final quest remains before your legend illuminates the ages! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>