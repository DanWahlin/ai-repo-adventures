<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Runestone Interface - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Repository of Code Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Runestone Interface</h1>
<hr>
<p>In the mythical Kingdom of Codexia, the final task in your journey lies ahead. The Runestone Interface, a mystical convergence of themes, settings, and configurations, governs all magical interactions within the Enchanted Repository. Only those with keen intellect and precise knowledge can decode its secrets to create harmonious adventures that unify Codexia‚Äôs disparate realms. This final trial demands mastery of core principles and reveals the configuration spells that amplify the adventure itself. Ready your resolve, brave seeker, for this is the ultimate test of your questing spirit.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üóùÔ∏è <strong>Theme Harmonization</strong>: How does the <code class="inline-code">ThemeManager</code> determine the proper appearance and identity for a given theme?</li>
<li>‚öîÔ∏è <strong>Validation Protocols</strong>: What techniques are used to ensure that adventure inputs, such as themes and project paths, are valid and secure?</li>
<li>üîÆ <strong>Configuration Enchantment</strong>: How are core configurations maintained and applied to ensure efficient operation across the kingdom&#39;s magical systems?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration Enchantment</h3>
<p>This file acts as the central store for global constants and configurations that ensure balanced performance within the Enchanted Repository. It provides critical parameters such as timeouts, cache settings, adventure limits, and error messages. These constants guarantee the magical system operates smoothly while offering flexibility for customization through environmental variables. The file simplifies management and establishes clear boundaries for the many interconnected parts of the adventure framework.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> defines the maximum waiting time for responses from the Oracle of Tokens, ensuring balanced responsiveness.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> protects the realm from overloading by rejecting files that exceed size limits.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> specifies which directories and files the Repository&#39;s scrying spells should exclude during their sweeping analysis of the terrain.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds for complex story generation with large prompts, configurable via env
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;,
  &#39;.DS_Store&#39;,
  &#39;Thumbs.db&#39;,
] as const;
</code></pre>
<ul>
<li>The <code class="inline-code">LLM_REQUEST_TIMEOUT</code> sets a clear boundary for how long the system will wait when seeking guidance from the Language Oracle, ensuring timeouts are aligned with user expectations.</li>
<li>By capping the <code class="inline-code">MAX_FILE_SIZE_MB</code>, Codexia‚Äôs magical flows are safeguarded against undue memory strain from excessively large data scrolls.</li>
<li>The <code class="inline-code">IGNORE_PATTERNS</code> array enforces careful restraint, excluding unnecessary clutter such as temporary files or internal caches from the Repository&#39;s gaze.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Validation Protocols</h3>
<p>The <code class="inline-code">input-validator.ts</code> file ensures that improper actions or erroneous data cannot disrupt the delicate magic underlying the adventure framework. It offers helper functions for sanitizing inputs, validating choices, and detecting acceptable themes. Error handling is woven deeply into its design, providing immediate feedback when violations occur. This file showcases the Kingdom&#39;s commitment to safeguarding every adventurer&#39;s path.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> ensures that every quest choice is both meaningful and appropriately constrained.</li>
<li><code class="inline-code">validateTheme</code> interprets user-provided themes by matching them against the official <code class="inline-code">THEMES</code> codex and handles errors gracefully.</li>
<li><code class="inline-code">sanitizeForDisplay</code> strips harmful or problematic elements from input, promoting safety and accessibility.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>The <code class="inline-code">validateAdventureChoice</code> function protects the system from empty or overly verbose inputs that might complicate the quest selection process.</li>
<li>Input trimming focuses on meaningful content by removing unnecessary whitespace or invalid entries.</li>
<li>Clear constraints on length provide developers and adventurers with helpful feedback without unnecessary ambiguity.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>The <code class="inline-code">validateTheme</code> function ensures that the user‚Äôs selected adventure theme aligns with the established <code class="inline-code">THEMES</code> enchantment set.</li>
<li>The normalization and parsing of inputs simplify user entries while maintaining strict adherence to acceptable formats.</li>
<li>By listing valid themes in error messages, the function provides both clarity and a gentle nudge toward correct usage.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li>The <code class="inline-code">sanitizeForDisplay</code> function prioritizes safety by removing potentially harmful characters and enforcing a length limit.</li>
<li>Regular expressions detect and strip characters that could corrupt the visual display or compromise system security.</li>
<li>The selective truncation ensures long inputs do not overwhelm Codexia‚Äôs carefully crafted spellwork.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Harmonization</h3>
<p>The <code class="inline-code">theme.ts</code> file binds the magic of Codexia‚Äôs themed adventures. It defines all themes, their attributes, and helper functions to validate themes, parse input, and format themes for display. This repository of thematic magic ensures every quest embodies the chosen tone, style, and symbols to immerse adventurers fully.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> provides a centralized codex of all supported themes, including their descriptions, identifiers, and related keywords.</li>
<li><code class="inline-code">parseTheme</code> acts as the decoding spell to interpret user inputs and match them to the proper theme.</li>
<li><code class="inline-code">getAllThemes</code> retrieves the complete library of themes as an accessible array, simplifying access across the system.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Other themes truncated for brevity...
} as const;
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> object catalogues each adventure theme, defining its visual and descriptive components as well as relevant keyword associations.</li>
<li>Comprehensive descriptors like the emoji and display name enhance immersion and align with Codexia‚Äôs storytelling essence.</li>
<li>Keywords enable intuitive input matching, ensuring users can discover their preferred theme easily.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>The <code class="inline-code">getAllThemes</code> function unwraps the thematic spellbook into an array, making it easily accessible for iteration or displays.</li>
<li>This streamlined approach empowers downstream processes with a ready guide to Codexia‚Äôs adventure themes.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>The <code class="inline-code">parseTheme</code> function translates user inputs into theme keys by evaluating exact matches, numeric lookups, and keyword-based inference.</li>
<li>Carefully sequenced checks prioritize precision while falling back to broader matching criteria when necessary.</li>
<li>Parsing flexibility ensures that adventurers‚Äô choices seamlessly map to supported themes.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>‚ú® Take note of how input sanitization and validation form a strong line of defense against harmful or invalid data in systems.</li>
<li>üè∞ Explore the cohesion across theme management functions and consider how the spell-like API design enhances simplicity and modularity.</li>
</ul>
<hr>
<p>You have mastered all the secrets of Codexia&#39;s Enchanted Repository! Your adventure is complete. Take pride in your newfound knowledge and let its magic guide you in crafting legendary realms for seekers yet to come.</p>
<p>With the wisdom of the ancient Runestone now unlocked and your heroic resolve gleaming like a celestial ‚≠ê, your journey through the mythical realms reaches triumphant heights‚Äîonward, champion, to the final quest that awaits!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>