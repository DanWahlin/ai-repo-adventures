<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Tome of Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'mythical' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Chronicles of Lumina: The Enchanted Repository</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Tome of Themes</h1>
<hr>
<p>The winds of Lumina carried whispers of the elusive Tome of Themes, a legendary artifact said to craft vibrant narratives that pulse with the energy of an adventure well-told. Deep within the Enchanted Repository, the ancient volume held the power to shape quests with its magical threads, binding choices, and outcomes into one seamless fabric. Yet, such power was guarded jealously, hidden behind veils of magical logic and intricate runes. Should you dare to seek it, beware the riddles of its sprawling maze‚Äîyou‚Äôll need wit and valor, and a keen understanding of the essence of themes, to uncover its secrets.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Theme Definitions and Validation</h3>
<p>The file <code class="inline-code">theme.ts</code> forms the beating heart of theme logic in the system, housing the enchanted definitions for all themes available in the adventure engine. Within its magical structure lies the rich tapestry of <code class="inline-code">THEMES</code>, an object repository of the kingdom‚Äôs narrative domains: <code class="inline-code">SPACE</code>, <code class="inline-code">MYTHICAL</code>, <code class="inline-code">ANCIENT</code>, and more. Each theme boasts unique properties like an <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">keywords</code>, and even a heraldic <code class="inline-code">emoji</code> to symbolize its essence. The file provides tools to navigate these options, from functions like <code class="inline-code">getThemeByKey()</code> for locating a theme by its magic word to <code class="inline-code">isValidTheme()</code> for blessing inputs as aligned with the kingdom‚Äôs lexicon.</p>
<p>The crown jewel is the <code class="inline-code">parseTheme()</code> function, a spell of precision that takes raw input and cross-references it with <code class="inline-code">key</code>, <code class="inline-code">id</code>, and even associated keywords to transform vague inklings into valid themes. This file ensures that all adventurers‚Äô paths are aligned to one of these elemental domains, so their journeys resonate with thematic splendor. By enforcing a single source of truth for theme definitions, it solidifies the foundation for all quests.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">- </code>Centralizes theme knowledge with the <code class="inline-code">THEMES</code> object, ensuring consistency across domains.</li>
<li><code class="inline-code">- </code>Enables adventurer-aligned user input validation with functions like <code class="inline-code">validateTheme()</code> and <code class="inline-code">isValidTheme()</code>.</li>
<li><code class="inline-code">- </code>Provides a magical mechanism, <code class="inline-code">parseTheme()</code>, for transforming inputs into recognized thematic essence.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Heroic Input Guardians</h3>
<p>In the Dominion of Lumina, the sacred file <code class="inline-code">input-validator.ts</code> is the front-line guardian of valid adventuring. This is where inputs from daring adventurers are tested against logic spells to protect the kingdom from chaotic energies. Functions like <code class="inline-code">validateAdventureChoice()</code> uphold the tenets of clarity and brevity, ensuring adventurers give their answers free from ambiguity or undue verbosity. Furthermore, <code class="inline-code">validateTheme()</code> functions as a thematic divination tool‚Äîrefining user-submitted themes and exacting a true match against the hallowed scrolls in <code class="inline-code">theme.ts</code>. </p>
<p>Meanwhile, the spells in this file cleanse any shadowy whispers, such as invalid project paths or potentially dangerous inputs, preserving the sanctity of the kingdom&#39;s mechanisms. These validations ensure every adventurer treads the righteous path, guided and safeguarded as they delve into the mysteries awaiting them.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">- </code>Protects all input-related user interactions with validation spells.</li>
<li><code class="inline-code">- </code>Ensures harmony with themes using <code class="inline-code">validateTheme()</code> and integration with <code class="inline-code">theme.ts</code>.</li>
<li><code class="inline-code">- </code>Employs <code class="inline-code">sanitizeForDisplay()</code> to purge dark influences from adventurer outputs.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Other themes
};
</code></pre>
<p>Just like choosing your weapon before battle, this code provides adventurers with a reliable arsenal of themes to shape their destinies.</p>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<p>This is the mystical alchemy that turns abstract ideas into tangible paths for adventure.</p>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>This is like a castle gatekeeper discerning whether an unknown traveler speaks the true words of entry.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>This whispers a potent spell to cleanse any shadowy artifacts that might taint outgoing messages.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Define themes expansively but consistently to ensure compelling, customizable narratives.</li>
<li>Regularly audit <code class="inline-code">input-validator.ts</code> to strengthen user input defenses and adapt to emerging security concerns.</li>
<li>Enhance the <code class="inline-code">THEMES</code> catalog to accommodate new realms, ensuring the Repository continues to captivate adventurers.</li>
</ul>
<hr>
<p>By the celestial wisdom of the ancients, you have triumphed over Quest 4: The Tome of Themes, forging steadfast strides through the enchanted path of mastery‚Äîhail this heroic milestone, noble scholar, for the kingdom nears its ultimate flourish! ‚≠ê‚ö°üìú</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Crystal of Configurations ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>