<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Crystal of Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'mythical' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Enchanted Realm of Aetherium: Chronicles of the Codebound</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Crystal of Themes</h1>
<hr>
<p>Within the labyrinthine halls of the Codebound Citadel, the Taleweavers spoke in whispered tones of the next great trial awaiting the brave knights of Aetherium. The Repomix Grimoire, burdened with near-limitless tales, faltered as its enchantments fragmented. To mend its magic, the archmage&#39;s task was clear: retrieve the legendary Crystal of Themes, hidden within the intricate weave of enchanted narratives. But beware, for the Crystal‚Äôs guardian was the ever-elusive Syntax Warden, who spun riddles and tests from the foundational arcanum of code itself. The fate of the Grimoire‚Äîand perhaps all of Aetherium‚Äîlay in decoding the layers of its puzzling defenses.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: Input Validation and Protection</h3>
<p>This file guards the gates of the Codebound Citadel, ensuring only rightful inputs pass through to its mystical core. The functions here verify choices, themes, project paths, and more, rendering them into forms that the Citadel can accept. For instance, <code class="inline-code">validateAdventureChoice()</code> ensures adventurers craft concise, meaningful choices‚Äîthwarting any attempt to overwhelm the mystical systems with corrupted options. Similarly, <code class="inline-code">validateTheme()</code> cross-references a user‚Äôs theme selection with the grand THEMES compendium, rejecting impostors. The <code class="inline-code">sanitizeForDisplay()</code> spell is an adept cleaner, purging harmful runes from inputs. In simpler terms, this file ensures the boundaries between the outer world and Aetherium remain secure, protecting the Citadel from malicious data and careless adventuring.</p>
<h4>Highlights</h4>
<ul>
<li>Guards against invalid or malicious inputs using precision-crafted validations.</li>
<li>Employs functions like <code class="inline-code">validateTheme()</code> for theme-specific checks tied to the realm&#39;s thematic fabric.</li>
<li>Utilizes <code class="inline-code">sanitizeForDisplay()</code> for secure visual outputs, preventing display errors.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Thematic Foundations and Mystical Definitions</h3>
<p>Here lie the definitions of the enchanted realms, the themes of Aetherium that guide each quest‚Äôs story. The file‚Äôs <code class="inline-code">THEMES</code> constant is a sacred tome detailing magical possibilities, from the enchanted kingdoms of <code class="inline-code">MYTHICAL</code> to bespoke journeys defined by adventurers in <code class="inline-code">CUSTOM</code>. Functions such as <code class="inline-code">parseTheme()</code> interpret the user‚Äôs intent, aligning their words with the nearest defined theme like a magical compass. Meanwhile, <code class="inline-code">validateThemeInput()</code> ensures only valid themes enter the narrative. <code class="inline-code">formatThemeOption()</code> and <code class="inline-code">getFormattedThemeOptions()</code> elevate these themes into tales, weaving their descriptions into compelling choices for any adventurer. With this file, every journey‚Äôs magical essence is rooted in structure and consistency.</p>
<h4>Highlights</h4>
<ul>
<li>Hosts all pre-defined themes, each complete with descriptions, keywords, and symbolic emojis.</li>
<li>Contains utility functions like <code class="inline-code">getAllThemes()</code> to elegantly retrieve details of all available themes.</li>
<li>Offers <code class="inline-code">parseTheme()</code> to align user input with accurate thematic realms.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Enchanted Configuration of the Citadel</h3>
<p>This file enshrines the magical parameters that define the limits and possibilities within the Codebound Citadel. Constants such as <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_CACHE_TTL</code> determine the tempo and patience of the mystical machinery powering Aetherium. <code class="inline-code">MAX_FILE_SIZE_MB</code> ensures the Citadel does not falter when reading colossal tomes, while adventure limits like <code class="inline-code">MAX_FILES_PER_QUEST</code> maintain the focus needed for heroic tales. The <code class="inline-code">DEFAULT_THEME</code>, set to the cosmic intrigue of <code class="inline-code">space</code>, is a testament to the thematic heart of the Citadel. Within this precision lies flexibility, as even the enchanted durations and cache persistence can be adjusted based on the magical flow of a campaign.</p>
<h4>Highlights</h4>
<ul>
<li>Defines timeouts for critical processes such as LLM requests (e.g., <code class="inline-code">LLM_REQUEST_TIMEOUT</code>).</li>
<li>Establishes manageable adventure and file size thresholds to stabilize the Citadel‚Äôs systems.</li>
<li>Offers <code class="inline-code">DEFAULT_THEME</code> for scenarios where no theme is specifically chosen.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>This is like a gatekeeper verifying that every traveler at the castle gates knows the secret password before entering.</p>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Other themes omitted for brevity
};
</code></pre>
<p>This is the spellbook of themes, with each page describing a unique land of adventure waiting to be explored.</p>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const DEFAULT_THEME = &#39;space&#39; as const;
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds
</code></pre>
<p>This file sets the rules of the kingdom, defining what resources the castle has on hand and the limits to its magical endurance.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Pay close attention to <code class="inline-code">validateTheme()</code> to understand how user input is securely matched to predefined themes.</li>
<li>Explore <code class="inline-code">THEMES</code> to learn how structured data powers the overarching narrative and quest theming system.</li>
<li>Consider adjusting timeouts in <code class="inline-code">config.ts</code> for more demanding environments or adventurous storytelling experiments.</li>
</ul>
<hr>
<p>By the fiery breath of the golden wyrms, thou hast claimed the Crystal of Themes, illuminating thy path to mastery with thine unyielding valor‚Äîpress onward, brave hero, for the realm awaits thy final triumph! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Arcane Codex of Configurati... ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>