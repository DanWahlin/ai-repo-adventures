<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Chronicles of Configuration - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Mystic Chronicles of Codethoria</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Chronicles of Configuration</h1>
<hr>
<p>In the legendary realm of Codethoria, the Chronicles of Configuration unveil truths buried within the enchanted scripts that power the kingdom‚Äôs adventures. As a fearless Code Knight, the scrolls whisper tales of structured codes and guarded system settings that form the backbone of your mystical quests. Deep in the hall of input sanctification and theme artistry, secrets await. Will you harness the ancient power of configuration spells to illuminate the path forward, or will their complexity thwart your resolve?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Sanctification Spell</strong>: How does <code class="inline-code">validateAdventureChoice</code> ensure inputs are suitable for the magical journey? </li>
<li>‚ö° <strong>Theme Elegance</strong>: How does the <code class="inline-code">parseTheme</code> function simplify the process of deciphering user intentions for thematic customization?</li>
<li>üõ°Ô∏è <strong>Error Shielding</strong>: How are system boundaries enforced by constants such as <code class="inline-code">MAX_FILE_SIZE_MB</code> to maintain harmony and avoid chaos during your adventures?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Guardians of Validity</h3>
<p>The input-validator file operates as a mystical guardian of correctness, ensuring adventurers&#39; choices and paths meet Codethoria‚Äôs rigorous magical standards. This file spells out the incantations that purify and transform raw user inputs, safeguarding the enchanted system against malevolent errors. It validates choices, projects paths, and even prepares user text for safe display.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures users‚Äô heroic selections are non-empty and within a reasonable length to maintain consistency.</li>
<li><code class="inline-code">validateTheme</code>: Garners theme alignment by enforcing user choices to match predefined magical themes, throwing enchanted errors when deviations occur.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Removes hazardous elements from text for safe representation within enchanted artifacts.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Validates the user&#39;s textual input and ensures it adheres to kingdom standards.</li>
<li>Utilizes trimming to remove unnecessary whitespace, preserving clarity.</li>
<li>Protects against overly lengthy inputs that might disrupt Codethoria‚Äôs harmony.</li>
<li>Throws detailed error messages, aiding adventurers in refining their selection.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Strives to ensure user input aligns with one of the predefined themes in the mythical kingdom.</li>
<li>Implements normalization to account for slight variations in phrasing, ensuring accessibility.</li>
<li>Incorporates helper functions like <code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code> to streamline validation.</li>
<li>Throws an error with valid themes listed, offering adventurers clarity on acceptable paths.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li>Purifies text by removing potential hazards like script tags or extraneous whitespace.</li>
<li>Implements truncation to keep display content elegant and manageable within enchanted artifacts.</li>
<li>Ensures data integrity by maintaining a sanitized version of user text.</li>
<li>Useful for downstream usage, maintaining safety and clarity across the system.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Keepers of Enchantment</h3>
<p>Themes act as the magical essence driving Codethoria‚Äôs narratives, with <code class="inline-code">theme.ts</code> as their sacred repository. This file defines the thematic considerations and offers enchanted mechanisms for parsing, validating, and displaying themes. It encapsulates the mystical configurations that shape every adventure, allowing Code Knights to soak in the ethereal glory of predefined or custom themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseTheme</code>: Deciphers user inputs to resolve magical themes using pattern matching and keyword validation.</li>
<li><code class="inline-code">getAllThemes</code>: Curates a list of all enchanting themes to guide adventurers in their thematic choices.</li>
<li><code class="inline-code">formatThemeOption</code>: Formats theme details for lucid presentation within Codethoria, ensuring clarity and splendor.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Analyzes user input with string normalization to ensure accurate theme matching.</li>
<li>Resolves themes using flexible mechanisms, including numeric IDs and keyword associations.</li>
<li>Checks for exact matches before moving to broader keyword analysis, ensuring precision.</li>
<li>Enables adaptability toward user phrasing, simplifying theme selection processes.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<ul>
<li>Returns a comprehensive list of available themes, guiding adventurers in their decisions.</li>
<li>Simplifies access by encapsulating theme retrieval logic within one function.</li>
<li>Works seamlessly with downstream operations like display formatting and validation.</li>
<li>Enables dynamic integration into Codethoria‚Äôs magical adventure selection process.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function formatThemeOption(theme: ThemeDefinition): string {
  return `${theme.emoji} **${theme.id}. ${theme.displayName}** - ${theme.description}`;
}
</code></pre>
<ul>
<li>Formats theme properties into a visually appealing structure for quest UI.</li>
<li>Includes textual descriptions, unique emojis, and identifiers for seamless decision-making.</li>
<li>Facilitates user engagement by making thematic options more accessible and attractive.</li>
<li>A vital component in Codethoria‚Äôs interface for presenting adventure themes.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> The Sacred Spells of Configuration</h3>
<p>The <code class="inline-code">config.ts</code> file serves as the sacred spellbook outlining foundational constants that define Codethoria‚Äôs operational boundaries. From timeouts to cache settings, these parameters ensure the kingdom‚Äôs adventures proceed smoothly, protecting its cherished harmony from disruptive forces. This repository of constants is intrinsic to the reliability and flow of mythical quests.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Governs the allowable time for generating mystical responses from enchanted language models.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Determines the lifespan of cached resources to optimize system efficiency.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Establishes file size limits to ensure memory stability and quest continuity.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li>Enforces a size constraint on files to prevent excessive memory consumption.</li>
<li>Enables targeted focus on manageable files, improving performance during analysis.</li>
<li>Protects Codethoria‚Äôs system integrity by reducing the likelihood of resource exhaustion.</li>
<li>Represents a foundational safeguard for data consistency and operational harmony.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<ul>
<li>Defines a strict timeout limit, ensuring responsiveness of systems reliant on language models.</li>
<li>Avoids indefinite stalling by terminating requests that exceed specified durations.</li>
<li>Ensures timely magical story generation for uninterrupted quest engagement.</li>
<li>Balances performance and complexity through a well-defined threshold.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = 300000; // 5 minutes
</code></pre>
<ul>
<li>Configures cache duration to optimize resource usage across multiple invocations.</li>
<li>Provides enough lifespan to reuse computation while ensuring cache freshness.</li>
<li>Improves performance for quest-related processes without compromising real-time accuracy.</li>
<li>Plays a pivotal role in maintaining balance between storage efficiency and dynamic data needs.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üìù For theme exploration, map keywords in <code class="inline-code">THEMES</code> to understand their relevance.</li>
<li>üõ†Ô∏è Dive into <code class="inline-code">validateAdventureChoice</code> to hone skills in input sanitization and user experience design.</li>
<li>‚öôÔ∏è Investigate configuration boundaries like <code class="inline-code">MAX_FILE_SIZE_MB</code> to see how memory conservation contributes to system resilience.</li>
</ul>
<hr>
<p>You have successfully illuminated the Chronicles of Configuration and unraveled its sacred spells. Onward, Code Knight, for the next quest beckons!</p>
<p>By the blazing forge of fate and the celestial wisdom of the ancients, thou hast valiantly conquered &#39;The Chronicles of Configuration,&#39; advancing toward the zenith of thy heroic journey‚Äîride forth, Champion of Knowledge, for thy legend shines brighter than the finest stars! ‚ö°üöÄüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>