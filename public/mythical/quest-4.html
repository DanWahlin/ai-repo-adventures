<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Veil of Themes and Boundaries - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Forge of Code</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Veil of Themes and Boundaries</h1>
<hr>
<p>In the mythical realm of Codara, a codex lies untouched that bridges the realms of mystical themes and the boundaries of validation mechanisms. This enchanted tome contains essential wisdom that governs adventures, defines themes, and ensures choices align with the laws of the Forge. Scrawled within are protective incantations to validate inputs and prevent corruption of Codara‚Äôs enchanted system. To wield the full power of storytelling and adventure-crafting, adventurers must unravel intricate configurations and master the art of themes through this legendary codex.  </p>
<p><strong>Adventure Awaits</strong> ‚Äì Untangle the Veil of Themes and Boundaries and seize the codex‚Äôs knowledge for your journey ahead!  </p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:  </p>
<ul>
<li>üîç <strong>The Arcane Binding</strong>: How is the Forge configured to manage timeout values, cache strategies, and limits for adventures?  </li>
<li>‚ö° <strong>The Loom of Themes</strong>: How are themes defined, validated, and parsed to guide adventures, and what patterns emerge in theme matching?  </li>
<li>üõ°Ô∏è <strong>The Spell of Validation</strong>: What mechanisms are in place to validate user inputs like themes, paths, and choices‚Äîand how do they defend Codara‚Äôs system against perilous misuse?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Configuration of Time, Limits, and Settings</h3>
<p>The <code class="inline-code">config.ts</code> file contains critical configuration spells that define timeouts, limits, API keys, and caching strategies. It serves as the foundation upon which the Forge ensures stability and flexibility for Codara‚Äôs heroes. It includes constants for managing interaction with the mystical LLM API and loading configuration based on environmental factors.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures request timeouts for the enchanted story-generation process, ensuring adventures are crafted in a timely manner.  </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines the time-to-live for cached exploration data, balancing memory usage and efficient query responses.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Limits analysis to reasonable file sizes, safeguarding the Forge against memory overload.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: The Sacred Scroll of Themes</h3>
<p>This file houses the sacred definitions and helpers for Codara‚Äôs themes. It includes predefined themes such as ‚ÄúMythical‚Äù and ‚ÄúSpace,‚Äù and facilitates access, validation, and the parsing of themes based on user input.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Represents a collection of all predefined themes, each with attributes like <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">description</code>, and underlying keywords.  </li>
<li><code class="inline-code">getAllThemes</code>: Retrieves a list of all available themes as an array for easy loop traversal and display.  </li>
<li><code class="inline-code">isValidTheme</code>: Guards the kingdom by ensuring only predefined themes are recognized as valid, rejecting impostors or corrupted values.</li>
</ul>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a>: The Enchantment of Validation</h3>
<p>The <code class="inline-code">input-validator.ts</code> file is imbued with spells to validate user inputs such as adventure choices, themes, and file paths. These validation mechanisms prevent unexpected errors and ensure harmony within the Forge‚Äôs operations.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Checks user adventure selections for length, emptiness, and invalid characters, ensuring no mischievous inputs disturb the system.  </li>
<li><code class="inline-code">validateTheme</code>: Ensures themes adhere to sanctified definitions by checking them against the scroll of themes in <code class="inline-code">theme.ts</code>.  </li>
<li><code class="inline-code">validateProjectPath</code>: Processes and sanitizes file paths to prevent unsanctioned intrusions or use of dangerous terminologies.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation  
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // Configurable via env  
export const MAX_FILE_SIZE_MB = 10; // Prevent memory overload with file limits  
</code></pre>
<ul>
<li>Configures essential timeouts (<code class="inline-code">LLM_REQUEST_TIMEOUT</code>) to manage long-running API processes.  </li>
<li>Caching mechanisms (<code class="inline-code">REPOMIX_CACHE_TTL</code>) reduce redundant recalculations and optimize memory use.  </li>
<li>File size caps (<code class="inline-code">MAX_FILE_SIZE_MB</code>) ensure stability by excluding oversized files from the enchanted processes.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {  
  SPACE: {  
    id: 1,  
    key: &#39;space&#39;,  
    displayName: &#39;Space Exploration&#39;,  
    emoji: &#39;üöÄ&#39;,  
    description: &#39;Journey through cosmic codebases where data flows like stardust&#39;,  
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;]  
  },  
  MYTHICAL: {  
    id: 2,  
    key: &#39;mythical&#39;,  
    displayName: &#39;Enchanted Kingdom&#39;,  
    emoji: &#39;üè∞&#39;,  
    description: &#39;Explore magical realms where functions are powerful spells&#39;,  
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;castle&#39;]  
  }  
} as const;  

export function isValidTheme(theme: string): theme is AdventureTheme {  
  return THEMES_ARRAY.some(t =&gt; t.key === theme);  
}  

export function getAllThemes(): ThemeDefinition[] {  
  return THEMES_ARRAY;  
}  
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code>: Defines thematic elements, emphasizing flexibility with detailed metadata like <code class="inline-code">keywords</code>.  </li>
<li><code class="inline-code">isValidTheme</code>: Ensures user theme selections are verified against recognized keys.  </li>
<li><code class="inline-code">getAllThemes</code> provides a concise way to fetch all theme definitions for display or validation.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/input-validator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/input-validator.ts</code></a></h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {  
  if (!input?.trim()) {  
    throw new Error(&#39;Choice is required&#39;);  
  }  
  if (input.length &gt; 200) {  
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);  
  }  
  return input.trim();  
}  

export function validateTheme(input: string): string {  
  if (!input?.trim()) {  
    throw new Error(&#39;Theme is required&#39;);  
  }  
  const normalized = input.toLowerCase().trim();  
  const parsedTheme = parseTheme(normalized);  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {  
    throw new Error(`Invalid theme`);  
  }  
  return parsedTheme;  
}  

export function validateProjectPath(input?: string): string {  
  if (!input?.trim()) {  
    return process.cwd();  
  }  
  if (input.length &gt; 500) {  
    throw new Error(&#39;Project path too long&#39;);  
  }  
  return input.trim();  
}  
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures adventure names are sanitized, preventing command disruptions.  </li>
<li><code class="inline-code">validateTheme</code>: Works in tandem with <code class="inline-code">theme.ts</code> to vet and parse theme inputs via keywords or IDs.  </li>
<li><code class="inline-code">validateProjectPath</code>: Guards against invalid paths, providing fallbacks to the current directory.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>To master theme management, study how <code class="inline-code">THEMES</code> uses arrays and keywords for flexibility.  </li>
<li>Remember that <code class="inline-code">input-validator.ts</code> underpins all user interaction with strong fault tolerance.  </li>
<li>Apply the cached configurations wisely by observing <code class="inline-code">REPOMIX_CACHE_TTL</code> patterns.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the enchanted Forge. Your legend grows with every line unraveled!</p>
<p>Upon shattering the enigmatic Veil of Themes and Boundaries, heralding wisdom into the celestial tome of your journey, you stand triumphant as a beacon of valor‚Äîcharging forward with 60% of the kingdom‚Äôs fiery quests now conquered! ‚ö°üíéüó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>