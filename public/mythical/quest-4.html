<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Enchanted Configuration - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Repository and the Chronicles of Code</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Enchanted Configuration</h1>
<hr>
<p>In the mythic kingdom of Codemyr, the Enchanted Repository whispers tales of imbalance in the very foundation of its sacred code constructs. To restore stability to the great codic castles, you must now face the &quot;Enchanted Configuration.&quot; This file holds the mystic constants and forbidden thresholds that shape the adventures of the coderealms. Heroes traverse this scroll to ensure coherence across the kingdom‚Äôs magical energies. Brace yourself‚Äîevery line may conceal a latent spell or a lurking bug!</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Stability Seals</strong>: How does the configuration ensure timeouts and resource limits are enforced across the system? </li>
<li>‚ö° <strong>Source of Truth</strong>: What mechanisms guarantee that core constants like themes and API models are consistently applied? </li>
<li>üõ°Ô∏è <strong>Defensive Charms</strong>: What error-prevention enchantments are embedded within this configuration, and how do they protect the process?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Central configuration constants for the adventure system</h3>
<p>This file acts as the sacred foundation where constants, environment variables, and limits are defined. It governs how the system interacts with external libraries, restricts resource usage, avoids potential pitfalls like unbounded recursion, and ensures cohesive gameplay. The adventure itself is deeply tied to these parameters, making it indispensable for a stable system.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Governs the allotted time for obtaining responses from the mystical language model (LLM), preventing indefinite waiting. </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines how long analysis results are stored in the enchanted cache, balancing efficiency and freshness of retrieved data.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Establishes a strict boundary for code file sizes, safeguarding against memory exhaustion and runtime failures.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
export const LLM_CACHE_TTL = 300000; // 5 minutes
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
export const REPOMIX_SUBPROCESS_TIMEOUT = parseInt(process.env.REPOMIX_SUBPROCESS_TIMEOUT || &#39;120000&#39;); // 2 minutes, configurable via env
</code></pre>
<ul>
<li>These constants govern durations for timeout-related operations:<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> establishes a ceiling for requests made to the omnipotent LLM, preserving responsiveness. </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> and <code class="inline-code">LLM_CACHE_TTL</code> strike a delicate balance between reusability of prior data and its temporal specificity. </li>
<li><code class="inline-code">REPOMIX_SUBPROCESS_TIMEOUT</code> ensures background tasks cannot linger unchecked.</li>
</ul>
</li>
<li>Environment variables provide the flexibility to customize these absolute limits without altering the base code.</li>
<li>Each value is tuned to maintain harmony between performance and reliability, crucial for sustaining Codemyr‚Äôs stability.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const MAX_SCAN_DEPTH = 3; // Maximum directory depth to prevent infinite recursion and keep analysis focused
export const KEY_SOURCE_FILES = 10; // Number of key files to highlight in adventure generation
</code></pre>
<ul>
<li>These limits regulate the kingdom‚Äôs vast repositories of files:<ul>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> enforces a maximum traversal size, avoiding oversize files that could endanger runtime efficiency. </li>
<li><code class="inline-code">MAX_SCAN_DEPTH</code> caps the exploration depth to prevent infinite loops through unwieldy directory structures.</li>
<li><code class="inline-code">KEY_SOURCE_FILES</code> aligns with adventure generation mechanics, limiting the number of files emphasized in quests to preserve focus.</li>
</ul>
</li>
<li>These boundaries protect both the Enchanted Repository and the adventurer from floods of unnecessary data.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const DEFAULT_THEME = &#39;space&#39; as const;
export const PROMPT_PATHS = {
  STORY_GENERATION: &#39;src/prompts/story-generation-prompt.md&#39;,
  QUEST_CONTENT: &#39;src/prompts/quest-content-prompt.md&#39;,
  COMPLETION: &#39;src/prompts/completion-prompt.md&#39;,
  THEME_GUIDELINES: &#39;src/prompts/theme-guidelines.json&#39;
} as const;
</code></pre>
<ul>
<li><code class="inline-code">DEFAULT_THEME</code> ensures a fallback selection in case users fail to specify a preferred mythical motif.</li>
<li>The <code class="inline-code">PROMPT_PATHS</code> preserve the connectivity between quest generation prompts and their respective scrolls. This guarantees the suite of quests flows seamlessly under the guidance of properly structured instructions.</li>
<li>Immutable configurations, signified by <code class="inline-code">as const</code>, prevent unintended overwrites, thus fortifying Codemyr‚Äôs mystical stability against user error or malicious tampering.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When deciphering values such as <code class="inline-code">LLM_TEMPERATURE</code> or timeouts, note how environment variables allow flexibility in production environments without modifying source code directly.</li>
<li>Observe how the structure prioritizes minimalism by avoiding nested object configurations‚Äîa technique meant to increase readability and ease debugging. </li>
<li>Look for constants tied to error messages in the configuration file for clues on troubleshooting system errors during runtime.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries in the Enchanted Repository and restore order to Codemyr.</p>
<p>By the luminous grace of the celestial pantheon, your heroic triumph in unraveling the Enchanted Configuration has fortified the realm‚Äôs wisdom and proven your steadfast valor‚Äîmarch onward, illustrious champion, for glory awaits! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>