<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Guild of Interface - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Repository: Chronicles of Code and Magic</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Guild of Interface</h1>
<hr>
<p>In the enchanted Kingdom of Code, the Guild of Interface links adventurers to the Repository of Knowledge‚Äôs power. Known as the Guild of Themes, these masters of aesthetic balance the realms by crafting enchanted themes. Their magic ensures every adventure glimmers with an artistic essence worthy of legend. However, whispers spread that the themes of the Repository grow unstable, blending and colliding chaotically. The chosen architect must journey to the heart of the Guild&#39;s enchanted halls, decode their arcane methods, and stabilize the magical themes that weave the kingdom together.</p>
<h2>Quest Objectives</h2>
<p>As you explore the mystical spellbooks (code) below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Lore Unveiled</strong>: How does the Guild map each magical theme to its unique properties and identifiers?</li>
<li>‚ö° <strong>The Arcane Parser</strong>: How does the Guild decipher raw user inputs and transform them into usable, verified themes?</li>
<li>üõ°Ô∏è <strong>Sanctity of the Realm</strong>: What measures ensure the interface safely and securely validates inputs without harming the Repository?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Mystical Input Validator</h3>
<p>This file contains the foundational incantations for ensuring the safety and clarity of adventurers&#39; inputs. The <code class="inline-code">validateTheme</code> spell stands out as it defends the gates of the Repository from malformed or invalid themes. Leveraging the arcane assistance of helpers like <code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code>, it translates user whims into structured and valid choices. Alongside this, the <code class="inline-code">sanitizeForDisplay</code> enchantment ensures that even the most chaotic inputs are purified for safe rendering, removing any dangerous magical symbols.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateTheme</code>: Deciphers and validates raw theme selection inputs.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleanses inputs of hazardous characters for secure display.</li>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures adventure choices are within acceptable bounds.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Codex of Crafted Themes</h3>
<p>This sacred document houses the Guild‚Äôs definitions of every theme that weaves the Realm of Code. At its core, the <code class="inline-code">THEMES</code> object is the definitive list of all aesthetic styles, from mythical dragon-filled castles to ancient temples of knowledge. Meanwhile, <code class="inline-code">parseTheme</code> functions as a magical decoder, matching user queries to structured themes through a blend of ID matching and keyword searches. Finally, the <code class="inline-code">getFormattedThemeOptions</code> spell elegantly presents the available themes as tantalizing choices, imbued with their unique properties.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: The definitive codification of all adventure themes.</li>
<li><code class="inline-code">parseTheme</code>: Deciphering raw inputs into themed identifiers.</li>
<li><code class="inline-code">getFormattedThemeOptions</code>: Magical presentation of themes for adventurers.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Enchanted Configuration Tuning</h3>
<p>The ancient script of <code class="inline-code">config.ts</code> binds the guidelines governing the Guild of Interface. Here lie parameters controlling the intuitive functioning of the system, such as <code class="inline-code">LLM_REQUEST_TIMEOUT</code> for the spellcasting duration, <code class="inline-code">MAX_FILE_SIZE_MB</code> limiting the scale of knowledge artifacts to prevent magical exhaustion, and error messages safeguarding against unexpected directions. The file also documents paths to essential prompts like <code class="inline-code">THEME_GUIDELINES</code>, ensuring the Guild&#39;s operations align cohesively around consistent values.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: The maximum allowable time for spellcasting ventures.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Boundaries on artifact file sizes to maintain balance.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: The fallback theme in case the chosen aesthetic falters.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>The <code class="inline-code">validateTheme</code> spell transforms chaotic user intentions into structured magic by comparing input against known themes.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>The <code class="inline-code">sanitizeForDisplay</code> enchantment purifies malicious symbols, ensuring the code base remains secure against dark forces.</p>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>The <code class="inline-code">validateAdventureChoice</code> incantation checks the adventure choice&#39;s validity to maintain harmony within the Repository.</p>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Additional Themes Elided
} as const;
</code></pre>
<p>The <code class="inline-code">THEMES</code> list codifies each adventure‚Äôs essence, pairing properties with keywords adventurers might intuitively know.</p>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<p>The <code class="inline-code">parseTheme</code> decipherer matches inputs to themes using intuitive checks like IDs or keywords.</p>
<pre><code class="language-typescript">export function getFormattedThemeOptions(): string {
  return getAllThemes()
    .sort((a, b) =&gt; a.id - b.id)
    .map(formatThemeOption)
    .join(&#39;\n&#39;);
}
</code></pre>
<p>The <code class="inline-code">getFormattedThemeOptions</code> function is the treasure map, organizing theme data into alluring and readable displays.</p>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000;
export const MAX_FILE_SIZE_MB = 10;
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<p>These configuration spells ensure safe and consistent Realm operations, from limiting query durations to defining the fallback theme.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">validateTheme</code> mechanism to understand how user inputs are safeguarded.</li>
<li>Trace the <code class="inline-code">parseTheme</code> logic to see how inputs are translated into magical identifiers.</li>
<li>Explore <code class="inline-code">THEMES</code> to grasp how the Guild structures its codified priorities.</li>
</ul>
<hr>
<p>With your newfound knowledge, the Guild of Interface grows stable, and harmony returns to the Repository. The Kingdom of Code hails your brilliance!</p>
<p>By the grace of the celestial forge and the triumph of your heroic resolve, the Guild of Interface bows in reverence to your mastery, with 60% of the realm‚Äôs quests now emblazoned upon your legendary journey‚Äîglory awaits, noble champion! ‚ö°üíé‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>