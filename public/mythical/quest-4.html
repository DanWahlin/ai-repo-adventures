<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Codex of Magical Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Repository Chronicles</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Codex of Magical Themes</h1>
<hr>
<p>Within the hallowed chamber of Configuration Keep, the mystical Codex of Magical Themes holds dominion. Brave adventurers such as yourself seek this enchanted tome to master its power: the weaving of kingdoms, galaxies, and ancient ruins into grand adventures. Yet its secrets are safeguarded within three enchanted scrolls ‚Äì validation, thematic harmony, and configuration. You must uncover their lore, decipher their magical spells, and align their forces to chart the path to Reposithia&#39;s ultimate theme mastery.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Theme Harmony</strong>: How does the <code class="inline-code">THEMES</code> structure define and organize the enchanted realms of adventure?  </li>
<li>‚ö° <strong>Validation Rituals</strong>: What patterns and checks are used by <code class="inline-code">validateTheme</code> and <code class="inline-code">validateAdventureChoice</code> to ensure only proper inputs are accepted?  </li>
<li>üõ°Ô∏è <strong>Safety Mechanisms</strong>: How are project paths sanitized and safeguarded against invalid or dangerous input?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> The Codex of Themes</h3>
<p>The <code class="inline-code">theme.ts</code> file serves as the sacred parchment for defining and organizing all mythical themes within the adventure system. Each theme is represented through the <code class="inline-code">ThemeDefinition</code> structure, ensuring attributes such as <code class="inline-code">id</code>, <code class="inline-code">displayName</code>, and <code class="inline-code">keywords</code> harmonize the magic that lies within. To facilitate user navigation, helper spells like <code class="inline-code">getThemeById</code> and <code class="inline-code">parseTheme</code> allow adventurers to connect inputs to predefined realms, ensuring only valid paths are traversed. The inclusion of the <code class="inline-code">isValidTheme</code> and keyword matching ensures the magic keys unlock only the proper kingdoms.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: The gateway to all mythical themes of Reposithia.  </li>
<li><code class="inline-code">isValidTheme</code>: Validation of a theme key through magical safeguards.  </li>
<li><code class="inline-code">parseTheme</code>: Spell parsing inputs into corresponding adventure realms.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> The Scribe of Validation</h3>
<p>In this enchanted scroll lies the arcane knowledge of input validation, ensuring only proper and noble choices are allowed into Reposithia‚Äôs quest system. The functions like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateTheme</code> enforce strict rules for trimming, cleaning, and verifying user inputs, rejecting any unworthy entries. The <code class="inline-code">sanitizeForDisplay</code> function takes extra care, ensuring even the most dangerous phrases are purified before display, protecting the entire kingdom from malevolent forces.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures all user choices are concise and befitting a knight of valor.  </li>
<li><code class="inline-code">validateTheme</code>: Guards against input errors and selects the proper enchanted kingdom based on user wishes.  </li>
<li><code class="inline-code">sanitizeForDisplay</code>: Neutralizes harmful characters for safe visualization.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> The Kingdom‚Äôs Arcane Blueprint</h3>
<p>The <code class="inline-code">config.ts</code> file is the foundation stone of Reposithia‚Äôs adventure system, containing system-wide rules, limits, and magical constants. From mystical cache durations to the safeguarding of file sizes, these spells govern how adventures are processed across magical and mortal realms alike. Constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_CACHE_TTL</code> define the system‚Äôs operational limits, while error messages like <code class="inline-code">THEME_INVALID</code> provide clarity when adventurers stray from their mission. It is through these runes the knight can understand the scales balancing order and exploration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Governs the runtime limits for story generation via magic.  </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines caching behavior for preventing unnecessary spell repetition.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Protects against exhaustion by limiting file sizes for quests.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: { ... },
  MYTHICAL: { ... },
  ANCIENT: { ... },
  DEVELOPER: { ... },
  CUSTOM: { ... }
};
</code></pre>
<p>Like a scroll holding the wisdom of kingdoms, the <code class="inline-code">THEMES</code> structure grants adventurers access to vastly different realms based on their desires.</p>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<p>Through this spell, only valid magic keys unlock the gateways to adventure realms.</p>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  ...
  return null;
}
</code></pre>
<p>The even-tempered parsing ritual turns raw input into a harmonized theme for adventure.</p>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) throw new Error(&#39;Choice is required&#39;);
  if (input.length &gt; 200) throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  return input.trim();
}
</code></pre>
<p>This spell ensures adventurers present their choices clearly, without excess or ambiguity.</p>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  ...
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    ...
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<p>Just as knights prepare for battle, input verification ensures valid themes align with the Codex.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  ...
  return input.replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;).replace(/\s+/g, &#39; &#39;).trim().slice(0, maxLength);
}
</code></pre>
<p>This protective spell cleanses dangerous inputs, neutralizing threats to quest messages.</p>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000;
</code></pre>
<p>This defines the upper limit for invoking spells that shape story generation.</p>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = 300000;
</code></pre>
<p>Within these bounds, cached spells prevent repetitive enchantments.</p>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10;
</code></pre>
<p>Like a wise mage protecting their tome, this function ensures files remain manageable for LLM processing.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Refer to the <code class="inline-code">parseTheme</code> function when handling user inputs into adventure kingdoms.  </li>
<li>Use <code class="inline-code">THEMES</code> for inspiration in organizing additional adventure content.  </li>
<li>Remember: Input validation protects the realms from dangers hidden in raw entries.</li>
</ul>
<hr>
<p>With the Codex of Magical Themes unravelled, you‚Äôve lit the flame of comprehension! Press onward, champion of Reposithia!</p>
<p>By the enchanted quill and the wisdom of the Codex, your valorous mastery over magical themes has illuminated the realm‚Äîpress onward, noble champion, for the stars of victory await! ‚ö°üíé‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>