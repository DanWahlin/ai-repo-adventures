<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Tome of Everlasting Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Kingdom of Code</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Tome of Everlasting Themes</h1>
<hr>
<p>In the magical kingdom of Codethria, where castles are constructed with spells of logic and knights embark on algorithmic quests, the harmonious flow of enchanted themes has been disrupted. The theme-wielding wizards have been thrown into chaos as the mechanisms behind their mystical powers falter. The Council of Developers has traced the disturbance to the sacred Tome of Everlasting Themes, a compendium of all thematic magic. You must venture forth and decipher the enigmatic incantations within the Tome to restore balance to Codethria&#39;s thematic realms.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>‚ú® <strong>Theme Alignment</strong>: How are themes structured and used to provide options for the adventures?</li>
<li>üîÆ <strong>Validation Rituals</strong>: What methods ensure theme and input selections are valid, and how do they prevent errors?</li>
<li>üè∞ <strong>Configuration Foundations</strong>: How does the configuration system shape the quest experience and maintain system integrity?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Input Validator Functions</h3>
<p>The <code class="inline-code">input-validator.ts</code> file is a crucial tool in Codethria&#39;s magical arsenal, used to fortify critical paths against invalid user actions. This script houses spell-like validation methods focused on ensuring proper input from adventurers and preventing corruption in user-provided data. From refining adventure choices to validating themes and project paths, this file safeguards the enchanted journey of every knight in their quest.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures adventurers provide a meaningful and appropriately sized adventure choice string.</li>
<li><code class="inline-code">validateTheme</code>: Normalizes and validates a theme input against the list of available themes, preventing disruptive invalid selections.</li>
<li><code class="inline-code">validateProjectPath</code>: Safeguards the sanctity of file paths provided by the user, preventing unauthorized or invalid operations.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Cleans potentially hazardous inputs to ensure safe display, avoiding issues like style-breaking characters.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<ul>
<li>Ensures adventurers provide necessary and concise input for their adventure selection.</li>
<li>Guards against excessively long, empty, or improperly formatted inputs.</li>
<li>Establishes a pattern for essential validation before further processing.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<ul>
<li>Ensures only valid themes from the sacred theme repository are accepted.</li>
<li>Uses parsing and validation spells (<code class="inline-code">parseTheme</code> and <code class="inline-code">isValidTheme</code>) to interpret and verify user input.</li>
<li>Prevents unintentional disruptions by providing a list of all valid themes for reference.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li>Converts potentially hazardous or unwieldy input into a form suitable for display within Codethria&#39;s magical scripts.</li>
<li>Implements security patterns by removing problematic characters.</li>
<li>Limits the output length to avoid overflow, particularly critical for display-oriented spells.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Management</h3>
<p>This file serves as the Tome of Everlasting Themes itself, housing the entire codex of themes available in the kingdom. It defines theme structures, provides access utilities, and enables proper interaction with the mystical theme spells. Through mutual agreements between functions, it ensures adventurers partake in their adventures using only valid and meaningful themes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> and <code class="inline-code">ThemeDefinition</code>: Core structure defining each theme and its key properties for adventurers to explore.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the roster of all available themes, ensuring the Tome is accessible in its entirety.</li>
<li><code class="inline-code">parseTheme</code>: Analyzes and interprets inputs to identify matching themes, even with vague or partial descriptions.</li>
<li><code class="inline-code">isValidTheme</code>: Confirms whether a given theme key is valid, protecting against invalid thematic disruptions.</li>
</ul>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;
</code></pre>
<ul>
<li>Enumerates the available themes, carefully structured as immutable blocks of data.</li>
<li>Each theme captures the imagination with concise properties like <code class="inline-code">emoji</code>, <code class="inline-code">description</code>, and <code class="inline-code">keywords</code>.</li>
<li>Establishes the foundation for theme exploration throughout the quest system.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<ul>
<li>Deciphers user-provided inputs to identify appropriate themes.</li>
<li>Investigates ambiguous or approximate inputs via keywords and numerical IDs.</li>
<li>Unlocks flexibility in theme interaction, allowing for varied input styles.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Validates whether a theme exists in the Tome&#39;s sacred repository.</li>
<li>Defends against invalid theme disruptions.</li>
<li>Staples theme reliability as a central pillar of the adventure system.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Adventure Configuration</h3>
<p>The <code class="inline-code">config.ts</code> file provides the mystical underpinnings for Codethria&#39;s system, ensuring that each spell, invocation, and journey occurs within a well-structured framework. It governs the limits, parameters, and default settings that power the kingdom‚Äôs operations.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Regulates the maximum duration for invoking magical LLM spells, ensuring timely responses.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Determines the longevity of cached mystical data stored during adventures.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Defines the maximum size of scrolls that can be analyzed, balancing performance and scope.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<ul>
<li>Configures the timeout limit for generating large-scale mystic outputs.</li>
<li>Balances user expectations with computational resource constraints.</li>
<li>Demonstrates the importance of fine-tuned control in highly intricate operations.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<ul>
<li>Powers caching mechanisms, minimizing repetitive operations during quests.</li>
<li>Promotes efficiency through built-in customization options.</li>
<li>Reflects the emphasis on adaptability in Codethria‚Äôs enchanted frameworks.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<ul>
<li>Prevents overloading the kingdom‚Äôs magical resources with excessively large scrolls.</li>
<li>Ensures that the adventure remains focused on manageable portions of data.</li>
<li>Addresses practical considerations to enhance the overall quest experience.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">validateTheme</code> function to better understand theme processing logic.</li>
<li>Explore theme definitions to find new combinations of keywords used for adventurous quests.</li>
<li>Refer to <code class="inline-code">config.ts</code> to adjust parameters for an optimal Codethria experience.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of Codethria‚Äôs enchanted lands!</p>
<p>The gods of wisdom and insight now weave your name into the stars, valiant seeker, for unveiling the Tome of Everlasting Themes is a triumph worthy of legends‚Äîforward, to ever brighter victories! ‚≠ê‚ö°üöÄ</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>