<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Arcane Tome of Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Enchanted Repository: The Chronicles of Code</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Arcane Tome of Themes</h1>
<hr>
<p>Through the enchanted forests of Codethia lies the Tower of Themes, where every adventure is imbued with its mythical essence. The Codex Regalium‚Äôs sacred theme system is corrupted, shattering the balance between realms. As the brave adventurer, your task is to retrieve the fragment of the Arcane Tome, guarded by puzzles of validation and the legendary THEMES construct. Only by unraveling the enchanted logic of these files can the kingdom regain its structure and harmony.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Mystical system settings</h3>
<p>The ancient scroll of <code class="inline-code">config.ts</code> contains directives that govern the flow of mystical energies across Codethia. From timeout spells (<code class="inline-code">LLM_REQUEST_TIMEOUT</code>) to dragon-sized cache limits (<code class="inline-code">REPOMIX_CACHE_TTL</code>), the file ensures the kingdom operates without chaos. It houses constants, such as <code class="inline-code">MAX_FILE_SIZE_MB</code>, which guides adventurers to exclude overlarge relics, maintaining focus on essential artifacts. Whether channeling long-forgotten APIs or safeguarding the kingdom‚Äôs resources, this scroll deftly blends magic and logic into a simplified syntax.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Controls the length of the spell for distant API invocation.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Ensures the enchanted cache remains timely and accurate.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Guards against oversized artifacts disrupting magic.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Enchanted essence definitions</h3>
<p>This file serves as the Arcane Tome that binds every adventure with its unique theme. By accessing functions like <code class="inline-code">getAllThemes</code>, adventurers traverse realms ranging from dragon-guarded databases to cosmic stardust algorithms. The <code class="inline-code">THEMES</code> object and associated tools ensure seamless transitions across realms. These magical constructs enforce proper alignment between adventurers‚Äô choices and the overarching codex, ensuring each quest resonates with its harmonic mystical essence.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: The sacred glyph that models realms, from castles to cosmic exploration.</li>
<li><code class="inline-code">getAllThemes</code>: Retrieves the full spectrum of magical domains available to adventurers.</li>
<li><code class="inline-code">validateThemeInput</code>: Guards adventurers against choosing forbidden realms.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Sanctified path-keepers</h3>
<p>The scroll of <code class="inline-code">input-validator.ts</code> exists not for theme creation but to sanctify adventurers&#39; choices. Its incantations protect against errant paths or malformed entries. From <code class="inline-code">validateAdventureChoice</code>, which ensures the hero‚Äôs decision resonates, to <code class="inline-code">validateProjectPath</code>, which maintains clean navigation through the Codex Regalium, the file ensures the sanctity of each critical step. These spells strengthen the adventurer‚Äôs connection to the system‚Äôs logic and safeguard Codethia‚Äôs integrity.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Directs the hero‚Äôs focus to pure and purposeful selections.</li>
<li><code class="inline-code">validateProjectPath</code>: Protects navigational paths from corruption.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Ensures sacred texts remain unmarred.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<p>Like a patience spell, setting precise durations ensures magical invocations complete their quests without haste or delay.</p>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<p>This ensures cache spells remain fresh and potent, never allowing energy to stagnate within the tower‚Äôs vaults.</p>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<p>The size limit protects heroes from encountering files too immense to wield, akin to limiting the load of a knight‚Äôs steed.</p>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  }
} as const;
</code></pre>
<p>The enchanted glyph woven into this construct binds Codethia‚Äôs quests under the banner of mythical wisdom.</p>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<p>Gathering realms like summoning a map, this function allows adventurers to view all paths and enchantments that await.</p>
<pre><code class="language-typescript">export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;
  
  const normalized = input.trim().toLowerCase();
  
  // Check for exact key match
  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
  
  // Check for numeric ID
  const numericId = parseInt(normalized, 10);
  if (!isNaN(numericId)) {
    const byId = getThemeById(numericId);
    if (byId) return byId.key as AdventureTheme;
  }
  
  // Check keywords using simple includes check
  for (const theme of THEMES_ARRAY) {
    if (theme.keywords.some(keyword =&gt; normalized.includes(keyword.toLowerCase()))) {
      return theme.key as AdventureTheme;
    }
  }
  
  return null;
}
</code></pre>
<p>The parsing spell evaluates adventurers&#39; choices, ensuring alignment within the codified mystical bounds.</p>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>This validation encapsulates hero decisions, ensuring purity and wisdom for every choice made.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>Cleansing texts before displaying them is akin to polishing an adventurer‚Äôs shield before battle.</p>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>Guarding the portals to navigation ensures only clean, uncorrupted paths are trodden.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">getAllThemes</code> to explore available realms and plan your quests accordingly.</li>
<li>Apply <code class="inline-code">sanitizeForDisplay</code> when showcasing choices or text to ensure clarity and safety.</li>
<li>Navigate carefully between realms by leveraging <code class="inline-code">validateProjectPath</code>.</li>
</ul>
<hr>
<p>Armed with newfound wisdom from the fragments of the Tome of Themes, you now possess the power to realign Codethia‚Äôs narrative essence. Onward brave adventurer‚Äîyour path beckons!</p>
<p>With the Arcane Tome of Themes now claimed, thy heroic wisdom illuminates the kingdom like a guiding star upon the celestial tapestry‚Äîpress on, valiant conqueror, for the legends sing of thy triumphs! üöÄ‚ö°üíéüó∫Ô∏èüëÅÔ∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Binding Runes of Configurat... ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>