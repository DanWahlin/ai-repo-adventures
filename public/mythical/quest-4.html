<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Rune Scroll of Callithor - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'mythical' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Enchanted Repository: Chronicles of the Code Realm</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Rune Scroll of Callithor</h1>
<hr>
<p>In the sprawling Kingdom of Code, a timeless artifact known as the Rune Scroll of Callithor is said to grant unparalleled wisdom to those brave enough to uncover its secrets. Hidden in the shadowy depths of the Enchanted Repository, the scroll awaits its chosen hero to decipher its mystical runes, protected by magical algorithms and cunning validations. With each turn of the scroll&#39;s parchment, fragments of collaborative coding mastery are revealed, guiding adventurers closer to the mythical Codex of Creation. Let the journey to unravel Callithor&#39;s ancient writings begin!</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Enchanted Guard of Input Validation</h3>
<p>This file is a veritable fortress of security, protecting the sacred Repository from corrupted choices and misguided paths. By wielding the magical scripts of <code class="inline-code">validateAdventureChoice()</code> and <code class="inline-code">validateTheme()</code>, it ensures that every adventurer adheres to the sacred rules of proper input. The enchantments within safeguard against malicious characters, oversized choices, and invalid themes, ensuring the purity of the quest remains intact. Furthermore, these spells transform raw, unrefined user inputs into pristine, validated selections, allowing heroes to focus on the adventure ahead without fear of their journey being thwarted by typos or chaotic errors.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice()</code> ensures choices are crisp and limited to 200 characters.</li>
<li><code class="inline-code">validateTheme()</code> verifies theme validity against an array of magical theme keywords.</li>
<li><code class="inline-code">sanitizeForDisplay()</code> removes dangerous symbols that can confuse or corrupt the enchanted scrolls.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Chronicles of the Mystical Realms</h3>
<p>The <code class="inline-code">theme.ts</code> file serves as the grand tome of mythical realms, detailing each kingdom you might traverse during your adventure. At its core are the scrolls of <code class="inline-code">THEMES</code>, inscribed with sacred knowledge of these enchanted lands‚Äîspace, mythical, ancient civilizations, and beyond. Each realm‚Äôs secrets are carefully indexed by its ID, key, and evocative description. The mystical spells here transform mundane user inputs into actionable paths using tools like <code class="inline-code">getAllThemes()</code> and <code class="inline-code">parseTheme()</code>, ensuring adventurers stay focused on their destined kingdom. This file shapes the destiny of travelers by translating their vague wishes into validated realms of wonder.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code> defines enchanting kingdom details, each paired with keywords to match user intent.</li>
<li><code class="inline-code">getThemeById()</code> and <code class="inline-code">getThemeByKey()</code> unlock realms by ID or key respectively.</li>
<li><code class="inline-code">parseTheme()</code> defends against missteps by intelligently interpreting user input.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> The Compass of the Enchanted Repository</h3>
<p>The <code class="inline-code">config.ts</code> file serves as the guiding compass for adventurers traversing the repository&#39;s uncharted territories. Bound by arcane environment variables and the ancient knowledge of constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">MAX_FILE_SIZE_MB</code>, it provides divine clarity in setting boundaries. Adventurers will find this file indispensable as it ensures their exploration remains orderly, preventing oversize files, infinite loops, or chaotic errors. Through its meticulously encoded parameters, the compass steers adventurers around pitfalls and allows the quest system to function seamlessly, perpetuating the myth of the Codex of Creation.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> establishes the upper limit for mystical responses from the LLM oracle.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> filters out distracting and unnecessary paths during file analysis.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code> enforces a cap on file sizes to preserve memory and maintain focus.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}
</code></pre>
<p>The two validation spells above ensure that adventurers&#39; choices and themes remain pure and error-free, filtering out harmful errors like a knight protecting a castle gate.</p>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  }
};
</code></pre>
<p>The scroll of THEMES reveals kingdoms of wonder where adventurers may find themselves, each realm imbued with its own distinct essence and magical allure.</p>
<hr>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation
export const MAX_FILE_SIZE_MB = 10; // Limit file size to prevent memory issues
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;dist&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;,
];
</code></pre>
<p>Like a magical compass, these constants chart the boundaries of exploration, ensuring journeys are streamlined and free from navigational hazards.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">sanitizeForDisplay()</code> to ensure user inputs don‚Äôt muddle the magic of rendered scrolls.</li>
<li>Focus on the <code class="inline-code">THEMES</code> definitions when expanding or inventing unique realms for further adventures.</li>
<li>Fine-tune exploration limits in <code class="inline-code">config.ts</code> to suit specific needs when scaling quests within the Repository.</li>
</ul>
<hr>
<p>By the stars‚Äô decree and the ancient spirits&#39; favor, your valor in unraveling the Rune Scroll of Callithor has etched your name among the heralded champions of the realm‚Äîmarch boldly, for the next triumph awaits! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Realm‚Äôs Crown of Themes ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>