<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Decode the Ancient Runes of Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Chronicles of the Enchanted Codebase</a>
            </div>
            <div class="nav-middle">
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="../index.html" class="nav-link">Change Theme</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Decode the Ancient Runes of Configurations</h1>
<hr>
<p>In the magical Kingdom of Codexia, the Repository of Infinite Quests thrives on an intricate matrix of enchanted scripts. These scrolls are guarded by mystical runes known as configurations, empowering the repository to weave elaborate adventures for all heroes. However, a dark pall threatens the land‚Äîthe ancient runes have become unstable, and their meaning obscured by the passage of time. The Kingdom calls upon you, Knight of Codexia, to unravel the secrets of configurations and restore stability to this vital magic. Your journey will require precision, insight, and a deep sense of purpose.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Rune Analysis</strong>: How do the configuration constants interact with the broader quest-generation system to ensure functionality?</li>
<li>‚ö° <strong>Theme Augmentation</strong>: What mechanisms support adding new themes to the enchanted adventure system?</li>
<li>üõ°Ô∏è <strong>Validation Safeguards</strong>: What measures ensure input data is sanitized and error-free within the rune definitions?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration runes of the Repository of Infinite Quests</h3>
<p>This file encapsulates the core setup for Codexia‚Äôs magical configurations. It defines constants that dictate the boundaries of the adventure system, including API settings, theme selection limits, and memory safeguards. These constants form the backbone that supports all quests and ensures the repository operates within predefined bounds. By examining <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">IGNORE_PATTERNS</code>, among other configuration runes, warriors can maintain control over the adventure system‚Äôs mystical workings.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the maximum time allowed for magical prompts to interact with the LLM spell engine.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Prevents forbidden regions (e.g., node_modules) from being inadvertently scanned.</li>
<li><code class="inline-code">DEFAULT_THEME</code>: Sets the default adventure realm, ensuring seamless initialization for heroes embarking on their quests.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Ancient definitions of mythical realms</h3>
<p>The <code class="inline-code">theme.ts</code> file defines the enchanted kingdoms and their meta-properties, forming the basis for adventurous journeys. It provides tools to validate realms, parse their identifiers, and structure them into user-friendly formats. The <code class="inline-code">THEMES</code> constant enumerates all mythical domains‚Äîeach with unique attributes‚Äîand accompanying helper functions, such as <code class="inline-code">getAllThemes</code> and <code class="inline-code">isValidTheme</code>, ensure secure transitions between realms.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Preserves ancient definitions of all Codexia kingdoms, enabling dynamic adventure generation.</li>
<li><code class="inline-code">getAllThemes</code>: Enumerates all kingdoms and transforms them into iterable structures for application use.</li>
<li><code class="inline-code">isValidTheme</code>: Determines rune validity, safeguarding adventurers from stepping into uncharted or erroneous realms.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Enforcing purity in adventure initialization</h3>
<p>This file guards Codexia‚Äôs repository with strict validation spells. <code class="inline-code">validateAdventureChoice</code> purifies hero input to ensure quests align with their desires without introducing chaos. Meanwhile, <code class="inline-code">validateTheme</code> checks proposed realms against Codexia‚Äôs known domains, catching invalid attempts before they unravel the system. Together, these spells prevent errors, promote safety, and ensure the adventure scroll remains unmarred.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates hero selections to ensure they meet strict rules without unwanted anomalies.</li>
<li><code class="inline-code">validateTheme</code>: Cross-references theme choices against layered definitions in <code class="inline-code">theme.ts</code> to prevent invalid realm entry.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Ensures text echoes in its purest form, removing harmful or malformed characters.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">// Timeout for quest generation requests
export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts

// Directory patterns ignored during scans
export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.next&#39;,
  &#39;.nuxt&#39;,
  &#39;dist&#39;,
  &#39;build&#39;,
  &#39;coverage&#39;,
  &#39;.nyc_output&#39;,
  &#39;logs&#39;,
  &#39;*.log&#39;,
  &#39;.env&#39;,
  &#39;.DS_Store&#39;,
  &#39;Thumbs.db&#39;,
] as const;

// Default realm for adventurers
export const DEFAULT_THEME = &#39;space&#39; as const;
</code></pre>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code> enforces responsiveness, ensuring quests complete before hero frustration.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code> strategically avoids non-magical files, maintaining focus on enchanted source realms.</li>
<li><code class="inline-code">DEFAULT_THEME</code> provides stability by rooting adventures in a predefined, universally accepted realm.</li>
</ul>
<hr>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">// Ancient kingdoms preserved in runic format
export const THEMES = {
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  // Other domains omitted for brevity
} as const;

// Fetch all themes as structured legacy data
export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}

// Validate the chosen theme for its validity
export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li><code class="inline-code">THEMES</code> defines the enchanted domains and their meta-properties for quest generation.</li>
<li><code class="inline-code">getAllThemes</code> provides structured lists for easy iteration or display in UI contexts.</li>
<li><code class="inline-code">isValidTheme</code> ensures adventurer choices correspond to real domains, preventing instability.</li>
</ul>
<hr>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">// Validates hero choice for quest entrance
export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}

// Checks theme against Codexia‚Äôs known domains
export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  
  return parsedTheme;
}

// Purifies input before display
export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li><code class="inline-code">validateAdventureChoice</code> eliminates erroneous inputs to ensure only valid selections move forward.</li>
<li><code class="inline-code">validateTheme</code> safeguards the system against invalid realms through robust error messages and validation mechanisms.</li>
<li><code class="inline-code">sanitizeForDisplay</code> filters harmful elements, preserving Codexia‚Äôs integrity in visual outputs.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">getAllThemes</code> to establish familiarity with the known realms.</li>
<li>Modify <code class="inline-code">IGNORE_PATTERNS</code> in <code class="inline-code">config.ts</code> to adjust scanning behavior for your environment.</li>
<li>When crafting custom adventures, adapt <code class="inline-code">THEMES</code> in <code class="inline-code">theme.ts</code> for flexibility.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries within Codexia‚Äôs enchanted repository. Adventure calls you forward!</p>
<p>With the wisdom of ancient seers and the valor of a true hero, you have unraveled the sacred runes of configuration, ascending ever closer to the throne of mastery‚Äîforge ahead, for the stars favor the bold! ‚ö°üíéüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>