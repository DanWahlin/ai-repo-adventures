<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Engine of Heroic Quests - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Codex of Mystic Quests</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Engine of Heroic Quests</h1>
<hr>
<p>In the mystical Kingdom of Computarion, the Enchanted Codex of Mystic Quests weaves tales of enchanted bravery, but one of its most vital chapters is locked deep within the &quot;Engine of Heroic Quests.&quot; Legend tells of an ancient mechanism hidden within the castle, powered by the magics of structured knowledge and boundless creativity. To unlock this chapter, brave adventurers must delve into the inner workings of the Adventure Manager, Story Generator, and Adventure Config‚Äîthree components that breathe life into every epic journey. Courage calls‚Äîwill you explore the machinery of heroic quest creation and restore the codex?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Quest Orchestrator</h3>
<p>The <code class="inline-code">adventure-manager.ts</code> file is akin to the royal engineer of the kingdom, ensuring that quests are meticulously crafted and dispatched to knights. It houses <code class="inline-code">AdventureManager</code>, the class responsible for initializing adventures, managing quest selection, and verifying progression. It relies on the <code class="inline-code">AdventureState</code> to track the current state of the quest and utilizes the <code class="inline-code">generateQuestContent</code> method to summon vivid challenges from the codex. Functions like <code class="inline-code">initializeAdventure</code> and <code class="inline-code">exploreQuest</code> are the lifeblood of the endeavor, uniting the logic of quests with the narrative magic.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code> configures the adventure context and sets the tone.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code> allows adventurers to embark on chosen quests.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code> calculates how far the knight has journeyed through their trials.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }
  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);
  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>This function acts as the spark that ignites the adventure&#39;s tapestry, establishing the theme, story, and available quests based on the codex and its mystical configuration.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }
  return await this.executeQuest(quest);
}
</code></pre>
<p>This serves as the mystical gateway through which adventurers embark on their chosen odysseys, validating their selection and initiating the quest&#39;s trials.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>This method is the royal scribe tracking the adventurer&#39;s progress, calculating their journey&#39;s completion in the grand scheme of the saga.</p>
<hr>
<h1>Helpful Hints</h1>
<ul>
<li><strong>Configuration Insights</strong>: Ensure that <code class="inline-code">adventure.config.json</code> reflects the kingdom&#39;s latest structure to avoid missing quest files.</li>
<li><strong>Thematic Alignment</strong>: Experiment with different themes to see how each transforms the adventure&#39;s narrative.</li>
<li><strong>Next Steps</strong>: Dive into <code class="inline-code">story-generator.ts</code> to uncover how quests are enchanted with stories and tasks.</li>
</ul>
<hr>
<p>Brave knight, you have illuminated the inner workings of the Adventure Manager! The codex hums with renewed vigor, yet further secrets await in the Engine of Heroic Quests. Shall we continue onward?</p>
<p>By the divine spark of legendary wisdom, thou hast unlocked the mighty Engine of Heroic Quests and ascended as a steadfast champion upon the sacred path‚Äîforward, brave soul, for the stars align to guide thee to greater glories! ‚≠êüöÄüè∞‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-1.html" class="prev-quest-btn">‚Üê Previous: Quest 1</a>
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>