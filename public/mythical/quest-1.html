<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Mystic Scroll of Static Portals - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Kingdom of Enchanted Adventures</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Mystic Scroll of Static Portals</h1>
<hr>
<p>In the mythical Kingdom of Enchanted Adventures, a great need has arisen. The wise mage of the castle foretells of a sacred artifact known as the Mystic Scroll of Static Portals. This enchanted scroll is said to contain the secrets of rendering gateways to magical realms from mere fragments of parchment and code. To retrieve the scroll, you must delve into the domain of the castle‚Äôs artifact creators, exploring their methods for conjuring intricate designs, maintaining static gateways, and managing relics that unify the entire kingdom. Will you rise to the challenge or let the portals fade into silence?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Portal Blueprint Mapping</strong>: How is the process for rendering entire enchanted pages designed, particularly when combining fragments with placeholders?</li>
<li>‚ö° <strong>Asset Mastery</strong>: What techniques are used for copying and organizing magical assets across various themes?</li>
<li>üõ°Ô∏è <strong>Mystical Page Construction</strong>: How does the system ensure all placeholders in templates are properly replaced, preventing incomplete conjurations?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Enchanting Pages for the Kingdom</h3>
<p>This file encapsulates the arcane methods for rendering HTML pages using templates and variables. Operating much like the mythical scroll itself, it ensures dynamic fragments are stitched together and placeholders transformed into solidified text. The <code class="inline-code">TemplateEngine</code> class is the core of this narrative, with its caching mechanisms, placeholder substitution, and page rendering processes.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Guides adventurers to retrieve template scrolls while employing caching to save energy for future quests.</li>
<li><code class="inline-code">replacePlaceholders</code>: The power to imbue a template scroll with magical values, transforming it into a useful artifact.</li>
<li><code class="inline-code">renderPage</code>: Combines fragments of content templates with base templates to form an enchanted portal visible to all in the kingdom.</li>
</ul>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Guarding the Kingdom‚Äôs Artifacts</h3>
<p>The AssetManager class commands the sacred duty of organizing and transporting magical assets across the theme domains of the kingdom. With its careful copying mechanisms, it ensures every enchanted realm has the images, navigators, and treasures it requires. </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyImages</code>: A spell for transporting enchanted images between realms, both shared and theme-specific.</li>
<li><code class="inline-code">copySharedNavigator</code>: A great incantation for creating consolidated directories of shared navigators across the kingdom.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Tailored for delivering navigational tools to theme-specific locations, making each realm navigable.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Retrieves templates seamlessly using caching for optimized performance.</li>
<li>Ensures content is read once for efficiency, storing the spell in a cache for future conjuration.</li>
<li>Employs a fallback mechanism to gracefully handle missing templates.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Transforms placeholders in a template into meaningful values, completing the mystical design.</li>
<li>Uses pattern matching (<code class="inline-code">RegExp</code>) to ensure all placeholders are handled, avoiding gaps in conjurations.</li>
<li>Handles null or undefined values gracefully to ensure seamless operations.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base templates and content templates, crafting a fully realized enchanted page.</li>
<li>Substitutes all variables, ensuring the final artifact is free of missing pieces.</li>
<li>Enables full thematic rendering through dynamic variable replacement across multiple templates.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const sourceSharedDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);
  const targetSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);

  try {
    if (fs.existsSync(sourceImagesDir)) {
      fs.mkdirSync(targetImagesDir, { recursive: true });
      const imageFiles = fs.readdirSync(sourceImagesDir);
      imageFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceImagesDir, file);
        const targetPath = path.join(targetImagesDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }

    if (fs.existsSync(sourceSharedDir)) {
      fs.mkdirSync(targetSharedDir, { recursive: true });
      const sharedFiles = fs.readdirSync(sourceSharedDir);
      sharedFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceSharedDir, file);
        const targetPath = path.join(targetSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy images from source directory&#39;));
  }
}
</code></pre>
<ul>
<li>Safeguards the movement of magical images across domains and unifies shared resources.</li>
<li>Creates directories as needed for proper organization and prevents asset duplication.</li>
<li>Manages potential errors gracefully, ensuring minimal disruption to the quest.</li>
</ul>
<hr>
<pre><code class="language-typescript">copySharedNavigator(rootOutputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const assetsDir = path.join(this.sourceDir, &#39;assets&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  const svgSource = path.join(templatesDir, &#39;compass-icon.svg&#39;);

  const themeToggleCssSource = path.join(assetsDir, &#39;theme-toggle.css&#39;);
  const themeToggleJsSource = path.join(assetsDir, &#39;theme-toggle.js&#39;);

  const sharedAssetsDir = path.join(rootOutputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(sharedAssetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(sharedAssetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(sharedAssetsDir, &#39;quest-navigator.js&#39;));
  }
  if (fs.existsSync(svgSource)) {
    fs.copyFileSync(svgSource, path.join(sharedAssetsDir, &#39;compass-icon.svg&#39;));
  }

  const rootAssetsDir = path.join(rootOutputDir, &#39;assets&#39;);
  fs.mkdirSync(rootAssetsDir, { recursive: true });
  
  if (fs.existsSync(themeToggleCssSource)) {
    fs.copyFileSync(themeToggleCssSource, path.join(rootAssetsDir, &#39;theme-toggle.css&#39;));
  }
  if (fs.existsSync(themeToggleJsSource)) {
    fs.copyFileSync(themeToggleJsSource, path.join(rootAssetsDir, &#39;theme-toggle.js&#39;));
  }

  console.log(chalk.green(&#39;‚úÖ Shared navigator and theme toggle files copied to consolidated assets directory&#39;));
}
</code></pre>
<ul>
<li>Consolidates navigational files and assets into shared locations for improved accessibility across realms.</li>
<li>Creates directories dynamically to ensure proper organizational hierarchies.</li>
<li>Improves the kingdom‚Äôs efficiency by centralizing essential navigational tools.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const sourceAssetsDir = path.join(this.sourceDir, &#39;assets&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  const svgSource = path.join(templatesDir, &#39;compass-icon.svg&#39;);

  const themeToggleCssSource = path.join(sourceAssetsDir, &#39;theme-toggle.css&#39;);
  const themeToggleJsSource = path.join(sourceAssetsDir, &#39;theme-toggle.js&#39;);

  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  fs.mkdirSync(assetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
  if (fs.existsSync(svgSource)) {
    fs.copyFileSync(svgSource, path.join(assetsDir, &#39;compass-icon.svg&#39;));
  }

  if (fs.existsSync(themeToggleCssSource)) {
    fs.copyFileSync(themeToggleCssSource, path.join(assetsDir, &#39;theme-toggle.css&#39;));
  }
  if (fs.existsSync(themeToggleJsSource)) {
    fs.copyFileSync(themeToggleJsSource, path.join(assetsDir, &#39;theme-toggle.js&#39;));
  }
}
</code></pre>
<ul>
<li>Tailors navigator copying specifically for single-theme realms, ensuring localized deployment.</li>
<li>Handles multiple file types seamlessly, including CSS, JS, and SVG assets.</li>
<li>Ensures each theme remains navigable while promoting consistency across templates.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>üåü Explore the caching mechanism in <code class="inline-code">loadTemplate</code> for efficiency insights.</li>
<li>üßæ Examine use of <code class="inline-code">RegExp</code> in placeholder replacement for adaptable string management patterns.</li>
<li>üîÆ Investigate centralized asset management strategies to understand how files are consolidated for easy access.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to unlock deeper secrets hidden within the mystical realms.</p>
<p>With the Mystic Scroll now secured, you have unlocked the first seal of destiny upon your heroic path, proving your valor in the celestial tapestry of quests! ‚ö°‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>