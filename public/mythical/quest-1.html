<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Mystic Guild of HTML - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Chronicles of the Code-Kingdom</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Mystic Guild of HTML</h1>
<hr>
<p>In the arcane kingdom of Syntaxia, the Mystic Guild of HTML lies dormant, its magical energies fading. The guild&#39;s once-glorious power to generate intricate scrolls of user enchantments has fractured. A call resounds across the realm: the enchanted artifact known as the <strong>HTMLAdventureGenerator</strong>, guided by ancient tomes like the <strong>TemplateEngine</strong> and <strong>AssetManager</strong>, must be reforged. Brave adventurer, journey into the heart of this guild, decipher their mystic scripts, and reignite the flame of dynamic storytelling. Will your heroism restore the guild‚Äôs light to Syntaxia?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Artifact Unveiling</strong>: How does <code class="inline-code">HTMLAdventureGenerator.generateAdventure</code> orchestrate the quest pipeline and ensure consistent output?</li>
<li>‚ö° <strong>Render Runes</strong>: What is the role of <code class="inline-code">TemplateEngine.renderPage</code> in combining the magical elements of templates and variables into cohesive output?</li>
<li>üõ°Ô∏è <strong>Relic Preservation</strong>: How does <code class="inline-code">AssetManager.copyGlobalAssets</code> ensure vital components propagate correctly across themes?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Details of the Mystic Artifact</h3>
<p>This file houses the <code class="inline-code">HTMLAdventureGenerator</code> class, the cornerstone of the guild. These spells encompass:</p>
<ul>
<li>Generating an adventure website from mystical codebases.</li>
<li>Coordinating multiple themes for a unified narrative tapestry.</li>
<li>Crafting quest descriptions and summary pages with elegance.</li>
</ul>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: The central rune, it orchestrates the main quest-building process, including content analysis, theme setting, and artifact preparation.</li>
<li><code class="inline-code">generateAllThemes</code>: Embarks on a journey across all themes, ensuring simultaneous creation of adventures in multiple styles.</li>
<li><code class="inline-code">startHttpServer</code>: Opens a portal for heroes to preview their magical outputs.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  // Load adventure data and process content
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, this.selectedTheme, this.projectPath, this.customThemeData
  );

  // Generate quests, images, and summary
  this.generateThemeCSS();
  this.copyQuestNavigator();
  this.copyImages();
  this.generateIndexHTML();
  await this.generateQuestPages();
}
</code></pre>
<ul>
<li><strong>Purpose</strong>: Coordinates the generation of the entire adventure by binding multiple subsystems together.  </li>
<li><strong>Techniques</strong>: Executes sequential calls to dependent spells such as <code class="inline-code">generateQuestPages</code>, ensuring smooth workflow.  </li>
<li><strong>Integration</strong>: Relies heavily on <code class="inline-code">adventureManager</code> and <code class="inline-code">templateEngine</code> to process narrative data.  </li>
<li><strong>Importance</strong>: Guarantees a fully functioning adventure site, blending logic, visuals, and story threads.</li>
</ul>
<hr>
<pre><code class="language-typescript">async generateAllThemes(): Promise&lt;void&gt; {
  const themes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
  const themePromises = themes.map(async (theme) =&gt; {
    const themeGenerator = new HTMLAdventureGenerator();
    themeGenerator[&#39;selectedTheme&#39;] = theme;
    await themeGenerator.generateAdventure();
  });
  await Promise.allSettled(themePromises);
}
</code></pre>
<ul>
<li><strong>Purpose</strong>: Handles multi-theme generation, ensuring diverse styles are built concurrently.  </li>
<li><strong>Implementation</strong>: Operates by creating separate instances of <code class="inline-code">HTMLAdventureGenerator</code> to prevent shared state issues.  </li>
<li><strong>Significance</strong>: Ensures scalability and simultaneous theme exploration, which enriches the overall guild‚Äôs offerings.</li>
</ul>
<hr>
<pre><code class="language-typescript">private async startHttpServer(port: number = 8080): Promise&lt;void&gt; {
  const server = http.createServer((req, res) =&gt; {
    let filePath = path.join(this.outputDir, req.url === &#39;/&#39; ? &#39;index.html&#39; : req.url || &#39;&#39;);
    fs.readFile(filePath, (err, content) =&gt; {
      if (err) {
        res.writeHead(err.code === &#39;ENOENT&#39; ? 404 : 500);
        res.end(err.message);
      } else {
        res.writeHead(200, { &#39;Content-Type&#39;: this.detectContentType(filePath) });
        res.end(content);
      }
    });
  });
  server.listen(port, () =&gt; console.log(`Server running at http://localhost:${port}`));
}
</code></pre>
<ul>
<li><strong>Role</strong>: Establishes a portal (HTTP server) to preview generated outputs, enabling quick validation.  </li>
<li><strong>Error Protection</strong>: Implements basic file validation and error responses for non-existent assets.  </li>
<li><strong>Flexibility</strong>: Supports previewing diverse adventures without requiring external deployment.</li>
</ul>
<hr>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Crafting the Enchanted Scrolls</h3>
<p>At the heart of the <strong>Mystic Guild‚Äôs</strong> magic lies the <code class="inline-code">TemplateEngine</code>. It binds enchanted placeholders with variables to invoke beautifully rendered outputs.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Combines base templates with page content using placeholders to create an entire scroll of HTML.</li>
<li><code class="inline-code">loadTemplate</code>: Loads and caches template files, ensuring they are fetched efficiently.</li>
<li><code class="inline-code">replacePlaceholders</code>: Replaces dynamic placeholders within templates with actual content.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li><strong>Purpose</strong>: Generates dynamic content by combining a content template and a base theme seamlessly.  </li>
<li><strong>Patterns</strong>: Employs a two-step placeholder replacement (content and base).  </li>
<li><strong>Importance</strong>: Simplifies creating consistent layouts, even as themes vary.</li>
</ul>
<hr>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  const templatePath = path.join(this.templatesDir, templateName);
  try {
    if (this.templateCache.has(templateName)) return this.templateCache.get(templateName)!;
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error.message}`);
  }
}
</code></pre>
<ul>
<li><strong>Efficiency</strong>: Implements caching to prevent redundant file reads.</li>
<li><strong>Resilience</strong>: Contains error handling, ensuring template failures are captured for debugging.</li>
<li><strong>Execution</strong>: Supplies the base for seamless placeholder substitution.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  Object.entries(variables).forEach(([key, value]) =&gt; {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  });
  return result;
}
</code></pre>
<ul>
<li><strong>Versatility</strong>: Supports replacing any placeholder, making it dynamic and reusable.  </li>
<li><strong>Implementation</strong>: Utilizes regular expressions for efficient global substitution.  </li>
<li><strong>Clarity</strong>: Aids in customizing templates without altering the core structure.</li>
</ul>
<hr>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Protector of Relics</h3>
<p>The <code class="inline-code">AssetManager</code> safeguards and distributes critical resources, ensuring all quests are empowered by imagery and shared assets.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Transfers critical global assets (e.g., images) to shared directories for reuse.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Prepares navigational assets, enhancing the user‚Äôs journey between pages.</li>
<li><code class="inline-code">copyImages</code>: Handles quest-specific or theme-specific image propagation.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(globalSharedDir, { recursive: true });
  const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
  globalImages.forEach(file =&gt; {
    const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
    if (fs.existsSync(sourcePath)) {
      const targetPath = path.join(globalSharedDir, file);
      fs.copyFileSync(sourcePath, targetPath);
    }
  });
}
</code></pre>
<ul>
<li><strong>Preservation</strong>: Secures global shared resources used across themes.  </li>
<li><strong>Implementation</strong>: Writes files to a consolidated directory, making them accessible universally.  </li>
<li><strong>Utility</strong>: Centralizes asset management, reducing duplication risks.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const sharedAssetsDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(sharedAssetsDir, { recursive: true });
  fs.copyFileSync(path.join(templatesDir, &#39;quest-navigator.css&#39;), path.join(sharedAssetsDir, &#39;quest-navigator.css&#39;));
}
</code></pre>
<ul>
<li>Ensures smooth navigation by deploying shared assets to appropriate directories.</li>
<li>Promotes reusability, maintaining consistency in quest navigation tools.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyImages(outputDir: string): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);
  fs.mkdirSync(targetImagesDir, { recursive: true });
  fs.readdirSync(sourceImagesDir).forEach(file =&gt; {
    const sourcePath = path.join(sourceImagesDir, file);
    const targetPath = path.join(targetImagesDir, file);
    fs.copyFileSync(sourcePath, targetPath);
  });
}
</code></pre>
<ul>
<li>Guarantees quests&#39; aesthetic appeal by transporting relevant visual assets.</li>
<li>Streamlines image copying to ensure accuracy without manual intervention.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">TemplateEngine</code> to experiment with placeholders by defining new variables for custom content.</li>
<li>Test <code class="inline-code">HTMLAdventureGenerator.startHttpServer</code> locally with alternate port numbers to avoid potential conflicts.</li>
<li>Trace <code class="inline-code">AssetManager</code> calls to identify missing or incorrect assets during debugging.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>With the valor of a true champion, you have unlocked the sacred Glyphs of the Mystic Guild of HTML, forging the first path of enlightenment in the Realm of Coding! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>