<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Mystical Codex of Generation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Chronicles of Codeia</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to dark mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Mystical Codex of Generation</h1>
<hr>
<p>Long ago, in the mythical kingdom of Codeia, the Repository Grimoire whispered secrets of structured creation, but its Codex of Generation began unbinding fragments of its magical templates and elusive assets. As a noble adventurer, your task is to repair the enchanting Codex and safeguard the foundational spells of <strong>HTML generation</strong>, ensuring the kingdom‚Äôs magic flows unmarred. Delve into the key files, decipher their spells, and harness the powers to restore balance and clarity to Codeia‚Äôs mystical pipeline.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Mirror of Variables</strong>: How does <code class="inline-code">replacePlaceholders</code> in <code class="inline-code">template-engine.ts</code> connect template placeholders with dynamic variables, and what patterns ensure flexibility?</li>
<li>‚ö° <strong>Enchanted Assemblage</strong>: What process does <code class="inline-code">generateAdventure</code> in <code class="inline-code">html-generator.ts</code> follow to orchestrate the generation of HTML adventures from codebase analysis?</li>
<li>üõ°Ô∏è <strong>Guardians of Assets</strong>: How does <code class="inline-code">copyGlobalAssets</code> in <code class="inline-code">asset-manager.ts</code> ensure asset integrity across various themes and quests?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> The Codex Weaver</h3>
<p>This file contains the spellwork behind assembling templates into structured forms. It translates placeholders into dynamic values and combines fragments into a harmonious whole. Its core functions enable the adaptability and fluidity needed for rendering diverse pages with narrative-rich magical elements.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">replacePlaceholders</code> substitutes template placeholders (e.g., <code class="inline-code">{{CONTENT}}</code>) with dynamic variables, enabling flexible page rendering while maintaining clarity.</li>
<li><code class="inline-code">loadTemplate</code> ensures efficient retrieval of cached templates or loading from file, preserving performance and preventing redundancy.</li>
<li><code class="inline-code">renderPage</code> combines base templates with content fragments, a crucial spell for producing complete pages dynamically.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;

  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }

  return result;
}
</code></pre>
<ul>
<li>This method transforms ambiguous placeholders within templates into dynamic values, binding them to their respective magic.</li>
<li>It employs regular expressions to locate placeholders (<code class="inline-code">{{placeholder}}</code>) and replace them consistently across the template.</li>
<li>Leveraging object iteration ensures scalability for templates with numerous dynamic elements.</li>
<li>By allowing empty values (<code class="inline-code">value || &#39;&#39;</code>), it prevents runtime errors and ensures template fluidity.</li>
<li>Its precise implementation paves the way for seamless and conflict-free rendering of entire pages.</li>
</ul>
<hr>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>This function retrieves templates efficiently, leveraging caching to minimize repeated reads from disk.</li>
<li>Path operations (<code class="inline-code">path.join</code>) ensure compatibility across environments for locating assets.</li>
<li>Error throwing (<code class="inline-code">throw new Error</code>) makes debugging intuitive, guarding template integrity in case of failures.</li>
<li>Caching reduces redundant I/O operations and vastly improves performance, especially for frequently accessed templates.</li>
<li>Its reliable design ensures readiness for multi-page generation within the Codex.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);

  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>This function orchestrates the fusion of a base template with dynamic content templates to create holistic web pages.</li>
<li>It encapsulates content and base level rendering via multiple uses of <code class="inline-code">replacePlaceholders</code>.</li>
<li>By combining templates dynamically, it enables thematic adaptability while ensuring structural consistency.</li>
<li>It empowers maintainability‚Äîpages can be modified at base or content levels without altering the whole spellwork.</li>
<li>Key variable merging (<code class="inline-code">CONTENT</code>) provides narrative cohesion across themes and quests.</li>
</ul>
<h2>Helpful Hints</h2>
<ul>
<li><strong>Tip for Balance</strong>: Cache optimization in <code class="inline-code">loadTemplate</code> ensures reduced lag during spell execution‚Äîmaster it to craft efficient quests!</li>
<li><strong>Documentation Scroll</strong>: Investigate placeholder patterns in dynamic pages to uncover reusable template designs.</li>
<li><strong>Pathfinder Query</strong>: Paths are key‚Äîconfirm template directories match <code class="inline-code">templatesDir</code> logic for successful quests!</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries surrounding the Repository Grimoire and its enchanted layers.</p>
<p>The fabled Quest 1 is vanquished, noble seeker! You‚Äôve unlocked the first arcane truth within the Codex, igniting the celestial pathway toward glory‚Äîmarch onward, for greatness awaits! ‚ö°üíé‚≠ê</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>