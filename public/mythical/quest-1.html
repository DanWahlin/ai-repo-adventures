<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Knightly Glyphs of the Static Realm - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Kingdom of Code</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Knightly Glyphs of the Static Realm</h1>
<hr>
<p>In the mythical Kingdom of Codethos, where mystic spells and code interweave to maintain harmony, the Great Repository scroll is under siege. Within the Static Realm, vital to crafting enchanted adventures, the Knightly Glyphs‚Äîarcane scripts that channel the power of dynamic HTML generation‚Äîare fractured. As the chosen adventurer, you must venture into the Static Realm, seeking the Glyphs hidden in the chambers of <code class="inline-code">HTMLAdventureGenerator</code>, fortified by the TemplateEngine&#39;s enchanted words and AssetManager&#39;s durable shields. Your quest begins at the precipice of HTML, where kingdoms are built line-by-line. </p>
<p>Will you uncover the secrets of generating mystical quests and restore Codethos&#39; enchanted balance?</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Engraving</strong>: How does <code class="inline-code">HTMLAdventureGenerator.generateAdventure</code> orchestrate the entire adventure generation and integrate with other realms like the <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code>?</li>
<li>‚ö° <strong>Dynamic Incantations</strong>: What techniques does <code class="inline-code">TemplateEngine.replacePlaceholders</code> use to seamlessly combine glyphs (placeholders) with variables, and how does this enable dynamic generation?</li>
<li>üõ°Ô∏è <strong>Fortification Analysis</strong>: How does <code class="inline-code">AssetManager.copyGlobalAssets</code> ensure the safe distribution of shared assets, and what fallback measures exist for potential failures?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a>: The Architect of Adventures</h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> Class is the central figure in rendering the Static Realm&#39;s enchanted quests. With methods like <code class="inline-code">generateAdventure</code>, it reads, assembles, and writes quest narratives while working symbiotically with utility classes like <code class="inline-code">TemplateEngine</code> for page rendering and <code class="inline-code">AssetManager</code> for asset handling.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Masterfully orchestrates the adventure generation process by invoking repo analysis, quest rendering, and asset management systems in one flow.</li>
<li><code class="inline-code">buildQuestHTML</code>: Constructs individual quest pages by assembling templates from the <code class="inline-code">TemplateEngine</code> and integrating navigation logic for a seamless questing experience.</li>
<li><code class="inline-code">startHttpServer</code>: Initiates a mystical portal (HTTP server) to preview the enchanted HTML content in real time.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  // Step 1: Generate project analysis
  console.log(chalk.dim(&#39;üìä Analyzing codebase...&#39;));
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  // Step 2: Initialize adventure
  console.log(chalk.dim(&#39;‚ú® Generating themed story and quests...&#39;));
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  // Step 3: Extract quest information
  this.extractQuestInfo();

  // Step 4: Generate files
  this.generateIndexHTML();
  await this.generateQuestPages();
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>Orchestrates the entire adventure creation process in an event-driven sequence.</li>
<li>Integrates code analysis, story generation, and file I/O steps into one cohesive workflow.</li>
<li>Collaborates closely with <code class="inline-code">repoAnalyzer</code>, <code class="inline-code">TemplateEngine</code>, and <code class="inline-code">AssetManager</code>.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a>: The Enchanter of Glyphs</h3>
<p>The <code class="inline-code">TemplateEngine</code> wields the power of replacing placeholders within templates to create fluid, dynamic content. With the capability to cache templates, it optimizes performance while ensuring the consistency of the generated mystical realm.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Synthesizes a complete page by combining a base template and embedded content with variables.</li>
<li><code class="inline-code">loadTemplate</code>: Fetches and caches templates to minimize redundant I/O operations and optimize performance.</li>
<li><code class="inline-code">replacePlaceholders</code>: Replaces <code class="inline-code">{{key}}</code> placeholders dynamically in templates, allowing for seamless variable substitution in enchanted content.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Performs dynamic substitution of variables into templates, transforming static text into dynamic, reusable structures.</li>
<li>Employs regular expressions to locate and replace all instances of a placeholder efficiently.</li>
<li>Ensures empty variables are replaced with a blank value to prevent template breakage.</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a>: The Guardian of Assets</h3>
<p>The <code class="inline-code">AssetManager</code> ensures the proper transfer and organization of shared resources like images and stylesheets, fortifying the visual and functional aspects of the realm&#39;s adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Copies shared assets to the designated output directory, safeguarding consistency across themes.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Distributes navigation assets specific to the individual theme directories.</li>
<li><code class="inline-code">copyImages</code>: Handles duplication of realm-specific imagery, ensuring the enchanted realm&#39;s visual fidelity.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  try {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
    const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
    fs.mkdirSync(targetImagesDir, { recursive: true });

    // Copy global shared images to shared directory  
    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });
    
    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
    globalImages.forEach(file =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
      if (fs.existsSync(sourcePath)) {
        const targetPath = path.join(globalSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      }
    });

    // Copy header image for theme selection page
    const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
    if (fs.existsSync(headerImageSource)) {
      const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
      fs.copyFileSync(headerImageSource, headerImageTarget);
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global images&#39;));
  }
}
</code></pre>
<ul>
<li>Copies globally shared resources like logos and header images, ensuring uniformity among all realms.</li>
<li>Creates directories recursively to prevent file system errors during duplication processes.</li>
<li>Implements safeguards such as <code class="inline-code">fs.existsSync</code> to prevent operations on missing assets.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li><code class="inline-code">TemplateEngine</code>&#39;s cached template loading can improve scalable adventures‚Äîconsider leveraging this mechanism if you plan on expanding quest varieties.</li>
<li>Experiment with different themes when testing the <code class="inline-code">generateAdventure</code> flow to see how resource copying adapts automatically.</li>
<li>If errors arise in asset duplication, trace the fallback sequence in <code class="inline-code">AssetManager.copyGlobalAssets</code>.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Huzzah, gallant seeker of wisdom, for you have deciphered the arcane Knightly Glyphs of the Static Realm‚Äîlet this triumph blaze like a ‚≠ê upon your heroic odyssey through the remaining quests!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>