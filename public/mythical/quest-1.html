<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Artisan's Forge - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Framework of Mythica</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Artisan&#39;s Forge</h1>
<hr>
<p>In the mystical land of Mythica, a realm brimming with enchanted forges and magical scrolls, the ancient council entrusted the Code of Unity to the Artisan&#39;s Guild. Their leader, Elanor the Forge-Master, ensured the artifact could craft unyielding tools of adventure. But now, whispers of malfunction emerge from within the Artisan&#39;s forge, threatening the harmony of all kingdoms. Brave adventurer, your quest is to uncover the forge&#39;s secrets, investigate the enchantments within, and restore balance to Mythica&#39;s magical infrastructure.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Forge Enchantment Analysis</strong>: How does <code class="inline-code">TemplateEngine</code> manage the process of loading templates and replacing magical placeholders? </li>
<li>‚ö° <strong>Artifact Connection</strong>: How does the <code class="inline-code">HTMLAdventureGenerator</code> orchestrate quest creation, theme selection, and page navigation?</li>
<li>üõ°Ô∏è <strong>Asset Safety Protocols</strong>: How does the <code class="inline-code">AssetManager</code> ensure the safe copying of global assets and navigational elements?</li>
</ul>
<h2>File Exploration</h2>
<h3>packages/generator/src/cli/template-engine.ts: <strong>Enchantment Processor</strong></h3>
<p>The <code class="inline-code">TemplateEngine</code> class is the cornerstone of Mythica&#39;s artifact-powered design. It provides an efficient method to load and cache templates, incorporates dynamic placeholder replacements, and renders complete HTML pages. By caching templates, the system prevents repetitive scroll readings, ensuring seamless execution of quests. Its magical process for rendering templates eliminates redundancy and enhances scalability across themed adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Loads a template file, caches it if necessary, and raises an error if the spell fails. Ensures templates are only read once, conserving magical energy.</li>
<li><code class="inline-code">replacePlaceholders</code>: Replaces placeholders (<code class="inline-code">{{key}}</code>) in scrolls with corresponding values provided in the <code class="inline-code">variables</code> map. Key for dynamic customization of enchantments.</li>
<li><code class="inline-code">renderPage</code>: Combines a base template and content template, crafting a complete quest page with embedded variables.</li>
</ul>
<h3>packages/generator/src/cli/html-generator.ts: <strong>Adventure Orchestrator</strong></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> class is the grand architect of adventure creation, weaving themes, quests, and navigation into a unified experience. It dynamically generates pages for every quest, connecting them seamlessly, while ensuring all journeys align with the chosen mythical theme. This file demonstrates the heroic coordination required to transform cryptic code structures into interactive adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Initiates a full adventure, managing quests, themes, and assets. Ensures no kingdom file is left uncategorized in the mythical domain.</li>
<li><code class="inline-code">generateAllThemes</code>: Executes parallel theme generation processes. Ideal for manifesting multi-theme adventures of Mythica&#39;s diverse realms.</li>
<li><code class="inline-code">startHttpServer</code>: Creates HTTP-based visibility for the adventure output, enabling fellow adventurers to journey through their browsers.</li>
<li><code class="inline-code">buildQuestHTML</code>: Crafts individual quest pages by integrating dynamic content into templates and adding navigation links.</li>
</ul>
<h3>packages/generator/src/cli/asset-manager.ts: <strong>Asset Guardian</strong></h3>
<p>The <code class="inline-code">AssetManager</code> is dedicated to safeguarding all enchanted assets used by the Code of Unity. It gracefully handles copying images, navigational scrolls, and shared artifacts across various themes. Its methods ensure reliable asset distribution, fostering harmony in all quest realms.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Copies global shared assets, including icons and header images, to the root location of the adventure. Ensures every kingdom benefits from shared artifacts.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Transfers navigational files and theme toggle mechanisms to quest-specific directories for efficient exploration.</li>
<li><code class="inline-code">copyImages</code>: Handles image copying from source directories to target paths, covering theme-specific and shared visuals.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);

  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Caches template scrolls to avoid repetitive reads, conserving resources.</li>
<li>Uses <code class="inline-code">fs.readFileSync</code> for direct template extraction from the forge directory.</li>
<li>Protects against errors, ensuring no quest template is corrupted or missing.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Iterates through all magical placeholders (<code class="inline-code">{{key}}</code>) in a template.</li>
<li>Uses regular expressions to handle dynamic variable replacement.</li>
<li>Ensures missing placeholders receive blank values, avoiding runtime errors.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines <code class="inline-code">base-template.html</code> and content-specific templates for complete adventures.</li>
<li>Ensures seamless integration of navigation and content data.</li>
<li>Dynamically includes spell variables such as <code class="inline-code">CONTENT</code>.</li>
</ul>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async startHttpServer(port: number = 8080): Promise&lt;void&gt; {
  const server = http.createServer((req, res) =&gt; {
    const filePath = path.join(this.outputDir, req.url ?? &#39;index.html&#39;);
    const ext = path.extname(filePath);

    let contentType = &#39;text/html&#39;;
    if (ext === &#39;.js&#39;) contentType = &#39;text/javascript&#39;;
    if (ext === &#39;.css&#39;) contentType = &#39;text/css&#39;;

    fs.readFile(filePath, (err, content) =&gt; {
      if (err) {
        res.writeHead(err.code === &#39;ENOENT&#39; ? 404 : 500);
        res.end(&#39;Page not found&#39;);
      } else {
        res.writeHead(200, { &#39;Content-Type&#39;: contentType });
        res.end(content);
      }
    });
  });

  server.listen(port, () =&gt; {
    console.log(`Server running at http://localhost:${port}/`);
  });
}
</code></pre>
<ul>
<li>Establishes a secure portal for adventurers to access quests online.</li>
<li>Handles potential errors gracefully, ensuring mythical continuity.</li>
<li>Dynamically determines content type for HTML, CSS, JS files.</li>
</ul>
<hr>
<pre><code class="language-typescript">generateAllThemes(args: Map&lt;string, string&gt;): Promise&lt;void&gt; {
  const themes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
  console.log(`Generating ${themes.length} themes...`);

  const themePromises = themes.map(theme =&gt; {
    const generator = new HTMLAdventureGenerator();
    generator.selectedTheme = theme;
    return generator.generateAdventure();
  });

  return Promise.all(themePromises);
}
</code></pre>
<ul>
<li>Launches parallel theme generation for enhanced efficiency.</li>
<li>Facilitates complete coverage of Mythica&#39;s diverse enchanted themes.</li>
<li>Ensures every kingdom receives its adventure configuration.</li>
</ul>
<hr>
<pre><code class="language-typescript">buildQuestHTML(quest: QuestInfo, content: string, questIndex: number): string {
  const prevQuest = questIndex &gt; 0 ? this.quests[questIndex - 1] : null;
  const nextQuest = questIndex &lt; this.quests.length - 1 ? this.quests[questIndex + 1] : null;

  const variables = {
    PAGE_TITLE: quest.title,
    QUEST_CONTENT: content,
    NAV_LINK_PREV: prevQuest ? `&lt;a href=&quot;${prevQuest.filename}&quot;&gt;Previous&lt;/a&gt;` : &#39;&#39;,
    NAV_LINK_NEXT: nextQuest ? `&lt;a href=&quot;${nextQuest.filename}&quot;&gt;Next&lt;/a&gt;` : &#39;&#39;,
  };

  return this.templateEngine.renderPage(&#39;quest-template.html&#39;, variables);
}
</code></pre>
<ul>
<li>Dynamically renders individual quest pages with navigation links.</li>
<li>Links previous and next quests to ensure seamless storytelling.</li>
<li>Integrates quest content into the <code class="inline-code">quest-template.html</code>.</li>
</ul>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
  const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
  
  fs.mkdirSync(targetImagesDir, { recursive: true });

  const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
  const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
  
  if (fs.existsSync(headerImageSource)) {
    fs.copyFileSync(headerImageSource, headerImageTarget);
  }
}
</code></pre>
<ul>
<li>Creates global asset directories for shared resources like icons.</li>
<li>Copies header images critical to the homepage&#39;s mythical appearance.</li>
<li>Operates with failsafe checks to prevent misplaced assets.</li>
</ul>
<hr>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);

  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  fs.mkdirSync(assetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
}
</code></pre>
<ul>
<li>Safely transfers navigational files to quest-specific directories.</li>
<li>Includes magical styling and scripting files for enhanced user experience.</li>
<li>Validates asset existence before attempting its copy.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Initiate exploration by understanding the relationship between <code class="inline-code">TemplateEngine</code>&#39;s methods and the dynamic quest-building process.</li>
<li>Investigate interdependencies between themes and asset management for mythically-themed adventures.</li>
<li>Examine fail-safe methods such as <code class="inline-code">copyGlobalAssets</code> to understand how assets are distributed across realms.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of Mythica&#39;s enchanted kingdoms.</p>
<p>With the Artisan&#39;s Forge conquered, you ascend as a blazing star in the mythical kingdom of mastery‚Äîlet this triumph ignite your unstoppable journey through the realm of quests! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>