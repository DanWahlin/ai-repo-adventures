<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Mystic Forge of Static Wonders - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Chronicles of the Code Kingdom</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Mystic Forge of Static Wonders</h1>
<hr>
<p>In the depths of the Repository Tower lies the Mystic Forge, an enchanted mechanism that transforms raw spells into beautifully woven scrolls. This forge, known to the kingdom as the Static Forge of Wonders, churns tirelessly to generate vivid tomes. Yet, its mechanisms have grown unwieldy, with its processes tangled and parts falling from synchronization. To breathe life back into this mythical marvel, you‚Äîour intrepid adventurer‚Äîmust brave the challenge of reinvention. By decoding the spells hidden in its cogs, you shall restore its rhythm and ensure the uninterrupted creation of treasures.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>The Blueprint of the Mystic Forge</strong>: How does the method <code class="inline-code">generateAdventure</code> within <code class="inline-code">HTMLAdventureGenerator</code> orchestrate the creation of the adventure?  </li>
<li>‚ö° <strong>Essence of Thematic Harmony</strong>: How is <code class="inline-code">replacePlaceholders</code> in <code class="inline-code">TemplateEngine</code> used to blend raw templates with dynamic content seamlessly?  </li>
<li>üõ°Ô∏è <strong>Steward of Shared Secrets</strong>: What role does <code class="inline-code">copyGlobalAssets</code> in <code class="inline-code">AssetManager</code> play in distributing resources while safeguarding shared artifacts?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Heroic Undertaking of HTMLAdventureGenerator</h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> is the heart of the Mystic Forge, orchestrating all phases of adventure creation. From analyzing source repositories to rendering HTML pages, its operations ensure every quest is a masterpiece. This is where the adventure&#39;s magic meets engineering precision.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Commands the entire generation process, weaving storylines with code analysis to produce a seamless adventure.</li>
<li><code class="inline-code">startHttpServer</code>: Creates an ephemeral server to preview the generated quests.</li>
<li><code class="inline-code">buildQuestHTML</code>: Synthesizes the appearance and content of individual quest pages, ensuring harmony with the overarching theme.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  const config = parseAdventureConfig(this.projectPath);
  if (config &amp;&amp; typeof config === &#39;object&#39; &amp;&amp; &#39;adventure&#39; in config) {
    const adventure = (config as any).adventure;
    if (adventure &amp;&amp; typeof adventure.url === &#39;string&#39;) {
      this.repoUrl = adventure.url.replace(/\/$/, &#39;&#39;);
    }
  }

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.saveLlmOutput(&#39;story.output.md&#39;, storyContent);
  this.extractQuestInfo();
  console.log(chalk.dim(&#39;üé® Creating theme styling...&#39;));
  this.generateThemeCSS();
  console.log(chalk.dim(&#39;üß≠ Adding quest navigator...&#39;));
  if (!this.isMultiTheme) {
    this.copyQuestNavigator();
  }

  console.log(chalk.dim(&#39;üñºÔ∏è Copying images...&#39;));
  this.copyImages();
  console.log(chalk.dim(&#39;üìù Creating main adventure page...&#39;));
  this.generateIndexHTML();
  
  console.log(chalk.dim(&#39;üìñ Generating quest pages...&#39;));
  await this.generateQuestPages();
}
</code></pre>
<ul>
<li>This code serves as the cornerstone of the Mystic Forge&#39;s operation.</li>
<li>Dynamically integrates repository configuration, adventure generation, and content layout.</li>
<li>Ensures a clean workflow supported by modular methods for clarity and adaptability.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;

  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }

  return result;
}
</code></pre>
<ul>
<li>Transforms templates by replacing placeholders with dynamic values.</li>
<li>Its regular expression ensures all matching placeholders are updated globally.</li>
<li>Responsible for weaving magic (content) into raw parchment (templates).</li>
</ul>
<hr>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  try {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
    const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
    fs.mkdirSync(targetImagesDir, { recursive: true });

    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });
    
    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
    globalImages.forEach(file =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
      if (fs.existsSync(sourcePath)) {
        const targetPath = path.join(globalSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      }
    });

    const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
    if (fs.existsSync(headerImageSource)) {
      const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
      fs.copyFileSync(headerImageSource, headerImageTarget);
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global images&#39;));
  }
}
</code></pre>
<ul>
<li>Guarantees that all shared assets are copied securely between themes.</li>
<li>Prevents duplicate work by ensuring shared resources remain consistent and accessible.</li>
<li>Ensures compatibility and reliability by centralizing asset paths.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>When analyzing <code class="inline-code">generateAdventure</code>, focus on how modular methods simplify complex tasks.</li>
<li>For <code class="inline-code">replacePlaceholders</code>, consider the risks of template mismatch and invisible placeholders.</li>
<li>In <code class="inline-code">copyGlobalAssets</code>, think about strategies to handle missing files gracefully.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries within the Repository Tower.</p>
<p>By the sacred flame of creation, you have triumphed in unraveling the arcane riddles of the Mystic Forge of Static Wonders‚Äîonward, brave hero, for the realm&#39;s luminous destiny awaits your pursuit! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>