<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: Forging the Mystic Paths - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Codex: A Kingdom's Tale</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: Forging the Mystic Paths</h1>
<hr>
<p>In the mythical Kingdom of Codora, where enchanted scripting conjures otherworldly realms, you embark on a journey to unveil the secrets of a magical framework that transforms mere collections of code into captivating adventures. Your quest centers on the legendary <em>HTML Adventure Generator</em>, hidden in the <code class="inline-code">packages/generator/src/cli/</code> castle tower. This arcane tool wields the power of generating immersive stories and quests by weaving together templates, assets, and themes into spellbinding digital adventures. Brave the intricate pathways and reveal the mystic patterns shaping this enchanted art.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Arcane Blueprints</strong>: How does the <code class="inline-code">HTMLAdventureGenerator</code> orchestrate its adventure generation process, combining templates, assets, and quests into a cohesive output?</li>
<li>‚ö° <strong>Enchantment Flow</strong>: What role does the <code class="inline-code">TemplateEngine</code> play in transforming content templates into magical spellbooks (HTML pages) using placeholders and base layouts?</li>
<li>üõ°Ô∏è <strong>Asset Fortifications</strong>: How does the <code class="inline-code">AssetManager</code> ensure quest visuals and resources are safeguarded, properly copied, and distributed to the appropriate planes of the output directory?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a>: The Spellcaster&#39;s Tome</h3>
<p>This file houses the <code class="inline-code">HTMLAdventureGenerator</code>‚Äîa masterful spellcaster responsible for conjuring entire HTML adventure websites from plain code repositories. Key highlights include its processing flow for generating quests, applying themes, initializing assets, and managing user customization. With its detailed algorithmic structure, the <code class="inline-code">HTMLAdventureGenerator</code> ensures that each blueprint (HTML page) created resonates with the chosen theme.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Commands the full adventure generation process, including repository analysis, quest creation, and file output.</li>
<li><code class="inline-code">generateAllThemes</code>: Facilitates the generation of adventures across multiple realms (themes), ensuring flexibility in style and presentation.</li>
<li><code class="inline-code">startHttpServer</code>: Conjures a web server to showcase completed HTML adventures for exploration and testing.</li>
<li><code class="inline-code">buildQuestHTML</code>: Creates a single quest‚Äôs HTML file by combining narrative content with theme-specific templates.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);
  
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  // Save content, process quests, set up theme, prepare assets, and finalize main pages
  this.extractQuestInfo();
  this.generateThemeCSS();
  this.copyQuestNavigator();
  this.copyImages();
  this.generateIndexHTML();
  await this.generateQuestPages();
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li><code class="inline-code">generateAdventure</code> oversees the full adventure creation cycle, iterating through analysis, content generation, and output preparation.</li>
<li>Techniques include template rendering, Markdown-to-HTML conversion, and file organization.</li>
<li>Solves the problem of seamlessly combining user content into coherent and engaging stories.</li>
<li>Links to other components such as <code class="inline-code">TemplateEngine</code> for rendering and <code class="inline-code">AdventureManager</code> for quest logic management.</li>
</ul>
<hr>
<pre><code class="language-typescript">async generateAllThemes(args: Map&lt;string, string&gt;): Promise&lt;void&gt; {
  this.isMultiTheme = true;
  this.outputDir = args.get(&#39;output&#39;) || &#39;./public&#39;;
  const themes: AdventureTheme[] = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];

  // Generate each theme individually
  const themePromises = themes.map(async (theme) =&gt; {
    const themeDir = path.join(this.outputDir, theme);
    fs.mkdirSync(themeDir, { recursive: true });
    const themeGenerator = new HTMLAdventureGenerator();
    themeGenerator[&#39;selectedTheme&#39;] = theme;
    themeGenerator[&#39;outputDir&#39;] = themeDir;
    
    await themeGenerator.generateAdventure();
  });

  await Promise.allSettled(themePromises);
}
</code></pre>
<ul>
<li><code class="inline-code">generateAllThemes</code> enables theme diversity, adapting adventures for multiple realms to cater to unique user preferences.</li>
<li>Leverages parallel processing to handle multiple themes efficiently, minimizing output redundancy.</li>
<li>Connects to asset-sharing mechanisms and theme-specific components, emphasizing reusability.</li>
</ul>
<hr>
<pre><code class="language-typescript">private async startHttpServer(port: number = 8080): Promise&lt;void&gt; {
  const server = http.createServer((req, res) =&gt; {
    let filePath = path.join(this.outputDir, req.url === &#39;/&#39; ? &#39;index.html&#39; : req.url || &#39;&#39;);
    
    fs.readFile(filePath, (err, content) =&gt; {
      res.writeHead(err ? 404 : 200, { &#39;Content-Type&#39;: &#39;text/html&#39; });
      res.end(err ? &#39;File not found&#39; : content, &#39;utf-8&#39;);
    });
  });

  server.listen(port, () =&gt; {
    console.log(chalk.green(`üåê HTTP server started on http://localhost:${port}`));
  });
}
</code></pre>
<ul>
<li><code class="inline-code">startHttpServer</code> acts as the portal, enabling creators to preview adventures by serving the generated HTML over HTTP.</li>
<li>Showcases efficient use of filesystem operations and server networking.</li>
<li>Highlights accessibility and improves user confidence in the adventure&#39;s rendered output.</li>
</ul>
<h2>Helpful Hints</h2>
<ul>
<li>Consider how the <code class="inline-code">generateAdventure</code> function centralizes the roles of <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code>.</li>
<li>Observe how <code class="inline-code">generateAllThemes</code> emphasizes thread safety and modularity when working with parallel themes.</li>
<li>Experiment with running the HTTP server to explore output visuals and debug HTML generation.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of adventure creation within Codora.</p>
<p>By the strength of your resolve and the brilliance of your inner star ‚≠ê, you have forged the Mystic Paths with unyielding grace‚Äîonward, brave soul, for the realm awaits your triumphant legend!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>