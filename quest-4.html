<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Sustaining the Core: Configuration and Themes - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Mission Analysis: Cosmic Chronicles of Code</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Sustaining the Core: Configuration and Themes</h1>
<hr>
<p>The <em>Starship Codexus</em> cruised through the swirling cosmic dust of the Binary Veil Nebula, a region marked by its brilliant streams of data encoded in kilometers of computational history. As the crew of Codewrights worked tirelessly, a new challenge emerged: the ship‚Äôs core configuration systems and theme alignment were at risk of destabilizing. Without a harmonized theme and secure configuration, the mission‚Äôs navigation through the galaxy of repositories could fall into chaos. With systems flickering, the <em>Codexus</em> crew prepared for their next mission: sustaining the core and reinforcing the narrative fabric that connected their cosmic journey.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a>: Core Configuration Hub</h3>
<p>This file serves as the lifeline for the <em>Starship Codexus</em>, housing the variables and constants that ensure the seamless operation of the mission‚Äôs systems. With critical timeout settings like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> and <code class="inline-code">REPOMIX_CACHE_TTL</code>, it manages how long the <em>Codexus</em> interfaces with external systems and caches its insights. The configuration also includes limits on file size and depth of directory scans, preventing the ship‚Äôs processors from overloading during repository analysis. It even accommodates different environments, such as development or production, by adjusting verbosity and enabling stack traces.</p>
<p>Of particular note are the limits on large language model (LLM) interactions‚Äîfactors like <code class="inline-code">LLM_MAX_TOKENS</code> and <code class="inline-code">LLM_TEMPERATURE</code> dictate how much data can be sent to and retrieved from the galactic story engines. These settings, adaptable via environment variables, provide immense flexibility while keeping the mission trajectories stable and optimized. Essentially, this file is the star map, plotting routes and boundaries for how <em>Codexus</em> navigates technology and knowledge.</p>
<h4>Highlights</h4>
<ul>
<li>Manages timeouts for LLM queries (<code class="inline-code">LLM_REQUEST_TIMEOUT</code>) and file analysis tasks (<code class="inline-code">FILE_ANALYSIS_TIMEOUT</code>).</li>
<li>Controls maximum token sizes (<code class="inline-code">LLM_MAX_TOKENS_STORY</code>) for gripping and expansive narrative generation.</li>
<li>Prevents system overloading with limits on file sizes (<code class="inline-code">MAX_FILE_SIZE_MB</code>) and scan depths (<code class="inline-code">MAX_SCAN_DEPTH</code>).</li>
</ul>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a>: Universe of Themes</h3>
<p>This file is a masterpiece of storytelling design, offering a centralized hub for managing the thematic essence of the <em>Starship Codexus</em>. At its core lies the <code class="inline-code">THEMES</code> object, a constellation of built-in adventure styles like ‚ÄúSpace Exploration‚Äù and ‚ÄúAncient Civilization.‚Äù Each theme includes a detailed description, keywords for easy input matching, and even fun little emojis to encapsulate the adventure&#39;s spirit. This file enables the selection and display of themes with utility functions such as <code class="inline-code">getAllThemes()</code> and <code class="inline-code">isValidTheme()</code>.</p>
<p>Dynamic parsing and validation functions like <code class="inline-code">parseTheme()</code> and <code class="inline-code">validateTheme()</code> ensure that users or automated processes cannot trip up the <em>Codexus</em> by choosing invalid or unsupported themes. These functions even account for user quirks, such as using theme IDs or synonyms. On the ship, this is like selecting the perfect soundtrack for a journey‚Äîa narrative voice that unites the crew and amplifies purpose.</p>
<h4>Highlights</h4>
<ul>
<li>Provides rich, pre-defined themes via the <code class="inline-code">THEMES</code> object with keywords and visually engaging descriptions.</li>
<li>Implements <code class="inline-code">validateTheme()</code> for error-proof theme selection with a built-in fallback to the default theme.</li>
<li>Dynamically parses user input (<code class="inline-code">parseTheme()</code>) to match numeric IDs, synonyms, or keywords to existing themes.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<pre><code class="language-typescript">export const LLM_MAX_TOKENS_STORY = Math.max(LLM_MAX_TOKENS, 8000); // Maximum tokens for story generation (use env var if higher)
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
export const FILE_ANALYSIS_TIMEOUT = 30000; // 30 seconds for focused, quick file analysis during exploration
export const DEFAULT_THEME = &#39;space&#39; as const;

// Timeouts in milliseconds
export const LLM_REQUEST_TIMEOUT = 60000;  // 60 seconds for complex story generation tasks
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;);  // Configurable cache timeout
</code></pre>
<p>Just like mission control at a spaceport, this configuration ensures the existing systems can respond to and handle external data efficiently without exceeding their limits.</p>
<hr>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust and APIs connect distant galaxies&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;, &#39;astronaut&#39;, &#39;sci-fi&#39;, &#39;futuristic&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards and functions are powerful spells&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;enchanted&#39;, &#39;castle&#39;, &#39;dragon&#39;, &#39;fantasy&#39;, &#39;medieval&#39;, &#39;kingdom&#39;]
  },
  CUSTOM: {
    id: 5,
    key: &#39;custom&#39;,
    displayName: &#39;Custom Theme&#39;,
    emoji: &#39;üé®&#39;,
    description: &#39;Design your own adventure! You\&#39;ll be prompted to provide theme name, description, and keywords&#39;,
    keywords: [&#39;custom&#39;, &#39;personalized&#39;, &#39;unique&#39;, &#39;creative&#39;, &#39;personal&#39;]
  }
} as const;

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function parseTheme(input: string): AdventureTheme | null {
  if (!input) return null;

  const normalized = input.trim().toLowerCase();

  const exactMatch = getThemeByKey(normalized);
  if (exactMatch) return exactMatch.key as AdventureTheme;
}
</code></pre>
<p>Picking a theme is like choosing a narrative warp drive‚Äîit‚Äôs not just the aesthetics, but the way it shapes how adventures unfold in a larger galaxy of encounters.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Cross-check all timeout settings in <code class="inline-code">config.ts</code> to confirm they‚Äôre aligned with the performance capabilities of your platform or system.</li>
<li>If building your own theme, use <code class="inline-code">validateTheme()</code> and <code class="inline-code">parseTheme</code> to ensure user-friendly input handling‚Äîtest various phrasings and typo cases.</li>
<li>For thematic adventure expansion, consider enhancing <code class="inline-code">THEMES</code> with more keywords so users can find their desired journeys intuitively.</li>
</ul>
<hr>
<p>Mission Accomplished, Star Commander! ‚≠ê You&#39;ve mastered the cosmic art of Configuration and Themes, fueling your starship to 75% completion‚Äînext stop: the final frontier! üöÄ‚ö°</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>