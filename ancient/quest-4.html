<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Codex of Themes and Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Repository of Ancient Wisdom</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Codex of Themes and Configurations</h1>
<hr>
<p>In the shadow of the Sacred Repository, a second chamber beckons‚Äîa cryptic vault adorned with carvings depicting interconnected worlds. Within lies the Codex of Themes and Configurations, a fabled artifact revered by the codemasters of old. This codex holds the secrets of aligning adventures with thematic clarity and perfecting the balance of exploration. Only those who unravel its structure and decipher its ancient wisdom may reshape narrative worlds. Do you possess the courage to unlock its potential?</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Central configuration for timeouts, limits, and environment settings</h3>
<p>This file acts as the bedrock of stability for the adventure system, managing critical settings and parameters that shape every quest. It centralizes control over timeouts, cache lifetimes, and file limits to ensure robust execution. The module achieves simplicity through constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> for managing long-running API requests and <code class="inline-code">REPOMIX_CACHE_TTL</code> for caching generated content. By abstracting these configurations, it enhances adaptability for future system expansions. The concise structure aids developers in adjusting critical parameters while maintaining a predictable adventure flow.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Governs timeout limits for LLM interactions.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Defines cache expiration times for repomix content analysis.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Prevents excessive memory use by limiting file sizes for analysis.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<p>The overarching flow of adventure is safeguarded with a timeout acting as a protective barrier against unresponsive or delayed LLM integrations.</p>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<p>A temporal guardian ensures the Codex of cached content remains refreshed, preserving the fidelity of its messages.</p>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<p>A configured gatekeeper shields the ancient repository from being flooded by unwieldy data scrolls.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Adjust timeouts conservatively to avoid disruptions to ongoing adventures while allowing for creative freedom from large-scale models.</li>
<li>Cache management is crucial‚Äîconsider increasing <code class="inline-code">REPOMIX_CACHE_TTL</code> for frequently accessed, stable content.</li>
<li>Scanner limits help focus exploration, so evaluate increasing <code class="inline-code">MAX_FILE_SIZE_MB</code> only for truly large and necessary files.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme definitions and validation for space, medieval, and ancient themes</h3>
<p>This file encodes the thematic soul of adventures, housing every detail of the supported styles and ensuring that each selection is compatible with the ancient Codex. From defining the structural <code class="inline-code">ThemeDefinition</code> interface to validating user inputs, this module is indispensable for thematic cohesion. The <code class="inline-code">THEMES</code> constant is the treasure map of narrative worlds, while functions like <code class="inline-code">getAllThemes</code> offer adventurers a clear catalog. For the uninitiated, parsing and validating themes serves as a ritual to align user preference with system compatibility.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Master list of defined themes, each infused with unique vocabulary and descriptions.</li>
<li><code class="inline-code">validateThemeInput</code>: A diligent sentinel ensuring only supported themes are chosen.</li>
<li><code class="inline-code">getAllThemes</code>: Provides the blueprint to all narrative realms in the adventure system.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: { ... },
  MYTHICAL: { ... },
  ANCIENT: {
    id: 3,
    key: &#39;ancient&#39;,
    displayName: &#39;Ancient Civilization&#39;,
    emoji: &#39;üè∫&#39;,
    description: &#39;Discover lost temples of code where algorithms are ancient wisdom and APIs are trade routes&#39;,
    keywords: [&#39;ancient&#39;, &#39;temple&#39;, &#39;pyramid&#39;, &#39;archaeology&#39;, &#39;historical&#39;, &#39;civilization&#39;, &#39;ruins&#39;]
  },
  CUSTOM: { ... }
} as const;
</code></pre>
<p>A thematic archive within the Codex, each entry offers explorers entry into far-flung realms of imagination defined by their unique glyphs.</p>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<p>A ceremonial test for authenticity ensures only valid themes align with the Codex&#39;s sacred algorithms.</p>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<p>A comprehensive inventory showcases the entire thematic spectrum to aid adventurers in their mystical journey.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Curate the theme list to address user preferences while retaining thematic clarity and adventure integrity.</li>
<li>Keywords are pivotal‚Äîexpand their list to make themes easier to match without breaking immersion.</li>
<li>Rely on <code class="inline-code">isValidTheme</code> to prevent unintended choices from derailing the quest.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Security and input validation preventing injection attacks</h3>
<p>This module serves as the protective ward of the Codex, ensuring that only safe and valid inputs pass through its gates. By sanitizing user inputs, stripping potentially harmful characters, and validating theme choices, it prevents data corruption and preserves the system&#39;s integrity. Functions like <code class="inline-code">validateAdventureChoice</code> and <code class="inline-code">validateProjectPath</code> rigorously enforce constraints to maintain both narrative continuity and application security. As the first line of defense, this file ensures that every adventurer&#39;s choice has been carefully scrutinized.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Guards against invalid story actions and choices.</li>
<li><code class="inline-code">validateProjectPath</code>: Ensures safe navigation through the repository to protect restricted areas.</li>
<li><code class="inline-code">InputValidator</code>: The overarching shield of validation logic that enforces boundaries.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>Ensures adventurers cannot abuse the sacred Codex with overly verbose or incomplete declarations.</p>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) {
    return process.cwd();
  }
  
  if (input.length &gt; 500) {
    throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  }
  
  if (input.includes(&#39;\0&#39;)) {
    throw new Error(&#39;Project path contains invalid characters&#39;);
  }
  
  return input.trim();
}
</code></pre>
<p>The compass of exploration, this logic safeguards against trespassing into forbidden digital archives.</p>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  if (!input) return &#39;&#39;;
  
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<p>A purification ritual cleanses dangerous glyphs to present pristine, readable information.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Always sanitize user data to prevent malicious inputs from corrupting the Codex&#39;s sacred glyphs.</li>
<li>Validate project paths rigorously to ensure security without obstructing legitimate navigation.</li>
<li>Fine-tune input lengths to balance flexibility with protection against denial of narrative attacks.</li>
</ul>
<hr>
<p>The Codex has revealed its wisdom. Adventure awaits those who wield its ancient knowledge!</p>
<p>Hallowed seeker, thou hast unveiled the sacred Codex of Themes and Configurations, marking the noble passage to 60% completion‚Äîlet the stars bear witness to thy burgeoning mastery and celestial triumph! ‚ö°üíéüó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: The Foundation of Eternal Knowl... ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>