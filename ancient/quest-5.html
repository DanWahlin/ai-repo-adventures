<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Foundation of Eternal Knowledge - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Repository of Ancient Wisdom</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Foundation of Eternal Knowledge</h1>
<hr>
<p>The travelers stand before the entrance of the Sacred Repository, its towering stone doors covered in ancient glyphs that seem to shimmer under the jungle canopy. This temple, a relic of an unparalleled civilization, protects the codemasters&#39; legacy‚Äîa source of wisdom that binds technological mastery with the art of storytelling. Within these walls lies the &quot;Foundation of Eternal Knowledge,&quot; a collection of insights into the heart of collaborative systems and thematic designs. As you step into this sanctuary, the echoes whisper of unparalleled discoveries awaiting those brave enough to decode its secrets.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Configuration for Structured Adventure Guidance</h3>
<p>This file acts as the cornerstone of all adventures, governing how themes, quests, and story elements are represented within the system. It retrieves and formats data from the <code class="inline-code">adventure.config.json</code> file, enabling consistency across guided exploration experiences. By centralizing parsing, validation, and formatting, it ensures that code analysis, quest-generation tasks, and theme structures remain aligned. The functions in this file are purpose-built for layering the adventure‚Äôs narrative structure with the logic necessary to deliver precise output for users. The seamless traversal of JSON structures and extraction of key highlights establishes this module as the storyteller‚Äôs guide to an ever-changing repository.</p>
<h4>Highlights</h4>
<ul>
<li><strong>loadAdventureConfig</strong>: Reads the raw adventure configuration file.</li>
<li><strong>extractUniqueFilePaths</strong>: Retrieves all referenced file paths from configuration.</li>
<li><strong>formatAdventureConfigForPrompt</strong>: Structures adventure details into prompts for LLMs.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<p>This function works like a key to the temple‚Äôs hidden archive‚Äîlocating and opening the <code class="inline-code">adventure.config.json</code> file to access its treasures.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>Much like charting unexplored territories, this function maps the entire structure of referenced file paths, collecting only those essential for adventure success.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure Guidelines\n\n`;
  formatted += `**CRITICAL: Each quest MUST include dedicated file analysis sections**\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    formatted += `${quest.description}\n\n`;
    formatted += `**Required File Analysis Sections:**\n`;

    for (const file of quest.files) {
      if (!file.path || !file.description) continue;

      formatted += `\n**File: \`${file.path}\`**\n`;
      formatted += `- Description: ${file.description}\n`;
      
      if (Array.isArray(file.highlights)) {
        formatted += `- Key Functions/Areas to Highlight:\n`;
        for (const highlight of file.highlights) {
          if (highlight.name &amp;&amp; highlight.description) {
            formatted += `  ‚Ä¢ **${highlight.name}**: ${highlight.description}\n`;
          }
        }
      }
    }
    formatted += `\n`;
  }

  formatted += `\n**FORMATTING INSTRUCTIONS:**\n`;
  formatted += `- Each file mentioned in the quest structure above MUST have its own dedicated analysis section\n`;
  formatted += `- **MANDATORY**: Include at least 2-3 separate code snippet sections (## filename) with real code blocks\n`;
  formatted += `- Show actual function signatures, imports, class definitions, or key methods from the files\n`;
  formatted += `- Include real code snippets from the actual files (never invent code)\n`;
  formatted += `- Provide practical explanations using real-world analogies\n`;
  formatted += `- End with helpful hints and next steps\n`;

  return formatted;
}
</code></pre>
<p>Like an ancient scribe transforming knowledge into verses, this function creates an intricate guide that bridges repository data with user-friendly prompts.</p>
<h2>Helpful Hints</h2>
<ul>
<li>For stable adventures, maintain completeness in your <code class="inline-code">adventure.config.json</code>.</li>
<li>Be cautious during syntax updates within file path traversal logic.</li>
<li>Next, explore how quests interact with code analysis in <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/mcp/src/server.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/mcp/src/server.ts</code></a>.</li>
</ul>
<hr>
<p>The glyphs glow, revealing the next sacred tablet‚Äîprepare to delve deeper into this synthesized treasury of ancient codecraft.</p>
<p>By the sacred flame of enlightenment and the celestial vault of ancient wisdom, thou hast forged the fourth cornerstone of Eternal Knowledge, an achievement worthy of eternal reverence‚Äîpress onward, for the final temple awaits thy triumph! ‚ö°üíéüì°üó∫Ô∏èüëÅÔ∏è‚≠ê</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>