<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Sacred Configuration Vault - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'ancient' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Pyramid of Lost Code</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Sacred Configuration Vault</h1>
<hr>
<p>The sun struggles to pierce through the tangled canopy of the overgrown jungle as you approach the fabled Pyramid of Lost Code. The air feels heavy with the weight of secrets long buried. Deep inside, the Sacred Configuration Vault awaitsâ€”a chamber whispered about in the myths of ancient codemasters. This vault was said to hold the blueprint for harmony between user choice and system architecture, a delicate balance that guided civilizations of tech-savvy engineers long before your time. With the hallowed sands crunching underfoot, you ready yourself to face puzzles as intricate as the labyrinth itself. The adventure begins anew.</p>
<hr>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Central configuration for guided adventures</h3>
<p>The <code class="inline-code">adventure-config.ts</code> file is the keystone to understanding how the Pyramid of Lost Code adapts to each brave adventurer. Like the sacred writings on the walls of the ancient temples, this file deciphers the <code class="inline-code">adventure.config.json</code>, transforming raw hieroglyphs into legible instructions. The codemasters of old must have designed the functions here with foresight beyond their era, creating methods that streamline the retrieval, parsing, and highlighting of critical data. <code class="inline-code">loadAdventureConfig()</code> is akin to opening a scroll, carefully unveiling the raw directives. Meanwhile, <code class="inline-code">parseAdventureConfig()</code> parses this knowledge into tangible wisdom, validating its structure and ensuring accuracy. Finally, <code class="inline-code">extractUniqueFilePaths()</code> maps every corner of the adventureâ€™s labyrinth by distilling distinct paths, helping explorers focus their attention where itâ€™s most needed. This makes it clear that no line of code is left to chance, and every relic has its place.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig()</code>: Fetches raw wisdom from the ancient <code class="inline-code">adventure.config.json</code> directly.</li>
<li><code class="inline-code">parseAdventureConfig()</code>: Understands and validates the configuration structure, ensuring no sacred detail is lost.</li>
<li><code class="inline-code">extractUniqueFilePaths()</code>: Compiles a list of the unique paths mentioned in the configurationâ€”like mapping the templeâ€™s internal corridors.</li>
</ul>
<hr>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">function readFileIfExists(filePath: string): string | null {
  try {
    return fs.readFileSync(filePath, &#39;utf-8&#39;);
  } catch {
    // Missing or unreadable file is non-fatal
    return null;
  }
}

export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}

export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This is like wiping away layers of dust to reveal an ancient inscription and figuring out which ones are readable and true.</p>
<hr>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    // Extract and validate path
    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    // Add children to stack
    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This is similar to navigating a maze with markers, ensuring you only follow the paths that lead toward your goal while ignoring dead ends.</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Consider customizing the <code class="inline-code">adventure.config.json</code> file to suit the themes of your questsâ€”this enables smoother exploration experiences.</li>
<li>For deeper understanding, follow the logical flow from <code class="inline-code">loadAdventureConfig()</code> to <code class="inline-code">extractUniqueFilePaths()</code> to see how configuration evolves into actionable paths.</li>
<li>Experiment with testing incomplete or invalid JSON configurations to see how the system handles errors gracefully.</li>
</ul>
<hr>
<p>And so, the Sacred Configuration Vault gifts you insightsâ€”not just about ancient code but about modern structure. Youâ€™ve deciphered yet another layer of the Pyramid&#39;s enigmatic wisdom. With this treasure in hand, will you uncover even greater secrets hidden further within? Onward to the next challenge!</p>
<p>Hail, seeker of wisdom! By unveiling the mysteries of the Sacred Configuration Vault, thou hast arisen as an enlightened architect of ancient lore; onward to glory, for the stars yet whisper of thy destined triumph! âš¡ðŸ’Žâœ¨</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>