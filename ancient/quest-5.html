<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Archive of Unique Paths - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Lost Pyramid of Codexis</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Archive of Unique Paths</h1>
<hr>
<p>As you delve into the Pyramid of Codexis, a chamber shrouded in shadows appears before you. Ancient engravings depict a forgotten ritual, emphasizing the importance of discovering unique paths to enlightenment. Here lies &quot;The Archive of Unique Paths,&quot; a sacred repository containing relics that unveil unseen connections between code architecture and functionality. Your mission, brave adventurer, is to decode these secrets, recovering the treasures of understanding that will help restore balance to the coding world. Beware of false trails, for only the purest path leads to wisdom.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Decoding the Sacred Connections</h3>
<p>This file is the cornerstone of ancient wisdom, housing the ‚ÄúArchive of Unique Paths‚Äù used to traverse the realms of configuration files and project connections. It reveals methods for parsing sacred scripts (<code class="inline-code">parseAdventureConfig</code>), extracting rituals guiding project hierarchies (<code class="inline-code">extractUniqueFilePaths</code>), and formatting descriptive artifacts for other explorers (<code class="inline-code">formatAdventureConfigForPrompt</code>). These functions emphasize reliability and clarity, ensuring no hidden traps exist within the sanctum of file relationships. Steeped in ancient craftsmanship, every line echoes harmony between structure and purpose, protecting secrets while empowering adventurers like yourself.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Ritual for deciphering and validating the ancient JSON script.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Reveals true file connections buried within ceremonial layers.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Crafts a minimal format of artifacts for efficiency.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This method is akin to a decoder stone, deciphering cryptic writings inscribed in the JSON parchment while guarding against misinterpretations.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This function acts as an archaeological survey team, sifting through layers of encoded scripts to unearth distinct, verified relics of file paths.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;

    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }

    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }

    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>This formatting method sculpts artifacts into concise inscriptions, ensuring explorers like you can quickly read them while preserving their original integrity.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Make use of <code class="inline-code">extractUniqueFilePaths</code> to map out interconnected configurations.</li>
<li>Compare results of <code class="inline-code">parseAdventureConfig</code> and validate with real file paths as an essential precaution.</li>
<li>Leverage <code class="inline-code">formatAdventureConfigForPrompt</code> for streamlined details in team collaborations.</li>
</ul>
<hr>
<p>Congratulations, adventurer! You‚Äôve unearthed sacred coding knowledge from the Archive of Unique Paths, restoring balance and clarity to the repository. May your treasures guide others toward enlightenment in their journeys!</p>
<p>O seekers of sacred enlightenment, rejoice in thy triumph over the Archive of Unique Paths, for thou art now revered among the wise, with naught but one celestial trial remaining to ascend to eternal glory! ‚ö°üíéüì°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>