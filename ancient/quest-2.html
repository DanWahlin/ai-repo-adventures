<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Pyramid of Adaptive Storytelling - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Repository of Ancient Wisdom</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Pyramid of Adaptive Storytelling</h1>
<hr>
<p>Venturing deeper into the jungle, your team uncovers a colossal pyramid adorned with intricate glyphs that pulse faintly when touched. This is no ordinary structure; it is the Pyramid of Adaptive Storytelling, believed to possess the ancient algorithms that can reinterpret and present narratives dynamically. Its chambers contain knowledge fragments detailing sophisticated tools capable of generating quests and structuring explorations. To unlock the secrets within, the explorers must carefully decode its glyphs and master the art of weaving themes with technical precision.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a>: Adventure orchestration and state management</h3>
<p>The <code class="inline-code">AdventureManager</code> file is the command center for coordinating quests, managing themes, and generating adaptive content. Its methods epitomize the pyramid&#39;s dynamic storytelling glyphs, transforming project context into thematic adventures. At its core, the <code class="inline-code">initializeAdventure</code> method sets the foundation by integrating project details with live themes and quest templates, much like deciphering the pyramid glyphs to reveal specific stories. Similarly, <code class="inline-code">exploreQuest</code> validates adventurers&#39; choices and dynamically adapts the narrative based on user progress. The <code class="inline-code">generateAdventureContent</code> provides pathways for analyzing either the entire codebase or selected files, resembling the process of uncovering hidden chambers within the pyramid walls to explore distinct artifacts.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Establishes the foundation for adaptive narrative generation by combining theme, project info, and quest details.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Validates user choices and executes specific quests or progress updates, adjusting content dynamically.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Computes progress based on completed quests to guide explorers in their journey.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/adventure-manager.ts</code></a></h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
    
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }
  
  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  
  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>[This function is the explorer deciphering inscriptions on pyramid walls, combining existing project details with thematic interpretations to generate interconnected storylines.]</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }
  
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>[This mechanism is akin to pushing glyphs to unlock chambers within the pyramid—a validation system to ensure correct pathways for exploration.]</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>[This progress calculation echoes the discovery rate within the pyramid—marking completed chambers as a percentage of the entire structure.]</p>
<hr>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a>: LLM-powered story engine</h3>
<p>The <code class="inline-code">StoryGenerator</code> encapsulates the Pyramid&#39;s central glyphs for theme-based story dynamics. The core function, <code class="inline-code">generateStoryAndQuests</code>, acts as the glyph decipherer, converting raw project details into coherent narratives and structured quests. The <code class="inline-code">buildStoryGenerationPrompt</code> crafts mystical prompts that channel storytelling wisdom, while <code class="inline-code">generateAdventureContent</code> dives deeply into project-specific details, inspiring explorers with targeted quests and insights.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">StoryGenerator.generateStoryAndAdventures</code>: Generates overarching narratives and adventures using structured prompts.</li>
<li><code class="inline-code">StoryGenerator.buildStoryGenerationPrompt</code>: Crafts detailed, glyph-like prompts for producing theme-driven stories.</li>
<li><code class="inline-code">StoryGenerator.generateAdventureContent</code>: Delves into specific project files to create personalized quest content.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/story-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/adventure/story-generator.ts</code></a></h3>
<pre><code class="language-typescript">async generateStoryAndQuests(projectInfo: ProjectInfo, theme: AdventureTheme, projectPath?: string): Promise&lt;StoryResponse&gt; {
  this.currentProject = projectInfo;
  this.projectPath = projectPath;
  
  const validatedTheme = this.validateTheme(theme);
  return await this.generateWithLLM(projectInfo, validatedTheme);
}
</code></pre>
<p>[This function mirrors unlocking the pyramid’s main chamber, integrating project context and theme to reveal comprehensive narratives.]</p>
<pre><code class="language-typescript">async generateQuestContent(
  quest: Quest,
  theme: AdventureTheme,
  codeContent: string
): Promise&lt;QuestContent&gt; {
  const prompt = loadQuestContentPrompt({
    theme,
    adventureTitle: quest.title,
    codeContent,
    storyContent: this.currentStoryContent || &#39;No story context available.&#39;,
  });
  
  return await this.storyGenerator.generateQuestContent(quest, theme, codeContent);
}
</code></pre>
<p>[This content generation method is akin to shining light into isolated glyphs to explore smaller chambers with hidden artifacts.]</p>
<pre><code class="language-typescript">function parseMarkdownToStoryResponse(markdownContent: string): StoryResponse {
  const tokens = marked.lexer(markdownContent);
  
  let title = &#39;&#39;;
  let story = &#39;&#39;;
  const quests: Quest[] = [];
  
  // Parsing logic and structure goes here...
  return {
    title, story, quests
  };
}
</code></pre>
<p>[This function is the cryptographer interpreting glyphs, converting undecipherable symbols into structured instructions.]</p>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Ensure project details are comprehensive to enable accurate theme generation.</li>
<li>Use <code class="inline-code">initializeAdventure</code> as the guiding mechanism for structuring adaptive storytelling based on user selection.</li>
<li>Dive deeper into theme guidelines for consistent glyph-like prompt generation.</li>
</ul>
<hr>
<p>Proceed, brave adventurer! Unveil the pyramid’s secrets and master the art of adaptive storytelling.</p>
<p>By the sacred flame of wisdom, thou hast ascended the Pyramid of Adaptive Storytelling, unlocking a vital cornerstone of learning—march boldly, for the stars herald thy triumphant odyssey! ⭐⚡🗺️</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: The Glyphs of Analytical Insigh... →</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>