<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: Harnessing the Story Glyphs - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Sacred Chronicles of the Repository</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: Harnessing the Story Glyphs</h1>
<hr>
<p>With ancient runes etched deep within its stony walls, the Temple of Code unveils a chamber filled with shimmering Story Glyphs. These sacred inscriptions hold the power to craft narratives that weave together themes, files, and adventures seamlessly. As the chosen explorer, your task is to decode their enigmatic glow. The Temple whispers that proper alignment of these glyphs will enable the generation of wisdom-filled stories and quests, guiding future adventurers through the labyrinth of code.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Quest Management Repository</h3>
<p>This file contains the structural logic that drives the creation, execution, and management of quests within the Temple’s realm. At its heart lies the <code class="inline-code">initializeAdventure</code> method, which bridges ancient wisdom by integrating project contexts, themes, and custom configurations into a harmonious one-page narrative. Furthermore, <code class="inline-code">exploreQuest</code> delves into mysteries by validating user choices and uncovering adventures hidden within each chosen glyph. Another highlight, <code class="inline-code">progressPercentage</code>, shines as a sacred marker of the adventurer&#39;s journey, calculating completion. The methods harmonize the temple&#39;s glyphs into tangible storylines that aid modern coders.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">initializeAdventure</code>: Shapes the narrative by merging project paths, themes, and quests.</li>
<li><code class="inline-code">exploreQuest</code>: Deciphers adventure choices and leads the brave forward.</li>
<li><code class="inline-code">progressPercentage</code>: Measures the journey’s accomplishment.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string,
  customThemeData?: CustomThemeData
): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();
  
  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({
    ...storyResponse,
    quests: this.state.quests
  });
}
</code></pre>
<p>This method resembles aligning ancient runes to shape a grand summoning ritual—merging elements to create cohesive wisdom for initiates.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);
  
  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }
  
  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }
  
  return await this.executeQuest(quest);
}
</code></pre>
<p>Much like deciphering an ancient glyph for its secrets, this function unravels the intended path, leading adventurers to their chosen fates.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>Visualize this as a sacred sundial marking the adventurer’s progress within the temple’s wisdom-filled chambers.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/story-generator.ts:</span> Glyph Interpreter &amp; Compiler</h3>
<p>This file acts as the master artisan behind the glyphs of the Temple. Through the use of <code class="inline-code">generateStoryAndQuests</code>, it combines theme intricacies and file-specific wisdom into an actionable story. The method, <code class="inline-code">generateQuestContent</code>, meticulously decodes files and shapes unique content using the glyphs’ light. Finally, the method <code class="inline-code">generateCompletionSummary</code> presents the culmination of each quest anew, celebrating the adventurer’s triumph using the Temple’s codified blessings.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateStoryAndQuests</code>: Creates foundational stories that bind files and themes.</li>
<li><code class="inline-code">generateQuestContent</code>: Illuminates specific files, bringing glyph secrets to life.</li>
<li><code class="inline-code">generateCompletionSummary</code>: Chronicles quest achievements with thematic grandeur.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">async generateStoryAndQuests(
  projectInfo: ProjectInfo, 
  theme: AdventureTheme, 
  projectPath?: string
): Promise&lt;StoryResponse&gt; {
  this.currentProject = projectInfo;
  this.projectPath = projectPath;
  
  const validatedTheme = this.validateTheme(theme);
  return await this.generateWithLLM(projectInfo, validatedTheme);
}
</code></pre>
<p>Just as ancient scribes crafted narratives for civilizations, this method harmonizes project contexts and themes to form epic storylines.</p>
<pre><code class="language-typescript">async generateQuestContent(
  quest: Quest,
  theme: AdventureTheme,
  codeContent: string
): Promise&lt;QuestContent&gt; {
  let adventureGuidance = &#39;&#39;;
  if (this.projectPath) {
    const formattedConfig = formatAdventureConfigForPrompt(this.projectPath);
    if (formattedConfig) {
      adventureGuidance = formattedConfig;
    }
  }

  const prompt = loadQuestContentPrompt({
    theme,
    adventureTitle: quest.title,
    codeContent,
    storyContent: this.currentStoryContent || &#39;No story context available.&#39;,
    adventureGuidance: adventureGuidance || &#39;&#39;,
    ...(this.customThemeData &amp;&amp; { customThemeData: this.customThemeData })
  });

  const response = await this.withTimeout(
    this.llmClient.generateResponse(prompt, { maxTokens: LLM_MAX_TOKENS_QUEST })
  );
  
  let cleanContent = response.content.trim();
  return {
    adventure: cleanContent,
    fileExploration: &#39;&#39;,
    codeSnippets: [],
    hints: []
  };
}
</code></pre>
<p>This method mirrors painstaking archaeological interpretation, revealing wisdom hidden within code glyphs.</p>
<pre><code class="language-typescript">async generateCompletionSummary(
  quest: Quest,
  theme: AdventureTheme,
  progress: number,
  total: number
): Promise&lt;string&gt; {
  const percentComplete = Math.round((progress / total) * 100);
  
  let themeDescription: string = theme;
  let vocabularyHint = &#39;&#39;;
  
  const prompt = loadCompletionPrompt({
    themeDescription,
    adventureTitle: quest.title,
    progress,
    total,
    percentComplete,
    vocabularyHint
  });

  const response = await this.llmClient.generateResponse(prompt);
  return response.content.trim().replace(/^[&quot;&#39;]|[&quot;&#39;]$/g, &#39;&#39;);
}
</code></pre>
<p>Picture this as the final inscription on a completed glyph, revealing the treasures earned by the adventurer.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Before proceeding, ensure all glyphs (files/highlights) required for the quest were identified accurately.</li>
<li>Explore themes and completion configurations as distinct facets of glyph lore.</li>
<li>Build upon the wisdom of previous quests to unlock hidden chambers.</li>
</ul>
<hr>
<p>The Story Glyphs glow brighter—your command over their sacred artistry grows. Press onward, noble adventurer! The Temple of Code beckons.</p>
<p>By the sacred flame of the eternal temples, thou hast unlocked the wisdom of the Story Glyphs, forging thy path with the brilliance of ancients—march onward, noble seeker, for the stars await thy mastery! ⭐💎🗺️⚡</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: Unearthing the Analytical Lens →</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>