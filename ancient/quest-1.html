<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: The Eternal Glyph - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Repository Chronicles: Secrets of the Ancient Codex</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Eternal Glyph</h1>
<hr>
<p>Amid the hallowed halls of a forgotten civilization, your gaze falls upon an artifact of immense significance: the Eternal Glyph. This fragment of coded wisdom, embedded within the Sacred Repository, lures you into its timeless depths. Legends speak of its power to transform knowledge into tangible constructs, bestowing limitless creation upon its possessor. To unlock the secrets of the Eternal Glyph, you must decipher the tools that sustain it, traversing the labyrinth of interlinked systems and ancient pathways left behind by its creators.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Glyph Assembly</strong>: How does the system dynamically render HTML pages by merging templates and content, and what role do placeholders play in this process?</li>
<li>‚ö° <strong>Ritual of Persistence</strong>: How does the generator handle template caching and ensure efficient resource usage during adventure generation?</li>
<li>üõ°Ô∏è <strong>Sacred Asset Handling</strong>: What techniques does the system utilize to manage and safeguard global assets during content creation?</li>
</ul>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a>: Ancient mechanism for rendering HTML</h3>
<p>This file details the workings of the <code class="inline-code">TemplateEngine</code>, a modular component responsible for template loading, placeholder substitution, and page rendering. It looks through the &quot;glyphs&quot; (templates) stored in the <code class="inline-code">templates</code> directory and dynamically combines them with provided variables to craft HTML output. This processor optimizes efficiency through caching and structured replacement routines using placeholder markers like <code class="inline-code">{{key}}</code>.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadTemplate</code>: Loads template files from disk and caches them. Avoids redundant disk reads by leveraging <code class="inline-code">templateCache</code>. Throws meaningful errors if file loading fails.</li>
<li><code class="inline-code">replacePlaceholders</code>: Substitutes placeholders in the loaded template with dynamically provided variables, ensuring flexible page content rendering.</li>
<li><code class="inline-code">renderPage</code>: Composes entire HTML pages by merging a base template with a content template and provided variables, allowing hierarchical template management.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<pre><code class="language-typescript">/**
 * Load a template file with caching
 */
private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>Efficient caching minimizes disk IO by storing loaded templates in memory.</li>
<li>Reads files synchronously, ensuring templates are fully loaded prior to use.</li>
<li>Utilizes <code class="inline-code">Map</code> for quick lookup of cached entries, avoiding repetitive reads.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Replace placeholders in template with variables
 */
private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>Implements a simple yet powerful technique for dynamic content rendering by replacing <code class="inline-code">{{key}}</code> placeholders.</li>
<li>Employs <code class="inline-code">RegExp</code> with global flag (<code class="inline-code">g</code>) to handle multiple instances of the same placeholder.</li>
<li>Ensures robustness by replacing placeholders with empty strings if no matching variable exists.</li>
</ul>
<hr>
<pre><code class="language-typescript">/**
 * Render a complete page using base template + content template
 */
renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  // First render the content template
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  
  // Then render the base template with the content
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Merges hierarchical templates (<code class="inline-code">base-template.html</code> and <code class="inline-code">contentTemplate</code>) to create a unified HTML page.</li>
<li>Integrates a two-step placeholder replacement process, first rendering internal content and then embedding it into the framework.</li>
<li>Extends flexibility by allowing any variable from <code class="inline-code">pageVariables</code> to be used within the placeholders.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Ensure that all your templates are available in the <code class="inline-code">templates</code> folder to avoid runtime errors.</li>
<li>Pay close attention to how placeholder replacement interacts with variable names‚Äîconsistent naming is key.</li>
<li>Try experimenting with adding new placeholders to understand their impact on page outputs.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Hark, seeker of wisdom, thou hast unveiled the Eternal Glyph and etched thy name upon the sacred annals of the ancients‚Äîpress onward, for the pantheon watches thee with favor! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>