<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mystic Forge of HTML Adventures - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Repository Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Mystic Forge of HTML Adventures</h1>
<hr>
<p>In the mystical Kingdom of Code, a great repository known as the Enchanted Repository safeguards the secrets of interactive storytelling. Deep within its halls lies the Mystic Forge, where raw code is transformed into enchanting HTML adventures. Brave adventurer, your task is to uncover the secrets of the Forge by exploring its spellbinding components: the HTML generator, the template engine, and the asset manager. These tools, imbued with arcane knowledge, will guide you in crafting immersive tales that captivate and educate.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>HTML Generation Pipeline</strong>: How the <code class="inline-code">HTMLAdventureGenerator</code> orchestrates the creation of interactive HTML adventures.</li>
<li>üîç <strong>Template Rendering</strong>: How the <code class="inline-code">TemplateEngine</code> dynamically replaces placeholders to generate customized HTML pages.</li>
<li>‚ö° <strong>Asset Management</strong>: How the <code class="inline-code">AssetManager</code> ensures all necessary resources are copied and organized for multi-theme adventures.</li>
<li>üí° <strong>Extensibility Patterns</strong>: How modular design enables adding new themes or assets without disrupting existing functionality.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> is the heart of the Mystic Forge, orchestrating the entire HTML generation process. It analyzes the codebase, generates themed stories and quests, and creates an interactive website. This file demonstrates the integration of multiple components like the <code class="inline-code">AdventureManager</code>, <code class="inline-code">TemplateEngine</code>, and <code class="inline-code">AssetManager</code> to produce cohesive outputs.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a>: Manages the full pipeline from repository analysis to HTML generation.</li>
<li><code class="inline-code">generateAllThemes</code>: Enables multi-theme generation by isolating state for each theme.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Dynamically combines and adjusts CSS for theme-specific styling.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );
  this.extractQuestInfo();
  await this.generateThemeCSS();
  const assetManager = await this.getAssetManager();
  assetManager.copyQuestNavigator(this.outputDir);
  this.generateIndexHTML();
  await this.contentGenerator.generateQuestPages();
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>This function orchestrates the HTML generation pipeline, starting from repository analysis.</li>
<li>It integrates the <code class="inline-code">AdventureManager</code> for story generation and the <code class="inline-code">AssetManager</code> for resource handling.</li>
<li>The modular design allows for easy substitution or extension of components.</li>
<li>Quest extraction ensures only the required number of quests are processed, improving efficiency.</li>
<li>CSS generation and asset copying are centralized, simplifying theme-specific customization.</li>
</ul>
<hr>
<pre><code class="language-typescript">static async generateSingleThemeStatic(
  theme: AdventureTheme,
  themeDir: string,
  maxQuests: number | undefined,
  logLlmOutput: boolean,
  logLlmOutputDir: string
): Promise&lt;void&gt; {
  const themeGenerator = new HTMLAdventureGenerator();
  themeGenerator.selectedTheme = theme;
  themeGenerator.outputDir = themeDir;
  themeGenerator.maxQuests = maxQuests;
  themeGenerator.logLlmOutput = logLlmOutput;
  themeGenerator.logLlmOutputDir = logLlmOutputDir;
  themeGenerator.isMultiTheme = true;
  await themeGenerator.generateAdventure();
}
</code></pre>
<ul>
<li>This static method isolates state for each theme, enabling parallel generation without conflicts.</li>
<li>The <code class="inline-code">maxQuests</code> parameter allows fine-grained control over the number of quests generated.</li>
<li>By creating a new instance for each theme, the method prevents shared state corruption.</li>
<li>This design supports scalability, making it ideal for large projects with multiple themes.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> is the enchanter of the Forge, transforming raw templates into fully-rendered HTML pages. It supports caching for efficiency and dynamically replaces placeholders using provided variables.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a>: Combines base and content templates to generate complete HTML pages.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a>: Dynamically substitutes placeholders with variable values.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a>: Caches templates to improve performance during repeated rendering.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = { ...variables, CONTENT: renderedContent };
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>This function renders a complete HTML page by combining a base template with dynamic content.</li>
<li>The <code class="inline-code">CONTENT</code> placeholder allows for modular insertion of quest-specific HTML.</li>
<li>By separating base and content templates, the system achieves a clean separation of concerns.</li>
<li>This design supports reusability, enabling consistent styling across all pages.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  return result;
}
</code></pre>
<ul>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> function performs dynamic substitution of placeholders.</li>
<li>Regular expressions ensure all instances of a placeholder are replaced, not just the first.</li>
<li>This approach supports flexibility, allowing templates to be reused with different data.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> is the steward of the Forge, ensuring all images, styles, and scripts are copied to their rightful places. It supports both single-theme and multi-theme configurations.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a>: Copies shared assets like images and CSS for multi-theme generation.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a>: Handles theme-specific assets like the quest navigator.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a>: Dynamically loads and combines CSS files for the selected theme.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
  const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
  fs.mkdirSync(targetImagesDir, { recursive: true });
  const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
  const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
  fs.copyFileSync(headerImageSource, headerImageTarget);
}
</code></pre>
<ul>
<li>This function ensures global assets like images are copied to the correct directory.</li>
<li>The use of <code class="inline-code">mkdirSync</code> with <code class="inline-code">recursive: true</code> guarantees directories are created as needed.</li>
<li>This approach centralizes asset management, reducing duplication across themes.</li>
</ul>
<hr>
<pre><code class="language-typescript">loadThemeCSS(theme: string): string {
  return this.loadCSSFile(`themes/${theme}.css`, &#39;themes/default.css&#39;);
}
</code></pre>
<ul>
<li>This function dynamically loads theme-specific CSS, falling back to a default if unavailable.</li>
<li>The modular design simplifies the addition of new themes without modifying core logic.</li>
<li>This fallback mechanism ensures robustness, preventing errors due to missing files.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> method as a blueprint for creating your own custom pipelines.</li>
<li>Study the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> function to understand dynamic template rendering.</li>
<li>Experiment with the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a> function to add new resources to your adventures.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><p><strong>Add a New Theme</strong>: Create a new theme by adding a CSS file and modifying the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> function. Generate an adventure to see your custom theme in action.</p>
</li>
<li><p><strong>Customize Templates</strong>: Modify the base and content templates to include additional placeholders. Use the <code class="inline-code">TemplateEngine</code> to render a page with your custom data.</p>
</li>
<li><p><strong>Optimize Asset Management</strong>: Enhance the <code class="inline-code">AssetManager</code> to validate file existence before copying, and log meaningful errors for missing assets.</p>
</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries hidden within the Enchanted Repository.</p>
<p>By the radiant stars of the Celestial Codex, you have forged the first spark in the Mystic Forge of HTML Adventures‚Äîrise, noble coder, for your journey to mastery begins anew! ‚ö°üíéüó∫Ô∏è</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>