<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Castle of Static Sites - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-mythical">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Enchanted Repository Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: The Castle of Static Sites</h1>
<hr>
<p>In the enchanted realm of Codethia, the Castle of Static Sites stands as a bastion of creativity, where the knights of structured logic forge their magical adventures. Within the castle walls, the HTML Generator transforms mundane repositories into mythical quests, weaving stories that inspire and educate. Armed with the mighty tools of the Template Engine and Asset Manager, adventurers must conquer the intricacies of static site generation, ensuring that their quests sparkle with magic and order.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Dynamic HTML Generation</strong>: How the <code class="inline-code">HTMLAdventureGenerator</code> transforms project data into themed HTML adventures.</li>
<li>üîç <strong>Template Rendering</strong>: Techniques for modular and reusable HTML generation using the <code class="inline-code">TemplateEngine</code>.</li>
<li>‚ö° <strong>Asset Management</strong>: The importance of organized asset handling and copying for multi-theme adventures.</li>
<li>üí° <strong>CSS Integration</strong>: How theme-specific and global CSS are loaded and adapted for static sites.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> is the heart of the static site pipeline, orchestrating the generation of HTML content for mythical-themed adventures. It analyzes codebases, generates themed stories, and produces quest pages while ensuring CSS and assets are properly integrated. This file demonstrates advanced orchestration patterns like modular generation, multi-theme support, and runtime configuration.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">HTMLAdventureGenerator.generateAdventure</code></a> orchestrates the end-to-end process of generating static site adventures from codebases, including analysis, quest extraction, and asset management.</li>
<li><code class="inline-code">HTMLAdventureGenerator.generateAllThemes</code> enables multi-theme generation with isolated state for each theme, ensuring parallel processing and consistency.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L363" target="_blank" rel="noopener noreferrer"><code class="inline-code">HTMLAdventureGenerator.generateThemeCSS</code></a> dynamically loads and combines CSS files, adapting image paths for single or multi-theme modes.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();

  this.htmlBuilder = new HTMLBuilder(
    this.adventureManager,
    this.templateEngine,
    this.contentProcessor,
    this.projectPath,
    this.selectedTheme,
    this.isMultiTheme,
    this.quests
  );

  const assetManager = await this.getAssetManager();
  assetManager.copyQuestNavigator(this.outputDir);
  assetManager.copyImages(this.outputDir, this.isMultiTheme);

  this.generateIndexHTML();
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>This method analyzes the codebase with <code class="inline-code">repoAnalyzer</code> to generate foundational project insights for quests and stories.</li>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts#L59" target="_blank" rel="noopener noreferrer"><code class="inline-code">initializeAdventure</code></a> method uses the selected theme to generate unique content based on project analysis.</li>
<li>Modular components like <code class="inline-code">HTMLBuilder</code> and <code class="inline-code">AssetManager</code> ensure clean separation of concerns for building content and managing assets.</li>
<li>Quest extraction and asset copying integrate seamlessly to produce a complete adventure site.</li>
</ul>
<hr>
<pre><code class="language-typescript">static async generateSingleThemeStatic(
  theme: AdventureTheme,
  themeDir: string,
  maxQuests: number | undefined,
  logLlmOutput: boolean,
  logLlmOutputDir: string
): Promise&lt;void&gt; {
  const themeGenerator = new HTMLAdventureGenerator();
  themeGenerator.selectedTheme = theme;
  themeGenerator.outputDir = themeDir;
  themeGenerator.maxQuests = maxQuests;
  themeGenerator.logLlmOutput = logLlmOutput;
  themeGenerator.logLlmOutputDir = logLlmOutputDir;
  themeGenerator.isMultiTheme = true;

  await themeGenerator.generateAdventure();
}
</code></pre>
<ul>
<li>This static method demonstrates parallel processing by isolating state for multi-theme generation.</li>
<li>Each theme&#39;s generator operates independently, ensuring clean and reproducible results.</li>
<li>Parameters like <code class="inline-code">maxQuests</code> and logging options provide flexibility for custom configurations.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> simplifies HTML generation by loading, caching, and dynamically replacing placeholders in templates. It enables modular design and ensures flexibility when rendering pages with theme-specific variables.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">TemplateEngine.renderPage</code></a> combines base and content templates to produce complete HTML pages, replacing placeholders with dynamic values.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">TemplateEngine.replacePlaceholders</code></a> efficiently substitutes variables in templates, supporting reusable designs.</li>
<li>Template caching reduces redundant file reads, improving performance during theme generation.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>This function integrates a base template with dynamic content, ensuring consistent design across generated pages.</li>
<li>The <code class="inline-code">variables</code> object provides flexibility for injecting theme-specific or project-specific data.</li>
<li>Modular rendering supports multi-theme architectures by allowing different content templates to be swapped dynamically.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;

  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }

  return result;
}
</code></pre>
<ul>
<li>This method replaces placeholder tags (<code class="inline-code">{{key}}</code>) with corresponding values from the <code class="inline-code">variables</code> object.</li>
<li>Regex-based replacement ensures all instances of a placeholder are updated across the template.</li>
<li>This technique simplifies dynamic content injection for complex templates.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> handles the copying and management of assets like images, CSS files, and shared resources. It ensures that static files are properly organized and accessible in generated websites.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">AssetManager.copyQuestNavigator</code></a> transfers navigation files to theme-specific directories, enabling interactive quest exploration.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">AssetManager.copyGlobalAssets</code></a> consolidates shared assets for multi-theme adventures, reducing duplication.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">AssetManager.loadThemeCSS</code></a> dynamically loads CSS files with fallback options, ensuring proper styling for all themes.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyQuestNavigator(outputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  const assetsDir = path.join(outputDir, &#39;assets&#39;);
  fs.mkdirSync(assetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(assetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(assetsDir, &#39;quest-navigator.js&#39;));
  }
}
</code></pre>
<ul>
<li>This method copies essential navigation files (<code class="inline-code">CSS</code> and <code class="inline-code">JS</code>) to ensure interactive functionality in quest pages.</li>
<li>Directory creation uses <code class="inline-code">recursive</code> mode, guaranteeing that nested directories are properly set up.</li>
<li>The code demonstrates defensive programming by checking file existence before copying.</li>
</ul>
<hr>
<pre><code class="language-typescript">loadThemeCSS(theme: string): string {
  return this.loadCSSFile(`themes/${theme}.css`, &#39;themes/default.css&#39;);
}
</code></pre>
<ul>
<li>This function dynamically loads theme-specific CSS files with fallback support to ensure consistent styling.</li>
<li>It prioritizes the requested theme while falling back to default styles if the theme is unavailable.</li>
<li>The modular design simplifies handling multiple themes within a single pipeline.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use the <code class="inline-code">TemplateEngine</code> to simplify page creation by focusing on content templates and placeholder values.</li>
<li>Leverage the <code class="inline-code">AssetManager</code> to organize assets effectively for both single-theme and multi-theme configurations.</li>
<li>Study the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">HTMLAdventureGenerator.generateAdventure</code></a> method to understand how modular components integrate for static site generation.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><p><strong>Customize Templates</strong>: Modify the <code class="inline-code">base-template.html</code> to include a new footer section with dynamic content. Use the <code class="inline-code">TemplateEngine</code> to inject variables into the footer and test the result in a generated theme.</p>
</li>
<li><p><strong>Add a New Asset</strong>: Create a new theme-specific image and update the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">AssetManager.copyImages</code></a> method to include it. Verify that the image appears correctly in single-theme and multi-theme modes.</p>
</li>
<li><p><strong>Dynamic CSS Adjustment</strong>: Enhance the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> method to support additional fallback levels, such as loading a backup CSS file if both the theme and default styles are unavailable.</p>
</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of Codethia&#39;s enchanted codebase.</p>
<p>By the stars of wisdom and the flames of triumph, you have claimed victory over &#39;The Castle of Static Sites,&#39; forging the first step in a heroic quest that will illuminate the realms of knowledge with your brilliance! ‚ö°‚≠êüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>