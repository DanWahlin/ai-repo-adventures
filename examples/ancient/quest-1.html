<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decipher the Glyphs of HTML Creation - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-ancient">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Sacred Repository of Ancient Wisdom</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: Decipher the Glyphs of HTML Creation</h1>
<hr>
<p>In the dense undergrowth of the Sacred Repository lies the Glyph Chamber, where the ancient civilization‚Äôs secrets of HTML creation are etched into stone slabs. These glyphs represent the rituals of rendering, asset management, and static site generation. As the chosen adventurer, you must carefully decode these inscriptions to understand the intricate processes that transform raw knowledge into beautifully crafted HTML. Each glyph unveils a piece of the puzzle, guiding you closer to mastering the sacred art of HTML generation.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Template Rendering</strong>: How placeholders in templates are dynamically replaced with content variables.</li>
<li>üîç <strong>Asset Management</strong>: Techniques for copying and organizing shared and theme-specific assets.</li>
<li>‚ö° <strong>HTML Generation Workflow</strong>: The step-by-step process of generating static HTML pages from codebase analysis.</li>
<li>üí° <strong>Error Handling in File Operations</strong>: How defensive programming ensures robustness during file manipulation.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> is the cornerstone of the HTML creation ritual. It retrieves templates, replaces placeholders with dynamic content, and renders complete HTML pages. This file demonstrates the principles of modular design and caching for efficient template rendering.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a>: Fetches and caches template files for reuse, reducing redundant file reads.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a>: Substitutes placeholders in templates with provided variables, enabling dynamic content generation.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a>: Combines a base template with content to produce a fully rendered HTML page.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>This function retrieves a template file from the disk and caches it for future use, improving performance.</li>
<li>The <code class="inline-code">templateCache</code> Map ensures that templates are only read from the file system once.</li>
<li>Defensive programming is used to handle file read errors gracefully, preventing runtime crashes.</li>
<li>The <code class="inline-code">path.join</code> method ensures cross-platform compatibility for file paths.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>This function dynamically replaces placeholders (e.g., <code class="inline-code">{{key}}</code>) in the template with corresponding values from the <code class="inline-code">variables</code> object.</li>
<li>Regular expressions are used to ensure all instances of a placeholder are replaced globally.</li>
<li>The use of <code class="inline-code">Object.entries</code> simplifies iteration over the key-value pairs in <code class="inline-code">variables</code>.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>This function orchestrates the rendering of a complete HTML page by combining a base template with specific content.</li>
<li>The <code class="inline-code">CONTENT</code> variable acts as a placeholder for the dynamically rendered content.</li>
<li>The method demonstrates composability by reusing <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a> and <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a>.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> is the keeper of the repository&#39;s treasures, responsible for copying and organizing assets such as images, CSS, and shared resources. This file highlights the importance of modularity and error handling in asset management.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyImages</code></a>: Copies theme-specific and shared images to the output directory, ensuring proper organization.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L54" target="_blank" rel="noopener noreferrer"><code class="inline-code">copySharedNavigator</code></a>: Transfers shared navigator files to the output directory for multi-theme support.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a>: Manages the copying of global assets, including homepage CSS and shared images.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);

  try {
    if (fs.existsSync(sourceImagesDir)) {
      fs.mkdirSync(targetImagesDir, { recursive: true });
      const imageFiles = fs.readdirSync(sourceImagesDir);
      imageFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceImagesDir, file);
        const targetPath = path.join(targetImagesDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy images from source directory&#39;));
  }
}
</code></pre>
<ul>
<li>This function ensures that theme-specific and shared images are copied to the correct output directory.</li>
<li>The use of <code class="inline-code">fs.mkdirSync</code> with <code class="inline-code">{ recursive: true }</code> ensures that the target directory is created if it does not already exist.</li>
<li>Error handling with <code class="inline-code">try-catch</code> ensures the process continues even if image copying fails.</li>
</ul>
<hr>
<pre><code class="language-typescript">copySharedNavigator(rootOutputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const sharedAssetsDir = path.join(rootOutputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(sharedAssetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(sharedAssetsDir, &#39;quest-navigator.css&#39;));
  }
}
</code></pre>
<ul>
<li>This function copies shared navigator files (e.g., CSS) to a consolidated directory for multi-theme support.</li>
<li>The modular design allows this functionality to be reused across different parts of the generation pipeline.</li>
<li>The <code class="inline-code">fs.existsSync</code> check ensures that files are only copied if they exist, preventing unnecessary errors.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> is the master architect, orchestrating the entire HTML generation process. It combines repository analysis, template rendering, and asset management into a cohesive workflow.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a>: Coordinates the full adventure generation process, from analysis to HTML rendering.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Combines theme-specific and base CSS into a single file for consistent styling.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L382" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateIndexHTML</code></a>: Creates the main index page for the adventure, linking to all quest pages.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath
  );

  this.extractQuestInfo();
  await this.generateThemeCSS();
  this.generateIndexHTML();
  await this.contentGenerator.generateQuestPages();
}
</code></pre>
<ul>
<li>This function serves as the entry point for generating an adventure, combining repository analysis, story generation, and HTML rendering.</li>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/adventure/adventure-manager.ts#L59" target="_blank" rel="noopener noreferrer"><code class="inline-code">initializeAdventure</code></a> method dynamically generates quests based on the analyzed codebase.</li>
<li>Each step is modular, allowing for easier debugging and testing.</li>
</ul>
<hr>
<pre><code class="language-typescript">private async generateThemeCSS(): Promise&lt;void&gt; {
  const assetManager = await this.getAssetManager();
  const themeCSS = assetManager.loadThemeCSS(this.selectedTheme);
  const baseCSS = assetManager.loadBaseCSS();
  const animationsCSS = assetManager.loadAnimationsCSS();

  const combinedCSS = themeCSS + &#39;\n\n&#39; + baseCSS + &#39;\n\n&#39; + animationsCSS;
  const cssPath = path.join(this.outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>This function combines theme-specific, base, and animations CSS into a single file for consistent styling.</li>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> method retrieves the appropriate CSS file based on the selected theme.</li>
<li>Writing the combined CSS to a single file simplifies asset management.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">TemplateEngine</code> to experiment with dynamic content rendering by creating a custom template and rendering it with different variables.</li>
<li>Study the <code class="inline-code">AssetManager</code>&#39;s modular functions to understand how shared assets are organized for multi-theme support.</li>
<li>Explore the <code class="inline-code">HTMLAdventureGenerator</code> workflow to see how repository analysis feeds into HTML generation.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Custom Template Experiment</strong>: Create a new content template and use <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">TemplateEngine.renderPage</code></a> to render it with dynamic variables. Observe how placeholders are replaced with actual content.</li>
<li><strong>Theme-Specific Asset Test</strong>: Add a new theme-specific image and modify <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">AssetManager.copyImages</code></a> to include it in the output directory. Verify its inclusion in the generated HTML pages.</li>
<li><strong>Quest Limitation</strong>: Modify the <code class="inline-code">maxQuests</code> parameter in <code class="inline-code">HTMLAdventureGenerator</code> to limit the number of generated quests. Check how the system adapts to this constraint.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the Sacred Repository.</p>
<p>By the sacred fires of the Temple of Knowledge, thou hast unlocked the ancient wisdom of HTML glyphs, forging thy path to mastery with divine triumph‚Äîhail to thy noble quest!</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>