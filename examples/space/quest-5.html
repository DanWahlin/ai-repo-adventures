<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration & Theme Systems - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Starship Repository Explorer</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Configuration and Theme Systems</h1>
<hr>
<p>Your final mission takes you to the Configuration Nexus and Theme Core of the Repository Explorer, where the ship‚Äôs identity is defined and its operational parameters are calibrated. These systems ensure the starship adapts to every mission, from exploring ancient ruins of code to charting cosmic repositories. As you navigate this critical module, you&#39;ll uncover how the starship‚Äôs themes are dynamically applied and its configuration enables seamless adventures. Prepare to align the ship‚Äôs core systems and unleash its full potential!  </p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:  </p>
<ul>
<li>üéØ <strong>Dynamic Configuration</strong>: How centralized constants simplify system-wide adjustments.  </li>
<li>üîç <strong>Theme Management</strong>: How themes are defined, validated, and dynamically applied to adventures.  </li>
<li>‚ö° <strong>Input Validation</strong>: How strict validation ensures robust and secure user inputs.  </li>
<li>üí° <strong>Extensibility</strong>: How modular design supports adding new themes and configurations without breaking existing functionality.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<p>The <code class="inline-code">config.ts</code> module acts as the starship‚Äôs central control panel, defining critical constants and environment-specific settings. This file ensures consistent behavior across subsystems by centralizing timeouts, limits, and API configurations. It also demonstrates how default values and environment variables are cleanly integrated.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Defines the maximum time allowed for LLM requests, ensuring responsiveness during adventures.  </li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Sets the cache duration for repository analysis results, optimizing performance.  </li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Limits the size of files processed, preventing resource exhaustion.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.REPO_ADV_LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds  
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPO_ADV_REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds  
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues  
</code></pre>
<ul>
<li><strong>LLM_REQUEST_TIMEOUT</strong> ensures that API calls do not hang indefinitely, maintaining a smooth adventure experience.  </li>
<li><strong>REPOMIX_CACHE_TTL</strong> improves performance by reusing recent analysis results instead of reprocessing repositories.  </li>
<li><strong>MAX_FILE_SIZE_MB</strong> protects the system from processing overly large files that could degrade performance.  </li>
<li>These constants demonstrate the use of environment variables for flexibility and hardcoded fallbacks for reliability.  </li>
<li>The modular design allows easy updates to system limits without affecting other parts of the code.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<p>The <code class="inline-code">theme.ts</code> file is the creative engine of the Repository Explorer, defining all available adventure themes. It maps each theme to unique identifiers, descriptions, and visual elements, allowing the system to adapt to diverse storytelling styles.  </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Centralized definitions for all built-in themes, including their metadata and keywords.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L78" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeByKey</code></a>: Retrieves a theme by its unique key, enabling dynamic theme selection.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L88" target="_blank" rel="noopener noreferrer"><code class="inline-code">isValidTheme</code></a>: Validates theme inputs to ensure only supported themes are used.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const THEMES = {  
  SPACE: {  
    id: 1,  
    key: &#39;space&#39;,  
    displayName: &#39;Space Exploration&#39;,  
    emoji: &#39;üöÄ&#39;,  
    description: &#39;Journey through cosmic codebases...&#39;,  
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;]  
  },  
  MYTHICAL: {  
    id: 2,  
    key: &#39;mythical&#39;,  
    displayName: &#39;Enchanted Kingdom&#39;,  
    emoji: &#39;üè∞&#39;,  
    description: &#39;Explore magical realms...&#39;,  
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;dragon&#39;]  
  }  
};  
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> object defines each theme‚Äôs unique identity, such as its emoji and description, making it easy to expand with new themes.  </li>
<li>Keywords allow flexible user input matching, improving accessibility.  </li>
<li>Centralizing theme definitions ensures consistency across the system and avoids duplication.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {  
  return THEMES_ARRAY.some(t =&gt; t.key === theme);  
}  
</code></pre>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L88" target="_blank" rel="noopener noreferrer"><code class="inline-code">isValidTheme</code></a> checks if a given theme key exists in the system, preventing invalid inputs.  </li>
<li>This function safeguards against errors and ensures only supported themes are processed.  </li>
<li>The simple array-based approach is efficient for the small number of themes defined.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<p>The <code class="inline-code">theme-manager.ts</code> file bridges the gap between the core theme definitions and the HTML generator. It handles theme-specific assets, CSS generation, and dynamic adjustments for light or dark themes.  </p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Combines multiple CSS files into a single theme-specific stylesheet.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L49" target="_blank" rel="noopener noreferrer"><code class="inline-code">getGitHubLogo</code></a>: Dynamically selects the appropriate GitHub logo based on the theme‚Äôs color scheme.  </li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a>: Provides theme-specific icons for UI elements, enhancing the visual storytelling experience.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {  
  const cssFiles = [  
    path.join(this.themesDir, &#39;base.css&#39;),  
    path.join(this.themesDir, `${theme}.css`)  
  ];  
  let combinedCSS = &#39;&#39;;  
  cssFiles.forEach(cssFile =&gt; {  
    if (fs.existsSync(cssFile)) {  
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;  
    }  
  });  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);  
  fs.writeFileSync(cssPath, combinedCSS);  
}  
</code></pre>
<ul>
<li>This method dynamically combines base and theme-specific CSS, ensuring consistent styling across themes.  </li>
<li>It checks for file existence to avoid errors, demonstrating defensive programming.  </li>
<li>The modular approach makes it easy to add or update CSS files for new themes.</li>
</ul>
<hr>
<pre><code class="language-typescript">getGitHubLogo(theme: AdventureTheme): string {  
  return this.isLightTheme(theme)  
    ? &#39;assets/shared/github-mark.svg&#39;  
    : &#39;assets/shared/github-mark-white.svg&#39;;  
}  
</code></pre>
<ul>
<li>This function selects the appropriate GitHub logo based on the theme‚Äôs background color, ensuring optimal visibility.  </li>
<li>It demonstrates how themes can influence visual elements beyond just styling, enhancing the user experience.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Explore how environment variables and hardcoded defaults in <code class="inline-code">config.ts</code> enable flexible and reliable system behavior.  </li>
<li>Review the <code class="inline-code">THEMES</code> object to understand how centralized definitions simplify theme management.  </li>
<li>Experiment with the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> function to see how CSS files are dynamically combined for different themes.</li>
</ul>
<h2>Try This</h2>
<ol>
<li><p><strong>Add a New Theme</strong>: Create a new theme by adding an entry to the <code class="inline-code">THEMES</code> object in <code class="inline-code">theme.ts</code>. Define its <code class="inline-code">id</code>, <code class="inline-code">key</code>, <code class="inline-code">emoji</code>, and <code class="inline-code">description</code>, then test it using the <code class="inline-code">theme-manager.ts</code> functions.  </p>
</li>
<li><p><strong>Enhance Validation</strong>: Modify the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L88" target="_blank" rel="noopener noreferrer"><code class="inline-code">isValidTheme</code></a> function to provide more detailed error messages when an invalid theme is detected. For example, suggest the closest matching theme based on user input.  </p>
</li>
<li><p><strong>Dynamic Configuration</strong>: Update the <code class="inline-code">config.ts</code> file to include a new constant, such as a maximum quest duration, and integrate it into the adventure generation process.</p>
</li>
</ol>
<hr>
<p>You have mastered all the secrets of the Repository Explorer! Your adventure is complete.</p>
<p>Stellar work, cadet‚Äîyour mastery of Configuration &amp; Theme Systems has propelled your starship to 80% mission completion; the cosmos awaits your final leap‚Äîkeep soaring! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>