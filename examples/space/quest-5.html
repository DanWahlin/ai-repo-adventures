<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thematic Configuration Nexus - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Stellar Repository Chronicles</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: Thematic Configuration Nexus</h1>
<hr>
<p>The Starship Codebreaker NX-2023 approaches the Thematic Configuration Nexus, a cosmic hub of adventure settings and dynamic configurations. Here, the ship&#39;s systems align with user-selected themes to tailor exploration experiences across vast repository galaxies. As the navigator, you must calibrate the nexus to ensure seamless integration between the ship&#39;s thematic modules and its adventure generation protocols. With the pulsating energy of the Nexus, every decision impacts the crew&#39;s ability to unlock mysteries hidden in alien code clusters.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Dynamic Configuration</strong>: How centralized constants and environment variables shape the behavior of the adventure system.</li>
<li>üîç <strong>Theme Management</strong>: How themes are defined, validated, and dynamically applied in the system.</li>
<li>‚ö° <strong>Validation Techniques</strong>: How input sanitization and validation ensure robust user interactions.</li>
<li>üí° <strong>CSS Aggregation</strong>: How theme-specific styles are dynamically combined to create cohesive visuals.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/config.ts</code></a></h3>
<p>This file serves as the central configuration hub for the MCP Repo Adventure system. It consolidates environment variables, constants, and limits into a single source of truth, ensuring consistent behavior across the system. It also defines key architectural limits like file size, scan depth, and token management for LLM interactions, making it critical for performance and stability.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Configures the maximum wait time for LLM responses, crucial for user experience in dynamic story generation.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Specifies the cache duration for repository analysis results, optimizing repeated requests.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Defines the maximum file size for analysis, preventing memory exhaustion and focusing on relevant files.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = parseInt(process.env.REPO_ADV_LLM_REQUEST_TIMEOUT || &#39;60000&#39;); // 60 seconds
export const REPOMIX_CACHE_TTL = parseInt(process.env.REPO_ADV_REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds
export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues
</code></pre>
<ul>
<li>The <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensures long story generation processes do not block the system indefinitely.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code> reduces redundant computations by caching repository analysis results for repeated queries.</li>
<li>The <code class="inline-code">MAX_FILE_SIZE_MB</code> limit excludes oversized files, focusing resources on manageable and meaningful source code.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/theme.ts</code></a></h3>
<p>The <code class="inline-code">theme.ts</code> file defines the adventure system&#39;s themes, providing a single source of truth for theme-related data. It includes validation, parsing, and formatting functions to handle user-selected themes dynamically. This module is vital for creating immersive experiences tailored to user preferences.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Enumerates predefined themes with their attributes, ensuring consistent definitions across the system.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L88" target="_blank" rel="noopener noreferrer"><code class="inline-code">isValidTheme</code></a>: Validates user input against the available themes, guarding against invalid selections.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L120" target="_blank" rel="noopener noreferrer"><code class="inline-code">formatThemeOption</code></a>: Formats themes for display, combining visual and descriptive elements for user-friendly output.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">export const THEMES = {
  SPACE: {
    id: 1,
    key: &#39;space&#39;,
    displayName: &#39;Space Exploration&#39;,
    emoji: &#39;üöÄ&#39;,
    description: &#39;Journey through cosmic codebases where data flows like stardust...&#39;,
    keywords: [&#39;space&#39;, &#39;cosmic&#39;, &#39;galaxy&#39;, &#39;starship&#39;]
  },
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms where databases are dragon hoards...&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;dragon&#39;, &#39;castle&#39;]
  }
};

export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}

export function formatThemeOption(theme: ThemeDefinition): string {
  return `${theme.emoji} **${theme.id}. ${theme.displayName}** - ${theme.description}`;
}
</code></pre>
<ul>
<li>The <code class="inline-code">THEMES</code> object provides structured definitions for each theme, including metadata used throughout the system.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L88" target="_blank" rel="noopener noreferrer"><code class="inline-code">isValidTheme</code></a> ensures user input aligns with available options, preventing errors during theme application.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/theme.ts#L120" target="_blank" rel="noopener noreferrer"><code class="inline-code">formatThemeOption</code></a> combines emojis, IDs, names, and descriptions into a user-friendly format for selection interfaces.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/theme-manager.ts</code></a></h3>
<p>The <code class="inline-code">theme-manager.ts</code> file handles theme-specific operations for the adventure system. It dynamically combines CSS files for selected themes, manages theme-specific assets, and provides icons for visual consistency. This module ensures the generated adventures maintain thematic coherence.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Aggregates CSS files for a theme into a single stylesheet, enabling consistent visual styling.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L49" target="_blank" rel="noopener noreferrer"><code class="inline-code">getGitHubLogo</code></a>: Selects the appropriate GitHub logo based on theme colors, maintaining aesthetic balance.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L81" target="_blank" rel="noopener noreferrer"><code class="inline-code">getThemeIcons</code></a>: Provides theme-specific icons for templates, enhancing the immersive experience.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">generateThemeCSS(theme: AdventureTheme, outputDir: string): void {
  const cssFiles = [
    path.join(this.themesDir, &#39;base.css&#39;),
    path.join(this.themesDir, `${theme}.css`)
  ];
  
  let combinedCSS = &#39;&#39;;
  
  cssFiles.forEach(cssFile =&gt; {
    if (fs.existsSync(cssFile)) {
      combinedCSS += fs.readFileSync(cssFile, &#39;utf8&#39;) + &#39;\\n\\n&#39;;
    }
  });
  
  const cssPath = path.join(outputDir, &#39;assets&#39;, &#39;theme.css&#39;);
  fs.writeFileSync(cssPath, combinedCSS);
}
</code></pre>
<ul>
<li>The <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> method combines multiple CSS files into a unified stylesheet, ensuring visual consistency.</li>
<li>It dynamically includes theme-specific styles, allowing easy addition or modification of themes.</li>
<li>Writing the combined CSS to a single file simplifies asset management and improves browser performance.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Explore how configuration constants like <code class="inline-code">LLM_REQUEST_TIMEOUT</code> impact performance when generating complex stories.</li>
<li>Study the <code class="inline-code">THEMES</code> definitions to understand how structured data enables dynamic theme selection and validation.</li>
<li>Use the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> method to trace how CSS files are aggregated for cohesive styling.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Add a New Theme</strong>: Extend the <code class="inline-code">THEMES</code> object in <code class="inline-code">theme.ts</code> with a new theme. Include a description, emoji, and keywords. Test its integration by updating the <code class="inline-code">theme-manager.ts</code> logic.</li>
<li><strong>Validate CSS Aggregation</strong>: Modify <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> to log each included CSS file&#39;s path. Verify the output and test how changes to base or theme-specific styles affect the visual layout.</li>
</ol>
<hr>
<p>You have mastered all the secrets of the Thematic Configuration Nexus! Your adventure is complete.</p>
<p>Mission accomplished, star navigator‚Äîyour mastery of the Thematic Configuration Nexus shines brighter than a supernova, propelling you to 80% completion at warp speed! ‚≠êüöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>