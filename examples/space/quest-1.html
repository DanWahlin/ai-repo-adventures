<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Adventure Generator - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-space">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Starship Repository Explorer</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Adventure Generator Initialization</h1>
<hr>
<p>Welcome aboard the Repository Explorer&#39;s HTML Generator module, where cosmic forces transform codebases into interactive adventures. This station is responsible for crafting stellar HTML adventures, combining templates, assets, and themes to create immersive experiences. As you explore this module, you&#39;ll uncover how the ship&#39;s systems render pages, manage assets, and orchestrate multi-theme generation. Prepare to dive into the core mechanisms that bring code repositories to life as dynamic, story-rich adventure websites.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Template Rendering</strong>: How placeholders are replaced dynamically in HTML templates using <code class="inline-code">TemplateEngine</code>.</li>
<li>üîç <strong>Asset Management</strong>: Techniques for copying and organizing assets across single and multi-theme pipelines.</li>
<li>‚ö° <strong>Multi-Theme Orchestration</strong>: How <code class="inline-code">HTMLAdventureGenerator</code> coordinates parallel generation for multiple themes.</li>
<li>üí° <strong>Adventure Content Integration</strong>: How quests and stories are seamlessly embedded into generated HTML.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> class is the cosmic architect of HTML generation, responsible for loading templates and replacing placeholders with dynamic variables. It uses caching to optimize repeated template access and ensures that content seamlessly integrates into base templates.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a> caches and retrieves HTML templates for efficient reuse.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> dynamically substitutes placeholders with provided variables, enabling flexible rendering.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a> combines base templates with content templates to produce complete HTML pages.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private loadTemplate(templateName: string): string {
  if (this.templateCache.has(templateName)) {
    return this.templateCache.get(templateName)!;
  }

  const templatePath = path.join(this.templatesDir, templateName);
  
  try {
    const content = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    this.templateCache.set(templateName, content);
    return content;
  } catch (error) {
    throw new Error(`Failed to load template ${templateName}: ${error}`);
  }
}
</code></pre>
<ul>
<li>This method ensures templates are loaded efficiently by caching their content after the initial read.</li>
<li>The use of <code class="inline-code">Map</code> for caching provides fast lookup and prevents redundant file reads.</li>
<li>Error handling ensures the system gracefully reports missing or inaccessible templates.</li>
</ul>
<hr>
<pre><code class="language-typescript">private replacePlaceholders(template: string, variables: TemplateVariables): string {
  let result = template;
  
  for (const [key, value] of Object.entries(variables)) {
    const placeholder = `{{${key}}}`;
    result = result.replace(new RegExp(placeholder, &#39;g&#39;), value || &#39;&#39;);
  }
  
  return result;
}
</code></pre>
<ul>
<li>This method replaces all placeholders (e.g., <code class="inline-code">{{key}}</code>) in the template with corresponding values from the <code class="inline-code">variables</code> object.</li>
<li>Regular expressions ensure global replacement, making the method suitable for templates with repeated placeholders.</li>
<li>The approach decouples template structure from variable definitions, enabling dynamic content injection.</li>
</ul>
<hr>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);
  
  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };
  
  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base and content templates into a complete HTML page by injecting rendered content into the base structure.</li>
<li>Modular rendering allows different content templates to reuse the same base template.</li>
<li>Supports extensibility for multi-theme generation by abstracting template rendering logic.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> class is the ship&#39;s logistical officer, responsible for managing assets such as images, CSS, and shared files across single and multi-theme pipelines. It ensures assets are correctly copied and organized for seamless adventure generation.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyImages</code></a> duplicates theme-specific and shared images into designated output directories.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L54" target="_blank" rel="noopener noreferrer"><code class="inline-code">copySharedNavigator</code></a> consolidates shared assets like navigators and icons for multi-theme pipelines.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> retrieves theme-specific CSS with fallback handling for missing files.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const sourceSharedDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);
  const targetSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);

  try {
    if (fs.existsSync(sourceImagesDir)) {
      fs.mkdirSync(targetImagesDir, { recursive: true });
      const imageFiles = fs.readdirSync(sourceImagesDir);
      imageFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceImagesDir, file);
        const targetPath = path.join(targetImagesDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }

    if (fs.existsSync(sourceSharedDir)) {
      fs.mkdirSync(targetSharedDir, { recursive: true });
      const sharedFiles = fs.readdirSync(sourceSharedDir);
      sharedFiles.forEach(file =&gt; {
        const sourcePath = path.join(sourceSharedDir, file);
        const targetPath = path.join(targetSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      });
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy images from source directory&#39;));
  }
}
</code></pre>
<ul>
<li>Copies theme-specific and shared images to their respective output directories, ensuring proper organization.</li>
<li>Uses <code class="inline-code">fs.mkdirSync</code> with <code class="inline-code">recursive</code> to create missing directories automatically.</li>
<li>Error handling provides warnings without interrupting the overall generation process.</li>
</ul>
<hr>
<pre><code class="language-typescript">copySharedNavigator(rootOutputDir: string): void {
  const templatesDir = path.join(this.sourceDir, &#39;templates&#39;);
  const assetsDir = path.join(this.sourceDir, &#39;assets&#39;);
  const cssSource = path.join(templatesDir, &#39;quest-navigator.css&#39;);
  const jsSource = path.join(templatesDir, &#39;quest-navigator.js&#39;);
  const svgSource = path.join(templatesDir, &#39;compass-icon.svg&#39;);
  
  const sharedAssetsDir = path.join(rootOutputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(sharedAssetsDir, { recursive: true });

  if (fs.existsSync(cssSource)) {
    fs.copyFileSync(cssSource, path.join(sharedAssetsDir, &#39;quest-navigator.css&#39;));
  }
  if (fs.existsSync(jsSource)) {
    fs.copyFileSync(jsSource, path.join(sharedAssetsDir, &#39;quest-navigator.js&#39;));
  }
  if (fs.existsSync(svgSource)) {
    fs.copyFileSync(svgSource, path.join(sharedAssetsDir, &#39;compass-icon.svg&#39;));
  }
}
</code></pre>
<ul>
<li>Consolidates shared navigator assets into a single directory for multi-theme pipelines.</li>
<li>Ensures critical files like CSS and JavaScript are accessible across themes.</li>
<li>Supports modular asset management by separating shared and theme-specific files.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> class is the ship&#39;s captain, orchestrating the entire HTML generation process. It coordinates theme selection, asset preparation, and content integration to produce fully interactive adventure websites.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> initializes the adventure generation process, including repository analysis and quest extraction.</li>
<li><code class="inline-code">generateAllThemes</code> orchestrates parallel generation for multiple themes, ensuring efficiency and isolation.</li>
<li><code class="inline-code">startHttpServer</code> launches a development server for previewing generated adventures.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();

  this.htmlBuilder = new HTMLBuilder(
    this.adventureManager,
    this.templateEngine,
    this.contentProcessor,
    this.projectPath,
    this.selectedTheme,
    this.isMultiTheme,
    this.quests
  );

  await this.generateThemeCSS();
  this.generateIndexHTML();
  await this.contentGenerator.generateQuestPages();
}
</code></pre>
<ul>
<li>Coordinates the entire adventure generation lifecycle, from repository analysis to quest page creation.</li>
<li>Integrates multiple components like <code class="inline-code">AdventureManager</code> and <code class="inline-code">HTMLBuilder</code> to streamline content generation.</li>
<li>Modular design allows easy extension for additional themes or features.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">TemplateEngine.renderPage</code></a> to experiment with dynamic content injection into templates.</li>
<li>Study the asset copying methods in <code class="inline-code">AssetManager</code> to understand file organization strategies.</li>
<li>Explore <code class="inline-code">HTMLAdventureGenerator</code> to see how components interact during multi-theme generation.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Create a Custom Theme</strong>: Modify the <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> method to include a new theme. Add corresponding CSS and assets, and generate an adventure using this theme.</li>
<li><strong>Trace Asset Flow</strong>: Add logging to <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyImages</code></a> and <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L54" target="_blank" rel="noopener noreferrer"><code class="inline-code">copySharedNavigator</code></a> to observe how assets are copied and organized during generation.</li>
<li><strong>Optimize Template Rendering</strong>: Refactor <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> to support nested placeholders (e.g., <code class="inline-code">{{key.subkey}}</code>) for more complex templates.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the starship&#39;s systems.</p>
<p>Congratulations, Cadet, on launching your HTML Adventure Generator into the cosmic code frontier‚Äîyour starship is fueled and ready for infinite quests ahead! üöÄ‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>