<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Generator Pipeline - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Developer's Codebase Expedition</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Generator Pipeline</h1>
<hr>
<p>Step into the heart of the pipeline that transforms raw repository analysis into immersive, static HTML adventures. This quest unveils the intricate mechanisms behind generating multi-themed websites, where each piece of content is dynamically crafted and visually styled. The HTML generator serves as the backbone, orchestrating the creation of quest pages, CSS assets, and navigation components. By exploring its modular design, you‚Äôll learn how this technical marvel enables seamless scalability and adaptability.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Dynamic HTML Generation</strong>: How templates and modular engines enable scalable website creation for multiple themes.</li>
<li>üîç <strong>Asset Management</strong>: The importance of shared and theme-specific resources in a static site generator.</li>
<li>‚ö° <strong>Separation of Concerns</strong>: How the pipeline isolates content generation, asset handling, and rendering processes.</li>
<li>üí° <strong>Custom Theming</strong>: How to extend or modify themes for tailored user experiences.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> class is the core orchestrator for HTML generation. It processes repository data, generates quests, and builds static websites. The class is modular, facilitating single or multi-theme generation and ensuring that each step in the pipeline is maintainable and reusable. </p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> orchestrates the entire HTML generation process, from repository analysis to generating quest pages.</li>
<li><code class="inline-code">generateAllThemesStatic</code> enables multi-theme generation with isolated state, ensuring concurrency safety.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a> combines theme-specific, base, and animation styles into a unified CSS file.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();

  this.htmlBuilder = new HTMLBuilder(
    this.adventureManager,
    this.templateEngine,
    this.contentProcessor,
    this.projectPath,
    this.selectedTheme,
    this.isMultiTheme,
    this.quests
  );

  await this.generateThemeCSS();
  const assetManager = await this.getAssetManager();
  assetManager.copyQuestNavigator(this.outputDir);
  assetManager.copyImages(this.outputDir, this.isMultiTheme);

  this.generateIndexHTML();
  await this.contentGenerator.generateQuestPages();
  await this.generateSummaryHTML();
}
</code></pre>
<ul>
<li>Coordinates repository analysis, story generation, and file creation for quests and summaries.</li>
<li>Highlights the importance of modularity, using <code class="inline-code">HTMLBuilder</code> and <code class="inline-code">ContentGenerator</code> for task-specific operations.</li>
<li>Integrates multi-theme handling to ensure adaptability across different themes.</li>
<li>Demonstrates dependency injection for flexibility in managing assets and templates.</li>
<li>Emphasizes the step-by-step orchestration of CSS generation and content copying.</li>
</ul>
<hr>
<pre><code class="language-typescript">static async generateSingleThemeStatic(
  theme: AdventureTheme,
  themeDir: string,
  maxQuests: number | undefined,
  logLlmOutput: boolean,
  logLlmOutputDir: string
): Promise&lt;void&gt; {
  const themeGenerator = new HTMLAdventureGenerator();
  themeGenerator.selectedTheme = theme;
  themeGenerator.outputDir = themeDir;
  themeGenerator.maxQuests = maxQuests;
  themeGenerator.logLlmOutput = logLlmOutput;
  themeGenerator.logLlmOutputDir = logLlmOutputDir;
  themeGenerator.isMultiTheme = true;

  try {
    await themeGenerator.generateAdventure();
  } finally {
    themeGenerator.cliInterface.close();
  }
}
</code></pre>
<ul>
<li>Provides a stateless mechanism for concurrent theme generation.</li>
<li>Demonstrates how isolated state management ensures thread safety in multi-theme workflows.</li>
<li>Highlights the use of factory methods for creating reusable generator instances.</li>
<li>Adapts the pipeline for efficient handling of diverse output directories.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> simplifies dynamic HTML generation by loading templates and replacing placeholders with actual content. It ensures reusability and maintainability by caching frequently accessed templates.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a> combines content and base templates, dynamically injecting variables.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a> processes variable substitution with robust pattern matching.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a> caches templates to improve performance.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);
  
  const renderedContent = this.replacePlaceholders(contentHtml, variables);

  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Integrates base and content templates for a cohesive HTML structure.</li>
<li>Demonstrates separation of concerns, isolating placeholder rendering from template management.</li>
<li>Ensures flexibility by allowing dynamic injection of content-specific variables.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> handles resource organization, ensuring that shared and theme-specific assets are correctly copied to the output directory. This modular approach enhances maintainability and supports multi-theme generation.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyImages</code></a> organizes theme-specific and shared images across directories.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a> ensures navigation components are included in the output.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> dynamically loads and combines CSS files with fallbacks.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyImages(outputDir: string, isMultiTheme: boolean = false): void {
  const sourceImagesDir = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;);
  const targetImagesDir = path.join(outputDir, &#39;assets&#39;, &#39;images&#39;);

  if (fs.existsSync(sourceImagesDir)) {
    fs.mkdirSync(targetImagesDir, { recursive: true });
    const imageFiles = fs.readdirSync(sourceImagesDir);
    imageFiles.forEach(file =&gt; {
      const sourcePath = path.join(sourceImagesDir, file);
      const targetPath = path.join(targetImagesDir, file);
      fs.copyFileSync(sourcePath, targetPath);
    });
  }
}
</code></pre>
<ul>
<li>Ensures assets are organized based on single or multi-theme requirements.</li>
<li>Demonstrates how recursive directory creation supports flexible output structures.</li>
<li>Highlights the use of file system utilities for efficient asset copying.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Focus on how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> orchestrates the full pipeline, from analysis to output.</li>
<li>Experiment with the <code class="inline-code">TemplateEngine</code> to understand how caching improves performance.</li>
<li>Explore the role of <code class="inline-code">AssetManager</code> in maintaining a clean separation between shared and theme-specific resources.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Add a New Theme</strong>: Extend the system by creating a new theme. Add a corresponding CSS file and templates, then update <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a> to load your custom theme.</li>
<li><strong>Trace Asset Copying</strong>: Add logging to <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L18" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyImages</code></a> and <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a> to observe the flow of assets during HTML generation.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries of the pipeline&#39;s components and expand your mastery of the system.</p>
<p>Congratulations on successfully deploying the HTML Generator Pipeline‚Äîyour codebase is now a shining example of clean architecture and optimized rendering workflows! üöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>