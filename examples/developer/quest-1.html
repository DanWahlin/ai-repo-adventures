<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Generator Pipeline - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tk53e05gf2");
    </script>
    
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }

        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">Developer's Guide to AI Repo Adventures</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Adventure</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Generator Pipeline</h1>
<hr>
<p>Step into the heart of the HTML Generator Pipeline, where code transforms into dynamic adventure websites. This quest explores the intricate mechanisms that power the generation of themed HTML adventures, allowing developers to dive into repositories with engaging, story-driven interfaces. From template rendering to asset management, you‚Äôll uncover the technical components that make this process seamless and scalable.</p>
<h2>Key Takeaways</h2>
<p>After completing this quest, you will understand:</p>
<ul>
<li>üéØ <strong>Template Rendering</strong>: How placeholders are replaced with dynamic content to create HTML pages.</li>
<li>üîç <strong>Asset Management</strong>: The process of copying and organizing assets for multi-theme support.</li>
<li>‚ö° <strong>Pipeline Coordination</strong>: How the HTML generation workflow orchestrates multiple components to produce cohesive output.</li>
<li>üí° <strong>Theme Customization</strong>: Methods for applying CSS and templates to create visually distinct adventures.</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/html-generator.ts</code></a></h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> class serves as the central orchestrator for generating HTML adventures. It manages the pipeline from repository analysis to theme application, leveraging modular components like the <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code>. This file demonstrates how CLI tools are structured for interactive and automated workflows.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a>: Coordinates the entire HTML generation process, including repository analysis and quest page creation.</li>
<li><code class="inline-code">generateAllThemes</code>: Handles multi-theme generation by isolating pipeline states for each theme.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>: Combines theme-specific CSS with base and animation styles for consistent visual output.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">private async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));
  console.log();

  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  this.extractQuestInfo();

  this.htmlBuilder = new HTMLBuilder(
    this.adventureManager,
    this.templateEngine,
    this.contentProcessor,
    this.projectPath,
    this.selectedTheme,
    this.isMultiTheme,
    this.quests
  );

  await this.generateThemeCSS();
  this.generateIndexHTML();
  await this.contentGenerator.generateQuestPages();
}
</code></pre>
<ul>
<li>Coordinates repository analysis, story generation, and quest extraction into a cohesive pipeline.</li>
<li>Uses modular components (<code class="inline-code">HTMLBuilder</code>, <code class="inline-code">ContentProcessor</code>) for flexibility and maintainability.</li>
<li>Demonstrates the importance of initializing components in a specific sequence to avoid state conflicts.</li>
<li>Includes error handling to ensure pipeline resilience during execution.</li>
<li>Highlights the integration of theme-specific data for customized output.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/template-engine.ts</code></a></h3>
<p>The <code class="inline-code">TemplateEngine</code> class is responsible for rendering HTML templates by replacing placeholders with dynamic content. It leverages caching to optimize template loading and ensures consistency across pages.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">renderPage</code></a>: Combines base and content templates to produce a complete HTML page.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">replacePlaceholders</code></a>: Replaces placeholders in templates with variable data, enabling dynamic rendering.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L25" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadTemplate</code></a>: Loads and caches templates to improve performance during repeated use.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);

  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Combines base templates with content-specific templates for modular page rendering.</li>
<li>Utilizes caching to reduce redundant file reads and improve performance.</li>
<li>Demonstrates how dynamic variables are injected into templates using placeholder replacement.</li>
<li>Ensures flexibility in rendering different types of pages (e.g., index, quest pages).</li>
<li>Highlights the importance of separating template loading from rendering logic for maintainability.</li>
</ul>
<hr>
<h3><span class="header-prefix">File:</span> <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/generator/src/cli/asset-manager.ts</code></a></h3>
<p>The <code class="inline-code">AssetManager</code> class handles the copying and organization of assets like images and CSS files. It ensures that assets are correctly placed for both single and multi-theme generation.</p>
<h4>Highlights</h4>
<ul>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyGlobalAssets</code></a>: Copies shared assets for multi-theme adventures, including images and homepage CSS.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a>: Manages theme-specific assets like navigation CSS and JavaScript.</li>
<li><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L186" target="_blank" rel="noopener noreferrer"><code class="inline-code">loadThemeCSS</code></a>: Loads theme-specific CSS with fallback options for robustness.</li>
</ul>
<h4>Code</h4>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  try {
    const globalAssetsDir = path.join(outputDir, &#39;assets&#39;);
    const targetImagesDir = path.join(globalAssetsDir, &#39;images&#39;);
    fs.mkdirSync(targetImagesDir, { recursive: true });

    const globalSharedDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
    fs.mkdirSync(globalSharedDir, { recursive: true });

    const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
    globalImages.forEach(file =&gt; {
      const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
      if (fs.existsSync(sourcePath)) {
        const targetPath = path.join(globalSharedDir, file);
        fs.copyFileSync(sourcePath, targetPath);
      }
    });

    const headerImageSource = path.join(this.sourceDir, &#39;assets&#39;, &#39;images&#39;, &#39;ai-adventures.png&#39;);
    if (fs.existsSync(headerImageSource)) {
      const headerImageTarget = path.join(targetImagesDir, &#39;ai-adventures.png&#39;);
      fs.copyFileSync(headerImageSource, headerImageTarget);
    }
  } catch (error) {
    console.log(chalk.yellow(&#39;‚ö†Ô∏è Warning: Could not copy global assets&#39;));
    throw error;
  }
}
</code></pre>
<ul>
<li>Ensures that shared assets are correctly copied to the output directory for accessibility.</li>
<li>Handles theme-specific and global assets separately to maintain organization.</li>
<li>Demonstrates error handling for asset-related operations, improving pipeline reliability.</li>
<li>Uses directory creation with recursive options to avoid manual setup.</li>
<li>Highlights the importance of consistent asset paths for seamless integration across themes.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Study how <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/html-generator.ts#L235" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateAdventure</code></a> coordinates multiple components to streamline the HTML generation pipeline.</li>
<li>Explore the caching mechanism in <code class="inline-code">TemplateEngine</code> to understand how performance improvements are achieved.</li>
<li>Review the error handling in <code class="inline-code">AssetManager</code> to learn best practices for managing file operations.</li>
</ul>
<h2>Try This</h2>
<p>Challenge yourself to deepen your understanding:</p>
<ol>
<li><strong>Add Custom Placeholder</strong>: Modify <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/template-engine.ts#L44" target="_blank" rel="noopener noreferrer"><code class="inline-code">TemplateEngine.replacePlaceholders</code></a> to support conditional replacements (e.g., <code class="inline-code">{{IF:variable}}</code>). Test how this affects dynamic rendering.</li>
<li><strong>Trace Asset Flow</strong>: Add logging to <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L134" target="_blank" rel="noopener noreferrer"><code class="inline-code">AssetManager.copyGlobalAssets</code></a> and <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/asset-manager.ts#L97" target="_blank" rel="noopener noreferrer"><code class="inline-code">copyQuestNavigator</code></a>. Analyze how assets are organized in the output directory and ensure consistency across themes.</li>
<li><strong>Experiment with Themes</strong>: Create a new theme by adding a CSS file and modifying <a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/generator/src/cli/theme-manager.ts#L58" target="_blank" rel="noopener noreferrer"><code class="inline-code">generateThemeCSS</code></a>. Observe how the pipeline adapts to the new theme.</li>
</ol>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries within the codebase.</p>
<p>Congratulations on successfully deploying the HTML Generator Pipeline‚Äîyour code is now a shining ‚≠ê example of streamlined DOM manipulation and modular design; keep iterating and shipping greatness! üöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>