<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: Navigation Across Stellar Stories - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'space' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">Mission Analysis: Cosmic Chronicles of Code</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <p>Here is the continuation of &quot;Quest 2: Navigation Across Stellar Stories&quot; based on the provided space-themed narrative and &quot;Adventure Code Guidance.&quot; The markdown output adheres strictly to the provided structure and constraints.</p>
<hr>
<h1>Quest 2: Navigation Across Stellar Stories</h1>
<hr>
<p>As the <em>Starship Codexus</em> sails through a radiant sea of binary constellations, the <em>MCP Interface</em> detects an encrypted stellar map embedded within the cosmic archives. Strands of pulsating code shimmer like distant stars, inviting the Codexus crew to uncover their secrets. With precision, the ship&#39;s Quest Generators have locked onto pivotal files needed to decode this navigational enigma. Your task is to venture deeper into the galaxy‚Äôs code clusters, analyze their structures, and chart the way forward for humanity‚Äôs understanding of this ancient repository.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure orchestration managing state, themes, and user interactions</h3>
<p>The <code class="inline-code">adventure-manager.ts</code> file acts as the strategic brain of the exploration mission. This file orchestrates the <em>Starship Codexus&#39;</em> quests‚Äîfrom the initialization of adventures to the execution of interstellar choices made by the crew. The <code class="inline-code">AdventureManager.initializeAdventure</code> method plays the introductory note, setting the stage with a generated story and available quests based on the <code class="inline-code">AdventureState</code>. This class acts as the central hub for quest management, ensuring precise tracking of progress with utilities like <code class="inline-code">progressPercentage</code>. Another key player is <code class="inline-code">AdventureManager.exploreQuest</code>, which ensures navigational accuracy by validating crew input against available quest options. The decision-making layers even cache completed quests to reduce system load during revisits, lending the <em>Codexus</em> both speed and efficiency. Overall, this file ensures that every quest is meticulously tied to the ship&#39;s core systems, facilitating seamless command across vast exploratory data fields.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">AdventureManager.initializeAdventure</code>: Sets up project context and generates a story coupled with quests.</li>
<li><code class="inline-code">AdventureManager.exploreQuest</code>: Powers quest execution from user choice validation to generating outputs.</li>
<li><code class="inline-code">AdventureState.progressPercentage</code>: Calculates and reports crew progress with precise percentages.</li>
<li>Validates quest preconditions to ensure seamless adventure flow.</li>
<li>Dynamically caches completed quests for revisitation without performance penalties.</li>
</ul>
<h3><span class="header-prefix">packages/core/src/adventure/story-generator.ts:</span> LLM-powered story creation with prompts and theme-based narratives</h3>
<p>The <code class="inline-code">story-generator.ts</code> file serves as the narrative engine that powers the heart of the <em>Codexus‚Äô</em> explorations. Using advanced natural language generation, this file ensures that every theme‚Äîfrom galactic exploration to historical coding echoes‚Äîresonates deeply. A highlight of this file is the <code class="inline-code">StoryGenerator.generateStoryAndQuests</code> method, which creates a detailed backstory and quest map by leveraging repository context and LLM prompts. The systematic generation of prompts in <code class="inline-code">buildStoryGenerationPrompt</code> ensures that every story and quest is tailored exclusively for the galactic repository at hand. This file also delves into precise vocabulary to maintain thematic consistency across adventures, such as enriching the space theme with terms like ‚Äúorbit,‚Äù ‚Äúcosmic,‚Äù and ‚Äústellar.‚Äù It&#39;s a space navigator‚Äôs storytelling compass, steering narratives through the infinite and blending creativity with structured exploration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">StoryGenerator.generateStoryAndQuests</code>: Produces story arcs and quests based on repository insights.</li>
<li><code class="inline-code">buildStoryGenerationPrompt</code>: Constructs prompts embedding repository context for theme alignment.</li>
<li>Supports multiple themes ranging from space to ancient civilizations for comprehensive storytelling.</li>
<li>Dynamically adapts vocabulary to ensure seamless thematic consistency.</li>
<li>Includes intelligent handling of project path and context for improved quest detail generation.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">export class AdventureManager {
  private state: AdventureState = new AdventureState();
  private storyGenerator: StoryGenerator;

  constructor() {
    this.storyGenerator = new StoryGenerator();
  }

  async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
    const sanitizedChoice = this.validateAndSanitizeChoice(choice);

    if (this.isProgressRequest(sanitizedChoice)) {
      return this.getProgress();
    }

    const quest = this.findQuest(sanitizedChoice);
    if (!quest) {
      return this.createNotFoundResult();
    }

    return await this.executeQuest(quest);
  }

  get progressPercentage(): number {
    return this.state.quests.length &gt; 0 
      ? Math.round((this.state.completedQuests.size / this.state.quests.length) * 100)
      : 0;
  }
}
</code></pre>
<p>The <code class="inline-code">AdventureManager</code> class acts like the captain of the <em>Codexus,</em> directing the crew‚Äôs exploration of galactic data with tools for quest tracking, validation, and execution.</p>
<h3>packages/core/src/adventure/story-generator.ts</h3>
<pre><code class="language-typescript">export class StoryGenerator {
  private llmClient: LLMClient;
  private currentProject?: ProjectInfo;

  constructor() {
    this.llmClient = new LLMClient();
  }

  async generateStoryAndQuests(projectInfo: ProjectInfo, theme: AdventureTheme): Promise&lt;StoryResponse&gt; {
    this.currentProject = projectInfo;
    const validatedTheme = this.validateTheme(theme);
    return await this.generateWithLLM(projectInfo, validatedTheme);
  }

  private async generateWithLLM(projectInfo: ProjectInfo, theme: AdventureTheme): Promise&lt;StoryResponse&gt; {
    const repomixContent = projectInfo.repomixContent || &#39;No repomix content available&#39;;
    const prompt = loadStoryGenerationPrompt({
      theme,
      repomixContent,
    });

    const response = await this.llmClient.generateResponse(prompt);
    const cleanContent = response.content.trim();
  
    // Parsing story response
    return parseMarkdownToStoryResponse(cleanContent);
  }
}
</code></pre>
<p>The <code class="inline-code">StoryGenerator</code> class is the galaxy‚Äôs master storyteller, blending the science of code analysis with the art of narrative creation through prompt-based engines.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Validate user inputs rigorously within adventure tools to prevent any navigational missteps in the code galaxy.</li>
<li>Consider extending themes with more specific domain knowledge (e.g., AI repositories, cybersecurity tools).</li>
<li>Next steps: Investigate how <code class="inline-code">repoAnalyzer</code> aids in generating precise project contexts to better enrich quest narratives.</li>
</ul>
<hr>
<p>Mission accomplished, cosmic navigator‚Äîyour stellar precision has charted a dazzling course through the galaxies of knowledge, rocketing you 25% closer to the brilliance of your ultimate quest! ‚≠êüöÄüíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: Cosmic Cartography: Code Analys... ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark-white.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>