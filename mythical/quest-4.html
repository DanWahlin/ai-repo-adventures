<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: The Castle Configuration Chambers - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Kingdom of Code</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: The Castle Configuration Chambers</h1>
<hr>
<p>Within the mythical realm of Codathia, the Castle Configuration Chambers serve as the enchanted vaults where ancient scrolls define the laws of magic and logic. Here, echoes of powerful spells‚Äîconstants and validation rites‚Äîreverberate across the kingdom. It is said that those who master the art of configuration control may summon tailored adventures and unlock the full potential of Codathia‚Äôs enchanted tools. Your quest is clear: traverse the Chambers and decipher the scripts to secure harmony for the Enchanted Kingdom.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üõ†Ô∏è <strong>Scroll Decoding</strong>: How do exported constants control the kingdom‚Äôs laws regarding file analysis and processing time?</li>
<li>üéØ <strong>Validation Rituals</strong>: How do the input validation spells ensure user choices and themes are kept in harmony?</li>
<li>üóùÔ∏è <strong>Theme Codex Connection</strong>: How is the mythical-themed adventure system structured, and what ensures mythical journeys remain enchanting?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Configuration Scroll</h3>
<p>This file contains critical constants that define the kingdom&#39;s magical laws, including timeouts, analysis limits, and error handling settings. By studying these scrolls, knights learn how Codathia‚Äôs systems balance efficiency, memory control, and enchanting complexity. Configuration constants enable various enchantments, ensuring every file analysis and connection with the sacred Spellbook aligns with kingdom rules of harmony.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Manages the spellcasting duration for story generation, ensuring manageable execution times for complex spells.</li>
<li><code class="inline-code">IGNORE_PATTERNS</code>: Defines forbidden realms during magical scans, protecting Codathia from distractions and clutter like <code class="inline-code">node_modules</code>.</li>
<li><code class="inline-code">ERROR_MESSAGES</code>: Enchants key error handling spells to provide user-friendly messages when troubles arise.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<ul>
<li>This code sets the maximum spellcasting time, ensuring adventures do not run indefinitely.</li>
<li>Enables harmony between responsiveness and complexity by limiting time-bound requests.</li>
<li>Optimizes Codathia‚Äôs system for seamless interactions despite large prompt sizes.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const IGNORE_PATTERNS = [
  &#39;node_modules&#39;,
  &#39;.git&#39;,
  &#39;.env&#39;,
  &#39;*.log&#39;,
  &#39;.DS_Store&#39;,
] as const;
</code></pre>
<ul>
<li>Lists realms to ignore during scans, avoiding unworthy distractions like generated builds or temporary files.</li>
<li>Ensures analysis focuses strictly on enchanted scrolls while skipping mundane elements.</li>
<li>Facilitates efficiency and prevents Codathia‚Äôs knights from venturing into irrelevant territories.</li>
</ul>
<hr>
<pre><code class="language-typescript">export const ERROR_MESSAGES = {
  LLM_UNAVAILABLE: &#39;LLM service is currently unavailable.&#39;,
  ANALYSIS_FAILED: &#39;Failed to analyze the project.&#39;,
  FILE_NOT_FOUND: &#39;The requested file could not be found.&#39;,
} as const;
</code></pre>
<ul>
<li>This section forms error incantations, guiding knights when something goes amiss during a spell‚Äôs execution.</li>
<li>Simplifies debugging with clear messages tailored for adventurers.</li>
<li>Protects Codathia‚Äôs harmony by empowering users to understand and resolve issues gracefully.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> Validation Scrolls</h3>
<p>These spells prevent chaos from seeping into the Enchanted Kingdom by maintaining the integrity of user input and theme selection. The input validator shields the kingdom by ensuring all choices align with the adventure‚Äôs laws. This includes ensuring valid project paths, manageable input sizes, and proper theme selection.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Ensures adventurers make meaningful and manageable quest selections.</li>
<li><code class="inline-code">validateTheme</code>: Protects the kingdom‚Äôs thematic balance by validating user-input themes against a list of sanctioned magical realms.</li>
<li><code class="inline-code">sanitizeForDisplay</code>: Shields Codathia‚Äôs magical displays by removing illegal characters, preserving order.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Choice is required&#39;);
  }
  if (input.length &gt; 200) {
    throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  }
  return input.trim();
}
</code></pre>
<ul>
<li>Certifies adventurers‚Äô quest choices are meaningful, ensuring they are not empty or excessively verbose.</li>
<li>Protects system performance by limiting input size without compromising functionality.</li>
<li>Enhances user experience by setting clear boundaries for collaboration.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) {
    throw new Error(&#39;Theme is required&#39;);
  }
  const normalized = input.toLowerCase().trim();
  const parsedTheme = parseTheme(normalized);
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    const validThemes = getAllThemes().map(t =&gt; t.key).join(&#39;, &#39;);
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<ul>
<li>Validates chosen themes against Codathia‚Äôs mythical catalog, ensuring all journeys remain magical and harmonious.</li>
<li>Prevents adventurers from straying into invalid or undefined realms.</li>
<li>Uses normalization to create a fluid, user-centric experience regardless of capitalization.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function sanitizeForDisplay(input: string, maxLength = 1000): string {
  return input
    .replace(/[&lt;&gt;{}&quot;`]/g, &#39;&#39;)
    .replace(/\s+/g, &#39; &#39;)
    .trim()
    .slice(0, maxLength);
}
</code></pre>
<ul>
<li>Protects against malicious magic, removing forbidden characters from user input.</li>
<li>Prevents vulnerabilities during display or logging of content.</li>
<li>Ensures Codathia‚Äôs systems can handle input gracefully without compromising harmony.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Codex</h3>
<p>This file holds the enchanted mysteries behind Codathia‚Äôs adventure themes, determining how each realm‚Äîfrom mythical castles to ancient civilizations‚Äîis defined. With tailored keywords and formatting functions, knights discover realms and ensure consistency across their enchanted storytelling quests.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines magical realms, including the mythical kingdoms where dragons and enchanted scrolls reign.</li>
<li><code class="inline-code">isValidTheme</code>: Protects Codathia‚Äôs integrity by verifying theme selections against the predefined codex.</li>
<li><code class="inline-code">formatThemeOption</code>: Enchants personalized adventure options, making each theme readable and thematic for users.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = {
  MYTHICAL: {
    id: 2,
    key: &#39;mythical&#39;,
    displayName: &#39;Enchanted Kingdom&#39;,
    emoji: &#39;üè∞&#39;,
    description: &#39;Explore magical and mythical realms.&#39;,
    keywords: [&#39;mythical&#39;, &#39;magic&#39;, &#39;castle&#39;, &#39;dragon&#39;]
  }
} as const;
</code></pre>
<ul>
<li>Defines Codathia‚Äôs magical realm using a structure that includes important details like keywords and descriptions.</li>
<li>Ensures the mythical theme remains consistent and enchanting across adventures.</li>
<li>Empowers knights with a single source of truth for storytelling integrity.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<ul>
<li>Validates themes chosen by adventurers, preventing invalid realm entries.</li>
<li>Uses simple truth checks against the codex, making validation efficient and accessible.</li>
<li>Ensures that adventures maintain thematic integrity without unnecessary complexities.</li>
</ul>
<hr>
<pre><code class="language-typescript">export function formatThemeOption(theme: ThemeDefinition): string {
  return `${theme.emoji} **${theme.id}. ${theme.displayName}** - ${theme.description}`;
}
</code></pre>
<ul>
<li>Formats themes for enchanting displays, blending visual beauty with textual clarity.</li>
<li>Balances readability with thematic consistency for user-facing presentation.</li>
<li>Allows adventurers to experience seamless exploration of Codathia&#39;s magical realms.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Investigate how constants shape and optimize Codathia‚Äôs magical workflows.</li>
<li>Examine relationships between validators and the theme codex for ensuring harmony.</li>
<li>Explore connections between configuration scrolls and storytelling mechanics.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>By the triumph of your heroic intellect and the revelation of arcane chamber wisdom, you ascend boldly through the kingdom&#39;s trials, now blazing with the celestial light of progress at 60% completion! ‚öîÔ∏è‚≠ê‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="prev-quest-btn">‚Üê Previous: Quest 3</a>
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>