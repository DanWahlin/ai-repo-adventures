<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Weaver’s Workshop - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Realm of Enchanted Repositories</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Weaver’s Workshop</h1>
<hr>
<p>In the heart of Codemia lies the fabled Weaver&#39;s Workshop, a domain of intricate spells where the threads of code intertwine to form the fabric of mythical projects. Many adventurers seek to uncover its secrets, yet only those who grasp the delicate art of shaping and formatting enchanted artifacts may prevail. This quest beckons you to journey within, deciphering the Workshop&#39;s mystic patterns, and revealing the legendary configurations used to weave Codemia’s projects into cohesive tales. The kingdom’s harmony hinges upon your success in mastering these treasures.</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Configuration and path management</h3>
<p>This file is the foundation of the Weaver&#39;s Workshop, harboring critical spells for reading, parsing, and formatting the adventure config. It safeguards Codemia’s sacred <code class="inline-code">adventure.config.json</code>, an artifact that controls the flow of mythical quests. The magical functions defined here extract key paths and filter interpretations of the repository. The enchantment begins with <code class="inline-code">loadAdventureConfig</code>, designed to read raw textual threads of the config file. This spell passes its outcome to <code class="inline-code">parseAdventureConfig</code>, which decodes the JSON structure, empowering the adventurer to interact with its mystical essence. Finally, <code class="inline-code">extractUniqueFilePaths</code> performs the vital act of uncovering paths guarded within the repository maze, ensuring adventurers gain unique enchanted markers. These functions collectively ensure seamless navigation through Codemia&#39;s sacred weaving.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">loadAdventureConfig</code>: Reads the raw text of the adventure configuration file.</li>
<li><code class="inline-code">parseAdventureConfig</code>: Decodes JSON and validates its structure.  </li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Extracts and validates paths hidden in the config.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">export function loadAdventureConfig(projectPath: string): string | null {
  const configPath = path.join(projectPath, ADVENTURE_CONFIG_FILE);
  return readFileIfExists(configPath);
}
</code></pre>
<p>Like a key that unlocks the Workshop&#39;s vault, this function retrieves the raw textual essence of the artifact <code class="inline-code">adventure.config.json</code>.</p>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This magical incantation transforms text into tangible JSON, akin to shaping raw materials into elegant tools for the quest.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>An exploration spell, this function reveals hidden paths contained in the config, much like uncovering a map to secret treasure troves.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Always keep your <code class="inline-code">projectPath</code> aligned with the kingdom&#39;s guidelines to avoid null responses during exploration.</li>
<li>Use <code class="inline-code">extractUniqueFilePaths</code> as a guide to identify critical files referenced in your quests.</li>
<li>If parsing fails, check the validity of your JSON object as stability ensures harmony in the adventure.</li>
</ul>
<hr>
<p>Hail, courageous adventurer! You have begun uncovering the patterns of the Workshop. Your mastery will shape the fate of Codemia!</p>
<p>By the shimmering loom of destiny and under the watchful gaze of ancient stars, you’ve woven wisdom into the fabric of success—Quest 5 conquered, your heroic path shines brilliantly at 80% complete! ⭐✨</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>