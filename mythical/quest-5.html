<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Crystal of Configurations - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Set theme-aware CSS variables for animations
        document.addEventListener('DOMContentLoaded', function() {
            // Manually trigger Prism highlighting after page load
            if (window.Prism) {
                window.Prism.highlightAll();
            }
            // Detect theme from current CSS variables or default to space
            const root = document.documentElement;
            
            // Simple theme detection based on page content or default to space
            const theme = 'mythical' || 'space';
            
            // Set display variables for animated elements
            root.style.setProperty('--space-display', theme === 'space' ? 'block' : 'none');
            root.style.setProperty('--ancient-display', theme === 'ancient' ? 'block' : 'none');
            root.style.setProperty('--mythical-display', theme === 'mythical' ? 'block' : 'none');
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html">The Chronicles of Lumina: The Enchanted Repository</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Crystal of Configurations</h1>
<hr>
<p>In the heart of Lumina&#39;s Enchanted Repository lies an artifact whispered about in tales old and new ‚Äî the Crystal of Configurations. This radiant gem, cut from the essence of structured knowledge, holds cryptic inscriptions and delicate patterns that shimmer with limitless possibilities. Only by unraveling its mysteries can an adventurer decode how the repository shapes and shares its magical guidance. This quest demands focus and bravery, for the crystal guards secrets only the most daring heroes may uncover.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/adventure-config.ts:</span> Centralized Configuration for Adventurous Mapping</h3>
<p>The <code class="inline-code">adventure-config.ts</code> file is the cornerstone of the repository&#39;s logical guidance system. It acts like a magical map that helps adventurers locate key quests and provides essential directions to navigate the mystical Enchanted Repository. This file reads, parses, and validates the sacred text known as <code class="inline-code">adventure.config.json</code>, transforming it into actionable knowledge. Its unique ability includes discovering paths hidden in the repository and formatting them into prompts tailored for the spells of Lumina ‚Äî the LLM-powered narration magic. Moreover, it ensures the guardians of code remain vigilant, validating paths to prevent the Repository‚Äôs secrets from spilling into forbidden lands.</p>
<p>At its heart are functions like <code class="inline-code">parseAdventureConfig()</code> and <code class="inline-code">extractUniqueFilePaths()</code>‚Äîspells that carefully decipher and traverse the intricate networks of knowledge stored within <code class="inline-code">adventure.config.json</code>. The function <code class="inline-code">formatAdventureConfigForPrompt()</code> further crafts coherent instructions for the repository‚Äôs enchanted engine, making exploration intuitive. This file is your guidepost, ensuring every adventurer‚Äôs journey into Lumina is orderly, insightful, and safeguarded.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig()</code>: Deciphers raw configuration into structured knowledge for clarity.</li>
<li><code class="inline-code">extractUniqueFilePaths()</code>: Harnesses its tracking magic to reveal vital paths within the repository.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt()</code>: Produces instructions infused with magical structure to guide exploration.</li>
<li>Implements strict security to prevent traversing forbidden pathways.</li>
<li>Orchestrates seamless integration between data mapping and Lumina&#39;s magical narration system.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/adventure-config.ts</h3>
<pre><code class="language-typescript">function readFileIfExists(filePath: string): string | null {
  try {
    return fs.readFileSync(filePath, &#39;utf-8&#39;);
  } catch {
    return null; // Missing or unreadable file is non-fatal
  }
}
</code></pre>
<p>This snippet acts like a wise owl searching for scrolls; if the scroll doesn‚Äôt exist or is unreadable, the owl simply flies back without disrupting the quest.</p>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>The process of parsing here resembles a magical scribe transcribing untamed thoughts into legible, meaningful text ‚Äî ensuring each stroke of the quill aligns with the Repository‚Äôs cryptic truths.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];
  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];
  
  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;
    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }
    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }
  return Array.from(unique);
}
</code></pre>
<p>This enchanted search is like a dragon seeking treasure in its cavern, carefully collecting only what glimmers and holds true value while avoiding traps and pitfalls.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Dive deeper into <code class="inline-code">adventure.config.json</code> to understand the foundational layout used to orchestrate each quest.</li>
<li>Consider refactoring nested loops in <code class="inline-code">extractUniqueFilePaths()</code> for performance enhancements while preserving its magical clarity.</li>
<li>Next steps include exploring files like <code class="inline-code">adventure-manager.ts</code> for how quests are staged and executed using this configuration framework.</li>
</ul>
<hr>
<p>Hail, valiant seeker of wisdom, for you have unlocked the fabled Crystal of Configurations, bringing the kingdom one step closer to ultimate enlightenment‚Äîonly the final heroic trial remains to claim eternal glory! ‚ö°üíé‚≠ê</p>

</div>


    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">
                <img src="assets/images/github-mark.svg" alt="GitHub" width="20" height="20" style="vertical-align: middle; margin-right: 8px;">
                MCP Repo Adventure
            </a>
        </div>
    </footer>
</body>
</html>