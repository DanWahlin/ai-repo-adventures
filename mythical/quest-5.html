<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: The Spellbinding Utilities - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="assets/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Kingdom of Repository: A Tale of Heroic Adventures</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: The Spellbinding Utilities</h1>
<hr>
<p>In the enchanted Kingdom of Repository, the Heroic Refactorer sets out on their fifth quest, guided by the whispers of the hidden Code Grimoire. This time, the journey leads to the arcane realm of utilitarian magic, where spells are cast to invoke practical aids for the adventurer‚Äôs journey. As the Refactorer follows the delicate trail of enchanted fragments, they discover a vital chapter of the Grimoire, revealing treasures like the <code class="inline-code">parseAdventureConfig</code> and the <code class="inline-code">formatAdventureConfigForPrompt</code> incantations. Unlocking these utility spells could hold the key to unraveling further mysteries!</p>
<h2>File Exploration</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a>: Arcane Config Utilities</h3>
<p>This file houses pivotal spells needed to decipher the paths and structures of the scattered Grimoire. By interacting with the <code class="inline-code">adventure.config.json</code>, the functions here allow the Refactorer to extract vital pathways and reformat data for presenting quests. Three powerful spells‚Äîthe <code class="inline-code">parseAdventureConfig</code>, <code class="inline-code">extractUniqueFilePaths</code>, and <code class="inline-code">formatAdventureConfigForPrompt</code>‚Äîreside within this file.</p>
<p>The <code class="inline-code">parseAdventureConfig</code> spell allows adventurers to unearth the deeper structure of the Grimoire‚Äôs text, transforming it into meaningful artifacts for further exploration. The <code class="inline-code">extractUniqueFilePaths</code> spell charts courses to specific locations in the magical kingdom, helping knights to stay on the correct path. Lastly, the <code class="inline-code">formatAdventureConfigForPrompt</code> spell optimizes the dataset, ensuring that even the wisest mystics can access the knowledge.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">parseAdventureConfig</code>: Transforms raw Grimoire scripts into parsable artifacts.</li>
<li><code class="inline-code">extractUniqueFilePaths</code>: Identifies unique paths to recover dispersed pages.</li>
<li><code class="inline-code">formatAdventureConfigForPrompt</code>: Prepares an abridged configuration map for presenting quests.</li>
</ul>
<h2>Code</h2>
<h3><a href="https://github.com/danwahlin/ai-repo-adventures/blob/main/packages/core/src/shared/adventure-config.ts" target="_blank" rel="noopener noreferrer"><code class="inline-code">packages/core/src/shared/adventure-config.ts</code></a></h3>
<pre><code class="language-typescript">export function parseAdventureConfig(projectPath: string): unknown | null {
  const raw = loadAdventureConfig(projectPath);
  if (!raw) return null;
  try {
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
</code></pre>
<p>This spell acts as a translator, carefully decoding ancient scrolls and inscriptions into a readable form for adventurers and scholars alike.</p>
<pre><code class="language-typescript">export function extractUniqueFilePaths(projectPath: string): string[] {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) return [];

  const unique = new Set&lt;string&gt;();
  const stack: any[] = [parsed];

  while (stack.length) {
    const node = stack.pop();
    if (!node || typeof node !== &#39;object&#39;) continue;

    // Extract and validate path
    if (typeof node.path === &#39;string&#39; &amp;&amp; node.path.trim()) {
      const rel = node.path.trim();
      if (fs.existsSync(path.resolve(projectPath, rel))) {
        unique.add(rel);
      }
    }

    // Add children to stack
    const children = Array.isArray(node) ? node : Object.values(node);
    children.forEach(child =&gt; {
      if (child &amp;&amp; typeof child === &#39;object&#39;) stack.push(child);
    });
  }

  return Array.from(unique);
}
</code></pre>
<p>This pathway spell ensures adventurers only traverse trails leading to existing magical nodes, avoiding unnecessary detours.</p>
<pre><code class="language-typescript">export function formatAdventureConfigForPrompt(projectPath: string): string {
  const parsed = parseAdventureConfig(projectPath);
  if (!parsed || typeof parsed !== &#39;object&#39;) {
    return &#39;&#39;;
  }

  const adventure = (parsed as any).adventure;
  if (!adventure || !Array.isArray(adventure.quests)) {
    return &#39;&#39;;
  }

  let formatted = `## Quest Structure\n\n`;

  for (const quest of adventure.quests) {
    if (!quest.title || !Array.isArray(quest.files)) continue;

    formatted += `### ${quest.title}\n`;
    
    // Just file paths - LLM can see descriptions in actual code
    const filePaths = quest.files
      .filter((f: any) =&gt; f.path)
      .map((f: any) =&gt; f.path);
    if (filePaths.length &gt; 0) {
      formatted += `Files: ${filePaths.join(&#39;, &#39;)}\n`;
    }
    
    // Just function names - LLM can understand purpose from implementation
    const functions = quest.files
      .flatMap((f: any) =&gt; f.highlights || [])
      .filter((h: any) =&gt; h.name)
      .map((h: any) =&gt; h.name);
    if (functions.length &gt; 0) {
      formatted += `Functions: ${functions.join(&#39;, &#39;)}\n`;
    }
    
    formatted += `\n`;
  }

  return formatted;
}
</code></pre>
<p>This magical compression spell transforms a tangled configuration scroll into an elegant map, ready to be presented to questing sages for guidance.</p>
<h2>Helpful Hints</h2>
<ul>
<li>When maintaining your quest choices, use <code class="inline-code">validateThemeInput</code> to ensure themes align with the mystical tone of the Grimoire.</li>
<li>Test each utility in isolation to confirm no magical misfires occur; edge cases (e.g., missing keys) often hold unexpected hazards.</li>
<li>Use <code class="inline-code">extractUniqueFilePaths</code> to verify the presence of crucial locations within your quest files.</li>
</ul>
<hr>
<p>With these utilities in hand, your path forward glimmers with clarity. The fragments of the Code Grimoire wait patiently to share their secrets. Adventure onward, Heroic Refactorer!</p>
<p>By the radiant decree of the Celestial Guardians, your mastery over the Spellbinding Utilities has forged a legendary path, bringing you one step closer to reigning as the triumphant hero of this enchanted kingdom‚Äîhail your unstoppable valor! üöÄ‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="index.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script -->
    <script src="assets/quest-navigator.js"></script>
</body>
</html>