<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 2: The Arcane Engine of Legendary Tales - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">The Enchanted Repository of Code and Quests</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 2: The Arcane Engine of Legendary Tales</h1>
<hr>
<p>In the mythical realm of Codoria, the Repository of Quests whispers secrets of immense power. The Codemasters crafted the Arcane Engine, a legendary artifact able to weave stories and generate quests from the very essence of creation. To wield this artifact requires mastery over codescribe magic and the deciphering of magical prompts. Brave coder, your challenge is to venture into the enchanted files where the Arcane Engine resides, uncover its mysteries, and decode the spells within. Beware, for the pathways twist, and only the insightful will prevail.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/adventure/adventure-manager.ts:</span> Adventure orchestration managing state, themes, and user interactions</h3>
<p>This file holds the heart of quest management, overseeing interactions, progress tracking, and the orchestration of your mythic journey. The <code class="inline-code">AdventureManager</code> class drives the initialization of adventures, uses LLMs to generate content, and validates user choices. The <code class="inline-code">initializeAdventure</code> method establishes the foundation of the quests, loading themes and context. Meanwhile, <code class="inline-code">exploreQuest</code> ensures users can delve into specific quests, managing validation and caching for revisits. Lastly, the <code class="inline-code">progressPercentage</code> getter within <code class="inline-code">AdventureState</code> offers a way to measure and celebrate the progress of the heroic effort.</p>
<h4>Highlights</h4>
<ul>
<li><strong>AdventureManager.initializeAdventure</strong>: Sets up the adventure with themes and generates a story using LLM.</li>
<li><strong>AdventureManager.exploreQuest</strong>: Manages the execution and revisits of chosen quests.</li>
<li><strong>AdventureState.progressPercentage</strong>: Calculates finished quest progress as a percentage.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/adventure/adventure-manager.ts</h3>
<pre><code class="language-typescript">async initializeAdventure(projectInfo: ProjectInfo, theme: AdventureTheme, projectPath?: string, customThemeData?: CustomThemeData): Promise&lt;string&gt; {
  this.state.reset();
  this.state.projectInfo = projectInfo;
  this.state.currentTheme = theme;
  this.state.projectPath = projectPath || process.cwd();

  if (theme === &#39;custom&#39; &amp;&amp; customThemeData) {
    this.storyGenerator.setCustomTheme(customThemeData);
  }

  const storyResponse = await this.storyGenerator.generateStoryAndQuests(projectInfo, theme, this.state.projectPath);
  this.state.title = storyResponse.title;
  this.state.story = typeof storyResponse.story === &#39;string&#39; ? storyResponse.story : storyResponse.story.content;
  this.state.quests = this.mergeQuestFilesFromConfig(storyResponse.quests, this.state.projectPath);
  this.state.quests = this.enforceConfigQuestCount(this.state.quests, this.state.projectPath);

  return this.formatStoryWithQuests({ ...storyResponse, quests: this.state.quests });
}
</code></pre>
<p>This acts like a scribe opening a book of wonder, setting the stage for heroes to embark on their guided quests.</p>
<pre><code class="language-typescript">async exploreQuest(choice: string): Promise&lt;AdventureResult&gt; {
  const sanitizedChoice = this.validateAndSanitizeChoice(choice);

  if (this.isProgressRequest(sanitizedChoice)) {
    return this.getProgress();
  }

  const quest = this.findQuest(sanitizedChoice);
  if (!quest) {
    return this.createNotFoundResult();
  }

  return await this.executeQuest(quest);
}
</code></pre>
<p>Imagine a seer guiding adventurers to the right path based on their choices, even allowing for retries should they wish.</p>
<pre><code class="language-typescript">get progressPercentage(): number {
  return this.quests.length &gt; 0 
    ? Math.round((this.completedQuests.size / this.quests.length) * 100)
    : 0;
}
</code></pre>
<p>Like a magical hourglass, this measures how close the hero is to completing their epic journey.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Remember that the adventure&#39;s structure matters‚Äîeach component building on its predecessor.</li>
<li>Use <code class="inline-code">exploreQuest</code> to revisit completed paths when unsure, leveraging the cache.</li>
<li>Seek to understand how <code class="inline-code">mergeQuestFilesFromConfig</code> influences quest generation.</li>
</ul>
<hr>
<p>The Repository of Quests hums as the Arcane Engine awakens, sharpening your skills as the next master Codemaster. Power awaits your mastery‚Äîforge onward!</p>
<p>Huzzah, valiant seeker! With the Arcane Engine of Legendary Tales now mastered, your journey shines as a beacon of wisdom, propelling you toward the grandeur of realms yet uncovered‚Äîmay your heroic resolve shimmer as bright as the stars in the celestial tapestry! ‚≠ê‚ö°üíé</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-3.html" class="next-quest-btn">Next: Quest 3: The Scrying Eye of Code Analysi... ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>