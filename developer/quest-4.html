<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 4: Master the Configuration Codex - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Repository of Endless Adventures</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="assets/images/github-mark-white.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 4: Master the Configuration Codex</h1>
<hr>
<p>Embark upon Quest 4, where adventurers are tasked with unraveling the secrets of the Configuration Codex! This ancient magical scroll holds the keys to mastering the settings that define your coding world. With wisdom extracted from <code class="inline-code">config.ts</code>, <code class="inline-code">theme.ts</code>, and <code class="inline-code">input-validator.ts</code>, heroes will harmonize the principles of validation, theming, and configuration to craft their perfect development experience. Prepare to delve into constants, interfaces, and functional guardians embedded in these files to ensure your path is well-lit and your code realms balanced.</p>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/core/src/shared/config.ts:</span> Central Configuration System</h3>
<p>This file houses essential constants and environment-dependent settings that underpin the MCP Adventure platform. From timeouts to environment variables like <code class="inline-code">LLM_API_KEY</code>, it consolidates configuration values into a single source of truth. The constants provided in <code class="inline-code">config.ts</code> not only define operational parameters for models, caching, and analysis limits but also act as safeguards against potential misconfigurations. For instance, critical values such as <code class="inline-code">LLM_REQUEST_TIMEOUT</code> ensure that processes avoid indefinite stalls, while directory patterns in <code class="inline-code">IGNORE_PATTERNS</code> uphold efficient scanning practices. By leveraging simple object-based strategies, <code class="inline-code">config.ts</code> ensures a modular, maintainable approach to configuration.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">LLM_REQUEST_TIMEOUT</code>: Prevent overly long completion attempts via explicit timeout settings.</li>
<li><code class="inline-code">REPOMIX_CACHE_TTL</code>: Controls caching durations to optimize performance and memory use.</li>
<li><code class="inline-code">MAX_FILE_SIZE_MB</code>: Establishes file size limits to streamline analysis.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/config.ts</h3>
<pre><code class="language-typescript">export const LLM_REQUEST_TIMEOUT = 60000; // 60 seconds for complex story generation with large prompts
</code></pre>
<p>Like placing a timer on an enchanted spell, this timeout ensures adventures complete within a reasonable duration.</p>
<pre><code class="language-typescript">export const REPOMIX_CACHE_TTL = parseInt(process.env.REPOMIX_CACHE_TTL || &#39;60000&#39;); // 60 seconds, configurable via env
</code></pre>
<p>Think of this as a magical storage box that begins to dissolve if you donâ€™t use its contents within a set duration.</p>
<pre><code class="language-typescript">export const MAX_FILE_SIZE_MB = 10; // Skip files larger than this to avoid memory issues and focus on source code
</code></pre>
<p>This limit acts as a crossing barrier to ensure heroes analyze manageable scrolls without overwhelming their journey.</p>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/theme.ts:</span> Theme Customization Framework</h3>
<p>The <code class="inline-code">theme.ts</code> file acts as the creative heart of the adventure system, providing structured definitions for all themes. With interfaces like <code class="inline-code">ThemeDefinition</code>, themes such as &quot;Space Exploration&quot; or &quot;Ancient Civilization&quot; become fully realized through constants like <code class="inline-code">THEMES</code>. A variety of helper functions ensure seamless theme parsing, retrieval, and validation. For example, <code class="inline-code">getAllThemes()</code> returns a complete list of all active themes, while <code class="inline-code">isValidTheme()</code> verifies that user-provided input aligns with existing themes. The harmonization of predefined keys and dynamic parsing paves the way for interactive and personalized adventures.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">THEMES</code>: Defines core adventures such as &quot;Space Exploration&quot; and &quot;Enchanted Kingdom&quot;.</li>
<li><code class="inline-code">getAllThemes()</code>: Extracts all themes for easy access by the user or system.</li>
<li><code class="inline-code">isValidTheme()</code>: Ensures that only legitimate themes can be selected.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/theme.ts</h3>
<pre><code class="language-typescript">export const THEMES = { 
  SPACE: { id: 1, key: &#39;space&#39;, displayName: &#39;Space Exploration&#39;, emoji: &#39;ðŸš€&#39;, description: &#39;Journey through cosmic codebases...&#39;, keywords: [...] },
  MYTHICAL: {...} 
};
</code></pre>
<p>This constant collection is like an enchanted map detailing all available quests for heroes to choose from.</p>
<pre><code class="language-typescript">export function getAllThemes(): ThemeDefinition[] {
  return THEMES_ARRAY;
}
</code></pre>
<p>This function mirrors a magical index that reveals every adventure template stored in the ancient repository.</p>
<pre><code class="language-typescript">export function isValidTheme(theme: string): theme is AdventureTheme {
  return THEMES_ARRAY.some(t =&gt; t.key === theme);
}
</code></pre>
<p>Acting as a protective rune, this check confirms whether an offered theme truly exists.</p>
<hr>
<h3><span class="header-prefix">packages/core/src/shared/input-validator.ts:</span> User Input Sentinels</h3>
<p>This file ensures that all user-generated inputsâ€”whether for adventure choices, themes, or project pathsâ€”meet strict validation criteria. Functions such as <code class="inline-code">validateAdventureChoice</code> guard against empty or excessively lengthy selections. Similarly, <code class="inline-code">validateTheme</code> validates user-provided themes by cross-referencing them against the <code class="inline-code">THEMES</code> definition from <code class="inline-code">theme.ts</code>. The practical utility of <code class="inline-code">sanitizeForDisplay()</code> underscores the importance of secure, readable outputs. Collectively, <code class="inline-code">input-validator.ts</code> prevents chaos by enforcing clarity and structure upon user input.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">validateAdventureChoice</code>: Validates the user&#39;s selection.</li>
<li><code class="inline-code">validateTheme</code>: Ensures selected themes exist.</li>
<li><code class="inline-code">validateProjectPath</code>: Confirms that paths are usable and free of harmful inputs.</li>
</ul>
<h2>Code</h2>
<h3>packages/core/src/shared/input-validator.ts</h3>
<pre><code class="language-typescript">export function validateAdventureChoice(input: string): string {
  if (!input?.trim()) throw new Error(&#39;Choice is required&#39;);
  if (input.length &gt; 200) throw new Error(&#39;Choice too long (max 200 characters)&#39;);
  return input.trim();
}
</code></pre>
<p>Like a vigilant guard, it prevents adventurers from entering the wrong realm or embarking without a clear purpose.</p>
<pre><code class="language-typescript">export function validateTheme(input: string): string {
  if (!input?.trim()) throw new Error(&#39;Theme is required&#39;);
  const parsedTheme = parseTheme(input.toLowerCase().trim());
  if (!parsedTheme || !isValidTheme(parsedTheme)) {
    throw new Error(`Invalid theme. Valid themes: ${validThemes}`);
  }
  return parsedTheme;
}
</code></pre>
<p>This logic serves as a trustworthy guide, keeping adventurers aligned with the codex&#39;s magical essence.</p>
<pre><code class="language-typescript">export function validateProjectPath(input?: string): string {
  if (!input?.trim()) return process.cwd();
  if (input.length &gt; 500) throw new Error(&#39;Project path too long (max 500 characters)&#39;);
  if (input.includes(&#39;\0&#39;)) throw new Error(&#39;Project path contains invalid characters&#39;);
  return input.trim();
}
</code></pre>
<p>Think of this function as a lit pathway leading explorers to the correct location within their code universe.</p>
<h2>Helpful Hints</h2>
<ul>
<li>Always use constants from <code class="inline-code">config.ts</code> to centralize operational settings and maintain ease of updates.</li>
<li>Leverage the modular functions in <code class="inline-code">theme.ts</code> to simplify theme management across the adventure platform.</li>
<li>Ensure that all user inputs are rigorously validated via the functions in <code class="inline-code">input-validator.ts</code>.</li>
</ul>
<hr>
<p>Youâ€™ve mastered the Configuration Codex, unlocking the secrets to harmonizing settings, themes, and validations. The adventure system stands resilient thanks to your contributions!</p>
<p>Youâ€™ve successfully debugged Quest 4: Master the Configuration Codexâ€”each parameter and environment variable now align flawlessly; keep deploying greatness, âš¡ your coding odyssey is 60% complete! ðŸš€</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-5.html" class="next-quest-btn">Next: Quest 5: Unearth the Foundation â†’</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
</body>
</html>