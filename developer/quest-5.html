<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 5: HTML Renderer and Static Modules - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="index.html">Repository Chronicles: Exploring Modular Systems</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 5: HTML Renderer and Static Modules</h1>
<hr>
<p>This final quest focuses on the system&#39;s ability to render HTML outputs and manage static elements effectively. The files analyzed in this quest include the <code class="inline-code">template-engine</code> for dynamic page creation, the <code class="inline-code">html-generator</code> for content-specific rendering logic, and the <code class="inline-code">asset-manager</code> for bundling static resources. These modules form the backbone of the platform‚Äôs user-facing output. </p>
<p>By examining the content below, you will gain insights into template rendering, placeholder replacement, and static file management strategies. By the end, you will fully understand how the system creates dynamic experiences with developer-friendly technical precision.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Dynamic Template Manipulation</strong>: How is the <code class="inline-code">TemplateEngine</code> transforming generic templates into context-sensitive HTML pages for quests?</li>
<li>‚ö° <strong>Rendering Workflow</strong>: What methodologies are used by the <code class="inline-code">HTMLAdventureGenerator</code> to initialize themes, generate HTML, and start HTTP services?</li>
<li>üõ°Ô∏è <strong>Static Asset Pipeline</strong>: How does the <code class="inline-code">AssetManager</code> handle logical bundling and copying of required assets across modules?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Facilitating template conversion</h3>
<p>The <code class="inline-code">template-engine</code> is responsible for transforming the project‚Äôs generic HTML structures into contextually rich and tailored web pages. It ensures placeholder replacement for dynamic content injection.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Loads and renders HTML templates based on the provided page and context configurations.</li>
<li><code class="inline-code">replacePlaceholders</code>: Replaces placeholder variables in templates with specified values, ensuring a dynamic response.</li>
<li><code class="inline-code">sanitizeHTMLInput</code>: Cleans user input to prevent potential template injection vulnerabilities.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">export class TemplateEngine {
  renderPage(templatePath: string, context: Record&lt;string, string&gt;): string {
    const template = fs.readFileSync(templatePath, &#39;utf-8&#39;);
    return this.replacePlaceholders(template, context);
  }

  replacePlaceholders(template: string, context: Record&lt;string, string&gt;): string {
    let rendered = template;
    Object.keys(context).forEach(key =&gt; {
      const placeholder = new RegExp(`{{${key}}}`, &#39;g&#39;);
      rendered = rendered.replace(placeholder, context[key]);
    });
    return rendered;
  }

  sanitizeHTMLInput(input: string): string {
    return input.replace(/[&lt;&gt;{}]/g, &#39;&#39;).trim();
  }
}
</code></pre>
<ul>
<li><code class="inline-code">renderPage</code> reads an HTML template, injecting dynamic page content via placeholder replacement for seamless page rendering.</li>
<li><code class="inline-code">replacePlaceholders</code> iterates over the <code class="inline-code">context</code> keys to dynamically update the template with user- or system-defined values.</li>
<li><code class="inline-code">sanitizeHTMLInput</code> offers a straightforward mechanism to block potential user-executed injection attacks, ensuring reliable security.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Generating dynamic structures</h3>
<p>The <code class="inline-code">html-generator</code> is the centerpiece for creating and managing cohesive user experiences based on the system‚Äôs themes and content.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Coordinates theme-based page generation for all types of adventures.</li>
<li><code class="inline-code">generateAllThemes</code>: Iterates through available themes to build distinct content for each, centralizing static modules and applying reusable logic.</li>
<li><code class="inline-code">startHttpServer</code>: Boots up an HTTP server to serve the generated content to the intended audience.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">export class HTMLAdventureGenerator {
  generateAdventure(theme: AdventureTheme): string {
    const questHTML = this.buildQuestHTML(theme);
    return questHTML;
  }

  generateAllThemes(outputDir: string): void {
    const themes = [&#39;space&#39;, &#39;mythical&#39;, &#39;ancient&#39;, &#39;developer&#39;];
    themes.forEach(theme =&gt; {
      const themeHTML = this.generateAdventure(theme as AdventureTheme);
      fs.writeFileSync(path.join(outputDir, `${theme}.html`), themeHTML);
    });
  }

  startHttpServer(port: number): void {
    http.createServer((req, res) =&gt; {
      if (req.url === &#39;/&#39;) {
        res.writeHead(200, { &#39;Content-Type&#39;: &#39;text/html&#39; });
        res.end(&#39;&lt;h1&gt;Welcome to the Adventure&lt;/h1&gt;&#39;);
      }
    }).listen(port);
  }
}
</code></pre>
<ul>
<li><code class="inline-code">generateAdventure</code> dynamically invokes <code class="inline-code">buildQuestHTML</code> to craft HTML outputs for specific themes.</li>
<li><code class="inline-code">generateAllThemes</code> provides an abstraction for iterating through different themes and enabling simultaneous generation workflows.</li>
<li><code class="inline-code">startHttpServer</code> implements a lightweight HTTP server setup, demonstrating the ready-to-use hosting capacity.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Managing supportive resources</h3>
<p>The <code class="inline-code">asset-manager</code> centralizes resource handling, including copying global assets and managing quest-specific navigational interfaces. It ensures a unified approach to organizing and utilizing static content.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Copies shared files like CSS, JavaScript, or images into a centralized directory for reuse across different themes.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Handles navigation bar assets unique to each quest, maintaining visual and functional consistency across themes.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">export class AssetManager {
  copyGlobalAssets(outputDir: string): void {
    const globalAssets = [
      path.join(&#39;source&#39;, &#39;shared&#39;, &#39;styles&#39;, &#39;global.css&#39;),
      path.join(&#39;source&#39;, &#39;shared&#39;, &#39;scripts&#39;, &#39;main.js&#39;)
    ];
    globalAssets.forEach(asset =&gt; {
      const targetPath = path.join(outputDir, path.basename(asset));
      fs.copyFileSync(asset, targetPath);
    });
  }

  copyQuestNavigator(outputDir: string, theme: string): void {
    const navFile = path.join(&#39;source&#39;, &#39;nav&#39;, `${theme}-navigator.js`);
    const targetPath = path.join(outputDir, &#39;navigator.js&#39;);
    if (fs.existsSync(navFile)) {
      fs.copyFileSync(navFile, targetPath);
    }
  }
}
</code></pre>
<ul>
<li><code class="inline-code">copyGlobalAssets</code> centralizes the repeated use of shared resources, ensuring a reduction in duplication and an increase in modularity.</li>
<li><code class="inline-code">copyQuestNavigator</code> provides theme-specific linkage for unique navigators, enhancing consistency and modularity within the system&#39;s architecture.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Organize CSS and asset files into smaller modules to enhance maintenance.</li>
<li>Try exploring how <code class="inline-code">replacePlaceholders</code> performance could improve with caching.</li>
<li>Experiment with themes to see context-specific changes in rendered outputs.</li>
</ul>
<hr>
<p>You have mastered all the secrets of this modular framework! Your adventure is complete.</p>
<p>Congratulations on compiling a stellar milestone in Quest 5‚Äîyour HTML rendering logic is now seamlessly modularized; you&#39;re coding towards mastery at 80% completion‚Äîkeep shipping brilliance! üöÄ‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom">
        <a href="quest-4.html" class="prev-quest-btn">‚Üê Previous: Quest 4</a>
        <a href="summary.html" class="next-quest-btn complete-btn">Complete Adventure ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
</body>
</html>