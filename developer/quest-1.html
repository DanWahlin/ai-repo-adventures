<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 1: HTML Generator & Static Site Pipeline - Repo Adventure</title>
    <link rel="stylesheet" href="assets/theme.css">
    <link rel="stylesheet" href="../assets/shared/quest-navigator.css">
    <link rel="stylesheet" href="../assets/theme-toggle.css">
    <!-- Prism.js for syntax highlighting -->
    <!-- Using minimal theme since we override all styles with our custom theme -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        // Configure Prism autoloader for syntax highlighting
        if (window.Prism && window.Prism.plugins && window.Prism.plugins.autoloader) {
            window.Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
        }
        
        // Trigger Prism highlighting after page load
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        });
    </script>
</head>
<body class="theme-developer">

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <a href="https://github.com/danwahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="github-link">
                    <img src="../assets/shared/github-mark.svg" alt="GitHub" width="24" height="24">
                </a>
                <a href="index.html">The Architect's Blueprint: A Modular Adventure into Repository Design</a>
            </div>
            <div class="nav-middle">
            </div>
            <div class="nav-right">
                <a href="../index.html" class="nav-link">Change Theme</a>
                <a href="#" class="nav-link quest-map-trigger">Quests</a>
                <button class="theme-toggle-btn" aria-label="Switch to light mode" type="button">
                    <div class="theme-toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="4" fill="currentColor"/>
                            <path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="quest-content">
    <h1>Quest 1: HTML Generator &amp; Static Site Pipeline</h1>
<hr>
<p>This quest explores the powerful <code class="inline-code">HTMLAdventureGenerator</code> and its supporting utilities like <code class="inline-code">TemplateEngine</code> and <code class="inline-code">AssetManager</code>. Together, these modules transform structured codebases into captivating static HTML adventures. You&#39;ll delve into the code&#39;s organizational flow, learn how templates are rendered dynamically, and unveil how assets such as images and global stylesheets are efficiently handled. Follow the architectural patterns and techniques driving the seamless static site generation pipeline.</p>
<h2>Quest Objectives</h2>
<p>As you explore the code below, investigate these key questions:</p>
<ul>
<li>üîç <strong>Template Rendering Mechanics</strong>: How does the <code class="inline-code">TemplateEngine</code> use caching and placeholder replacement to render pages efficiently?</li>
<li>‚ö° <strong>Pipeline Responsibilities</strong>: Which responsibilities is <code class="inline-code">HTMLAdventureGenerator.generateAdventure()</code> dividing into smaller focused operations?</li>
<li>üõ°Ô∏è <strong>Asset Management Safety</strong>: How does <code class="inline-code">AssetManager</code> ensure critical shared assets are copied securely during the process?</li>
</ul>
<h2>File Exploration</h2>
<h3><span class="header-prefix">packages/generator/src/cli/html-generator.ts:</span> Core static site generator</h3>
<p>The <code class="inline-code">HTMLAdventureGenerator</code> class is the heart of the HTML generation pipeline. It orchestrates the entire process, from reading templates to generating quest pages. Notable functions include <code class="inline-code">generateAdventure</code>, which serves as the main driver for content creation, and <code class="inline-code">buildQuestHTML</code>, which dynamically creates HTML pages for each quest. </p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">generateAdventure</code>: Breaks down the static site generation process into steps like analyzing repository content, generating pages, and handling assets.</li>
<li><code class="inline-code">generateAllThemes</code>: Allows simultaneous generation of multiple themed sites by parallelizing the generation process.</li>
<li><code class="inline-code">startHttpServer</code>: Provides an optional HTTP server for interactive exploration of generated content.</li>
<li><code class="inline-code">buildQuestHTML</code>: Brings individual quests to life by combining their content with placeholders and navigation elements.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/template-engine.ts:</span> Template rendering logic</h3>
<p>The <code class="inline-code">TemplateEngine</code> class handles rendering both full pages and fragments by replacing placeholders in static templates with dynamic content. It employs file caching to reduce redundant IO operations and ensure efficient rendering.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">renderPage</code>: Combines base and content templates with dynamic variables to produce a cohesive HTML page.</li>
<li><code class="inline-code">replacePlaceholders</code>: Replaces placeholders in templates (<code class="inline-code">{{key}}</code>) with their corresponding values.</li>
<li><code class="inline-code">loadTemplate</code>: Reads template files, caching them in memory to optimize future requests.</li>
</ul>
<hr>
<h3><span class="header-prefix">packages/generator/src/cli/asset-manager.ts:</span> Asset handling utility</h3>
<p>The <code class="inline-code">AssetManager</code> class supports the generator by copying and organizing assets like images and shared templates across different output directories. It ensures both theme-specific and global assets are available where needed.</p>
<h4>Highlights</h4>
<ul>
<li><code class="inline-code">copyGlobalAssets</code>: Centralizes shared assets like GitHub icons and the adventure header, copying them securely to the root output directory.</li>
<li><code class="inline-code">copyQuestNavigator</code>: Copies essential CSS and JS files for quest navigation into the output directory.</li>
<li><code class="inline-code">copyImages</code>: Handles transferring thematically-relevant images and other assets from source to destination paths.</li>
</ul>
<h2>Code</h2>
<h3>packages/generator/src/cli/html-generator.ts</h3>
<pre><code class="language-typescript">async generateAdventure(): Promise&lt;void&gt; {
  console.log(chalk.yellow.bold(&#39;üöÄ Generating Adventure...&#39;));

  console.log(chalk.dim(&#39;üìä Analyzing codebase...&#39;));
  const repomixContent = await repoAnalyzer.generateRepomixContext(this.projectPath);
  const projectInfo = createProjectInfo(repomixContent);

  console.log(chalk.dim(&#39;‚ú® Generating themed story and quests...&#39;));
  const storyContent = await this.adventureManager.initializeAdventure(
    projectInfo, 
    this.selectedTheme, 
    this.projectPath,
    this.customThemeData
  );

  console.log(chalk.dim(&#39;üñºÔ∏è Copying images...&#39;));
  this.copyImages();

  console.log(chalk.dim(&#39;üìù Creating main adventure page...&#39;));
  this.generateIndexHTML();

  console.log(chalk.dim(&#39;üìñ Generating quest pages...&#39;));
  await this.generateQuestPages();
}
</code></pre>
<ul>
<li>This method organizes the major responsibilities of adventure generation into steps, ensuring modularity.</li>
<li>Calls to helper methods like <code class="inline-code">copyImages</code> and <code class="inline-code">generateQuestPages</code> keep the process clean and manageable.</li>
<li>Asynchronous calls ensure non-blocking operations, enhancing performance.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/template-engine.ts</h3>
<pre><code class="language-typescript">renderPage(contentTemplate: string, variables: TemplateVariables): string {
  const baseTemplate = this.loadTemplate(&#39;base-template.html&#39;);
  const contentHtml = this.loadTemplate(contentTemplate);

  const renderedContent = this.replacePlaceholders(contentHtml, variables);

  const pageVariables = {
    ...variables,
    CONTENT: renderedContent
  };

  return this.replacePlaceholders(baseTemplate, pageVariables);
}
</code></pre>
<ul>
<li>Builds cohesive HTML pages by combining placeholders with actual dynamic content.</li>
<li>The <code class="inline-code">loadTemplate</code> method ensures reusability and prevents repeated disk reads.</li>
<li>Nested rendering ensures the base structure integrates well with dynamic content templates.</li>
</ul>
<hr>
<h3>packages/generator/src/cli/asset-manager.ts</h3>
<pre><code class="language-typescript">copyGlobalAssets(outputDir: string): void {
  const globalAssetsDir = path.join(outputDir, &#39;assets&#39;, &#39;shared&#39;);
  fs.mkdirSync(globalAssetsDir, { recursive: true });

  const globalImages = [&#39;github-mark.svg&#39;, &#39;github-mark-white.svg&#39;];
  globalImages.forEach(file =&gt; {
    const sourcePath = path.join(this.sourceDir, &#39;assets&#39;, &#39;shared&#39;, file);
    if (fs.existsSync(sourcePath)) {
      const targetPath = path.join(globalAssetsDir, file);
      fs.copyFileSync(sourcePath, targetPath);
    }
  });

  console.log(chalk.green(&#39;‚úÖ Global assets copied&#39;));
}
</code></pre>
<ul>
<li>Ensures critical global assets like icons are always available for the generated site.</li>
<li>Leverages safe file management practices by checking existence and ensuring directories are created.</li>
<li>Provides clear success feedback, aiding debugging and user confidence.</li>
</ul>
<hr>
<h2>Helpful Hints</h2>
<ul>
<li>Use <code class="inline-code">replacePlaceholders</code> as a starting point for understanding template rendering patterns.</li>
<li>Investigate <code class="inline-code">generateAdventure</code> for insight into the modular organization of tasks in the pipeline.</li>
<li>Compare <code class="inline-code">copyImages</code> and <code class="inline-code">copyGlobalAssets</code> to understand how this system distinguishes between thematic and shared assets.</li>
</ul>
<hr>
<p>Excellent work! Continue to the next quest to uncover more mysteries.</p>
<p>Congratulations on deploying your first fully functional HTML Generator and Static Site Pipeline‚Äîyour codebase now echoes with the triumphant clang of clean, reusable components and streamlined build automation! üöÄüíé‚ö°</p>

</div>


      <div class="quest-navigation quest-navigation-bottom nav-next-only">
        <a href="quest-2.html" class="next-quest-btn">Next: Quest 2 ‚Üí</a>
      </div>
    
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <span>Created using <a href="https://github.com/DanWahlin/ai-repo-adventures" target="_blank" rel="noopener noreferrer" class="repo-link">AI Repo Adventures</a></span>
        </div>
    </footer>
    
    <!-- Quest Navigator Script (for navbar Quests button functionality) -->
    <script src="../assets/shared/quest-navigator.js"></script>
    <!-- Theme Toggle Script (for light/dark mode toggle) -->
    <script src="../assets/theme-toggle.js"></script>
</body>
</html>